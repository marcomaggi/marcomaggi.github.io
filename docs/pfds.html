<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This document describes version 0.4d1 of PFDS, a
set of purely functional data structures written in R6RS Scheme and
ported under the Vicare Scheme packaging infrastructure.

The original package is distributed under the terms of a liberal license
and can be downloaded from:

http://github.com/ijp/pfds

a repackaging under the GNU Autotools, with verified support for
Vicare Scheme and providing this documentation is at:

http://github.com/marcomaggi/pfds

and as backup at:

https://bitbucket.org/marcomaggi/pfds

Copyright (C) 2011, 2012 by Ian Price ianprice90@googlemail.com

Edited by Marco Maggi marco.maggi-ipsu@poste.it

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

1. Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

3. The name of the author may not be used to endorse or promote products
derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR "AS IS" AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE. -->
<!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Purely Functional Data Structures in Scheme</title>

<meta name="description" content="Purely Functional Data Structures in Scheme">
<meta name="keywords" content="Purely Functional Data Structures in Scheme">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="Top">
<link href="#concept-index" rel="index" title="concept index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="dir.html#Top" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Purely Functional Data Structures in Scheme</h1>

































































































































<a name="Top"></a>
<div class="header">
<p>
Next: <a href="#overview" accesskey="n" rel="next">overview</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Purely-Functional-Data-Structures-in-Scheme"></a>
<h1 class="top">Purely Functional Data Structures in Scheme</h1>

<p>This document describes version 0.4d1 of PFDS, a
set of purely functional data structures written in <acronym>R6RS</acronym> Scheme and
ported under the Vicare Scheme packaging infrastructure.
</p>
<p>The original package is distributed under the terms of a liberal license
and can be downloaded from:
</p>
<div align="center"><a href="http://github.com/ijp/pfds">http://github.com/ijp/pfds</a>
</div>
<p>a repackaging under the <acronym>GNU</acronym> Autotools, with verified support for
Vicare Scheme and providing this documentation is at:
</p>
<div align="center"><a href="http://github.com/marcomaggi/pfds">http://github.com/marcomaggi/pfds</a>
</div>
<p>and as backup at:
</p>
<div align="center"><a href="https://bitbucket.org/marcomaggi/pfds">https://bitbucket.org/marcomaggi/pfds</a>
</div>
<p>Copyright &copy; 2011, 2012 by Ian Price <a href="mailto:ianprice90@googlemail.com">ianprice90@googlemail.com</a><br>
Edited by Marco Maggi <a href="mailto:marco.maggi-ipsu@poste.it">marco.maggi-ipsu@poste.it</a>
</p>
<blockquote>
<p>All rights reserved.
</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:
</p>
<ol>
<li> Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.

</li><li> Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

</li><li> The name of the author may not be used to endorse or promote products
derived from this software without specific prior written permission.
</li></ol>

<p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR &ldquo;AS IS&rdquo; AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.
</p></blockquote>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#overview" accesskey="1">overview</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Overview of the package.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#dlists" accesskey="2">dlists</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Difference Lists.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#queues" accesskey="3">queues</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Purely functional queues.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#deques" accesskey="4">deques</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Double queues.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#psqs" accesskey="5">psqs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Priority search queues.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#fingertrees" accesskey="6">fingertrees</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A simple general-purpose data structure.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#sequences" accesskey="7">sequences</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Purely functional sequences.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#heaps" accesskey="8">heaps</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Heaps.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees" accesskey="9">bbtrees</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Bounded Balance trees.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#sets">sets</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Purely functional sets.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Appendices

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Package-License">Package License</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Package license.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#References">References</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Bibliography and references.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Indexes

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#concept-index">concept index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An entry for each concept.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#function-index">function index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An entry for each function.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#variable-index">variable index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An entry for each variable.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#type-index">type index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">An entry for each type.
</td></tr>
</table>

<hr>
<a name="overview"></a>
<div class="header">
<p>
Next: <a href="#dlists" accesskey="n" rel="next">dlists</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Overview-of-the-package"></a>
<h2 class="chapter">1 Overview of the package</h2>


<p>This document describes version 0.4d1 of PFDS, a
set of purely functional data structures written in <acronym>R6RS</acronym> Scheme.
</p>
<p>The package requires at least Vicare Scheme
0.4.
</p>
<p>The package provides libraries for the following data structures:
</p>
<dl compact="compact">
<dt><strong>bbtrees</strong></dt>
<dt><strong>deques</strong></dt>
<dt><strong>dlists</strong></dt>
<dt><strong>finger trees</strong></dt>
<dt><strong>heaps</strong></dt>
<dt><strong>priority search queues (psqs)</strong></dt>
<dt><strong>queues</strong></dt>
<dt><strong>sequences</strong></dt>
<dt><strong>sets</strong></dt>
</dl>

<hr>
<a name="dlists"></a>
<div class="header">
<p>
Next: <a href="#queues" accesskey="n" rel="next">queues</a>, Previous: <a href="#overview" accesskey="p" rel="prev">overview</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Difference-Lists"></a>
<h2 class="chapter">2 Difference Lists</h2>


<a name="index-Library-_0028pfds-dlists_0029"></a>
<a name="index-_0028pfds-dlists_0029_002c-library"></a>


<p>Repeatedly appending to a list is a common, if inefficient pattern in
functional programs.  Usually the trick we use is to build up the list
in reverse, and then to reverse it as the last action of a function.
Dlists are a representation of lists as functions that provide for
constant time append to either the front or end of a dlist that may be
used instead.
</p>
<p>The following bindings are exported by the library <code>(pfds
dlists)</code>.
</p>

<dl>
<dt><a name="index-dlist"></a>Function: <strong>dlist</strong> <em><var>obj</var> &hellip;</em></dt>
<dd><p>Return a dlist containing all the given arguments.
</p></dd></dl>


<dl>
<dt><a name="index-dlist_003f"></a>Function: <strong>dlist?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a dlist, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-dlist_002dcons"></a>Function: <strong>dlist-cons</strong> <em><var>item</var> <var>dlist</var></em></dt>
<dd><p>Return a new dlist created by prepending <var>item</var> to the head of
<var>dlist</var>.
</p></dd></dl>


<dl>
<dt><a name="index-dlist_002dsnoc"></a>Function: <strong>dlist-snoc</strong> <em><var>dlist</var> <var>item</var></em></dt>
<dd><p>Return a new dlist created by appending <var>item</var> to the tail of
<var>dlist</var>.
</p></dd></dl>


<dl>
<dt><a name="index-dlist_002dappend"></a>Function: <strong>dlist-append</strong> <em><var>dlist1</var> <var>dlist2</var></em></dt>
<dd><p>Return a new dlist consisting of all the elements of <var>dlist1</var>,
followed by all the items of <var>dlist2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-dlist_002d_003elist"></a>Function: <strong>dlist-&gt;list</strong> <em><var>dlist</var></em></dt>
<dd><p>Return a list consisting of all the elements of the <var>dlist</var>.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003edlist"></a>Function: <strong>list-&gt;dlist</strong> <em><var>list-of-items</var></em></dt>
<dd><p>Return a dlist consisting of all the elements of the given list
argument.
</p></dd></dl>

<hr>
<a name="queues"></a>
<div class="header">
<p>
Next: <a href="#deques" accesskey="n" rel="next">deques</a>, Previous: <a href="#dlists" accesskey="p" rel="prev">dlists</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Purely-functional-queues"></a>
<h2 class="chapter">3 Purely functional queues</h2>


<a name="index-Library-_0028pfds-queues_0029"></a>
<a name="index-_0028pfds-queues_0029_002c-library"></a>


<p>The following bindings are exported by the library <code>(pfds queues)</code>.
</p>

<dl>
<dt><a name="index-make_002dqueue"></a>Function: <strong>make-queue</strong></dt>
<dd><p>Return a queue containing no items.
</p></dd></dl>


<dl>
<dt><a name="index-queue_003f"></a>Function: <strong>queue?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a queue, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-queue_002dlength"></a>Function: <strong>queue-length</strong> <em><var>queue</var></em></dt>
<dd><p>Return a non&ndash;negative integer representing the number of items in
<var>queue</var>.
</p></dd></dl>


<dl>
<dt><a name="index-queue_002dempty_003f"></a>Function: <strong>queue-empty?</strong> <em><var>queue</var></em></dt>
<dd><p>Return <code>#t</code> if there are no items in <var>queue</var>, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-enqueue"></a>Function: <strong>enqueue</strong> <em><var>queue</var> <var>item</var></em></dt>
<dd><p>Return a new queue with the enqueued <var>item</var> at the end.
</p></dd></dl>


<dl>
<dt><a name="index-dequeue"></a>Function: <strong>dequeue</strong> <em><var>queue</var></em></dt>
<dd><p>Return 2 values: the item at the front of <var>queue</var>, and a new queue
containing the all the other items.  Raise a <code>&amp;queue-empty</code>
condition if <var>queue</var> is empty.
</p></dd></dl>


<dl>
<dt><a name="index-queue_002dempty_002dcondition_003f"></a>Function: <strong>queue-empty-condition?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;queue-empty</code> condition
object, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-queue_002d_003elist"></a>Function: <strong>queue-&gt;list</strong> <em><var>queue</var></em></dt>
<dd><p>Return a list containing all the items in <var>queue</var>.  The order of the
item in the list is the same as the order of the elements in the queue.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003equeue"></a>Function: <strong>list-&gt;queue</strong> <em><var>list-of-items</var></em></dt>
<dd><p>Return a queue containing all the items in the given list.  The order of
the items in the queue is the same as the order in the list.
</p></dd></dl>

<hr>
<a name="deques"></a>
<div class="header">
<p>
Next: <a href="#psqs" accesskey="n" rel="next">psqs</a>, Previous: <a href="#queues" accesskey="p" rel="prev">queues</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Double-queues"></a>
<h2 class="chapter">4 Double queues</h2>


<a name="index-Library-_0028pfds-deques_0029"></a>
<a name="index-_0028pfds-deques_0029_002c-library"></a>


<p>The following bindings are exported by the library <code>(pfds
deques)</code>.
</p>

<dl>
<dt><a name="index-make_002ddeque"></a>Function: <strong>make-deque</strong></dt>
<dd><p>Return a deque containing to items.
</p></dd></dl>


<dl>
<dt><a name="index-deque_003f"></a>Function: <strong>deque?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a deque, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-deque_002dlength"></a>Function: <strong>deque-length</strong> <em><var>deque</var></em></dt>
<dd><p>Return a non&ndash;negative integer representing the number of items in
<var>deque</var>.
</p></dd></dl>


<dl>
<dt><a name="index-deque_002dempty_003f"></a>Function: <strong>deque-empty?</strong> <em><var>deque</var></em></dt>
<dd><p>Return <code>#t</code> if there are no items in <var>deque</var>, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-enqueue_002dfront"></a>Function: <strong>enqueue-front</strong> <em><var>deque</var> <var>item</var></em></dt>
<dd><p>Return a new deque with the <var>item</var> inserted at the front.
</p></dd></dl>


<dl>
<dt><a name="index-enqueue_002drear"></a>Function: <strong>enqueue-rear</strong> <em><var>deque</var> <var>item</var></em></dt>
<dd><p>Return a new deque with the <var>item</var> inserted at the rear.
</p></dd></dl>


<dl>
<dt><a name="index-dequeue_002dfront"></a>Function: <strong>dequeue-front</strong> <em><var>deque</var></em></dt>
<dd><p>Return two values: the item at the front of <var>deque</var>, and a new deque
containing all the other items.  Raise a <code>&amp;deque-empty</code>
condition if <var>deque</var> is empty.
</p></dd></dl>


<dl>
<dt><a name="index-dequeue_002drear"></a>Function: <strong>dequeue-rear</strong> <em><var>deque</var></em></dt>
<dd><p>Return two values: the item at the rear of the deque, and a new deque
containing all the other items.  Raise a <code>&amp;deque-empty</code>
condition if <var>deque</var> is empty.
</p></dd></dl>


<dl>
<dt><a name="index-deque_002dempty_002dcondition_003f"></a>Function: <strong>deque-empty-condition?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;deque-empty</code> condition,
<code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-deque_002d_003elist"></a>Function: <strong>deque-&gt;list</strong> <em><var>deque</var></em></dt>
<dd><p>Return a list containing all the elements of <var>deque</var>.  The order of
the elements in the list is the same as the order they would be dequeued
from the front of the deque.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003edeque"></a>Function: <strong>list-&gt;deque</strong> <em><var>list-of-items</var></em></dt>
<dd><p>Return a deque containing all of the elements in the list argument.  The
order of the elements in the deque is the same as the order of the
elements in the list.
</p></dd></dl>

<hr>
<a name="psqs"></a>
<div class="header">
<p>
Next: <a href="#fingertrees" accesskey="n" rel="next">fingertrees</a>, Previous: <a href="#deques" accesskey="p" rel="prev">deques</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Priority-search-queues"></a>
<h2 class="chapter">5 Priority search queues</h2>


<a name="index-Library-_0028pfds-psqs_0029"></a>
<a name="index-_0028pfds-psqs_0029_002c-library"></a>


<p>Priority search queues are a combination of two common abstract data
types: finite maps, and priority queues.  As such, it provides for
access, insertion, removal and update on arbitrary keys, as well as for
easy removal of the element with the lowest priority.
</p>
<p>Where a procedure takes a key or priority these are expected to be
compatible with the relevant ordering procedures on the psq.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#psqs-basic" accesskey="1">psqs basic</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Basic operations.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#psqs-map" accesskey="2">psqs map</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Finite map operations.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#psqs-priority" accesskey="3">psqs priority</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Priority queue operations.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#psqs-ranged" accesskey="4">psqs ranged</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Ranged query functions.
</td></tr>
</table>

<hr>
<a name="psqs-basic"></a>
<div class="header">
<p>
Next: <a href="#psqs-map" accesskey="n" rel="next">psqs map</a>, Up: <a href="#psqs" accesskey="u" rel="up">psqs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Basic-operations"></a>
<h3 class="section">5.1 Basic operations</h3>


<p>The following bindings are exported by the library <code>(pfds psqs)</code>.
</p>

<dl>
<dt><a name="index-make_002dpsq"></a>Function: <strong>make-psq</strong> <em><var>key&lt;</var> <var>priority&lt;</var></em></dt>
<dd><p>Take two ordering procedures: one for keys, and another for priorities,
and return an empty priority search queue.
</p></dd></dl>


<dl>
<dt><a name="index-psq_003f"></a>Function: <strong>psq?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a priority search queue, <code>#f</code>
otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dempty_003f"></a>Function: <strong>psq-empty?</strong> <em><var>psq</var></em></dt>
<dd><p>Return <code>#t</code> if the priority search queue contains no elements,
<code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dsize"></a>Function: <strong>psq-size</strong> <em><var>psq</var></em></dt>
<dd><p>Return a non&ndash;negative integer represeting the number of associations in
the priority search queue.
</p></dd></dl>

<hr>
<a name="psqs-map"></a>
<div class="header">
<p>
Next: <a href="#psqs-priority" accesskey="n" rel="next">psqs priority</a>, Previous: <a href="#psqs-basic" accesskey="p" rel="prev">psqs basic</a>, Up: <a href="#psqs" accesskey="u" rel="up">psqs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Finite-map-operations"></a>
<h3 class="section">5.2 Finite map operations</h3>


<p>The following bindings are exported by the library <code>(pfds psqs)</code>.
</p>

<dl>
<dt><a name="index-psq_002dref"></a>Function: <strong>psq-ref</strong> <em><var>psq</var> <var>key</var></em></dt>
<dd><p>Return the priority of <var>key</var> if it is in <var>psq</var>.  If <var>key</var> is
not in <var>psq</var> an assertion violation is raised.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dset"></a>Function: <strong>psq-set</strong> <em><var>psq</var> <var>key</var> <var>priority</var></em></dt>
<dd><p>Return the priority search queue obtained from inserting <var>key</var> with
a given <var>priority</var>.  If <var>key</var> is already in the priority search
queue, it updates the priority to the new value.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dupdate"></a>Function: <strong>psq-update</strong> <em><var>psq</var> <var>key</var> <var>priority-update</var> <var>priority</var></em></dt>
<dd><p>Return the priority search queue obtained by modifying the priority of
<var>key</var>, by the given function <var>priority-update</var>.  If <var>key</var> is
not in <var>psq</var>: it is inserted with the priority obtained by calling
the function <var>update</var> on the default value <var>priority-update</var>.
</p>
<p><var>priority-update</var> must be a procedure accepting a priority value as
single argument and returning a priority value as single value.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002ddelete"></a>Function: <strong>psq-delete</strong> <em><var>psq</var> <var>key</var></em></dt>
<dd><p>Return the priority search queue obtained by removing the
<var>key</var>/priority association from the <var>psq</var>.  If <var>key</var> is not
in the queue: the returned search queue will be the same as the
original.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dcontains_003f"></a>Function: <strong>psq-contains?</strong> <em><var>psq</var> <var>key</var></em></dt>
<dd><p>Return <code>#t</code> if there is an association for the given <var>key</var> in
<var>psq</var>, <code>#f</code> otherwise.
</p></dd></dl>

<hr>
<a name="psqs-priority"></a>
<div class="header">
<p>
Next: <a href="#psqs-ranged" accesskey="n" rel="next">psqs ranged</a>, Previous: <a href="#psqs-map" accesskey="p" rel="prev">psqs map</a>, Up: <a href="#psqs" accesskey="u" rel="up">psqs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Priority-queue-operations"></a>
<h3 class="section">5.3 Priority queue operations</h3>


<p>The following bindings are exported by the library <code>(pfds psqs)</code>.
</p>

<dl>
<dt><a name="index-psq_002dmin"></a>Function: <strong>psq-min</strong> <em><var>psq</var></em></dt>
<dd><p>Return the key of the minimum association in <var>psq</var>.  If the queue is
empty: an assertion violation is raised.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002ddelete_002dmin"></a>Function: <strong>psq-delete-min</strong> <em>: psq -&gt; psq</em></dt>
<dd><p>Return the priority search queue obtained by removing the minimum
association in <var>psq</var>.  If the queue is empty: an assertion violation
is raised.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dpop"></a>Function: <strong>psq-pop</strong> <em><var>psq</var></em></dt>
<dd><p>Return 2 values: the minimum key and the priority search queue obtained
by removing the minimum association from <var>psq</var>.  If the queue is
empty: an assertion violation is raised.
</p></dd></dl>

<hr>
<a name="psqs-ranged"></a>
<div class="header">
<p>
Previous: <a href="#psqs-priority" accesskey="p" rel="prev">psqs priority</a>, Up: <a href="#psqs" accesskey="u" rel="up">psqs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Ranged-query-functions"></a>
<h3 class="section">5.4 Ranged query functions</h3>


<p>The following bindings are exported by the library <code>(pfds psqs)</code>.
</p>

<dl>
<dt><a name="index-psq_002dat_002dmost"></a>Function: <strong>psq-at-most</strong> <em><var>psq</var> <var>priority</var></em></dt>
<dd><p>Return an alist containing all the associations in <var>psq</var> with
priority less than, or equal to, the given <var>priority</var>.  The returned
alist is ordered by key according to the predicate for <var>psq</var>.
</p></dd></dl>


<dl>
<dt><a name="index-psq_002dat_002dmost_002drange"></a>Function: <strong>psq-at-most-range</strong> <em><var>psq</var> <var>priority</var> <var>min-key</var> <var>max-key</var></em></dt>
<dd><p>Similar to <code>psq-at-most</code>, but it also takes an upper and lower
bound, for the keys it will return.  These bounds are inclusive.
</p></dd></dl>

<hr>
<a name="fingertrees"></a>
<div class="header">
<p>
Next: <a href="#sequences" accesskey="n" rel="next">sequences</a>, Previous: <a href="#psqs" accesskey="p" rel="prev">psqs</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="A-simple-general_002d_002dpurpose-data-structure"></a>
<h2 class="chapter">6 A simple general&ndash;purpose data structure</h2>


<a name="index-Library-_0028pfds-fingertrees_0029"></a>
<a name="index-_0028pfds-fingertrees_0029_002c-library"></a>


<p>Fingertrees are a generalised form of deque, that we can parametrise to
compute a value, called the &ldquo;measure&rdquo; of a fingertree.  This measure
will be updated incrementally as we add and remove elements from the
fingertree.  Among other things, this allows fingertrees to be used
where you otherwise might have written a custom data structure.
</p>
<p>To compute the measure, fingertrees require pieces of information: a
converter, a combiner, and an identity.
</p>
<ul>
<li> The <em>converter</em> is a procedure of one argument, that maps values in
the fingertree to other values which are used for computing the measure.

</li><li> The <em>combiner</em> is a procedure of two arguments, and combines these
into one value representing them both.  A combiner must be associative
i.e.

<div class="example">
<pre class="example">(combine A (combine B C)) &equiv; (combine (combine A B) C)
</pre></div>

<p>for all values <code>A</code>, <code>B</code> and <code>C</code>.
</p>
</li><li> An <em>identity</em> is a value that represents the measure of an empty
fingertree.  It must obey the rule that <code>(combine X identity)</code>,
<code>(combine identity X)</code> and <code>X</code> are always the same.
</li></ul>

<p>To make things more concrete, a simple use of a fingertree is as a deque
that keeps a running total.  In this case, the converter can simply be
the function <code>(lambda (x) x)</code> if it is a deque of integers, the combiner
would be <code>+</code>, and the identity <code>0</code>.
</p>
<div class="example">
<pre class="example">(define l '(3 1 4 1 5 9))

(define ft (list-&gt;fingertree l 0 + (lambda (x) x)))

(fingertree-measure ft)
&rArr; 23

(fingertree-measure (fingertree-snoc ft 2))
&rArr; 25

(let-values (((head tail) (fingertree-uncons ft)))
  (fingertree-measure tail))
&rArr; 20
</pre></div>

<p>Mathematically speaking, the <strong>return type</strong> of the converter, the
combiner and the identity element are expected to form a monoid.
</p>
<p>The following bindings are exported by the library <code>(pfds
fingertrees)</code>.
</p>

<dl>
<dt><a name="index-make_002dfingertree"></a>Function: <strong>make-fingertree</strong> <em><var>identity</var> <var>combine</var> <var>measure</var></em></dt>
<dd><p>Return a new fingertree, parametrised by the given monoid.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_003f"></a>Function: <strong>fingertree?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a fingertree, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dempty_003f"></a>Function: <strong>fingertree-empty?</strong> <em><var>fingertree</var></em></dt>
<dd><p>Return <code>#t</code> if there are no items in the fingertree, <code>#f</code>
otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dcons"></a>Function: <strong>fingertree-cons</strong> <em><var>item</var> <var>fingertree</var></em></dt>
<dd><p>Return the new fingertree created by adding the <var>item</var> to the front
of <var>fingertree</var>.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dsnoc"></a>Function: <strong>fingertree-snoc</strong> <em><var>fingertree</var> <var>item</var></em></dt>
<dd><p>Return the new fingertree created by adding <var>item</var> to the end of
<var>fingertree</var>.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002duncons"></a>Function: <strong>fingertree-uncons</strong> <em><var>fingertree</var></em></dt>
<dd><p>Returns 2 values: the item at the front of <var>fingertree</var>, and a new
fingertree containing all but the front element.  If <var>fingertree</var> is
empty: a <code>&amp;fingertree-empty</code> condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dunsnoc"></a>Function: <strong>fingertree-unsnoc</strong> <em><var>fingertree</var></em></dt>
<dd><p>Return 2 values: a new fingertree containing all but the rear element of
<var>fingertree</var>, and the rear element itself.  If <var>fingertree</var> is
empty: a <code>&amp;fingertree-empty</code> condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dempty_002dcondition_003f"></a>Function: <strong>fingertree-empty-condition?</strong> <em><var>condition</var></em></dt>
<dd><p>Return <code>#t</code> if the argument is a <code>&amp;fingertree-empty</code>
condition, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dappend"></a>Function: <strong>fingertree-append</strong> <em><var>fingertree1</var> <var>fingertree2</var></em></dt>
<dd><p>Return a new fingertree which contains all of the elements of
<var>fingertree1</var>, followed by all the elements of <var>fingertree2</var>.
The arguments are assumed to be parametrised by the same monoid.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003efingertree"></a>Function: <strong>list-&gt;fingertree</strong> <em><var>list-of-items</var> <var>identity</var> <var>append</var> <var>convert</var></em></dt>
<dd><p>Return a fingertree containing all of the elements of the list argument,
in the same order.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002d_003elist"></a>Function: <strong>fingertree-&gt;list</strong> <em><var>fingertree</var></em></dt>
<dd><p>Return a list of all the items in <var>fingertree</var>, in the order they
would be unconsed.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dmeasure"></a>Function: <strong>fingertree-measure</strong> <em><var>fingertree</var></em></dt>
<dd><p>Return the measure of <var>fingertree</var>, as defined by <var>fingertree</var>&rsquo;s
monoid.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dsplit"></a>Function: <strong>fingertree-split</strong> <em><var>predicate</var> <var>fingertree</var></em></dt>
<dd><p>Return 2 values: a new finger tree representing the largest prefix of
<var>fingertree</var> for which applying the <var>predicate</var> to it&rsquo;s
accumulated measure returns <code>#f</code>; is a new fingertree containing all
those elements not in the first fingertree.
</p>
<p><var>predicate</var> must be a function accepting a single argument and
returning a boolean.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dsplit3"></a>Function: <strong>fingertree-split3</strong> <em><var>predicate</var> <var>fingertree</var></em></dt>
<dd><p>Similar to <code>fingertree-split</code>, however, instead of returning the
remainder as the second argument, return the head of the remainder as
second value, and tail of the remainder as third value.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dfold"></a>Function: <strong>fingertree-fold</strong> <em><var>combiner</var> <var>accum-base</var> <var>fingertree</var></em></dt>
<dd><p>Return the value obtained by iterating the <var>combiner</var> procedure over
<var>fingertree</var> in left&ndash;to&ndash;right order.  This procedure takes two
arguments: the current value from <var>fingertree</var>, and an accumulator;
it&rsquo;s return value is used as accumulator for the next iteration.  The
initial value for the accumulator is given by the base argument.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dfold_002dright"></a>Function: <strong>fingertree-fold-right</strong> <em><var>combiner</var> <var>fingertree</var></em></dt>
<dd><p>Similar to <code>fingertree-fold</code>, but iterate in right&ndash;to&ndash;left order.
</p></dd></dl>


<dl>
<dt><a name="index-fingertree_002dreverse"></a>Function: <strong>fingertree-reverse</strong> <em><var>fingertree</var></em></dt>
<dd><p>Return a new fingertree in which the items are in the opposite order
from <var>fingertree</var>.
</p></dd></dl>

<hr>
<a name="sequences"></a>
<div class="header">
<p>
Next: <a href="#heaps" accesskey="n" rel="next">heaps</a>, Previous: <a href="#fingertrees" accesskey="p" rel="prev">fingertrees</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Purely-functional-sequences"></a>
<h2 class="chapter">7 Purely functional sequences</h2>


<a name="index-Library-_0028pfds-sequences_0029"></a>
<a name="index-_0028pfds-sequences_0029_002c-library"></a>


<p>Sequences are a general&ndash;purpose, variable&ndash;length collections, similar
to lists, however they support efficient addition and removal from both
ends, and random&ndash;access.  Like other Scheme collections, sequences are
zero&ndash;indexed.
</p>
<p>The following bindings are exported by the library <code>(pfds
sequences)</code>.
</p>

<dl>
<dt><a name="index-make_002dsequence"></a>Function: <strong>make-sequence</strong></dt>
<dd><p>Return a new empty sequence.
</p></dd></dl>


<dl>
<dt><a name="index-sequence"></a>Function: <strong>sequence</strong> <em><var>item</var> &hellip;</em></dt>
<dd><p>Return a new sequence containing all of the argument items, in the given
order.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_003f"></a>Function: <strong>sequence?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if the argument is a sequence, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dempty_003f"></a>Function: <strong>sequence-empty?</strong> <em><var>sequence</var></em></dt>
<dd><p>Return <code>#t</code> if <var>sequence</var> contains no items, <code>#f</code>
otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dsize"></a>Function: <strong>sequence-size</strong> <em><var>sequence</var></em></dt>
<dd><p>Return a non&ndash;negative integer representing the number of items in
<var>sequence</var>.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dcons"></a>Function: <strong>sequence-cons</strong> <em><var>item</var> <var>sequence</var></em></dt>
<dd><p>Return a new sequence created by adding <var>item</var> to the front of
<var>sequence</var>.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002duncons"></a>Function: <strong>sequence-uncons</strong> <em><var>sequence</var></em></dt>
<dd><p>Return 2 values: the first item of <var>sequence</var>, and a new sequence
containing all but the first items.  If the sequence is empty: a
<code>&amp;sequence-empty</code> condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dsnoc"></a>Function: <strong>sequence-snoc</strong> <em><var>sequence</var> <var>item</var></em></dt>
<dd><p>Return a new sequence created by adding <var>item</var> to the end of
<var>sequence</var>.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dunsnoc"></a>Function: <strong>sequence-unsnoc</strong> <em><var>sequence</var></em></dt>
<dd><p>Return 2 values: a new sequence containing all but the last item of
<var>sequence</var>, and the last item itself.  If <var>sequence</var> is empty: a
<code>&amp;sequence-empty</code> condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dempty_002dcondition_003f"></a>Function: <strong>sequence-empty-condition?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;sequence-empty</code> condition,
<code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dappend"></a>Function: <strong>sequence-append</strong> <em><var>sequence1</var> <var>sequence2</var></em></dt>
<dd><p>Return a new sequence containing all the items of <var>sequence1</var>,
followed by all the items of <var>sequence2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003esequence"></a>Function: <strong>list-&gt;sequence</strong> <em><var>list-of-items</var></em></dt>
<dd><p>Return a new sequence containing all the items from the given list, in
the same order.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002d_003elist"></a>Function: <strong>sequence-&gt;list</strong> <em><var>sequence</var></em></dt>
<dd><p>Return a new list containing all the items of <var>sequence</var>, in the
same order.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dsplit_002dat"></a>Function: <strong>sequence-split-at</strong> <em><var>sequence</var> <var>N</var></em></dt>
<dd><p>Return 2 new sequences: the first containing the first <var>N</var> items of
<var>sequence</var>, the second containing the remaining items.  If <var>N</var>
is negative: return the empty sequence as the first value, and the
original sequence as the second value.  Similarly, if <var>N</var> is greater
than the size of <var>sequence</var>: return the original sequence as the
first value, and the empty sequence as the second value.
</p>
<p>Consequently:
</p>
<div class="example">
<pre class="example">(let-values (((a b) (sequence-split-at SEQ N)))
  (sequence-append a b))
</pre></div>

<p>is equivalent to <var>SEQ</var> for all sequences <var>SEQ</var>, and integers <var>N</var>.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dtake"></a>Function: <strong>sequence-take</strong> <em><var>sequence</var> <var>N</var></em></dt>
<dd><p>Return a new sequence containing the first <var>N</var> items of
<var>sequence</var>.  If <var>N</var> is negative: the empty sequence is returned.
If <var>N</var> is larger than the size of <var>sequence</var>: the whole sequence
is returned.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002ddrop"></a>Function: <strong>sequence-drop</strong> <em><var>sequence</var> <var>N</var></em></dt>
<dd><p>Return a new sequence containing all but the first <var>N</var> items of
<var>sequence</var>.  If <var>N</var> is negative: the whole sequence is returned.
If <var>N</var> is larger than the size of <var>sequence</var>: the empty sequence
is returned.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dref"></a>Function: <strong>sequence-ref</strong> <em><var>sequence</var> <var>index</var></em></dt>
<dd><p>Return the item at the specified <var>index</var> in the sequence;
<var>index</var> must be a non&ndash;negative exact integer.  If <var>index</var> is
outside the range:
</p>
<div class="example">
<pre class="example">0 &lt;= <var>index</var> &lt; (sequence-size <var>sequence</var>)
</pre></div>

<p>an assertion violation is raised.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dset"></a>Function: <strong>sequence-set</strong> <em><var>sequence</var> <var>index</var> <var>item</var></em></dt>
<dd><p>Return the new sequence obtained by replacing the item at the specified
<var>index</var> in <var>sequence</var> with the given <var>item</var>.  If <var>index</var>
is outside the range:
</p>
<div class="example">
<pre class="example">0 &lt;= <var>index</var> &lt; (sequence-size <var>sequence</var>)
</pre></div>

<p>an assertion violation is raised.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dfold"></a>Function: <strong>sequence-fold</strong> <em><var>combiner</var> <var>accum-base</var> <var>sequence</var></em></dt>
<dd><p>Return the value obtained by iterating the <var>combiner</var> procedure over
<var>sequence</var> in left&ndash;to&ndash;right order.  The <var>combiner</var> procedure
takes two arguments: the value of the position in the sequence, and an
accumulator, and its return value is used as the value of the
accumulator for the next call.  The initial accumulator value is given
by the <var>accum-base</var> argument.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dfold_002dright"></a>Function: <strong>sequence-fold-right</strong> <em><var>combiner</var> <var>accum-base</var> <var>sequence</var></em></dt>
<dd><p>Like <code>sequence-fold</code>, but the sequence is traversed in
right&ndash;to&ndash;left order, rather than left&ndash;to&ndash;right.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dreverse"></a>Function: <strong>sequence-reverse</strong> <em><var>sequence</var></em></dt>
<dd><p>Return a new sequence containing all the item of <var>sequence</var>, in
reverse order.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dmap"></a>Function: <strong>sequence-map</strong> <em><var>mapper</var> <var>sequence</var></em></dt>
<dd><p>Return a new sequence obtained by applying the procedure <var>mapper</var> to
each item of <var>sequence</var> in turn.
</p></dd></dl>


<dl>
<dt><a name="index-sequence_002dfilter"></a>Function: <strong>sequence-filter</strong> <em><var>predicate</var> <var>sequence</var></em></dt>
<dd><p>Return a new sequence containing all the items of <var>sequence</var> for
which the <var>predicate</var> is true.
</p></dd></dl>

<hr>
<a name="heaps"></a>
<div class="header">
<p>
Next: <a href="#bbtrees" accesskey="n" rel="next">bbtrees</a>, Previous: <a href="#sequences" accesskey="p" rel="prev">sequences</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Heaps"></a>
<h2 class="chapter">8 Heaps</h2>


<a name="index-Library-_0028pfds-heaps_0029"></a>
<a name="index-_0028pfds-heaps_0029_002c-library"></a>


<p>For all the procedures: the argument <var>item&lt;</var> must be a procedure
accepting 2 arguments, being items from the heap, and returning
<code>#t</code> if the first is less than the second; if the collected items are
numbers: <var>item&lt;</var> can be <code>&lt;</code>; if the collected items are
strings: <var>item&lt;</var> can be <code>string&lt;?</code>.
</p>
<p>The following bindings are exported by the library <code>(pfds heaps)</code>.
</p>

<dl>
<dt><a name="index-make_002dheap"></a>Function: <strong>make-heap</strong> <em><var>item&lt;</var></em></dt>
<dd><p>Return a new empty heap which uses the given ordering procedure.
</p></dd></dl>


<dl>
<dt><a name="index-heap"></a>Function: <strong>heap</strong> <em><var>item&lt;</var> <var>item</var> &hellip;</em></dt>
<dd><p>Return a new heap, ordered by the procedure argument <var>item&lt;</var>, that
contains all the other arguments as items.
</p></dd></dl>


<dl>
<dt><a name="index-heap_003f"></a>Function: <strong>heap?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a heap, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dsize"></a>Function: <strong>heap-size</strong> <em><var>heap</var></em></dt>
<dd><p>Return a non&ndash;negative integer representing the number of items in
<var>heap</var>.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dempty_003f"></a>Function: <strong>heap-empty?</strong> <em><var>heap</var></em></dt>
<dd><p>Return <code>#t</code> if the heap contains no items, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dmin"></a>Function: <strong>heap-min</strong> <em><var>heap</var></em></dt>
<dd><p>Return the minimum item in <var>heap</var>, according the heap&rsquo;s ordering
procedure.  If there are no items: a <code>&amp;heap-empty</code> condition is
raised.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002ddelete_002dmin"></a>Function: <strong>heap-delete-min</strong> <em><var>heap</var></em></dt>
<dd><p>Return a new heap containing all the items of <var>heap</var>, except for the
minimum argument, as determined by the heap&rsquo;s ordering procedure.  If
there are no items: a <code>&amp;heap-empty</code> condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dempty_002dcondition_003f"></a>Function: <strong>heap-empty-condition?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;heap-empty</code> condition,
<code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dpop"></a>Function: <strong>heap-pop</strong> <em><var>heap</var></em></dt>
<dd><p>Return two values: the the minimum item in <var>heap</var>, and a heap
obtained by removing the minimum value from the original <var>heap</var>.  If
<var>heap</var> is empty: a <code>&amp;&amp;heap-empty</code> condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dinsert"></a>Function: <strong>heap-insert</strong> <em><var>heap</var> <var>item</var></em></dt>
<dd><p>Return a new heap obtained by adding <var>item</var> to those in the
<var>heap</var>.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002d_003elist"></a>Function: <strong>heap-&gt;list</strong> <em><var>heap</var></em></dt>
<dd><p>Return a list containing all the items of <var>heap</var>.  The items of the
list are ordered according to the heap&rsquo;s ordering procedure.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003eheap"></a>Function: <strong>list-&gt;heap</strong> <em><var>list-of-items</var> <var>item&lt;</var></em></dt>
<dd><p>Return a heap containing all the items of the given list, using the
procedure argument <var>item&lt;</var> to order them.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dmerge"></a>Function: <strong>heap-merge</strong> <em><var>heap1</var> <var>heap2</var></em></dt>
<dd><p>Return the heap containing all the items of the argument heaps.  The
argument heaps are assumed to be using the same ordering procedure.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dsort"></a>Function: <strong>heap-sort</strong> <em><var>item&lt;</var> <var>list-of-items</var></em></dt>
<dd><p>Return a new list that is a permutation of the <var>list-of-items</var>, such
that all the items are ordered by the given procedure <var>item&lt;</var>.
</p></dd></dl>


<dl>
<dt><a name="index-heap_002dordering_002dprocedure"></a>Function: <strong>heap-ordering-procedure</strong> <em><var>heap</var></em></dt>
<dd><p>Return the ordering procedure used internally by <var>heap</var>.
</p></dd></dl>

<hr>
<a name="bbtrees"></a>
<div class="header">
<p>
Next: <a href="#sets" accesskey="n" rel="next">sets</a>, Previous: <a href="#heaps" accesskey="p" rel="prev">heaps</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Bounded-Balance-trees"></a>
<h2 class="chapter">9 Bounded Balance trees</h2>


<a name="index-Library-_0028pfds-bbtrees_0029"></a>
<a name="index-_0028pfds-bbtrees_0029_002c-library"></a>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-conventions" accesskey="1">bbtrees conventions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Documentation and <acronym>API</acronym> conventions.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-core" accesskey="2">bbtrees core</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Constructors and predicates.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-inspection" accesskey="3">bbtrees inspection</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Inspection functions.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-setget" accesskey="4">bbtrees setget</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Setters and getters.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-traversing" accesskey="5">bbtrees traversing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Traversing functions.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-set" accesskey="6">bbtrees set</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Set operations.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#bbtrees-index" accesskey="7">bbtrees index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Indexing operations.
</td></tr>
</table>

<hr>
<a name="bbtrees-conventions"></a>
<div class="header">
<p>
Next: <a href="#bbtrees-core" accesskey="n" rel="next">bbtrees core</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Documentation-and-API-conventions"></a>
<h3 class="section">9.1 Documentation and <acronym>API</acronym> conventions</h3>


<p>The following conventions for function arguments hold:
</p>
<dl compact="compact">
<dt><var>bbtree</var></dt>
<dd><p>It is the instance of bbtree the function acts upon.  Bbtree arguments
are <strong>never</strong> mutated.
</p>
</dd>
<dt><var>key</var></dt>
<dd><p>The argument is an association key.  For all procedures which take a
<var>key</var> as an argument, the <var>key</var> must be comparable with the
ordering procedure of the bbtree.
</p>
</dd>
<dt><var>item&lt;</var></dt>
<dd><p>The argument <var>item&lt;</var> must be the ordering procedure: a predicate
function accepting two arguments and returning a boolean, <code>#t</code> if the
first argument is strictly less than the second.  For numeric collected
items: <var>item&lt;</var> can be <code>&lt;</code>; for string collected items:
<var>item&lt;</var> can be <code>string&lt;?</code>.
</p></dd>
</dl>

<hr>
<a name="bbtrees-core"></a>
<div class="header">
<p>
Next: <a href="#bbtrees-inspection" accesskey="n" rel="next">bbtrees inspection</a>, Previous: <a href="#bbtrees-conventions" accesskey="p" rel="prev">bbtrees conventions</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Constructors-and-predicates"></a>
<h3 class="section">9.2 Constructors and predicates</h3>


<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.
</p>

<dl>
<dt><a name="index-make_002dbbtree"></a>Function: <strong>make-bbtree</strong> <em><var>item&lt;</var></em></dt>
<dd><p>Build and return a new, empty bbtree.  Bbtrees derived from the returned
one will use the procedure argument <var>item&lt;</var> for ordering keys.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_003f"></a>Function: <strong>bbtree?</strong> <em><var>any</var></em></dt>
<dd><p>Return <code>#t</code> if the argument is a bbtree, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002d_003ealist"></a>Function: <strong>bbtree-&gt;alist</strong> <em><var>bbtree</var></em></dt>
<dd><p>Return the key/value associations from <var>bbtree</var> as a list of pairs.
The list returned is in sorted order according to the ordering procedure
of <var>bbtree</var>.  A consequence of this is that one could write a sort
procedure for lists of pairs as:
</p>
<div class="example">
<pre class="example">(define (alist-sort alist &lt;)
  (bbtree-&gt;alist (alist-&gt;bbtree alist &lt;)))
</pre></div>
</dd></dl>


<dl>
<dt><a name="index-alist_002d_003ebbtree"></a>Function: <strong>alist-&gt;bbtree</strong> <em><var>alist</var> <var>item&lt;</var></em></dt>
<dd><p>Return the bbtree containing each of the key/value pairs in <var>alist</var>,
using the <var>item&lt;</var> argument as the ordering procedure.
</p>
<div class="example">
<pre class="example">(import (vicare)
  (pfds bbtrees))

(alist-&gt;bbtree '((&quot;foo&quot; . 10) (&quot;bar&quot; . 12))
               string&lt;?)
&rArr; #[bbtree]
</pre></div>
</dd></dl>

<hr>
<a name="bbtrees-inspection"></a>
<div class="header">
<p>
Next: <a href="#bbtrees-setget" accesskey="n" rel="next">bbtrees setget</a>, Previous: <a href="#bbtrees-core" accesskey="p" rel="prev">bbtrees core</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Inspection-functions"></a>
<h3 class="section">9.3 Inspection functions</h3>


<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.
</p>

<dl>
<dt><a name="index-bbtree_002dsize"></a>Function: <strong>bbtree-size</strong> <em><var>bbtree</var></em></dt>
<dd><p>Return a non&ndash;negative integer representing number of elements in a
bbtree.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dcontains_003f"></a>Function: <strong>bbtree-contains?</strong> <em><var>bbtree</var> <var>key</var></em></dt>
<dd><p>Return <code>#t</code> if there is association for <var>key</var> in <var>bbtree</var>,
<code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dordering_002dprocedure"></a>Function: <strong>bbtree-ordering-procedure</strong> <em><var>bbtree</var></em></dt>
<dd><p>Return the ordering procedure used internally to order <var>bbtree</var>.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dkeys"></a>Function: <strong>bbtree-keys</strong> <em><var>bbtree</var></em></dt>
<dd><p>Return a list containing all the keys of <var>bbtree</var>.  The keys are
sorted according to the bbtree&rsquo;s ordering procedure.
</p>
<div class="example">
<pre class="example">(import (vicare)
  (pfds bbtrees))

(bbtree-keys (alist-&gt;bbtree '((&quot;one&quot; . 1) (&quot;two&quot; . 2))
                            string&lt;?))
&rArr; (&quot;one&quot; &quot;two&quot;)
</pre></div>
</dd></dl>

<hr>
<a name="bbtrees-setget"></a>
<div class="header">
<p>
Next: <a href="#bbtrees-traversing" accesskey="n" rel="next">bbtrees traversing</a>, Previous: <a href="#bbtrees-inspection" accesskey="p" rel="prev">bbtrees inspection</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Setters-and-getters"></a>
<h3 class="section">9.4 Setters and getters</h3>


<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.
</p>

<dl>
<dt><a name="index-bbtree_002dref"></a>Function: <strong>bbtree-ref</strong> <em><var>bbtree</var> <var>key</var></em></dt>
<dt><a name="index-bbtree_002dref-1"></a>Function: <strong>bbtree-ref</strong> <em><var>bbtree</var> <var>key</var> <var>default</var></em></dt>
<dd><p>Return the value associated with the <var>key</var> in the <var>bbtree</var>.  If
the value is not in the tree, then, if the optional third argument is
passed, it is returned, otherwise an <code>&amp;assertion-violation</code>
condition is raised.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dset"></a>Function: <strong>bbtree-set</strong> <em><var>bbtree</var> <var>key</var> <var>new-value</var></em></dt>
<dd><p>Return a new bbtree with <var>key</var> associated to <var>new-value</var>.  If
the <var>key</var> is already in <var>bbtree</var>, its associated value is
replaced with the new <var>new-value</var> in the returned bbtree.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dupdate"></a>Function: <strong>bbtree-update</strong> <em><var>bbtree</var> <var>key</var> <var>proc</var> <var>default</var></em></dt>
<dd><p>Return a new bbtree with the value associated to <var>key</var> updated
according to the update procedure <var>proc</var>.  If <var>key</var> was not
already in <var>bbtree</var>, the update procedure is applied to
<var>default</var>, and <var>key</var> is associated to the resulting value.
</p>
<p>The update procedure <var>proc</var> must accept a single argument, being the
old value, and return a single value, being the new value.
</p>
<div class="example">
<pre class="example">(import (vicare)
  (pfds bbtrees))

(let* ((bb1   (alist-&gt;bbtree '((&quot;foo&quot; . 10)
                               (&quot;bar&quot; . 12))
                             string&lt;?))
       (dflt  0)
       (bb2   (bbtree-update bb1 &quot;foo&quot; add1 dflt)))
  (bbtree-&gt;alist bb2))
&rArr; ((&quot;bar&quot; . 12) (&quot;foo&quot; . 11))

(let* ((bb1  (alist-&gt;bbtree '((&quot;foo&quot; . 10)
                              (&quot;bar&quot; . 12))
                            string&lt;?))
       (dflt 0)
       (bb2  (bbtree-update bb &quot;baz&quot; add1 dflt)))
  (bbtree-&gt;alist bb2))
&rArr; ((&quot;bar&quot; . 12) (&quot;baz&quot; . 1) (&quot;foo&quot; . 10))
</pre></div>
</dd></dl>


<dl>
<dt><a name="index-bbtree_002ddelete"></a>Function: <strong>bbtree-delete</strong> <em><var>bbtree</var> <var>key</var></em></dt>
<dd><p>Return a new bbtree with the <var>key</var> and its associated value removed.
If <var>key</var> is not in <var>bbtree</var>: the returned bbtree is a copy of
the original.
</p></dd></dl>

<hr>
<a name="bbtrees-traversing"></a>
<div class="header">
<p>
Next: <a href="#bbtrees-set" accesskey="n" rel="next">bbtrees set</a>, Previous: <a href="#bbtrees-setget" accesskey="p" rel="prev">bbtrees setget</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Traversing-functions"></a>
<h3 class="section">9.5 Traversing functions</h3>


<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.
</p>

<dl>
<dt><a name="index-bbtree_002dtraverse"></a>Function: <strong>bbtree-traverse</strong> <em><var>traverser</var> <var>accum-base</var> <var>bbtree</var></em></dt>
<dd><p>A general tree traversal procedure.  Return the value of applying the
<var>traverser</var> procedure to: the current node&rsquo;s key, the current node&rsquo;s
value, a procedure to traverse the left subtree, a procedure to traverse
the right subtree, and an accumulator value.
</p>
<p>The <var>traverser</var> procedure must look like:
</p>
<div class="example">
<pre class="example">(define (traverser key value left-traverse right-traverse accum)
  ---)
</pre></div>

<p>and return the new accumulator value.  The subtree traversal procedures
are generated by <code>bbtree-traverse</code>; both take the current
accumulator value as argument, return the new accumulator value, and
call <code>bbtree-traverse</code> recursively on the appropriate subtree.
<var>traverser</var> must call both <var>left-traverse</var> and
<var>right-traverse</var>:
</p>
<ul>
<li> If <var>left-traverse</var> is called first: the left subtree is visited
first.

</li><li> If <var>right-traverse</var> is called first: the right subtree is visited
first.
</li></ul>

<p>To perform a left&ndash;first preorder iteration:
</p>
<div class="example">
<pre class="example">(import (rnrs)
  (pfds bbtrees))

(let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                           '(0 1 2 3 4 5 6 7 8 9))
                         &lt;)))
  (define (left-first key value left right accum)
    (right (left (cons key accum))))
  (bbtree-traverse left-first '() bb))
&rArr; (9 8 6 7 4 5 2 0 1 3)
</pre></div>

<p>and to perform a right&ndash;first preorder iteration:
</p>
<div class="example">
<pre class="example">(import (rnrs)
  (pfds bbtrees))

(let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                           '(0 1 2 3 4 5 6 7 8 9))
                         &lt;)))
  (define (right-first key value left right accum)
    (left (right (cons key accum))))
  (bbtree-traverse right-first '() bb))
&rArr; (0 2 1 4 6 9 8 7 5 3)
</pre></div>

<p>This function is mostly useful for implementing other, more specific
tree traversal procedures.  For example:
</p>
<div class="example">
<pre class="example">(define (l-to-r-pre-order cons base bbtree)
  (bbtree-traverse (lambda (key value left right accum)
                     (right (left (cons* key value accum))))
                   accum
                   bbtree))
</pre></div>

<p>implements a left&ndash;to&ndash;right pre&ndash;order traversal variant of
<code>bbtree-fold</code>.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dfold"></a>Function: <strong>bbtree-fold</strong> <em><var>combine</var> <var>accum-base</var> <var>bbtree</var></em></dt>
<dd><p>Return the value obtained by iterating the <var>combine</var> procedure over
each node in the tree.  The combine procedure takes 3 arguments: the key
and value of the current node, and an accumulator value; its return
value is used as the accumulator value for the next node.  The initial
accumulator value is provided by the <var>accum-base</var> argument.
</p>
<p><code>bbtree-fold</code> performs a left&ndash;to&ndash;right in&ndash;order traversal or
&ldquo;minimum key to maximum key&rdquo;.
</p>
<div class="example">
<pre class="example">(import (rnrs)
  (pfds bbtrees))

(let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                           '(0 1 2 3 4 5 6 7 8 9))
                         &lt;)))
  ;;Later keys are pushed on the head.
  (bbtree-fold (lambda (key value accum)
                 (cons key accum))
               '()
               bb))
&rArr; (9 8 7 6 5 4 3 2 1 0)
</pre></div>
</dd></dl>


<dl>
<dt><a name="index-bbtree_002dfold_002dright"></a>Function: <strong>bbtree-fold-right</strong> <em><var>combine</var> <var>accum-base</var> <var>bbtree</var></em></dt>
<dd><p>Like <code>bbtree-fold</code>, but it performs a right&ndash;to&ndash;left in&ndash;order
traversal instead (i.e. maximum to minimum).
</p>
<div class="example">
<pre class="example">(import (rnrs)
  (pfds bbtrees))

(let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                           '(0 1 2 3 4 5 6 7 8 9))
                         &lt;)))
  ;;Later keys are pushed on the head.
  (bbtree-fold-right (lambda (key value accum)
                       (cons key accum))
                     '()
                     bb))
&rArr; (0 1 2 3 4 5 6 7 8 9)
</pre></div>
</dd></dl>


<dl>
<dt><a name="index-bbtree_002dmap"></a>Function: <strong>bbtree-map</strong> <em><var>func</var> <var>bbtree</var></em></dt>
<dd><p>Return a new bbtree obtained by updating the value of each node in
<var>bbtree</var> with the result of applying the procedure to its value.
<var>func</var> must take a single argument, being the original value, and
return a single value, being the new value.
</p>
<div class="example">
<pre class="example">(import (rnrs)
  (pfds bbtrees))

(define bb
  (alist-&gt;bbtree '((#\a . foo)
                   (#\b . bar)
                   (#\c . baz)
                   (#\d . quux))
                 char&lt;?))

(bbtree-&gt;alist (bbtree-map symbol-&gt;string bb))
&rArr; ((#\a . &quot;foo&quot;)
    (#\b . &quot;bar&quot;)
    (#\c . &quot;baz&quot;)
    (#\d . &quot;quux&quot;))
</pre></div>
</dd></dl>

<hr>
<a name="bbtrees-set"></a>
<div class="header">
<p>
Next: <a href="#bbtrees-index" accesskey="n" rel="next">bbtrees index</a>, Previous: <a href="#bbtrees-traversing" accesskey="p" rel="prev">bbtrees traversing</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Set-operations"></a>
<h3 class="section">9.6 Set operations</h3>


<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.
</p>

<dl>
<dt><a name="index-bbtree_002dunion"></a>Function: <strong>bbtree-union</strong> <em><var>bbtree1</var> <var>bbtree2</var></em></dt>
<dd><p>Return a bbtree containing the union of the associations in
<var>bbtree1</var> and <var>bbtree2</var>.  Where the same key occurs in both:
the value in <var>bbtree1</var> is preferred.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002ddifference"></a>Function: <strong>bbtree-difference</strong> <em><var>bbtree1</var> <var>bbtree2</var></em></dt>
<dd><p>Return a bbtree containing the all the associations in <var>bbtree1</var>,
which do not occur in <var>bbtree2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dintersection"></a>Function: <strong>bbtree-intersection</strong> <em><var>bbtree1</var> <var>bbtree2</var></em></dt>
<dd><p>Return a bbtree containing all the associations which appear in both
<var>bbtree1</var> and <var>bbtree2</var>.  The values in <var>bbtree1</var> are
preferred over those in <var>bbtree2</var>.
</p></dd></dl>

<hr>
<a name="bbtrees-index"></a>
<div class="header">
<p>
Previous: <a href="#bbtrees-set" accesskey="p" rel="prev">bbtrees set</a>, Up: <a href="#bbtrees" accesskey="u" rel="up">bbtrees</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Indexing-operations"></a>
<h3 class="section">9.7 Indexing operations</h3>


<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.
</p>

<dl>
<dt><a name="index-bbtree_002dindex"></a>Function: <strong>bbtree-index</strong> <em><var>bbtree</var> <var>key</var></em></dt>
<dd><p>Return a non&ndash;negative integer representing the index of <var>key</var> in
the <var>bbtree</var>.  The index is an integer between <code>0</code> and
<code><var>size</var> - 1</code>, where <var>size</var> is the number of associations in
<var>bbtree</var>.
</p></dd></dl>


<dl>
<dt><a name="index-bbtree_002dref_002findex"></a>Function: <strong>bbtree-ref/index</strong> <em><var>bbtree</var> <var>index</var></em></dt>
<dd><p>Return 2 values: the key and value of the association in <var>bbtree</var> at
the given <var>index</var>.  <var>index</var> must be a non&ndash;negative integer
between <code>0</code> and <code><var>size</var> - 1</code>, where <var>size</var> is the
number of associations in <var>bbtree</var>.
</p></dd></dl>

<hr>
<a name="sets"></a>
<div class="header">
<p>
Next: <a href="#Package-License" accesskey="n" rel="next">Package License</a>, Previous: <a href="#bbtrees" accesskey="p" rel="prev">bbtrees</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Purely-functional-sets"></a>
<h2 class="chapter">10 Purely functional sets</h2>


<a name="index-Library-_0028pfds-sets_0029"></a>
<a name="index-_0028pfds-sets_0029_002c-library"></a>


<p>For all the procedures: the argument <var>item&lt;</var> must be the ordering
procedure: a predicate function accepting two arguments and returning a
boolean, <code>#t</code> if the first argument is strictly less than the second.
For numeric collected items: <var>item&lt;</var> can be <code>&lt;</code>; for string
collected items: <var>item&lt;</var> can be <code>string&lt;?</code>.
</p>
<p>The following bindings are exported by the library <code>(pfds sets)</code>.
</p>

<dl>
<dt><a name="index-make_002dset"></a>Function: <strong>make-set</strong> <em><var>item&lt;</var></em></dt>
<dd><p>Return a new empty set ordered by the procedure <var>item&lt;</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_003f"></a>Function: <strong>set?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a set, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dmember_003f"></a>Function: <strong>set-member?</strong> <em><var>set</var> <var>item</var></em></dt>
<dd><p>Return <code>#t</code> if <var>item</var> is in <var>set</var>, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dinsert"></a>Function: <strong>set-insert</strong> <em><var>set</var> <var>item</var></em></dt>
<dd><p>Return a new set created by inserting <var>item</var> into <var>set</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dremove"></a>Function: <strong>set-remove</strong> <em><var>set</var> <var>item</var></em></dt>
<dd><p>Return a new set created by removing <var>item</var> from <var>set</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dsize"></a>Function: <strong>set-size</strong> <em><var>set</var></em></dt>
<dd><p>Return an exact integer representing the number of items in <var>set</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_003c_003f"></a>Function: <strong>set&lt;?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dt><a name="index-proper_002dsubset_003f"></a>Function: <strong>proper-subset?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return <code>#t</code> if <var>set1</var> is a proper subset of <var>set2</var>, <code>#f</code>
otherwise.  That is, if all items of <var>set1</var> are in <var>set2</var>, and
there is at least one item of <var>set2</var> not in <var>set1</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_003c_003d_003f"></a>Function: <strong>set&lt;=?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dt><a name="index-subset_003f"></a>Function: <strong>subset?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return <code>#t</code> if <var>set1</var> is a subset of <var>set2</var>, <code>#f</code>
otherwise, i.e. if all items of <var>set1</var> are in <var>set2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_003d_003f"></a>Function: <strong>set=?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return <code>#t</code> if every item of <var>set1</var> is in <var>set2</var>, and vice
versa, <code>#f</code> otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-set_003e_003d_003f"></a>Function: <strong>set&gt;=?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return <code>#t</code> if <var>set2</var> is a subset of <var>set1</var>, <code>#f</code>
otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-set_003e_003f"></a>Function: <strong>set&gt;?</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return <code>#t</code> if <var>set2</var> is a proper subset of <var>set1</var>, <code>#f</code>
otherwise.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dmap"></a>Function: <strong>set-map</strong> <em><var>mapper</var> <var>set</var></em></dt>
<dd><p>Return the new set created by applying the procedure <var>mapper</var> to
each item of <var>set</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dfold"></a>Function: <strong>set-fold</strong> <em><var>combine</var> <var>accum-base</var> <var>set</var></em></dt>
<dd><p>Return the value obtained by iterating the procedure <var>combine</var> over
each item of <var>set</var> and an accumulator value (in this order).  The
value of the accumulator is initially <var>accum-base</var>, and the return
value of <var>combine</var> is used as the accumulator for the next
iteration.
</p></dd></dl>


<dl>
<dt><a name="index-list_002d_003eset"></a>Function: <strong>list-&gt;set</strong> <em><var>list-of-items</var> <var>item&lt;</var></em></dt>
<dd><p>Return the set containing all the items of the given list, ordered by
<var>item&lt;</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002d_003elist"></a>Function: <strong>set-&gt;list</strong> <em><var>set</var></em></dt>
<dd><p>Return all the items of <var>set</var> as a list.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dunion"></a>Function: <strong>set-union</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return the union of <var>set1</var> and <var>set2</var>, i.e. a new set that
contains all items of <var>set1</var> and <var>set2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dintersection"></a>Function: <strong>set-intersection</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return the intersection of <var>set1</var> and <var>set22</var>, i.e. a new set
of all items that are in both <var>set1</var> and <var>set2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002ddifference"></a>Function: <strong>set-difference</strong> <em><var>set1</var> <var>set2</var></em></dt>
<dd><p>Return the difference of <var>set1</var> and <var>set2</var>, i.e. the set of all
items in <var>set1</var> that are <strong>not</strong> in <var>set2</var>.
</p></dd></dl>


<dl>
<dt><a name="index-set_002dordering_002dprocedure"></a>Function: <strong>set-ordering-procedure</strong> <em><var>set</var></em></dt>
<dd><p>Return the ordering procedure used internally by <var>set</var>.
</p></dd></dl>

<hr>
<a name="Package-License"></a>
<div class="header">
<p>
Next: <a href="#References" accesskey="n" rel="next">References</a>, Previous: <a href="#sets" accesskey="p" rel="prev">sets</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Package-license"></a>
<h2 class="chapter">11 Package license</h2>


<p>Copyright &copy; 2011, 2012 by Ian Price <a href="mailto:ianprice90@googlemail.com">ianprice90@googlemail.com</a>
</p>
<p>All rights reserved.
</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:
</p>
<ol>
<li> Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.

</li><li> Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

</li><li> The name of the author may not be used to endorse or promote products
derived from this software without specific prior written permission.
</li></ol>

<p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR &ldquo;AS IS&rdquo; AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.
</p>
<hr>
<a name="References"></a>
<div class="header">
<p>
Next: <a href="#concept-index" accesskey="n" rel="next">concept index</a>, Previous: <a href="#Package-License" accesskey="p" rel="prev">Package License</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Bibliography-and-references"></a>
<h2 class="appendix">Appendix A Bibliography and references</h2>


<p>The documentation of PFDS is available online:
</p>
<div align="center"><a href="http://marcomaggi.github.io/docs/pfds.html">http://marcomaggi.github.io/docs/pfds.html</a>
</div>
<p>the latest version of this package for Vicare Scheme can be downloaded
from:
</p>
<div align="center"><a href="https://bitbucket.org/marcomaggi/pfds/downloads">https://bitbucket.org/marcomaggi/pfds/downloads</a>
</div>
<p>the original package is available at:
</p>
<div align="center"><a href="http://github.com/ijp/pfds">http://github.com/ijp/pfds</a>
</div>
<p>the repackaging under the <acronym>GNU</acronym> Autotools, with verified support for
Vicare Scheme and providing this documentation is at:
</p>
<div align="center"><a href="http://github.com/marcomaggi/pfds">http://github.com/marcomaggi/pfds</a>
</div>
<p>and as backup at:
</p>
<div align="center"><a href="https://bitbucket.org/marcomaggi/pfds">https://bitbucket.org/marcomaggi/pfds</a>
</div>
<p>the home page of the Vicare project is at:
</p>
<div align="center"><a href="http://marcomaggi.github.io/vicare.html">http://marcomaggi.github.io/vicare.html</a>
</div>

<a name="Papers-and-publications"></a>
<h3 class="appendixsec">A.1 Papers and publications</h3>

<p>The queues and deques are based on the paper:
</p>
<blockquote>
<p>Chris Okasaki.  &ldquo;Simple and Efficient Purely Functional Queues and
Deques&rdquo;.  <a href="http://www.eecs.usma.edu/webs/people/okasaki/pubs.html#jfp95">http://www.eecs.usma.edu/webs/people/okasaki/pubs.html#jfp95</a>.
</p></blockquote>

<p>The bbtrees and sets are based on the paper:
</p>
<blockquote>
<p>Stephen Adams.  &ldquo;Implementing Sets Efficiently in a Functional
Language&rdquo;.  <a href="http://groups.csail.mit.edu/mac/users/adams/BB/92-10.ps">http://groups.csail.mit.edu/mac/users/adams/BB/92-10.ps</a>.
</p></blockquote>

<p>Dlists are a well known trick in the functional programming community,
going back to at least:
</p>
<blockquote>
<p>John Hughes.  &ldquo;A Novel Representation of Lists and its application to
the Function <em>Reverse</em>&rdquo;.  1984.
<a href="http://www.cs.tufts.edu/~nr/cs257/archive/john-hughes/lists.pdf">http://www.cs.tufts.edu/~nr/cs257/archive/john-hughes/lists.pdf</a>
</p></blockquote>

<p>although he does not give them this name.  The trick is likely even
older than that (he points to a paper by Bird), though I have not the
knowledge to confirm this.
</p>
<p>The implementation of priority search queues is described in:
</p>
<blockquote>
<p>Ralf Hinze.  &ldquo;A Simple Implementation Technique for Priority Search
Queues&rdquo;.
<a href="http://www.cs.ox.ac.uk/people/ralf.hinze/publications/UU-CS-2001-09.pdf">http://www.cs.ox.ac.uk/people/ralf.hinze/publications/UU-CS-2001-09.pdf</a>.
</p></blockquote>

<p>The heaps use a height&ndash;biased leftist tree implementation.  Finger
trees are described in.
</p>
<blockquote>
<p>Ross Paterson and Ralf Hinze.  &ldquo;Finger trees: a simple general-purpose
data structure&rdquo;.
<a href="http://www.soi.city.ac.uk/~ross/papers/FingerTree.html">http://www.soi.city.ac.uk/~ross/papers/FingerTree.html</a>.
</p></blockquote>


<a name="Thanks"></a>
<h4 class="subsubheading">Thanks</h4>

<p>Thanks to Llewellyn Pritchard (<a href="https://github.com/leppie">https://github.com/leppie</a>)
for testing this on IronScheme
(<a href="https://ironscheme.codeplex.com/">https://ironscheme.codeplex.com/</a>), and to Andy Wingo
(<a href="http://wingolog.org/">http://wingolog.org/</a>) for pointing out priority search
queues to me, and prodding me into implementing them.
</p>
<hr>
<a name="concept-index"></a>
<div class="header">
<p>
Next: <a href="#function-index" accesskey="n" rel="next">function index</a>, Previous: <a href="#References" accesskey="p" rel="prev">References</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="An-entry-for-each-concept"></a>
<h2 class="appendix">Appendix B An entry for each concept</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#concept-index_cp_symbol-1"><b>(</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#concept-index_cp_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="concept-index_cp_symbol-1">(</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-bbtrees_0029_002c-library"><code>(pfds bbtrees)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees">bbtrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-deques_0029_002c-library"><code>(pfds deques)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-dlists_0029_002c-library"><code>(pfds dlists)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-fingertrees_0029_002c-library"><code>(pfds fingertrees)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-heaps_0029_002c-library"><code>(pfds heaps)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-psqs_0029_002c-library"><code>(pfds psqs)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs">psqs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-queues_0029_002c-library"><code>(pfds queues)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-sequences_0029_002c-library"><code>(pfds sequences)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028pfds-sets_0029_002c-library"><code>(pfds sets)</code>, library</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="concept-index_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-bbtrees_0029">Library <code>(pfds bbtrees)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees">bbtrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-deques_0029">Library <code>(pfds deques)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-dlists_0029">Library <code>(pfds dlists)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-fingertrees_0029">Library <code>(pfds fingertrees)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-heaps_0029">Library <code>(pfds heaps)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-psqs_0029">Library <code>(pfds psqs)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs">psqs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-queues_0029">Library <code>(pfds queues)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-sequences_0029">Library <code>(pfds sequences)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Library-_0028pfds-sets_0029">Library <code>(pfds sets)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#concept-index_cp_symbol-1"><b>(</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#concept-index_cp_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="function-index"></a>
<div class="header">
<p>
Next: <a href="#variable-index" accesskey="n" rel="next">variable index</a>, Previous: <a href="#concept-index" accesskey="p" rel="prev">concept index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="An-entry-for-each-function_002e"></a>
<h2 class="appendix">Appendix C An entry for each function.</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#function-index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-S"><b>S</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-alist_002d_003ebbtree"><code>alist-&gt;bbtree</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-core">bbtrees core</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002d_003ealist"><code>bbtree-&gt;alist</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-core">bbtrees core</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dcontains_003f"><code>bbtree-contains?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-inspection">bbtrees inspection</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002ddelete"><code>bbtree-delete</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-setget">bbtrees setget</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002ddifference"><code>bbtree-difference</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-set">bbtrees set</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dfold"><code>bbtree-fold</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-traversing">bbtrees traversing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dfold_002dright"><code>bbtree-fold-right</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-traversing">bbtrees traversing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dindex"><code>bbtree-index</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-index">bbtrees index</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dintersection"><code>bbtree-intersection</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-set">bbtrees set</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dkeys"><code>bbtree-keys</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-inspection">bbtrees inspection</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dmap"><code>bbtree-map</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-traversing">bbtrees traversing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dordering_002dprocedure"><code>bbtree-ordering-procedure</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-inspection">bbtrees inspection</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dref"><code>bbtree-ref</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-setget">bbtrees setget</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dref-1"><code>bbtree-ref</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-setget">bbtrees setget</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dref_002findex"><code>bbtree-ref/index</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-index">bbtrees index</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dset"><code>bbtree-set</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-setget">bbtrees setget</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dsize"><code>bbtree-size</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-inspection">bbtrees inspection</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dtraverse"><code>bbtree-traverse</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-traversing">bbtrees traversing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dunion"><code>bbtree-union</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-set">bbtrees set</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_002dupdate"><code>bbtree-update</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-setget">bbtrees setget</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bbtree_003f"><code>bbtree?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-core">bbtrees core</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-deque_002d_003elist"><code>deque-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-deque_002dempty_002dcondition_003f"><code>deque-empty-condition?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-deque_002dempty_003f"><code>deque-empty?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-deque_002dlength"><code>deque-length</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-deque_003f"><code>deque?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dequeue"><code>dequeue</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dequeue_002dfront"><code>dequeue-front</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dequeue_002drear"><code>dequeue-rear</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dlist"><code>dlist</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dlist_002d_003elist"><code>dlist-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dlist_002dappend"><code>dlist-append</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dlist_002dcons"><code>dlist-cons</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dlist_002dsnoc"><code>dlist-snoc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dlist_003f"><code>dlist?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-enqueue"><code>enqueue</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-enqueue_002dfront"><code>enqueue-front</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-enqueue_002drear"><code>enqueue-rear</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002d_003elist"><code>fingertree-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dappend"><code>fingertree-append</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dcons"><code>fingertree-cons</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dempty_002dcondition_003f"><code>fingertree-empty-condition?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dempty_003f"><code>fingertree-empty?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dfold"><code>fingertree-fold</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dfold_002dright"><code>fingertree-fold-right</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dmeasure"><code>fingertree-measure</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dreverse"><code>fingertree-reverse</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dsnoc"><code>fingertree-snoc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dsplit"><code>fingertree-split</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dsplit3"><code>fingertree-split3</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002duncons"><code>fingertree-uncons</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_002dunsnoc"><code>fingertree-unsnoc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingertree_003f"><code>fingertree?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap"><code>heap</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002d_003elist"><code>heap-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002ddelete_002dmin"><code>heap-delete-min</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dempty_002dcondition_003f"><code>heap-empty-condition?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dempty_003f"><code>heap-empty?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dinsert"><code>heap-insert</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dmerge"><code>heap-merge</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dmin"><code>heap-min</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dordering_002dprocedure"><code>heap-ordering-procedure</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dpop"><code>heap-pop</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dsize"><code>heap-size</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_002dsort"><code>heap-sort</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap_003f"><code>heap?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003edeque"><code>list-&gt;deque</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003edlist"><code>list-&gt;dlist</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#dlists">dlists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003efingertree"><code>list-&gt;fingertree</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003eheap"><code>list-&gt;heap</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003equeue"><code>list-&gt;queue</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003esequence"><code>list-&gt;sequence</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003eset"><code>list-&gt;set</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dbbtree"><code>make-bbtree</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#bbtrees-core">bbtrees core</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002ddeque"><code>make-deque</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#deques">deques</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dfingertree"><code>make-fingertree</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#fingertrees">fingertrees</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dheap"><code>make-heap</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#heaps">heaps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dpsq"><code>make-psq</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-basic">psqs basic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dqueue"><code>make-queue</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dsequence"><code>make-sequence</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dset"><code>make-set</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-proper_002dsubset_003f"><code>proper-subset?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dat_002dmost"><code>psq-at-most</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-ranged">psqs ranged</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dat_002dmost_002drange"><code>psq-at-most-range</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-ranged">psqs ranged</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dcontains_003f"><code>psq-contains?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-map">psqs map</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002ddelete"><code>psq-delete</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-map">psqs map</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002ddelete_002dmin"><code>psq-delete-min</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-priority">psqs priority</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dempty_003f"><code>psq-empty?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-basic">psqs basic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dmin"><code>psq-min</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-priority">psqs priority</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dpop"><code>psq-pop</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-priority">psqs priority</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dref"><code>psq-ref</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-map">psqs map</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dset"><code>psq-set</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-map">psqs map</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dsize"><code>psq-size</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-basic">psqs basic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_002dupdate"><code>psq-update</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-map">psqs map</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-psq_003f"><code>psq?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#psqs-basic">psqs basic</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-queue_002d_003elist"><code>queue-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-queue_002dempty_002dcondition_003f"><code>queue-empty-condition?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-queue_002dempty_003f"><code>queue-empty?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-queue_002dlength"><code>queue-length</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-queue_003f"><code>queue?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#queues">queues</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="function-index_fn_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence"><code>sequence</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002d_003elist"><code>sequence-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dappend"><code>sequence-append</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dcons"><code>sequence-cons</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002ddrop"><code>sequence-drop</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dempty_002dcondition_003f"><code>sequence-empty-condition?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dempty_003f"><code>sequence-empty?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dfilter"><code>sequence-filter</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dfold"><code>sequence-fold</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dfold_002dright"><code>sequence-fold-right</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dmap"><code>sequence-map</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dref"><code>sequence-ref</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dreverse"><code>sequence-reverse</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dset"><code>sequence-set</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dsize"><code>sequence-size</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dsnoc"><code>sequence-snoc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dsplit_002dat"><code>sequence-split-at</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dtake"><code>sequence-take</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002duncons"><code>sequence-uncons</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_002dunsnoc"><code>sequence-unsnoc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequence_003f"><code>sequence?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sequences">sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002d_003elist"><code>set-&gt;list</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002ddifference"><code>set-difference</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dfold"><code>set-fold</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dinsert"><code>set-insert</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dintersection"><code>set-intersection</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dmap"><code>set-map</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dmember_003f"><code>set-member?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dordering_002dprocedure"><code>set-ordering-procedure</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dremove"><code>set-remove</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dsize"><code>set-size</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_002dunion"><code>set-union</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_003c_003d_003f"><code>set&lt;=?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_003c_003f"><code>set&lt;?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_003d_003f"><code>set=?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_003e_003d_003f"><code>set&gt;=?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_003e_003f"><code>set&gt;?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set_003f"><code>set?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-subset_003f"><code>subset?</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#sets">sets</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#function-index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#function-index_fn_letter-S"><b>S</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="variable-index"></a>
<div class="header">
<p>
Next: <a href="#type-index" accesskey="n" rel="next">type index</a>, Previous: <a href="#function-index" accesskey="p" rel="prev">function index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="An-entry-for-each-variable_002e"></a>
<h2 class="appendix">Appendix D An entry for each variable.</h2>


<hr>
<a name="type-index"></a>
<div class="header">
<p>
Previous: <a href="#variable-index" accesskey="p" rel="prev">variable index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="An-entry-for-each-type_002e"></a>
<h2 class="appendix">Appendix E An entry for each type.</h2>


<a name="SEC_Contents"></a>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Overview-of-the-package" href="#overview">1 Overview of the package</a></li>
  <li><a name="toc-Difference-Lists" href="#dlists">2 Difference Lists</a></li>
  <li><a name="toc-Purely-functional-queues" href="#queues">3 Purely functional queues</a></li>
  <li><a name="toc-Double-queues" href="#deques">4 Double queues</a></li>
  <li><a name="toc-Priority-search-queues" href="#psqs">5 Priority search queues</a>
  <ul class="no-bullet">
    <li><a name="toc-Basic-operations" href="#psqs-basic">5.1 Basic operations</a></li>
    <li><a name="toc-Finite-map-operations" href="#psqs-map">5.2 Finite map operations</a></li>
    <li><a name="toc-Priority-queue-operations" href="#psqs-priority">5.3 Priority queue operations</a></li>
    <li><a name="toc-Ranged-query-functions" href="#psqs-ranged">5.4 Ranged query functions</a></li>
  </ul></li>
  <li><a name="toc-A-simple-general_002d_002dpurpose-data-structure" href="#fingertrees">6 A simple general&ndash;purpose data structure</a></li>
  <li><a name="toc-Purely-functional-sequences" href="#sequences">7 Purely functional sequences</a></li>
  <li><a name="toc-Heaps" href="#heaps">8 Heaps</a></li>
  <li><a name="toc-Bounded-Balance-trees" href="#bbtrees">9 Bounded Balance trees</a>
  <ul class="no-bullet">
    <li><a name="toc-Documentation-and-API-conventions" href="#bbtrees-conventions">9.1 Documentation and <acronym>API</acronym> conventions</a></li>
    <li><a name="toc-Constructors-and-predicates" href="#bbtrees-core">9.2 Constructors and predicates</a></li>
    <li><a name="toc-Inspection-functions" href="#bbtrees-inspection">9.3 Inspection functions</a></li>
    <li><a name="toc-Setters-and-getters" href="#bbtrees-setget">9.4 Setters and getters</a></li>
    <li><a name="toc-Traversing-functions" href="#bbtrees-traversing">9.5 Traversing functions</a></li>
    <li><a name="toc-Set-operations" href="#bbtrees-set">9.6 Set operations</a></li>
    <li><a name="toc-Indexing-operations" href="#bbtrees-index">9.7 Indexing operations</a></li>
  </ul></li>
  <li><a name="toc-Purely-functional-sets" href="#sets">10 Purely functional sets</a></li>
  <li><a name="toc-Package-license" href="#Package-License">11 Package license</a></li>
  <li><a name="toc-Bibliography-and-references" href="#References">Appendix A Bibliography and references</a>
  <ul class="no-bullet">
    <li><a name="toc-Papers-and-publications" href="#Papers-and-publications">A.1 Papers and publications</a></li>
  </ul></li>
  <li><a name="toc-An-entry-for-each-concept" href="#concept-index">Appendix B An entry for each concept</a></li>
  <li><a name="toc-An-entry-for-each-function_002e" href="#function-index">Appendix C An entry for each function.</a></li>
  <li><a name="toc-An-entry-for-each-variable_002e" href="#variable-index">Appendix D An entry for each variable.</a></li>
  <li><a name="toc-An-entry-for-each-type_002e" href="#type-index">Appendix E An entry for each type.</a></li>
</ul>
</div>

<hr>



</body>
</html>
