<html lang="en">
<head>
<title>Purely Functional Data Structures in Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Purely Functional Data Structures in Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.3a1 of PFDS, a
set of purely functional data structures written in R6RS Scheme.

The package is distributed under the terms of a liberal license and can
be downloaded from:

                     `http://github.com/ijp/pfds'


a repackaging under the GNU Autotools, with verified support for
Vicare Scheme and providing this documentation is at:

                  `http://github.com/marcomaggi/pfds'


and as backup at:

            `http://sourceforge.net/projects/vicare-pfds/'


Copyright (C) 2011, 2012 by Ian Price <ianprice90@googlemail.com>

Edited by Marco Maggi <marco.maggi-ipsu@poste.it>

     All rights reserved.

     Redistribution and use in source and binary forms, with or without
     modification, are permitted provided that the following conditions
     are met:

       1. Redistributions of source code must retain the above
          copyright notice, this list of conditions and the following
          disclaimer.

       2. Redistributions in binary form must reproduce the above
          copyright notice, this list of conditions and the following
          disclaimer in the documentation and/or other materials
          provided with the distribution.

       3. The name of the author may not be used to endorse or promote
          products derived from this software without specific prior
          written permission.
     THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
     OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
     WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
     ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
     DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
     GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
     INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
     WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
     SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Purely Functional Data Structures in Scheme</h1>
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#overview">overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">Purely Functional Data Structures in Scheme</h2>

<p>This document describes version 0.3a1 of PFDS, a
set of purely functional data structures written in <acronym>R6RS</acronym> Scheme.

   <p>The package is distributed under the terms of a liberal license and can
be downloaded from:

<div align="center"><a href="http://github.com/ijp/pfds">http://github.com/ijp/pfds</a></div>

<p class="noindent">a repackaging under the <acronym>GNU</acronym> Autotools, with verified support for
Vicare Scheme and providing this documentation is at:

<div align="center"><a href="http://github.com/marcomaggi/pfds">http://github.com/marcomaggi/pfds</a></div>

<p class="noindent">and as backup at:

<div align="center"><a href="http://sourceforge.net/projects/vicare-pfds/">http://sourceforge.net/projects/vicare-pfds/</a></div>

<p class="noindent">Copyright &copy; 2011, 2012 by Ian Price <a href="mailto:ianprice90@googlemail.com">ianprice90@googlemail.com</a><br>
Edited by Marco Maggi <a href="mailto:marco.maggi-ipsu@poste.it">marco.maggi-ipsu@poste.it</a>

   <blockquote>
All rights reserved.

   <p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

     <ol type=1 start=1>
<li>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.

     <li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

     <li>The name of the author may not be used to endorse or promote products
derived from this software without specific prior written permission.
        </ol>

   <p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR &ldquo;AS IS&rdquo; AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE. 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#overview">overview</a>:                     Overview of the package. 
<li><a accesskey="2" href="#dlists">dlists</a>:                       Difference Lists. 
<li><a accesskey="3" href="#queues">queues</a>:                       Purely functional queues. 
<li><a accesskey="4" href="#deques">deques</a>:                       Double queues. 
<li><a accesskey="5" href="#psqs">psqs</a>:                         Priority search queues. 
<li><a accesskey="6" href="#fingertrees">fingertrees</a>:                  A simple general-purpose data structure. 
<li><a accesskey="7" href="#sequences">sequences</a>:                    Purely functional sequences. 
<li><a accesskey="8" href="#heaps">heaps</a>:                        Heaps. 
<li><a accesskey="9" href="#bbtrees">bbtrees</a>:                      Bounded Balance trees. 
<li><a href="#sets">sets</a>:                         Purely functional sets.

</li></ul>
<p>Appendices

</p>
<ul class="menu">
<li><a href="#Package-License">Package License</a>:              Package license. 
<li><a href="#References">References</a>:                   Bibliography and references.

</li></ul>
<p>Indexes

</p>
<ul class="menu">
<li><a href="#concept-index">concept index</a>:                An entry for each concept. 
<li><a href="#function-index">function index</a>:               An entry for each function. 
<li><a href="#variable-index">variable index</a>:               An entry for each variable. 
<li><a href="#type-index">type index</a>:                   An entry for each type. 
</ul>

<!-- page -->
<div class="node">
<a name="overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#dlists">dlists</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Overview of the package</h2>

<p>This document describes version 0.3a1 of PFDS, a
set of purely functional data structures written in <acronym>R6RS</acronym> Scheme.

   <p>The package requires at least Vicare Scheme
0.3d1.

   <p>The package provides libraries for the following data structures:

     <dl>
<dt><strong>bbtrees</strong><br><dt><strong>deques</strong><br><dt><strong>dlists</strong><br><dt><strong>finger trees</strong><br><dt><strong>heaps</strong><br><dt><strong>priority search queues (psqs)</strong><br><dt><strong>queues</strong><br><dt><strong>sequences</strong><br><dt><strong>sets</strong><dd></dl>

<!-- page -->
<div class="node">
<a name="dlists"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#queues">queues</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#overview">overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Difference Lists</h2>

<p><a name="index-Library-_0040library_007bpfds-dlists_007d-1"></a><a name="index-g_t_0040library_007bpfds-dlists_007d_002c-library-2"></a>

   <p>Repeatedly appending to a list is a common, if inefficient pattern in
functional programs.  Usually the trick we use is to build up the list
in reverse, and then to reverse it as the last action of a function. 
Dlists are a representation of lists as functions that provide for
constant time append to either the front or end of a dlist that may be
used instead.

   <p>The following bindings are exported by the library <code>(pfds
dlists)</code>.

<div class="defun">
&mdash; Function: <b>dlist</b><var> obj <small class="dots">...</small><a name="index-dlist-3"></a></var><br>
<blockquote><p>Return a dlist containing all the given arguments. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dlist?</b><var> obj<a name="index-dlist_003f-4"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a dlist, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dlist-cons</b><var> item dlist<a name="index-dlist_002dcons-5"></a></var><br>
<blockquote><p>Return a new dlist created by prepending <var>item</var> to the head of
<var>dlist</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dlist-snoc</b><var> dlist item<a name="index-dlist_002dsnoc-6"></a></var><br>
<blockquote><p>Return a new dlist created by appending <var>item</var> to the tail of
<var>dlist</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dlist-append</b><var> dlist1 dlist2<a name="index-dlist_002dappend-7"></a></var><br>
<blockquote><p>Return a new dlist consisting of all the elements of <var>dlist1</var>,
followed by all the items of <var>dlist2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dlist-&gt;list</b><var> dlist<a name="index-dlist_002d_003elist-8"></a></var><br>
<blockquote><p>Return a list consisting of all the elements of the <var>dlist</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;dlist</b><var> list-of-items<a name="index-list_002d_003edlist-9"></a></var><br>
<blockquote><p>Return a dlist consisting of all the elements of the given list
argument. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="queues"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#deques">deques</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dlists">dlists</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Purely functional queues</h2>

<p><a name="index-Library-_0040library_007bpfds-queues_007d-10"></a><a name="index-g_t_0040library_007bpfds-queues_007d_002c-library-11"></a>

   <p>The following bindings are exported by the library <code>(pfds queues)</code>.

<div class="defun">
&mdash; Function: <b>make-queue</b><var><a name="index-make_002dqueue-12"></a></var><br>
<blockquote><p>Return a queue containing no items. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>queue?</b><var> obj<a name="index-queue_003f-13"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a queue, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>queue-length</b><var> queue<a name="index-queue_002dlength-14"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer representing the number of items in
<var>queue</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>queue-empty?</b><var> queue<a name="index-queue_002dempty_003f-15"></a></var><br>
<blockquote><p>Return <code>#t</code> if there are no items in <var>queue</var>, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>enqueue</b><var> queue item<a name="index-enqueue-16"></a></var><br>
<blockquote><p>Return a new queue with the enqueued <var>item</var> at the end. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dequeue</b><var> queue<a name="index-dequeue-17"></a></var><br>
<blockquote><p>Return 2 values: the item at the front of <var>queue</var>, and a new queue
containing the all the other items.  Raise a <code>&amp;queue-empty</code>
condition if <var>queue</var> is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>queue-empty-condition?</b><var> obj<a name="index-queue_002dempty_002dcondition_003f-18"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;queue-empty</code> condition
object, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>queue-&gt;list</b><var> queue<a name="index-queue_002d_003elist-19"></a></var><br>
<blockquote><p>Return a list containing all the items in <var>queue</var>.  The order of the
item in the list is the same as the order of the elements in the queue. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;queue</b><var> list-of-items<a name="index-list_002d_003equeue-20"></a></var><br>
<blockquote><p>Return a queue containing all the items in the given list.  The order of
the items in the queue is the same as the order in the list. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="deques"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#psqs">psqs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#queues">queues</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Double queues</h2>

<p><a name="index-Library-_0040library_007bpfds-deques_007d-21"></a><a name="index-g_t_0040library_007bpfds-deques_007d_002c-library-22"></a>

   <p>The following bindings are exported by the library <code>(pfds
deques)</code>.

<div class="defun">
&mdash; Function: <b>make-deque</b><var><a name="index-make_002ddeque-23"></a></var><br>
<blockquote><p>Return a deque containing to items. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>deque?</b><var> obj<a name="index-deque_003f-24"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a deque, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>deque-length</b><var> deque<a name="index-deque_002dlength-25"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer representing the number of items in
<var>deque</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>deque-empty?</b><var> deque<a name="index-deque_002dempty_003f-26"></a></var><br>
<blockquote><p>Return <code>#t</code> if there are no items in <var>deque</var>, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>enqueue-front</b><var> deque item<a name="index-enqueue_002dfront-27"></a></var><br>
<blockquote><p>Return a new deque with the <var>item</var> inserted at the front. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>enqueue-rear</b><var> deque item<a name="index-enqueue_002drear-28"></a></var><br>
<blockquote><p>Return a new deque with the <var>item</var> inserted at the rear. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dequeue-front</b><var> deque<a name="index-dequeue_002dfront-29"></a></var><br>
<blockquote><p>Return two values: the item at the front of <var>deque</var>, and a new deque
containing all the other items.  Raise a <code>&amp;deque-empty</code>
condition if <var>deque</var> is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>dequeue-rear</b><var> deque<a name="index-dequeue_002drear-30"></a></var><br>
<blockquote><p>Return two values: the item at the rear of the deque, and a new deque
containing all the other items.  Raise a <code>&amp;deque-empty</code>
condition if <var>deque</var> is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>deque-empty-condition?</b><var> obj<a name="index-deque_002dempty_002dcondition_003f-31"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;deque-empty</code> condition,
<code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>deque-&gt;list</b><var> deque<a name="index-deque_002d_003elist-32"></a></var><br>
<blockquote><p>Return a list containing all the elements of <var>deque</var>.  The order of
the elements in the list is the same as the order they would be dequeued
from the front of the deque. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;deque</b><var> list-of-items<a name="index-list_002d_003edeque-33"></a></var><br>
<blockquote><p>Return a deque containing all of the elements in the list argument.  The
order of the elements in the deque is the same as the order of the
elements in the list. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="psqs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#fingertrees">fingertrees</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#deques">deques</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Priority search queues</h2>

<p><a name="index-Library-_0040library_007bpfds-psqs_007d-34"></a><a name="index-g_t_0040library_007bpfds-psqs_007d_002c-library-35"></a>

   <p>Priority search queues are a combination of two common abstract data
types: finite maps, and priority queues.  As such, it provides for
access, insertion, removal and update on arbitrary keys, as well as for
easy removal of the element with the lowest priority.

   <p>Where a procedure takes a key or priority these are expected to be
compatible with the relevant ordering procedures on the psq.

<ul class="menu">
<li><a accesskey="1" href="#psqs-basic">psqs basic</a>:                   Basic operations. 
<li><a accesskey="2" href="#psqs-map">psqs map</a>:                     Finite map operations. 
<li><a accesskey="3" href="#psqs-priority">psqs priority</a>:                Priority queue operations. 
<li><a accesskey="4" href="#psqs-ranged">psqs ranged</a>:                  Ranged query functions. 
</ul>

<!-- page -->
<div class="node">
<a name="psqs-basic"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#psqs-map">psqs map</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#psqs">psqs</a>

</div>

<h3 class="section">5.1 Basic operations</h3>

<p>The following bindings are exported by the library <code>(pfds psqs)</code>.

<div class="defun">
&mdash; Function: <b>make-psq</b><var> key&lt; priority&lt;<a name="index-make_002dpsq-36"></a></var><br>
<blockquote><p>Take two ordering procedures: one for keys, and another for priorities,
and return an empty priority search queue. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq?</b><var> obj<a name="index-psq_003f-37"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a priority search queue, <code>#f</code>
otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-empty?</b><var> psq<a name="index-psq_002dempty_003f-38"></a></var><br>
<blockquote><p>Return <code>#t</code> if the priority search queue contains no elements,
<code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-size</b><var> psq<a name="index-psq_002dsize-39"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer represeting the number of associations in
the priority search queue. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="psqs-map"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#psqs-priority">psqs priority</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#psqs-basic">psqs basic</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#psqs">psqs</a>

</div>

<h3 class="section">5.2 Finite map operations</h3>

<p>The following bindings are exported by the library <code>(pfds psqs)</code>.

<div class="defun">
&mdash; Function: <b>psq-ref</b><var> psq key<a name="index-psq_002dref-40"></a></var><br>
<blockquote><p>Return the priority of <var>key</var> if it is in <var>psq</var>.  If <var>key</var> is
not in <var>psq</var> an assertion violation is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-set</b><var> psq key priority<a name="index-psq_002dset-41"></a></var><br>
<blockquote><p>Return the priority search queue obtained from inserting <var>key</var> with
a given <var>priority</var>.  If <var>key</var> is already in the priority search
queue, it updates the priority to the new value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-update</b><var> psq key priority-update priority<a name="index-psq_002dupdate-42"></a></var><br>
<blockquote><p>Return the priority search queue obtained by modifying the priority of
<var>key</var>, by the given function <var>priority-update</var>.  If <var>key</var> is
not in <var>psq</var>: it is inserted with the priority obtained by calling
the function <var>update</var> on the default value <var>priority-update</var>.

        <p><var>priority-update</var> must be a procedure accepting a priority value as
single argument and returning a priority value as single value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-delete</b><var> psq key<a name="index-psq_002ddelete-43"></a></var><br>
<blockquote><p>Return the priority search queue obtained by removing the
<var>key</var>/priority association from the <var>psq</var>.  If <var>key</var> is not
in the queue: the returned search queue will be the same as the
original. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-contains?</b><var> psq key<a name="index-psq_002dcontains_003f-44"></a></var><br>
<blockquote><p>Return <code>#t</code> if there is an association for the given <var>key</var> in
<var>psq</var>, <code>#f</code> otherwise. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="psqs-priority"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#psqs-ranged">psqs ranged</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#psqs-map">psqs map</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#psqs">psqs</a>

</div>

<h3 class="section">5.3 Priority queue operations</h3>

<p>The following bindings are exported by the library <code>(pfds psqs)</code>.

<div class="defun">
&mdash; Function: <b>psq-min</b><var> psq<a name="index-psq_002dmin-45"></a></var><br>
<blockquote><p>Return the key of the minimum association in <var>psq</var>.  If the queue is
empty: an assertion violation is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-delete-min</b><var> : psq -&gt; psq<a name="index-psq_002ddelete_002dmin-46"></a></var><br>
<blockquote><p>Return the priority search queue obtained by removing the minimum
association in <var>psq</var>.  If the queue is empty: an assertion violation
is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-pop</b><var> psq<a name="index-psq_002dpop-47"></a></var><br>
<blockquote><p>Return 2 values: the minimum key and the priority search queue obtained
by removing the minimum association from <var>psq</var>.  If the queue is
empty: an assertion violation is raised. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="psqs-ranged"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#psqs-priority">psqs priority</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#psqs">psqs</a>

</div>

<h3 class="section">5.4 Ranged query functions</h3>

<p>The following bindings are exported by the library <code>(pfds psqs)</code>.

<div class="defun">
&mdash; Function: <b>psq-at-most</b><var> psq priority<a name="index-psq_002dat_002dmost-48"></a></var><br>
<blockquote><p>Return an alist containing all the associations in <var>psq</var> with
priority less than, or equal to, the given <var>priority</var>.  The returned
alist is ordered by key according to the predicate for <var>psq</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>psq-at-most-range</b><var> psq priority min-key max-key<a name="index-psq_002dat_002dmost_002drange-49"></a></var><br>
<blockquote><p>Similar to <code>psq-at-most</code>, but it also takes an upper and lower
bound, for the keys it will return.  These bounds are inclusive. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="fingertrees"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#sequences">sequences</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#psqs">psqs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 A simple general&ndash;purpose data structure</h2>

<p><a name="index-Library-_0040library_007bpfds-fingertrees_007d-50"></a><a name="index-g_t_0040library_007bpfds-fingertrees_007d_002c-library-51"></a>

   <p>Fingertrees are a generalised form of deque, that we can parametrise to
compute a value, called the &ldquo;measure&rdquo; of a fingertree.  This measure
will be updated incrementally as we add and remove elements from the
fingertree.  Among other things, this allows fingertrees to be used
where you otherwise might have written a custom data structure.

   <p>To compute the measure, fingertrees require pieces of information: a
converter, a combiner, and an identity.

     <ul>
<li>The <dfn>converter</dfn> is a procedure of one argument, that maps values in
the fingertree to other values which are used for computing the measure.

     <li>The <dfn>combiner</dfn> is a procedure of two arguments, and combines these
into one value representing them both.  A combiner must be associative
i.e.

     <pre class="example">          (combine A (combine B C)) == (combine (combine A B) C)
</pre>
     <p class="noindent">for all values <code>A</code>, <code>B</code> and <code>C</code>.

     <li>An <dfn>identity</dfn> is a value that represents the measure of an empty
fingertree.  It must obey the rule that <code>(combine X identity)</code>,
<code>(combine identity X)</code> and <code>X</code> are always the same. 
</ul>

   <p>To make things more concrete, a simple use of a fingertree is as a deque
that keeps a running total.  In this case, the converter can simply be
the function <code>(lambda (x) x)</code> if it is a deque of integers, the combiner
would be <code>+</code>, and the identity <code>0</code>.

<pre class="example">     (define l '(3 1 4 1 5 9))
     
     (define ft (list-&gt;fingertree l 0 + (lambda (x) x)))
     
     (fingertree-measure ft)
     &rArr; 23
     
     (fingertree-measure (fingertree-snoc ft 2))
     &rArr; 25
     
     (let-values (((head tail) (fingertree-uncons ft)))
       (fingertree-measure tail))
     &rArr; 20
</pre>
   <p>Mathematically speaking, the <strong>return type</strong> of the converter, the
combiner and the identity element are expected to form a monoid.

   <p>The following bindings are exported by the library <code>(pfds
fingertrees)</code>.

<div class="defun">
&mdash; Function: <b>make-fingertree</b><var> identity combine measure<a name="index-make_002dfingertree-52"></a></var><br>
<blockquote><p>Return a new fingertree, parametrised by the given monoid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree?</b><var> obj<a name="index-fingertree_003f-53"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a fingertree, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-empty?</b><var> fingertree<a name="index-fingertree_002dempty_003f-54"></a></var><br>
<blockquote><p>Return <code>#t</code> if there are no items in the fingertree, <code>#f</code>
otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-cons</b><var> item fingertree<a name="index-fingertree_002dcons-55"></a></var><br>
<blockquote><p>Return the new fingertree created by adding the <var>item</var> to the front
of <var>fingertree</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-snoc</b><var> fingertree item<a name="index-fingertree_002dsnoc-56"></a></var><br>
<blockquote><p>Return the new fingertree created by adding <var>item</var> to the end of
<var>fingertree</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-uncons</b><var> fingertree<a name="index-fingertree_002duncons-57"></a></var><br>
<blockquote><p>Returns 2 values: the item at the front of <var>fingertree</var>, and a new
fingertree containing all but the front element.  If <var>fingertree</var> is
empty: a <code>&amp;fingertree-empty</code> condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-unsnoc</b><var> fingertree<a name="index-fingertree_002dunsnoc-58"></a></var><br>
<blockquote><p>Return 2 values: a new fingertree containing all but the rear element of
<var>fingertree</var>, and the rear element itself.  If <var>fingertree</var> is
empty: a <code>&amp;fingertree-empty</code> condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-empty-condition?</b><var> condition<a name="index-fingertree_002dempty_002dcondition_003f-59"></a></var><br>
<blockquote><p>Return <code>#t</code> if the argument is a <code>&amp;fingertree-empty</code>
condition, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-append</b><var> fingertree1 fingertree2<a name="index-fingertree_002dappend-60"></a></var><br>
<blockquote><p>Return a new fingertree which contains all of the elements of
<var>fingertree1</var>, followed by all the elements of <var>fingertree2</var>. 
The arguments are assumed to be parametrised by the same monoid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;fingertree</b><var> list-of-items identity append convert<a name="index-list_002d_003efingertree-61"></a></var><br>
<blockquote><p>Return a fingertree containing all of the elements of the list argument,
in the same order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-&gt;list</b><var> fingertree<a name="index-fingertree_002d_003elist-62"></a></var><br>
<blockquote><p>Return a list of all the items in <var>fingertree</var>, in the order they
would be unconsed. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-measure</b><var> fingertree<a name="index-fingertree_002dmeasure-63"></a></var><br>
<blockquote><p>Return the measure of <var>fingertree</var>, as defined by <var>fingertree</var>'s
monoid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-split</b><var> predicate fingertree<a name="index-fingertree_002dsplit-64"></a></var><br>
<blockquote><p>Return 2 values: a new finger tree representing the largest prefix of
<var>fingertree</var> for which applying the <var>predicate</var> to it's
accumulated measure returns <code>#f</code>; is a new fingertree containing all
those elements not in the first fingertree.

        <p><var>predicate</var> must be a function accepting a single argument and
returning a boolean. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-split3</b><var> predicate fingertree<a name="index-fingertree_002dsplit3-65"></a></var><br>
<blockquote><p>Similar to <code>fingertree-split</code>, however, instead of returning the
remainder as the second argument, return the head of the remainder as
second value, and tail of the remainder as third value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-fold</b><var> combiner accum-base fingertree<a name="index-fingertree_002dfold-66"></a></var><br>
<blockquote><p>Return the value obtained by iterating the <var>combiner</var> procedure over
<var>fingertree</var> in left&ndash;to&ndash;right order.  This procedure takes two
arguments: the current value from <var>fingertree</var>, and an accumulator;
it's return value is used as accumulator for the next iteration.  The
initial value for the accumulator is given by the base argument. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-fold-right</b><var> combiner fingertree<a name="index-fingertree_002dfold_002dright-67"></a></var><br>
<blockquote><p>Similar to <code>fingertree-fold</code>, but iterate in right&ndash;to&ndash;left order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fingertree-reverse</b><var> fingertree<a name="index-fingertree_002dreverse-68"></a></var><br>
<blockquote><p>Return a new fingertree in which the items are in the opposite order
from <var>fingertree</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="sequences"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heaps">heaps</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#fingertrees">fingertrees</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Purely functional sequences</h2>

<p><a name="index-Library-_0040library_007bpfds-sequences_007d-69"></a><a name="index-g_t_0040library_007bpfds-sequences_007d_002c-library-70"></a>

   <p>Sequences are a general&ndash;purpose, variable&ndash;length collections, similar
to lists, however they support efficient addition and removal from both
ends, and random&ndash;access.  Like other Scheme collections, sequences are
zero&ndash;indexed.

   <p>The following bindings are exported by the library <code>(pfds
sequences)</code>.

<div class="defun">
&mdash; Function: <b>make-sequence</b><var><a name="index-make_002dsequence-71"></a></var><br>
<blockquote><p>Return a new empty sequence. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence</b><var> item <small class="dots">...</small><a name="index-sequence-72"></a></var><br>
<blockquote><p>Return a new sequence containing all of the argument items, in the given
order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence?</b><var> obj<a name="index-sequence_003f-73"></a></var><br>
<blockquote><p>Return <code>#t</code> if the argument is a sequence, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-empty?</b><var> sequence<a name="index-sequence_002dempty_003f-74"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>sequence</var> contains no items, <code>#f</code>
otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-size</b><var> sequence<a name="index-sequence_002dsize-75"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer representing the number of items in
<var>sequence</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-cons</b><var> item sequence<a name="index-sequence_002dcons-76"></a></var><br>
<blockquote><p>Return a new sequence created by adding <var>item</var> to the front of
<var>sequence</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-uncons</b><var> sequence<a name="index-sequence_002duncons-77"></a></var><br>
<blockquote><p>Return 2 values: the first item of <var>sequence</var>, and a new sequence
containing all but the first items.  If the sequence is empty: a
<code>&amp;sequence-empty</code> condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-snoc</b><var> sequence item<a name="index-sequence_002dsnoc-78"></a></var><br>
<blockquote><p>Return a new sequence created by adding <var>item</var> to the end of
<var>sequence</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-unsnoc</b><var> sequence<a name="index-sequence_002dunsnoc-79"></a></var><br>
<blockquote><p>Return 2 values: a new sequence containing all but the last item of
<var>sequence</var>, and the last item itself.  If <var>sequence</var> is empty: a
<code>&amp;sequence-empty</code> condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-empty-condition?</b><var> obj<a name="index-sequence_002dempty_002dcondition_003f-80"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;sequence-empty</code> condition,
<code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-append</b><var> sequence1 sequence2<a name="index-sequence_002dappend-81"></a></var><br>
<blockquote><p>Return a new sequence containing all the items of <var>sequence1</var>,
followed by all the items of <var>sequence2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;sequence</b><var> list-of-items<a name="index-list_002d_003esequence-82"></a></var><br>
<blockquote><p>Return a new sequence containing all the items from the given list, in
the same order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-&gt;list</b><var> sequence<a name="index-sequence_002d_003elist-83"></a></var><br>
<blockquote><p>Return a new list containing all the items of <var>sequence</var>, in the
same order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-split-at</b><var> sequence N<a name="index-sequence_002dsplit_002dat-84"></a></var><br>
<blockquote><p>Return 2 new sequences: the first containing the first <var>N</var> items of
<var>sequence</var>, the second containing the remaining items.  If <var>N</var>
is negative: return the empty sequence as the first value, and the
original sequence as the second value.  Similarly, if <var>N</var> is greater
than the size of <var>sequence</var>: return the original sequence as the
first value, and the empty sequence as the second value.

        <p>Consequently:

     <pre class="example">          (let-values (((a b) (sequence-split-at SEQ N)))
            (sequence-append a b))
</pre>
        <p class="noindent">is equivalent to <var>SEQ</var> for all sequences <var>SEQ</var>, and integers <var>N</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-take</b><var> sequence N<a name="index-sequence_002dtake-85"></a></var><br>
<blockquote><p>Return a new sequence containing the first <var>N</var> items of
<var>sequence</var>.  If <var>N</var> is negative: the empty sequence is returned. 
If <var>N</var> is larger than the size of <var>sequence</var>: the whole sequence
is returned. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-drop</b><var> sequence N<a name="index-sequence_002ddrop-86"></a></var><br>
<blockquote><p>Return a new sequence containing all but the first <var>N</var> items of
<var>sequence</var>.  If <var>N</var> is negative: the whole sequence is returned. 
If <var>N</var> is larger than the size of <var>sequence</var>: the empty sequence
is returned. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-ref</b><var> sequence index<a name="index-sequence_002dref-87"></a></var><br>
<blockquote><p>Return the item at the specified <var>index</var> in the sequence;
<var>index</var> must be a non&ndash;negative exact integer.  If <var>index</var> is
outside the range:

     <pre class="example">          0 &lt;= <var>index</var> &lt; (sequence-size <var>sequence</var>)
</pre>
        <p class="noindent">an assertion violation is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-set</b><var> sequence index item<a name="index-sequence_002dset-88"></a></var><br>
<blockquote><p>Return the new sequence obtained by replacing the item at the specified
<var>index</var> in <var>sequence</var> with the given <var>item</var>.  If <var>index</var>
is outside the range:

     <pre class="example">          0 &lt;= <var>index</var> &lt; (sequence-size <var>sequence</var>)
</pre>
        <p class="noindent">an assertion violation is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-fold</b><var> combiner accum-base sequence<a name="index-sequence_002dfold-89"></a></var><br>
<blockquote><p>Return the value obtained by iterating the <var>combiner</var> procedure over
<var>sequence</var> in left&ndash;to&ndash;right order.  The <var>combiner</var> procedure
takes two arguments: the value of the position in the sequence, and an
accumulator, and its return value is used as the value of the
accumulator for the next call.  The initial accumulator value is given
by the <var>accum-base</var> argument. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-fold-right</b><var> combiner accum-base sequence<a name="index-sequence_002dfold_002dright-90"></a></var><br>
<blockquote><p>Like <code>sequence-fold</code>, but the sequence is traversed in
right&ndash;to&ndash;left order, rather than left&ndash;to&ndash;right. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-reverse</b><var> sequence<a name="index-sequence_002dreverse-91"></a></var><br>
<blockquote><p>Return a new sequence containing all the item of <var>sequence</var>, in
reverse order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-map</b><var> mapper sequence<a name="index-sequence_002dmap-92"></a></var><br>
<blockquote><p>Return a new sequence obtained by applying the procedure <var>mapper</var> to
each item of <var>sequence</var> in turn. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>sequence-filter</b><var> predicate sequence<a name="index-sequence_002dfilter-93"></a></var><br>
<blockquote><p>Return a new sequence containing all the items of <var>sequence</var> for
which the <var>predicate</var> is true. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="heaps"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees">bbtrees</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#sequences">sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">8 Heaps</h2>

<p><a name="index-Library-_0040library_007bpfds-heaps_007d-94"></a><a name="index-g_t_0040library_007bpfds-heaps_007d_002c-library-95"></a>

   <p>For all the procedures: the argument <var>item&lt;</var> must be a procedure
accepting 2 arguments, being items from the heap, and returning
<code>#t</code> if the first is less than the second; if the collected items are
numbers: <var>item&lt;</var> can be <code>&lt;</code>; if the collected items are
strings: <var>item&lt;</var> can be <code>string&lt;?</code>.

   <p>The following bindings are exported by the library <code>(pfds heaps)</code>.

<div class="defun">
&mdash; Function: <b>make-heap</b><var> item&lt;<a name="index-make_002dheap-96"></a></var><br>
<blockquote><p>Return a new empty heap which uses the given ordering procedure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap</b><var> item&lt; item <small class="dots">...</small><a name="index-heap-97"></a></var><br>
<blockquote><p>Return a new heap, ordered by the procedure argument <var>item&lt;</var>, that
contains all the other arguments as items. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap?</b><var> obj<a name="index-heap_003f-98"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a heap, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-size</b><var> heap<a name="index-heap_002dsize-99"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer representing the number of items in
<var>heap</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-empty?</b><var> heap<a name="index-heap_002dempty_003f-100"></a></var><br>
<blockquote><p>Return <code>#t</code> if the heap contains no items, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-min</b><var> heap<a name="index-heap_002dmin-101"></a></var><br>
<blockquote><p>Return the minimum item in <var>heap</var>, according the heap's ordering
procedure.  If there are no items: a <code>&amp;heap-empty</code> condition is
raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-delete-min</b><var> heap<a name="index-heap_002ddelete_002dmin-102"></a></var><br>
<blockquote><p>Return a new heap containing all the items of <var>heap</var>, except for the
minimum argument, as determined by the heap's ordering procedure.  If
there are no items: a <code>&amp;heap-empty</code> condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-empty-condition?</b><var> obj<a name="index-heap_002dempty_002dcondition_003f-103"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a <code>&amp;heap-empty</code> condition,
<code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-pop</b><var> heap<a name="index-heap_002dpop-104"></a></var><br>
<blockquote><p>Return two values: the the minimum item in <var>heap</var>, and a heap
obtained by removing the minimum value from the original <var>heap</var>.  If
<var>heap</var> is empty: a <code>&amp;&amp;heap-empty</code> condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-insert</b><var> heap item<a name="index-heap_002dinsert-105"></a></var><br>
<blockquote><p>Return a new heap obtained by adding <var>item</var> to those in the
<var>heap</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-&gt;list</b><var> heap<a name="index-heap_002d_003elist-106"></a></var><br>
<blockquote><p>Return a list containing all the items of <var>heap</var>.  The items of the
list are ordered according to the heap's ordering procedure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;heap</b><var> list-of-items item&lt;<a name="index-list_002d_003eheap-107"></a></var><br>
<blockquote><p>Return a heap containing all the items of the given list, using the
procedure argument <var>item&lt;</var> to order them. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-merge</b><var> heap1 heap2<a name="index-heap_002dmerge-108"></a></var><br>
<blockquote><p>Return the heap containing all the items of the argument heaps.  The
argument heaps are assumed to be using the same ordering procedure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-sort</b><var> item&lt; list-of-items<a name="index-heap_002dsort-109"></a></var><br>
<blockquote><p>Return a new list that is a permutation of the <var>list-of-items</var>, such
that all the items are ordered by the given procedure <var>item&lt;</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>heap-ordering-procedure</b><var> heap<a name="index-heap_002dordering_002dprocedure-110"></a></var><br>
<blockquote><p>Return the ordering procedure used internally by <var>heap</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="bbtrees"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#sets">sets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heaps">heaps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">9 Bounded Balance trees</h2>

<p><a name="index-Library-_0040library_007bpfds-bbtrees_007d-111"></a><a name="index-g_t_0040library_007bpfds-bbtrees_007d_002c-library-112"></a>

<ul class="menu">
<li><a accesskey="1" href="#bbtrees-conventions">bbtrees conventions</a>:          Documentation and <acronym>API</acronym> conventions. 
<li><a accesskey="2" href="#bbtrees-core">bbtrees core</a>:                 Constructors and predicates. 
<li><a accesskey="3" href="#bbtrees-inspection">bbtrees inspection</a>:           Inspection functions. 
<li><a accesskey="4" href="#bbtrees-setget">bbtrees setget</a>:               Setters and getters. 
<li><a accesskey="5" href="#bbtrees-traversing">bbtrees traversing</a>:           Traversing functions. 
<li><a accesskey="6" href="#bbtrees-set">bbtrees set</a>:                  Set operations. 
<li><a accesskey="7" href="#bbtrees-index">bbtrees index</a>:                Indexing operations. 
</ul>

<!-- page -->
<div class="node">
<a name="bbtrees-conventions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees-core">bbtrees core</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.1 Documentation and <acronym>API</acronym> conventions</h3>

<p>The following conventions for function arguments hold:

     <dl>
<dt><var>bbtree</var><dd>It is the instance of bbtree the function acts upon.  Bbtree arguments
are <strong>never</strong> mutated.

     <br><dt><var>key</var><dd>The argument is an association key.  For all procedures which take a
<var>key</var> as an argument, the <var>key</var> must be comparable with the
ordering procedure of the bbtree.

     <br><dt><var>item&lt;</var><dd>The argument <var>item&lt;</var> must be the ordering procedure: a predicate
function accepting two arguments and returning a boolean, <code>#t</code> if the
first argument is strictly less than the second.  For numeric collected
items: <var>item&lt;</var> can be <code>&lt;</code>; for string collected items:
<var>item&lt;</var> can be <code>string&lt;?</code>. 
</dl>

<!-- page -->
<div class="node">
<a name="bbtrees-core"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees-inspection">bbtrees inspection</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees-conventions">bbtrees conventions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.2 Constructors and predicates</h3>

<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.

<div class="defun">
&mdash; Function: <b>make-bbtree</b><var> item&lt;<a name="index-make_002dbbtree-113"></a></var><br>
<blockquote><p>Build and return a new, empty bbtree.  Bbtrees derived from the returned
one will use the procedure argument <var>item&lt;</var> for ordering keys. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree?</b><var> any<a name="index-bbtree_003f-114"></a></var><br>
<blockquote><p>Return <code>#t</code> if the argument is a bbtree, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-&gt;alist</b><var> bbtree<a name="index-bbtree_002d_003ealist-115"></a></var><br>
<blockquote><p>Return the key/value associations from <var>bbtree</var> as a list of pairs. 
The list returned is in sorted order according to the ordering procedure
of <var>bbtree</var>.  A consequence of this is that one could write a sort
procedure for lists of pairs as:

     <pre class="example">          (define (alist-sort alist &lt;)
            (bbtree-&gt;alist (alist-&gt;bbtree alist &lt;)))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>alist-&gt;bbtree</b><var> alist item&lt;<a name="index-alist_002d_003ebbtree-116"></a></var><br>
<blockquote><p>Return the bbtree containing each of the key/value pairs in <var>alist</var>,
using the <var>item&lt;</var> argument as the ordering procedure.

     <pre class="example">          (import (vicare)
            (pfds bbtrees))
          
          (alist-&gt;bbtree '(("foo" . 10) ("bar" . 12))
                         string&lt;?)
          &rArr; #[bbtree]
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="bbtrees-inspection"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees-setget">bbtrees setget</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees-core">bbtrees core</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.3 Inspection functions</h3>

<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.

<div class="defun">
&mdash; Function: <b>bbtree-size</b><var> bbtree<a name="index-bbtree_002dsize-117"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer representing number of elements in a
bbtree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-contains?</b><var> bbtree key<a name="index-bbtree_002dcontains_003f-118"></a></var><br>
<blockquote><p>Return <code>#t</code> if there is association for <var>key</var> in <var>bbtree</var>,
<code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-ordering-procedure</b><var> bbtree<a name="index-bbtree_002dordering_002dprocedure-119"></a></var><br>
<blockquote><p>Return the ordering procedure used internally to order <var>bbtree</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-keys</b><var> bbtree<a name="index-bbtree_002dkeys-120"></a></var><br>
<blockquote><p>Return a list containing all the keys of <var>bbtree</var>.  The keys are
sorted according to the bbtree's ordering procedure.

     <pre class="example">          (import (vicare)
            (pfds bbtrees))
          
          (bbtree-keys (alist-&gt;bbtree '(("one" . 1) ("two" . 2))
                                      string&lt;?))
          &rArr; ("one" "two")
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="bbtrees-setget"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees-traversing">bbtrees traversing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees-inspection">bbtrees inspection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.4 Setters and getters</h3>

<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.

<div class="defun">
&mdash; Function: <b>bbtree-ref</b><var> bbtree key<a name="index-bbtree_002dref-121"></a></var><br>
&mdash; Function: <b>bbtree-ref</b><var> bbtree key default<a name="index-bbtree_002dref-122"></a></var><br>
<blockquote><p>Return the value associated with the <var>key</var> in the <var>bbtree</var>.  If
the value is not in the tree, then, if the optional third argument is
passed, it is returned, otherwise an <code>&amp;assertion-violation</code>
condition is raised. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-set</b><var> bbtree key new-value<a name="index-bbtree_002dset-123"></a></var><br>
<blockquote><p>Return a new bbtree with <var>key</var> associated to <var>new-value</var>.  If
the <var>key</var> is already in <var>bbtree</var>, its associated value is
replaced with the new <var>new-value</var> in the returned bbtree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-update</b><var> bbtree key proc default<a name="index-bbtree_002dupdate-124"></a></var><br>
<blockquote><p>Return a new bbtree with the value associated to <var>key</var> updated
according to the update procedure <var>proc</var>.  If <var>key</var> was not
already in <var>bbtree</var>, the update procedure is applied to
<var>default</var>, and <var>key</var> is associated to the resulting value.

        <p>The update procedure <var>proc</var> must accept a single argument, being the
old value, and return a single value, being the new value.

     <pre class="example">          (import (vicare)
            (pfds bbtrees))
          
          (let* ((bb1   (alist-&gt;bbtree '(("foo" . 10)
                                         ("bar" . 12))
                                       string&lt;?))
                 (dflt  0)
                 (bb2   (bbtree-update bb1 "foo" add1 dflt)))
            (bbtree-&gt;alist bb2))
          &rArr; (("bar" . 12) ("foo" . 11))
          
          (let* ((bb1  (alist-&gt;bbtree '(("foo" . 10)
                                        ("bar" . 12))
                                      string&lt;?))
                 (dflt 0)
                 (bb2  (bbtree-update bb "baz" add1 dflt)))
            (bbtree-&gt;alist bb2))
          &rArr; (("bar" . 12) ("baz" . 1) ("foo" . 10))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-delete</b><var> bbtree key<a name="index-bbtree_002ddelete-125"></a></var><br>
<blockquote><p>Return a new bbtree with the <var>key</var> and its associated value removed. 
If <var>key</var> is not in <var>bbtree</var>: the returned bbtree is a copy of
the original. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="bbtrees-traversing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees-set">bbtrees set</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees-setget">bbtrees setget</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.5 Traversing functions</h3>

<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.

<div class="defun">
&mdash; Function: <b>bbtree-traverse</b><var> traverser accum-base bbtree<a name="index-bbtree_002dtraverse-126"></a></var><br>
<blockquote><p>A general tree traversal procedure.  Return the value of applying the
<var>traverser</var> procedure to: the current node's key, the current node's
value, a procedure to traverse the left subtree, a procedure to traverse
the right subtree, and an accumulator value.

        <p>The <var>traverser</var> procedure must look like:

     <pre class="example">          (define (traverser key value left-traverse right-traverse accum)
            ---)
</pre>
        <p class="noindent">and return the new accumulator value.  The subtree traversal procedures
are generated by <code>bbtree-traverse</code>; both take the current
accumulator value as argument, return the new accumulator value, and
call <code>bbtree-traverse</code> recursively on the appropriate subtree. 
<var>traverser</var> must call both <var>left-traverse</var> and
<var>right-traverse</var>:

          <ul>
<li>If <var>left-traverse</var> is called first: the left subtree is visited
first.

          <li>If <var>right-traverse</var> is called first: the right subtree is visited
first. 
</ul>

        <p>To perform a left&ndash;first preorder iteration:

     <pre class="example">          (import (rnrs)
            (pfds bbtrees))
          
          (let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                                     '(0 1 2 3 4 5 6 7 8 9))
                                   &lt;)))
            (define (left-first key value left right accum)
              (right (left (cons key accum))))
            (bbtree-traverse left-first '() bb))
          &rArr; (9 8 6 7 4 5 2 0 1 3)
</pre>
        <p class="noindent">and to perform a right&ndash;first preorder iteration:

     <pre class="example">          (import (rnrs)
            (pfds bbtrees))
          
          (let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                                     '(0 1 2 3 4 5 6 7 8 9))
                                   &lt;)))
            (define (right-first key value left right accum)
              (left (right (cons key accum))))
            (bbtree-traverse right-first '() bb))
          &rArr; (0 2 1 4 6 9 8 7 5 3)
</pre>
        <p>This function is mostly useful for implementing other, more specific
tree traversal procedures.  For example:

     <pre class="example">          (define (l-to-r-pre-order cons base bbtree)
            (bbtree-traverse (lambda (key value left right accum)
                               (right (left (cons* key value accum))))
                             accum
                             bbtree))
</pre>
        <p class="noindent">implements a left&ndash;to&ndash;right pre&ndash;order traversal variant of
<code>bbtree-fold</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-fold</b><var> combine accum-base bbtree<a name="index-bbtree_002dfold-127"></a></var><br>
<blockquote><p>Return the value obtained by iterating the <var>combine</var> procedure over
each node in the tree.  The combine procedure takes 3 arguments: the key
and value of the current node, and an accumulator value; its return
value is used as the accumulator value for the next node.  The initial
accumulator value is provided by the <var>accum-base</var> argument.

        <p><code>bbtree-fold</code> performs a left&ndash;to&ndash;right in&ndash;order traversal or
&ldquo;minimum key to maximum key&rdquo;.

     <pre class="example">          (import (rnrs)
            (pfds bbtrees))
          
          (let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                                     '(0 1 2 3 4 5 6 7 8 9))
                                   &lt;)))
            ;;Later keys are pushed on the head.
            (bbtree-fold (lambda (key value accum)
                           (cons key accum))
                         '()
                         bb))
          &rArr; (9 8 7 6 5 4 3 2 1 0)
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-fold-right</b><var> combine accum-base bbtree<a name="index-bbtree_002dfold_002dright-128"></a></var><br>
<blockquote><p>Like <code>bbtree-fold</code>, but it performs a right&ndash;to&ndash;left in&ndash;order
traversal instead (i.e. maximum to minimum).

     <pre class="example">          (import (rnrs)
            (pfds bbtrees))
          
          (let ((bb (alist-&gt;bbtree (map (lambda (x) (cons x x))
                                     '(0 1 2 3 4 5 6 7 8 9))
                                   &lt;)))
            ;;Later keys are pushed on the head.
            (bbtree-fold-right (lambda (key value accum)
                                 (cons key accum))
                               '()
                               bb))
          &rArr; (0 1 2 3 4 5 6 7 8 9)
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-map</b><var> func bbtree<a name="index-bbtree_002dmap-129"></a></var><br>
<blockquote><p>Return a new bbtree obtained by updating the value of each node in
<var>bbtree</var> with the result of applying the procedure to its value. 
<var>func</var> must take a single argument, being the original value, and
return a single value, being the new value.

     <pre class="example">          (import (rnrs)
            (pfds bbtrees))
          
          (define bb
            (alist-&gt;bbtree '((#\a . foo)
                             (#\b . bar)
                             (#\c . baz)
                             (#\d . quux))
                           char&lt;?))
          
          (bbtree-&gt;alist (bbtree-map symbol-&gt;string bb))
          &rArr; ((#\a . "foo")
              (#\b . "bar")
              (#\c . "baz")
              (#\d . "quux"))
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="bbtrees-set"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bbtrees-index">bbtrees index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees-traversing">bbtrees traversing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.6 Set operations</h3>

<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.

<div class="defun">
&mdash; Function: <b>bbtree-union</b><var> bbtree1 bbtree2<a name="index-bbtree_002dunion-130"></a></var><br>
<blockquote><p>Return a bbtree containing the union of the associations in
<var>bbtree1</var> and <var>bbtree2</var>.  Where the same key occurs in both:
the value in <var>bbtree1</var> is preferred. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-difference</b><var> bbtree1 bbtree2<a name="index-bbtree_002ddifference-131"></a></var><br>
<blockquote><p>Return a bbtree containing the all the associations in <var>bbtree1</var>,
which do not occur in <var>bbtree2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-intersection</b><var> bbtree1 bbtree2<a name="index-bbtree_002dintersection-132"></a></var><br>
<blockquote><p>Return a bbtree containing all the associations which appear in both
<var>bbtree1</var> and <var>bbtree2</var>.  The values in <var>bbtree1</var> are
preferred over those in <var>bbtree2</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="bbtrees-index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees-set">bbtrees set</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#bbtrees">bbtrees</a>

</div>

<h3 class="section">9.7 Indexing operations</h3>

<p>The following bindings are exported by the library <code>(pfds
bbtrees)</code>.

<div class="defun">
&mdash; Function: <b>bbtree-index</b><var> bbtree key<a name="index-bbtree_002dindex-133"></a></var><br>
<blockquote><p>Return a non&ndash;negative integer representing the index of <var>key</var> in
the <var>bbtree</var>.  The index is an integer between <code>0</code> and
<var>size</var><code> - 1</code>, where <var>size</var> is the number of associations in
<var>bbtree</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>bbtree-ref/index</b><var> bbtree index<a name="index-bbtree_002dref_002findex-134"></a></var><br>
<blockquote><p>Return 2 values: the key and value of the association in <var>bbtree</var> at
the given <var>index</var>.  <var>index</var> must be a non&ndash;negative integer
between <code>0</code> and <var>size</var><code> - 1</code>, where <var>size</var> is the
number of associations in <var>bbtree</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="sets"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Package-License">Package License</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bbtrees">bbtrees</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">10 Purely functional sets</h2>

<p><a name="index-Library-_0040library_007bpfds-sets_007d-135"></a><a name="index-g_t_0040library_007bpfds-sets_007d_002c-library-136"></a>

   <p>For all the procedures: the argument <var>item&lt;</var> must be the ordering
procedure: a predicate function accepting two arguments and returning a
boolean, <code>#t</code> if the first argument is strictly less than the second. 
For numeric collected items: <var>item&lt;</var> can be <code>&lt;</code>; for string
collected items: <var>item&lt;</var> can be <code>string&lt;?</code>.

   <p>The following bindings are exported by the library <code>(pfds sets)</code>.

<div class="defun">
&mdash; Function: <b>make-set</b><var> item&lt;<a name="index-make_002dset-137"></a></var><br>
<blockquote><p>Return a new empty set ordered by the procedure <var>item&lt;</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set?</b><var> obj<a name="index-set_003f-138"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>obj</var> is a set, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-member?</b><var> set item<a name="index-set_002dmember_003f-139"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>item</var> is in <var>set</var>, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-insert</b><var> set item<a name="index-set_002dinsert-140"></a></var><br>
<blockquote><p>Return a new set created by inserting <var>item</var> into <var>set</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-remove</b><var> set item<a name="index-set_002dremove-141"></a></var><br>
<blockquote><p>Return a new set created by removing <var>item</var> from <var>set</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-size</b><var> set<a name="index-set_002dsize-142"></a></var><br>
<blockquote><p>Return an exact integer representing the number of items in <var>set</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set&lt;?</b><var> set1 set2<a name="index-set_003c_003f-143"></a></var><br>
&mdash; Function: <b>proper-subset?</b><var> set1 set2<a name="index-proper_002dsubset_003f-144"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>set1</var> is a proper subset of <var>set2</var>, <code>#f</code>
otherwise.  That is, if all items of <var>set1</var> are in <var>set2</var>, and
there is at least one item of <var>set2</var> not in <var>set1</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set&lt;=?</b><var> set1 set2<a name="index-set_003c_003d_003f-145"></a></var><br>
&mdash; Function: <b>subset?</b><var> set1 set2<a name="index-subset_003f-146"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>set1</var> is a subset of <var>set2</var>, <code>#f</code>
otherwise, i.e. if all items of <var>set1</var> are in <var>set2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set=?</b><var> set1 set2<a name="index-set_003d_003f-147"></a></var><br>
<blockquote><p>Return <code>#t</code> if every item of <var>set1</var> is in <var>set2</var>, and vice
versa, <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set&gt;=?</b><var> set1 set2<a name="index-set_003e_003d_003f-148"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>set2</var> is a subset of <var>set1</var>, <code>#f</code>
otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set&gt;?</b><var> set1 set2<a name="index-set_003e_003f-149"></a></var><br>
<blockquote><p>Return <code>#t</code> if <var>set2</var> is a proper subset of <var>set1</var>, <code>#f</code>
otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-map</b><var> mapper set<a name="index-set_002dmap-150"></a></var><br>
<blockquote><p>Return the new set created by applying the procedure <var>mapper</var> to
each item of <var>set</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-fold</b><var> combine accum-base set<a name="index-set_002dfold-151"></a></var><br>
<blockquote><p>Return the value obtained by iterating the procedure <var>combine</var> over
each item of <var>set</var> and an accumulator value (in this order).  The
value of the accumulator is initially <var>accum-base</var>, and the return
value of <var>combine</var> is used as the accumulator for the next
iteration. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>list-&gt;set</b><var> list-of-items item&lt;<a name="index-list_002d_003eset-152"></a></var><br>
<blockquote><p>Return the set containing all the items of the given list, ordered by
<var>item&lt;</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-&gt;list</b><var> set<a name="index-set_002d_003elist-153"></a></var><br>
<blockquote><p>Return all the items of <var>set</var> as a list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-union</b><var> set1 set2<a name="index-set_002dunion-154"></a></var><br>
<blockquote><p>Return the union of <var>set1</var> and <var>set2</var>, i.e. a new set that
contains all items of <var>set1</var> and <var>set2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-intersection</b><var> set1 set2<a name="index-set_002dintersection-155"></a></var><br>
<blockquote><p>Return the intersection of <var>set1</var> and <var>set22</var>, i.e. a new set
of all items that are in both <var>set1</var> and <var>set2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-difference</b><var> set1 set2<a name="index-set_002ddifference-156"></a></var><br>
<blockquote><p>Return the difference of <var>set1</var> and <var>set2</var>, i.e. the set of all
items in <var>set1</var> that are <strong>not</strong> in <var>set2</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>set-ordering-procedure</b><var> set<a name="index-set_002dordering_002dprocedure-157"></a></var><br>
<blockquote><p>Return the ordering procedure used internally by <var>set</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="Package-License"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#References">References</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#sets">sets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">11 Package license</h2>

<p>Copyright &copy; 2011, 2012 by Ian Price <a href="mailto:ianprice90@googlemail.com">ianprice90@googlemail.com</a>

   <p>All rights reserved.

   <p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

     <ol type=1 start=1>
<li>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.

     <li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

     <li>The name of the author may not be used to endorse or promote products
derived from this software without specific prior written permission.
        </ol>

   <p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR &ldquo;AS IS&rdquo; AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.

<!-- page -->
<div class="node">
<a name="References"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#concept-index">concept index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Package-License">Package License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A Bibliography and references</h2>

<p>The queues and deques are based on the paper:

   <blockquote>
Chris Okasaki.  &ldquo;Simple and Efficient Purely Functional Queues and
Deques&rdquo;.  <a href="http://www.eecs.usma.edu/webs/people/okasaki/pubs.html#jfp95">http://www.eecs.usma.edu/webs/people/okasaki/pubs.html#jfp95</a>. 
</blockquote>

   <p>The bbtrees and sets are based on the paper:

   <blockquote>
Stephen Adams.  &ldquo;Implementing Sets Efficiently in a Functional
Language&rdquo;.  <a href="http://groups.csail.mit.edu/mac/users/adams/BB/92-10.ps">http://groups.csail.mit.edu/mac/users/adams/BB/92-10.ps</a>. 
</blockquote>

   <p>Dlists are a well known trick in the functional programming community,
going back to at least:

   <blockquote>
John Hughes.  &ldquo;A Novel Representation of Lists and its application to
the Function <em>Reverse</em>&rdquo;.  1984. 
<a href="http://www.cs.tufts.edu/~nr/cs257/archive/john-hughes/lists.pdf">http://www.cs.tufts.edu/~nr/cs257/archive/john-hughes/lists.pdf</a>
</blockquote>

<p class="noindent">although he does not give them this name.  The trick is likely even
older than that (he points to a paper by Bird), though I have not the
knowledge to confirm this.

   <p>The implementation of priority search queues is described in:

   <blockquote>
Ralf Hinze.  &ldquo;A Simple Implementation Technique for Priority Search
Queues&rdquo;. 
<a href="http://www.cs.ox.ac.uk/people/ralf.hinze/publications/UU-CS-2001-09.pdf">http://www.cs.ox.ac.uk/people/ralf.hinze/publications/UU-CS-2001-09.pdf</a>. 
</blockquote>

   <p>The heaps use a height&ndash;biased leftist tree implementation.  Finger
trees are described in.

   <blockquote>
Ross Paterson and Ralf Hinze.  &ldquo;Finger trees: a simple general-purpose
data structure&rdquo;. 
<a href="http://www.soi.city.ac.uk/~ross/papers/FingerTree.html">http://www.soi.city.ac.uk/~ross/papers/FingerTree.html</a>. 
</blockquote>

<!--  -->
<h5 class="subsubheading">Thanks</h5>

<p>Thanks to Llewellyn Pritchard (<a href="https://github.com/leppie">https://github.com/leppie</a>)
for testing this on IronScheme
(<a href="https://ironscheme.codeplex.com/">https://ironscheme.codeplex.com/</a>), and to Andy Wingo
(<a href="http://wingolog.org/">http://wingolog.org/</a>) for pointing out priority search
queues to me, and prodding me into implementing them.

<!-- page -->
<div class="node">
<a name="concept-index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#function-index">function index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#References">References</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B An entry for each concept</h2>

<ul class="index-cp" compact>
<li><a href="#index-g_t_0040library_007bpfds-bbtrees_007d_002c-library-112"><code>(pfds bbtrees)</code>, library</a>: <a href="#bbtrees">bbtrees</a></li>
<li><a href="#index-g_t_0040library_007bpfds-deques_007d_002c-library-22"><code>(pfds deques)</code>, library</a>: <a href="#deques">deques</a></li>
<li><a href="#index-g_t_0040library_007bpfds-dlists_007d_002c-library-2"><code>(pfds dlists)</code>, library</a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-g_t_0040library_007bpfds-fingertrees_007d_002c-library-51"><code>(pfds fingertrees)</code>, library</a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-g_t_0040library_007bpfds-heaps_007d_002c-library-95"><code>(pfds heaps)</code>, library</a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-g_t_0040library_007bpfds-psqs_007d_002c-library-35"><code>(pfds psqs)</code>, library</a>: <a href="#psqs">psqs</a></li>
<li><a href="#index-g_t_0040library_007bpfds-queues_007d_002c-library-11"><code>(pfds queues)</code>, library</a>: <a href="#queues">queues</a></li>
<li><a href="#index-g_t_0040library_007bpfds-sequences_007d_002c-library-70"><code>(pfds sequences)</code>, library</a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-g_t_0040library_007bpfds-sets_007d_002c-library-136"><code>(pfds sets)</code>, library</a>: <a href="#sets">sets</a></li>
<li><a href="#index-Library-_0040library_007bpfds-bbtrees_007d-111">Library <code>(pfds bbtrees)</code></a>: <a href="#bbtrees">bbtrees</a></li>
<li><a href="#index-Library-_0040library_007bpfds-deques_007d-21">Library <code>(pfds deques)</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-Library-_0040library_007bpfds-dlists_007d-1">Library <code>(pfds dlists)</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-Library-_0040library_007bpfds-fingertrees_007d-50">Library <code>(pfds fingertrees)</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-Library-_0040library_007bpfds-heaps_007d-94">Library <code>(pfds heaps)</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-Library-_0040library_007bpfds-psqs_007d-34">Library <code>(pfds psqs)</code></a>: <a href="#psqs">psqs</a></li>
<li><a href="#index-Library-_0040library_007bpfds-queues_007d-10">Library <code>(pfds queues)</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-Library-_0040library_007bpfds-sequences_007d-69">Library <code>(pfds sequences)</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-Library-_0040library_007bpfds-sets_007d-135">Library <code>(pfds sets)</code></a>: <a href="#sets">sets</a></li>
</ul><div class="node">
<a name="function-index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#variable-index">variable index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#concept-index">concept index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix C An entry for each function.</h2>



<ul class="index-fn" compact>
<li><a href="#index-alist_002d_003ebbtree-116"><code>alist-&gt;bbtree</code></a>: <a href="#bbtrees-core">bbtrees core</a></li>
<li><a href="#index-bbtree_002d_003ealist-115"><code>bbtree-&gt;alist</code></a>: <a href="#bbtrees-core">bbtrees core</a></li>
<li><a href="#index-bbtree_002dcontains_003f-118"><code>bbtree-contains?</code></a>: <a href="#bbtrees-inspection">bbtrees inspection</a></li>
<li><a href="#index-bbtree_002ddelete-125"><code>bbtree-delete</code></a>: <a href="#bbtrees-setget">bbtrees setget</a></li>
<li><a href="#index-bbtree_002ddifference-131"><code>bbtree-difference</code></a>: <a href="#bbtrees-set">bbtrees set</a></li>
<li><a href="#index-bbtree_002dfold-127"><code>bbtree-fold</code></a>: <a href="#bbtrees-traversing">bbtrees traversing</a></li>
<li><a href="#index-bbtree_002dfold_002dright-128"><code>bbtree-fold-right</code></a>: <a href="#bbtrees-traversing">bbtrees traversing</a></li>
<li><a href="#index-bbtree_002dindex-133"><code>bbtree-index</code></a>: <a href="#bbtrees-index">bbtrees index</a></li>
<li><a href="#index-bbtree_002dintersection-132"><code>bbtree-intersection</code></a>: <a href="#bbtrees-set">bbtrees set</a></li>
<li><a href="#index-bbtree_002dkeys-120"><code>bbtree-keys</code></a>: <a href="#bbtrees-inspection">bbtrees inspection</a></li>
<li><a href="#index-bbtree_002dmap-129"><code>bbtree-map</code></a>: <a href="#bbtrees-traversing">bbtrees traversing</a></li>
<li><a href="#index-bbtree_002dordering_002dprocedure-119"><code>bbtree-ordering-procedure</code></a>: <a href="#bbtrees-inspection">bbtrees inspection</a></li>
<li><a href="#index-bbtree_002dref-121"><code>bbtree-ref</code></a>: <a href="#bbtrees-setget">bbtrees setget</a></li>
<li><a href="#index-bbtree_002dref_002findex-134"><code>bbtree-ref/index</code></a>: <a href="#bbtrees-index">bbtrees index</a></li>
<li><a href="#index-bbtree_002dset-123"><code>bbtree-set</code></a>: <a href="#bbtrees-setget">bbtrees setget</a></li>
<li><a href="#index-bbtree_002dsize-117"><code>bbtree-size</code></a>: <a href="#bbtrees-inspection">bbtrees inspection</a></li>
<li><a href="#index-bbtree_002dtraverse-126"><code>bbtree-traverse</code></a>: <a href="#bbtrees-traversing">bbtrees traversing</a></li>
<li><a href="#index-bbtree_002dunion-130"><code>bbtree-union</code></a>: <a href="#bbtrees-set">bbtrees set</a></li>
<li><a href="#index-bbtree_002dupdate-124"><code>bbtree-update</code></a>: <a href="#bbtrees-setget">bbtrees setget</a></li>
<li><a href="#index-bbtree_003f-114"><code>bbtree?</code></a>: <a href="#bbtrees-core">bbtrees core</a></li>
<li><a href="#index-deque_002d_003elist-32"><code>deque-&gt;list</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-deque_002dempty_002dcondition_003f-31"><code>deque-empty-condition?</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-deque_002dempty_003f-26"><code>deque-empty?</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-deque_002dlength-25"><code>deque-length</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-deque_003f-24"><code>deque?</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-dequeue-17"><code>dequeue</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-dequeue_002dfront-29"><code>dequeue-front</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-dequeue_002drear-30"><code>dequeue-rear</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-dlist-3"><code>dlist</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-dlist_002d_003elist-8"><code>dlist-&gt;list</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-dlist_002dappend-7"><code>dlist-append</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-dlist_002dcons-5"><code>dlist-cons</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-dlist_002dsnoc-6"><code>dlist-snoc</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-dlist_003f-4"><code>dlist?</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-enqueue-16"><code>enqueue</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-enqueue_002dfront-27"><code>enqueue-front</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-enqueue_002drear-28"><code>enqueue-rear</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-fingertree_002d_003elist-62"><code>fingertree-&gt;list</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dappend-60"><code>fingertree-append</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dcons-55"><code>fingertree-cons</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dempty_002dcondition_003f-59"><code>fingertree-empty-condition?</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dempty_003f-54"><code>fingertree-empty?</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dfold-66"><code>fingertree-fold</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dfold_002dright-67"><code>fingertree-fold-right</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dmeasure-63"><code>fingertree-measure</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dreverse-68"><code>fingertree-reverse</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dsnoc-56"><code>fingertree-snoc</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dsplit-64"><code>fingertree-split</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dsplit3-65"><code>fingertree-split3</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002duncons-57"><code>fingertree-uncons</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_002dunsnoc-58"><code>fingertree-unsnoc</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-fingertree_003f-53"><code>fingertree?</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-heap-97"><code>heap</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002d_003elist-106"><code>heap-&gt;list</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002ddelete_002dmin-102"><code>heap-delete-min</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dempty_002dcondition_003f-103"><code>heap-empty-condition?</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dempty_003f-100"><code>heap-empty?</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dinsert-105"><code>heap-insert</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dmerge-108"><code>heap-merge</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dmin-101"><code>heap-min</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dordering_002dprocedure-110"><code>heap-ordering-procedure</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dpop-104"><code>heap-pop</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dsize-99"><code>heap-size</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_002dsort-109"><code>heap-sort</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-heap_003f-98"><code>heap?</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-list_002d_003edeque-33"><code>list-&gt;deque</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-list_002d_003edlist-9"><code>list-&gt;dlist</code></a>: <a href="#dlists">dlists</a></li>
<li><a href="#index-list_002d_003efingertree-61"><code>list-&gt;fingertree</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-list_002d_003eheap-107"><code>list-&gt;heap</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-list_002d_003equeue-20"><code>list-&gt;queue</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-list_002d_003esequence-82"><code>list-&gt;sequence</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-list_002d_003eset-152"><code>list-&gt;set</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-make_002dbbtree-113"><code>make-bbtree</code></a>: <a href="#bbtrees-core">bbtrees core</a></li>
<li><a href="#index-make_002ddeque-23"><code>make-deque</code></a>: <a href="#deques">deques</a></li>
<li><a href="#index-make_002dfingertree-52"><code>make-fingertree</code></a>: <a href="#fingertrees">fingertrees</a></li>
<li><a href="#index-make_002dheap-96"><code>make-heap</code></a>: <a href="#heaps">heaps</a></li>
<li><a href="#index-make_002dpsq-36"><code>make-psq</code></a>: <a href="#psqs-basic">psqs basic</a></li>
<li><a href="#index-make_002dqueue-12"><code>make-queue</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-make_002dsequence-71"><code>make-sequence</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-make_002dset-137"><code>make-set</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-proper_002dsubset_003f-144"><code>proper-subset?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-psq_002dat_002dmost-48"><code>psq-at-most</code></a>: <a href="#psqs-ranged">psqs ranged</a></li>
<li><a href="#index-psq_002dat_002dmost_002drange-49"><code>psq-at-most-range</code></a>: <a href="#psqs-ranged">psqs ranged</a></li>
<li><a href="#index-psq_002dcontains_003f-44"><code>psq-contains?</code></a>: <a href="#psqs-map">psqs map</a></li>
<li><a href="#index-psq_002ddelete-43"><code>psq-delete</code></a>: <a href="#psqs-map">psqs map</a></li>
<li><a href="#index-psq_002ddelete_002dmin-46"><code>psq-delete-min</code></a>: <a href="#psqs-priority">psqs priority</a></li>
<li><a href="#index-psq_002dempty_003f-38"><code>psq-empty?</code></a>: <a href="#psqs-basic">psqs basic</a></li>
<li><a href="#index-psq_002dmin-45"><code>psq-min</code></a>: <a href="#psqs-priority">psqs priority</a></li>
<li><a href="#index-psq_002dpop-47"><code>psq-pop</code></a>: <a href="#psqs-priority">psqs priority</a></li>
<li><a href="#index-psq_002dref-40"><code>psq-ref</code></a>: <a href="#psqs-map">psqs map</a></li>
<li><a href="#index-psq_002dset-41"><code>psq-set</code></a>: <a href="#psqs-map">psqs map</a></li>
<li><a href="#index-psq_002dsize-39"><code>psq-size</code></a>: <a href="#psqs-basic">psqs basic</a></li>
<li><a href="#index-psq_002dupdate-42"><code>psq-update</code></a>: <a href="#psqs-map">psqs map</a></li>
<li><a href="#index-psq_003f-37"><code>psq?</code></a>: <a href="#psqs-basic">psqs basic</a></li>
<li><a href="#index-queue_002d_003elist-19"><code>queue-&gt;list</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-queue_002dempty_002dcondition_003f-18"><code>queue-empty-condition?</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-queue_002dempty_003f-15"><code>queue-empty?</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-queue_002dlength-14"><code>queue-length</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-queue_003f-13"><code>queue?</code></a>: <a href="#queues">queues</a></li>
<li><a href="#index-sequence-72"><code>sequence</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002d_003elist-83"><code>sequence-&gt;list</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dappend-81"><code>sequence-append</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dcons-76"><code>sequence-cons</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002ddrop-86"><code>sequence-drop</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dempty_002dcondition_003f-80"><code>sequence-empty-condition?</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dempty_003f-74"><code>sequence-empty?</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dfilter-93"><code>sequence-filter</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dfold-89"><code>sequence-fold</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dfold_002dright-90"><code>sequence-fold-right</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dmap-92"><code>sequence-map</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dref-87"><code>sequence-ref</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dreverse-91"><code>sequence-reverse</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dset-88"><code>sequence-set</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dsize-75"><code>sequence-size</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dsnoc-78"><code>sequence-snoc</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dsplit_002dat-84"><code>sequence-split-at</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dtake-85"><code>sequence-take</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002duncons-77"><code>sequence-uncons</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_002dunsnoc-79"><code>sequence-unsnoc</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-sequence_003f-73"><code>sequence?</code></a>: <a href="#sequences">sequences</a></li>
<li><a href="#index-set_002d_003elist-153"><code>set-&gt;list</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002ddifference-156"><code>set-difference</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dfold-151"><code>set-fold</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dinsert-140"><code>set-insert</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dintersection-155"><code>set-intersection</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dmap-150"><code>set-map</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dmember_003f-139"><code>set-member?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dordering_002dprocedure-157"><code>set-ordering-procedure</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dremove-141"><code>set-remove</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dsize-142"><code>set-size</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_002dunion-154"><code>set-union</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_003c_003d_003f-145"><code>set&lt;=?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_003c_003f-143"><code>set&lt;?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_003d_003f-147"><code>set=?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_003e_003d_003f-148"><code>set&gt;=?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_003e_003f-149"><code>set&gt;?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-set_003f-138"><code>set?</code></a>: <a href="#sets">sets</a></li>
<li><a href="#index-subset_003f-146"><code>subset?</code></a>: <a href="#sets">sets</a></li>
   </ul><div class="node">
<a name="variable-index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#type-index">type index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#function-index">function index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix D An entry for each variable.</h2>



<ul class="index-vr" compact>
   </ul><div class="node">
<a name="type-index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#variable-index">variable index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix E An entry for each type.</h2>



<ul class="index-tp" compact>
   </ul>
<div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">Purely Functional Data Structures in Scheme</a>
<li><a name="toc_overview" href="#overview">1 Overview of the package</a>
<li><a name="toc_dlists" href="#dlists">2 Difference Lists</a>
<li><a name="toc_queues" href="#queues">3 Purely functional queues</a>
<li><a name="toc_deques" href="#deques">4 Double queues</a>
<li><a name="toc_psqs" href="#psqs">5 Priority search queues</a>
<ul>
<li><a href="#psqs-basic">5.1 Basic operations</a>
<li><a href="#psqs-map">5.2 Finite map operations</a>
<li><a href="#psqs-priority">5.3 Priority queue operations</a>
<li><a href="#psqs-ranged">5.4 Ranged query functions</a>
</li></ul>
<li><a name="toc_fingertrees" href="#fingertrees">6 A simple general&ndash;purpose data structure</a>
<li><a name="toc_sequences" href="#sequences">7 Purely functional sequences</a>
<li><a name="toc_heaps" href="#heaps">8 Heaps</a>
<li><a name="toc_bbtrees" href="#bbtrees">9 Bounded Balance trees</a>
<ul>
<li><a href="#bbtrees-conventions">9.1 Documentation and <acronym>API</acronym> conventions</a>
<li><a href="#bbtrees-core">9.2 Constructors and predicates</a>
<li><a href="#bbtrees-inspection">9.3 Inspection functions</a>
<li><a href="#bbtrees-setget">9.4 Setters and getters</a>
<li><a href="#bbtrees-traversing">9.5 Traversing functions</a>
<li><a href="#bbtrees-set">9.6 Set operations</a>
<li><a href="#bbtrees-index">9.7 Indexing operations</a>
</li></ul>
<li><a name="toc_sets" href="#sets">10 Purely functional sets</a>
<li><a name="toc_Package-License" href="#Package-License">11 Package license</a>
<li><a name="toc_References" href="#References">Appendix A Bibliography and references</a>
<li><a name="toc_concept-index" href="#concept-index">Appendix B An entry for each concept</a>
<li><a name="toc_function-index" href="#function-index">Appendix C An entry for each function.</a>
<li><a name="toc_variable-index" href="#variable-index">Appendix D An entry for each variable.</a>
<li><a name="toc_type-index" href="#type-index">Appendix E An entry for each type.</a>
</li></ul>
</div>

</body></html>

