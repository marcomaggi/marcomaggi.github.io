<html lang="en">
<head>
<title>random source - Vicare Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Vicare Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="random.html#random" title="random">
<link rel="prev" href="random-numbers.html#random-numbers" title="random numbers">
<link rel="next" href="random-mrg32k3a.html#random-mrg32k3a" title="random mrg32k3a">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.3d4 of Vicare Scheme, an
R6RS compliant native compiler for the Scheme language, producing
single threaded programs running on Intel x86 32-bit processors, with
experimental support for 64-bit machines.  _Vicare_ is pronounced
the etruscan way.

The package, including its documentation, is distributed under the terms
of the GNU General Public License (GPL) and can be downloaded
from:

        `http://sourceforge.net/projects/vicare-scheme/files/'


the home page of the project is at:

              `http://marcomaggi.github.com/vicare.html'


development takes place at:

                `http://github.com/marcomaggi/vicare/'


and, as a backup, at:

                     `http://gitorious.org/vicare'


and at:

           `http://sourceforge.net/projects/vicare-scheme/'


this project has a mailing list:

             `http://groups.google.com/group/vicare-users'


Copyright (C) 2010-2013 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

Copyright (C) Michael Sperber, R. Kent Dybvig, Matthew Flatt and Anton Van Straaten.

This document is derived from the original Ikarus documentation by the
Vicare Scheme contributors, see the ``History'' appendix for details.

The documentation of IrRegex is Copyright (C) 2005-2012 Alex
Shinn.  All rights reserved.

The documentation of Pregexp is Copyright (C) 1999-2005 Dorai
Sitaram.  All rights reserved.

The documentation of the library `(vicare formations)' is derived
from the documentation of Guile.  Copyright (C) 1996-2005,
2009-2013 Free Software Foundation.

     This program is free software: you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     version 3 as published by the Free Software Foundation.

     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program.  If not, see
     `http://www.gnu.org/licenses/'.

Trademarks used herein are the property of their respective owners.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="random-source"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="random-mrg32k3a.html#random-mrg32k3a">random mrg32k3a</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="random-numbers.html#random-numbers">random numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="random.html#random">random</a>
<hr>
</div>

<h3 class="section">26.4 Randomness sources</h3>

<div class="defun">
&mdash; Parameter: <b>random-source-maker</b><var><a name="index-random_002dsource_002dmaker-7860"></a></var><br>
<blockquote><p>Hold a procedure that can be used to generate a new randomness source. 
It is initialised to <code>make-random-source/mrg32k3a</code>.  For example,
it can be used as:

     <pre class="example">          (define source  ((random-source-maker)))
          (define integer (random-source-integer-maker source))
          (display (integer))
          -| &lt;a random integer&gt;
</pre>
        <p class="noindent">and as:

     <pre class="example">          (parameterise ((random-source-maker
                            make-random-source/device))
            (let* ((source  ((random-source-maker)))
                   (integer (random-source-integer-maker source)))
              (display (integer))))
          -| &lt;a random integer&gt;
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source?</b><var> obj<a name="index-random_002dsource_003f-7861"></a></var><br>
<blockquote><p>Test if <var>obj</var> is a randomness source.  Objects of type randomness
source are distinct from all other types of objects. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-state-ref</b><var> source<a name="index-random_002dsource_002dstate_002dref-7862"></a></var><br>
&mdash; Function: <b>random-source-state-set!</b><var> source state<a name="index-random_002dsource_002dstate_002dset_0021-7863"></a></var><br>
<blockquote><p>Get and set the current state of <var>source</var>.  The purpose of these
functions is to allow saving and restoring the state between sessions
(for example, save the state to a file and reload it later).

        <p>The state value is always a vector whose first element is a symbol
describing the generator.  The other elements of the vector depend on
the kind of generator: Refer to generator's documentation for their
format. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-seed!</b><var> source integers-maker<a name="index-random_002dsource_002dseed_0021-7864"></a></var><br>
<blockquote><p>Reseed <var>source</var> to a new state.  <var>integers-maker</var> must be a a
generator of random integer numbers, like the ones returned by
<code>random-source-integers-maker</code>.  Notice that many random sources
require <var>integer-makers</var> to return integers representable with
32 bits. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-required-seed-values</b><var> source<a name="index-random_002dsource_002drequired_002dseed_002dvalues-7865"></a></var><br>
<blockquote><p>When <code>random-source-seed!</code> is used to reseed a <var>source</var>, some
generator will invoke <var>integers-maker</var> a fixed and known number of
times, other generators will invoke it a configurable number of times,
other generators will invoke it until it first returns <code>#f</code>, other
generators will invoke it until the returned numbers have some desired
property.

        <p>This function returns the number of times <var>integers-maker</var> will be
called; if the return value is <code>#f</code>: <var>integers-maker</var> will be
invoked until it first returns <code>#f</code>; if the return value is
infinity: <var>integers-maker</var> will be invoked until it returns numbers
with some desired property. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-jumpahead!</b><var> source number-of-steps<a name="index-random_002dsource_002djumpahead_0021-7866"></a></var><br>
<blockquote><p>Move ahead <var>number-of-steps</var> randomness <var>source</var>'s state.  What
this means exactly depends on the type of <var>source</var>. 
</p></blockquote></div>

   <p>The following procedures return a closure <var>rand</var> to generate
pseudo&ndash;random integers and real numbers using a randomness
<var>source</var>.  If an application obtains and uses several <var>rand</var>
procedures for the same randomness <var>source</var>, a call to any of these
procedures advances the state of <var>source</var>.  Hence, the procedures do
not produce the same sequence of random integers each, but rather share
a state.

<div class="defun">
&mdash; Function: <b>random-source-integers-maker</b><var> source<a name="index-random_002dsource_002dintegers_002dmaker-7867"></a></var><br>
<blockquote><p>Return a procedure <var>rand</var> to generate random integers using
<var>source</var>.  <var>rand</var> takes a single argument <var>U</var>, which must be
a positive integer, and returns the next uniformly distributed random
integer X in the interval 0 &lt;= X &lt; U by advancing the
state of <var>source</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-reals-maker</b><var> source<a name="index-random_002dsource_002dreals_002dmaker-7868"></a></var><br>
&mdash; Function: <b>random-source-reals-maker</b><var> source unit<a name="index-random_002dsource_002dreals_002dmaker-7869"></a></var><br>
<blockquote><p>Return a procedure <var>rand</var> which, when invoked with no arguments,
generates random real numbers X in the range <code>0 &lt; X &lt; 1</code>
using <var>source</var>.  X=0 and X=1 are excluded in order to
allow \log(X) and \log(1-X) without the danger of a
numerical exception.

        <p>The optional parameter <var>unit</var> determines the quantization of the
output; to have effect, <var>unit</var> must be a number such that <code>0 &lt;
unit &lt; 1</code>, if <var>unit</var> is greater than, or equal to, 1 the
generated numbers will have the default unit.  The numbers created by
<var>rand</var> are spaced by at most <var>unit</var>.  <a href="random-prng-reals.html#random-prng-reals">Generating real numbers</a>, for details. 
</p></blockquote></div>

<!-- page -->
   </body></html>

