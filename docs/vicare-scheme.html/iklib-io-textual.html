<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This document describes version 0.4d1 of Vicare Scheme, an
R6RS compliant native compiler for the Scheme language, producing
single threaded programs running on Intel x86 32-bit and 64-bit
processors.  Vicare is pronounced the etruscan way.

The package, including its documentation, is distributed under the terms
of the GNU General Public License (GPL) and can be downloaded
from:

https://bitbucket.org/marcomaggi/vicare-scheme/downloads

the home page of the project is at:

http://marcomaggi.github.io/vicare.html

development takes place at:

http://github.com/marcomaggi/vicare/

and, as a backup, at:

https://bitbucket.org/marcomaggi/vicare-scheme/

Copyright (C) 2010-2017 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

Copyright (C) Michael Sperber, R. Kent Dybvig, Matthew Flatt and Anton Van Straaten.

This document is derived from the original Ikarus documentation by the
Vicare Scheme contributors, see the "History" appendix for details.

The documentation of IrRegex is Copyright (C) 2005-2012 Alex
Shinn.  All rights reserved.

The documentation of Pregexp is Copyright (C) 1999-2005 Dorai
Sitaram.  All rights reserved.

The documentation of the library (vicare formations) is derived
from the documentation of Guile.  Copyright (C) 1996-2005,
2009-2013 Free Software Foundation.

This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License version 3 as
published by the Free Software Foundation.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see
http://www.gnu.org/licenses/.

Trademarks used herein are the property of their respective owners. -->
<!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Vicare Scheme: iklib io textual</title>

<meta name="description" content="Vicare Scheme: iklib io textual">
<meta name="keywords" content="Vicare Scheme: iklib io textual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="concept-index.html#concept-index" rel="index" title="concept index">
<link href="iklib-io.html#iklib-io" rel="up" title="iklib io">
<link href="iklib-io-buffer.html#iklib-io-buffer" rel="next" title="iklib io buffer">
<link href="iklib-io-binary.html#iklib-io-binary" rel="prev" title="iklib io binary">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="iklib-io-textual"></a>
<div class="header">
<p>
Next: <a href="iklib-io-buffer.html#iklib-io-buffer" accesskey="n" rel="next">iklib io buffer</a>, Previous: <a href="iklib-io-binary.html#iklib-io-binary" accesskey="p" rel="prev">iklib io binary</a>, Up: <a href="iklib-io.html#iklib-io" accesskey="u" rel="up">iklib io</a> &nbsp; [<a href="concept-index.html#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Additional-textual-port-features"></a>
<h4 class="subsection">6.44.5 Additional textual port features</h4>


<p>The following bindings are exported by the <code>(vicare)</code> library.
</p>

<dl>
<dt><a name="index-current_002dinput_002dport-2"></a>Parameter: <strong>current-input-port</strong></dt>
<dd><a name="index-Parameter-current_002dinput_002dport"></a>
<p>As defined by <acronym>R6RS</acronym>: return a default textual port for input.
Vicare extends its definition to allow selecting a new textual
input port.
</p></dd></dl>


<dl>
<dt><a name="index-current_002doutput_002dport-2"></a>Parameter: <strong>current-output-port</strong></dt>
<dd><a name="index-Parameter-current_002doutput_002dport"></a>
<p>As defined by <acronym>R6RS</acronym>: return a default textual port for output.
Vicare extends its definition to allow selecting a new textual
output port.
</p></dd></dl>


<dl>
<dt><a name="index-current_002derror_002dport-2"></a>Parameter: <strong>current-error-port</strong></dt>
<dd><a name="index-Parameter-current_002derror_002dport"></a>
<p>As defined by <acronym>R6RS</acronym>: return a default textual port for error messages
output.  Vicare extends its definition to allow selecting a new
textual output port.
</p></dd></dl>


<dl>
<dt><a name="index-textual_002dinput_002dport_003f"></a>Function: <strong>textual-input-port?</strong> <em><var>obj</var></em></dt>
<dt><a name="index-textual_002doutput_002dport_003f"></a>Function: <strong>textual-output-port?</strong> <em><var>obj</var></em></dt>
<dt><a name="index-textual_002dinput_002foutput_002dport_003f"></a>Function: <strong>textual-input/output-port?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a textual port and, respectively, it is:
input or input/output; output or input/output; input/output.
</p></dd></dl>


<dl>
<dt><a name="index-textual_002dinput_002donly_002dport_003f"></a>Function: <strong>textual-input-only-port?</strong> <em><var>obj</var></em></dt>
<dt><a name="index-textual_002doutput_002donly_002dport_003f"></a>Function: <strong>textual-output-only-port?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is a textual port and, respectively, it is
input&ndash;only or output&ndash;only.
</p></dd></dl>


<dl>
<dt><a name="index-open_002dtextual_002dport_003f"></a>Function: <strong>open-textual-port?</strong> <em><var>obj</var></em></dt>
<dt><a name="index-open_002dtextual_002dinput_002dport_003f"></a>Function: <strong>open-textual-input-port?</strong> <em><var>obj</var></em></dt>
<dt><a name="index-open_002dtextual_002doutput_002dport_003f"></a>Function: <strong>open-textual-output-port?</strong> <em><var>obj</var></em></dt>
<dt><a name="index-open_002dtextual_002dinput_002foutput_002dport_003f"></a>Function: <strong>open-textual-input/output-port?</strong> <em><var>obj</var></em></dt>
<dd><p>Return <code>#t</code> if <var>obj</var> is an open textual port and, respectively,
it is input, output or input/output.
</p></dd></dl>


<dl>
<dt><a name="index-open_002dstring_002dinput_002dport-1"></a>Function: <strong>open-string-input-port</strong> <em><var>string</var></em></dt>
<dt><a name="index-open_002dstring_002dinput_002dport-2"></a>Function: <strong>open-string-input-port</strong> <em><var>string</var> <var>eol-style</var></em></dt>
<dd><p>As defined by <acronym>R6RS</acronym>: return a textual input port whose characters are
drawn from <var>string</var>.  When <var>eol-style</var> is given: it must be a
symbol selecting an end&ndash;of&ndash;line style conversion, as accepted by
<code>eol-style</code>; such conversion is applied to the characters drawn
from <var>string</var>.
</p>
<p>If <var>string</var> is modified after <code>open-string-input-port</code> has been
called, the effect on the returned port is unspecified.
</p></dd></dl>


<dl>
<dt><a name="index-open_002dstring_002dinput_002dport_002fid"></a>Function: <strong>open-string-input-port/id</strong> <em><var>string</var> <var>id</var></em></dt>
<dt><a name="index-open_002dstring_002dinput_002dport_002fid-1"></a>Function: <strong>open-string-input-port/id</strong> <em><var>string</var> <var>id</var> <var>eol-style</var></em></dt>
<dd><p>Like <code>open-string-input-port</code> but allows the specification of a
customised port identifier <var>id</var>, which must be a Scheme string.
</p></dd></dl>


<dl>
<dt><a name="index-open_002dstring_002doutput_002dport-1"></a>Function: <strong>open-string-output-port</strong></dt>
<dt><a name="index-open_002dstring_002doutput_002dport-2"></a>Function: <strong>open-string-output-port</strong> <em><var>eol-style</var></em></dt>
<dd><p>As defined by <acronym>R6RS</acronym>, return two values: a textual output port and an
extraction procedure; the output port accumulates the characters written
to it for later extraction by the procedure.
</p>
<p>As a Vicare extension, when <var>eol-style</var> is given: it must
be a symbol selecting an end&ndash;of&ndash;line style conversion, as accepted by
<code>eol-style</code>; such conversion is applied to the characters written
to the port.
</p></dd></dl>


<dl>
<dt><a name="index-get_002doutput_002dstring"></a>Function: <strong>get-output-string</strong> <em><var>port</var></em></dt>
<dd><p>Return the string accumulated in the <var>port</var> opened by
<code>open-string-output-port</code>.  This function can be called also when
the port has been closed.
</p></dd></dl>


<dl>
<dt><a name="index-get_002dchar_002dand_002dtrack_002dtextual_002dposition"></a>Function: <strong>get-char-and-track-textual-position</strong> <em><var>port</var></em></dt>
<dd><p>Like <code>get-char</code> but track the textual position.  Recognise only
linefeed characters as line-ending.
</p></dd></dl>


<dl>
<dt><a name="index-port_002dtextual_002dposition"></a>Function: <strong>port-textual-position</strong> <em><var>port</var></em></dt>
<dd><p>Given a textual port, return the current textual position as a condition
object of type <code>&amp;source-position</code>.
</p></dd></dl>


<dl>
<dt><a name="index-make_002dtextual_002dfile_002ddescriptor_002dinput_002dport"></a>Function: <strong>make-textual-file-descriptor-input-port</strong> <em><var>fd</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dt><a name="index-make_002dtextual_002dfile_002ddescriptor_002doutput_002dport"></a>Function: <strong>make-textual-file-descriptor-output-port</strong> <em><var>fd</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dt><a name="index-make_002dtextual_002dfile_002ddescriptor_002dinput_002foutput_002dport"></a>Function: <strong>make-textual-file-descriptor-input/output-port</strong> <em><var>fd</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dd><p>Build and return textual Scheme ports using the platform file descriptor
<var>fd</var> as device.  <var>identifier</var> must be a string used for better
error reporting.  <var>transcoder</var> must be a transcoder object.  Closing
the Scheme ports will close the file descriptors too.
</p>
<p>File descriptor ports do support port position operations.
</p></dd></dl>


<dl>
<dt><a name="index-make_002dtextual_002dfile_002ddescriptor_002dinput_002dport_002a"></a>Function: <strong>make-textual-file-descriptor-input-port*</strong> <em><var>fd</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dt><a name="index-make_002dtextual_002dfile_002ddescriptor_002doutput_002dport_002a"></a>Function: <strong>make-textual-file-descriptor-output-port*</strong> <em><var>fd</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dt><a name="index-make_002dtextual_002dfile_002ddescriptor_002dinput_002foutput_002dport_002a"></a>Function: <strong>make-textual-file-descriptor-input/output-port*</strong> <em><var>fd</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dd><p>Build and return textual Scheme ports using the platform file descriptor
<var>fd</var> as device.  <var>identifier</var> must be a string used for better
error reporting.  <var>transcoder</var> must be a transcoder object.  Closing
the Scheme ports will <strong>not</strong> close the file descriptors.
</p>
<p>File descriptor ports do support port position operations.
</p></dd></dl>


<dl>
<dt><a name="index-make_002dtextual_002dsocket_002dinput_002foutput_002dport"></a>Function: <strong>make-textual-socket-input/output-port</strong> <em><var>sock</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dd><p>Build and return a textual Scheme port using the platform socket
descriptor <var>sock</var> as device.  <var>identifier</var> must be a string used
for better error reporting.  <var>transcoder</var> must be a transcoder
object.  Closing the Scheme port will close the socket descriptor too.
</p>
<p>Socket ports do <strong>not</strong> support port position operations.
</p></dd></dl>


<dl>
<dt><a name="index-make_002dtextual_002dsocket_002dinput_002foutput_002dport_002a"></a>Function: <strong>make-textual-socket-input/output-port*</strong> <em><var>sock</var> <var>identifier</var> <var>transcoder</var></em></dt>
<dd><p>Build and return a textual Scheme port using the platform socket
descriptor <var>sock</var> as device.  <var>identifier</var> must be a string used
for better error reporting.  <var>transcoder</var> must be a transcoder
object.  Closing the Scheme port will <strong>not</strong> close the socket
descriptor.
</p>
<p>Socket ports do <strong>not</strong> support port position operations.
</p></dd></dl>


<dl>
<dt><a name="index-read_002dline"></a>Function: <strong>read-line</strong></dt>
<dt><a name="index-read_002dline-1"></a>Function: <strong>read-line</strong> <em><var>port</var></em></dt>
<dd><p>Read from the textual input <var>port</var> up to and including the linefeed
character or end of file, decoding characters in the same manner as
<code>get-string-n</code> and <code>get-string-n!</code>.  This function is exactly
like <code>get-line</code>, defined by <code>(rnrs io ports (6))</code>, but it uses the
return value of <code>current-input-port</code> if no <var>port</var> argument is
used.
</p></dd></dl>


<dl>
<dt><a name="index-get_002dstring_002dsome-1"></a>Function: <strong>get-string-some</strong> <em><var>port</var></em></dt>
<dd><p>Defined by Vicare.  Read from the textual input <var>port</var>, blocking as
necessary, until characters are available or until an end of file is
reached.
</p>
<p>If characters become available, <code>get-string-some</code> returns a freshly
allocated string containing the initial available characters (at least
one), and it updates <var>port</var> to point just past these characters.
</p>
<p>If no input characters are available: the <acronym>EOF</acronym> object is returned.
</p></dd></dl>


<dl>
<dt><a name="index-with_002dinput_002dfrom_002dstring"></a>Function: <strong>with-input-from-string</strong> <em><var>string</var> <var>thunk</var></em></dt>
<dd><p><var>thunk</var> must be a procedure and it must accept zero arguments.
<var>string</var> must be a Scheme string.
</p>
<p>The <var>string</var> is used as argument for <code>open-string-input-port</code>;
during the dynamic extent of the call to <var>thunk</var>, the obtained port
is made the value returned by <code>current-input-port</code>; the previous
default value is reinstated when the dynamic extent is exited.
</p>
<p>When <var>thunk</var> returns, the port is closed automatically.  The values
returned by <var>thunk</var> are returned.
</p>
<p>If, after <var>thunk</var> has returned, an escape procedure is used to
reenter the dynamic extent of the call to <var>thunk</var>: the behaviour is
unspecified.
</p></dd></dl>


<dl>
<dt><a name="index-with_002doutput_002dto_002dstring"></a>Function: <strong>with-output-to-string</strong> <em><var>thunk</var></em></dt>
<dd><p>Create a textual output port that accumulates the characters written to
it, set it as the current output port and call <var>thunk</var> with no
arguments.  The port is the current output port only for the extent of
the call to <var>thunk</var>.
</p>
<p>Whenever <var>thunk</var> returns, a string consisting of all of the port&rsquo;s
accumulated characters (regardless of the port&rsquo;s current position) is
returned and the port is closed.
</p></dd></dl>

<hr>
<div class="header">
<p>
Next: <a href="iklib-io-buffer.html#iklib-io-buffer" accesskey="n" rel="next">iklib io buffer</a>, Previous: <a href="iklib-io-binary.html#iklib-io-binary" accesskey="p" rel="prev">iklib io binary</a>, Up: <a href="iklib-io.html#iklib-io" accesskey="u" rel="up">iklib io</a> &nbsp; [<a href="concept-index.html#concept-index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
