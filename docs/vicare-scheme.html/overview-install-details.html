<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This document describes version 0.4d1 of Vicare Scheme, an
R6RS compliant native compiler for the Scheme language, producing
single threaded programs running on Intel x86 32-bit and 64-bit
processors.  Vicare is pronounced the etruscan way.

The package, including its documentation, is distributed under the terms
of the GNU General Public License (GPL) and can be downloaded
from:

https://bitbucket.org/marcomaggi/vicare-scheme/downloads

the home page of the project is at:

http://marcomaggi.github.io/vicare.html

development takes place at:

http://github.com/marcomaggi/vicare/

and, as a backup, at:

https://bitbucket.org/marcomaggi/vicare-scheme/

Copyright (C) 2010-2017 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

Copyright (C) Michael Sperber, R. Kent Dybvig, Matthew Flatt and Anton Van Straaten.

This document is derived from the original Ikarus documentation by the
Vicare Scheme contributors, see the "History" appendix for details.

The documentation of IrRegex is Copyright (C) 2005-2012 Alex
Shinn.  All rights reserved.

The documentation of Pregexp is Copyright (C) 1999-2005 Dorai
Sitaram.  All rights reserved.

The documentation of the library (vicare formations) is derived
from the documentation of Guile.  Copyright (C) 1996-2005,
2009-2013 Free Software Foundation.

This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License version 3 as
published by the Free Software Foundation.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see
http://www.gnu.org/licenses/.

Trademarks used herein are the property of their respective owners. -->
<!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Vicare Scheme: overview install details</title>

<meta name="description" content="Vicare Scheme: overview install details">
<meta name="keywords" content="Vicare Scheme: overview install details">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="concept-index.html#concept-index" rel="index" title="concept index">
<link href="overview-install.html#overview-install" rel="up" title="overview install">
<link href="overview-install-uninstall.html#overview-install-uninstall" rel="next" title="overview install uninstall">
<link href="overview-install-prerequisites.html#overview-install-prerequisites" rel="prev" title="overview install prerequisites">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="overview-install-details"></a>
<div class="header">
<p>
Next: <a href="overview-install-uninstall.html#overview-install-uninstall" accesskey="n" rel="next">overview install uninstall</a>, Previous: <a href="overview-install-prerequisites.html#overview-install-prerequisites" accesskey="p" rel="prev">overview install prerequisites</a>, Up: <a href="overview-install.html#overview-install" accesskey="u" rel="up">overview install</a> &nbsp; [<a href="concept-index.html#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Installation-details"></a>
<h4 class="subsection">1.5.3 Installation details</h4>


<p>We have two choices for downloading the Vicare Scheme source: we can
either download a distribution from:
</p>
<div align="center"><a href="https://bitbucket.org/marcomaggi/vicare-scheme/downloads">https://bitbucket.org/marcomaggi/vicare-scheme/downloads</a>
</div>
<p>or we can checkout a revision from the GitHub repository:
</p>
<div align="center"><a href="http://github.com/marcomaggi/vicare/">http://github.com/marcomaggi/vicare/</a>
</div>
<ul>
<li> Vicare Scheme source distributions are tarballs named
<samp>vicare-<var><var>n.n.n</var></var>.tar.gz</samp>, where <samp><var>n.n.n</var></samp> is a
3&ndash;component ID indicating the current revision.

<p>If we downloaded a distribution, unpack it.  From the shell prompt:
</p>
<div class="example">
<pre class="example">$ tar -xvzf vicare-<var>n.n.n</var>.tar.gz
</pre></div>

<p>this creates the base directory <samp>vicare-<var>n.n.n</var></samp>.
</p>
</li><li> If we downloaded a bleeding&ndash;edge snapshot, no unpacking is needed.
</li></ul>

<p>We configure the build system by running the <code>configure</code> script
located in the base directory.  To do this, type the following commands:
</p>
<div class="example">
<pre class="example">$ cd vicare-<var>n.n.n</var>
$ ./configure
checking build system type... i386-apple-darwin8.10.1
checking host system type... i386-apple-darwin8.10.1
...
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating scheme/Makefile
config.status: creating doc/Makefile
config.status: executing depfiles commands
</pre></div>

<p>This configures the system to be built then installed in the
system&ndash;wide location (binaries are normally installed in
<samp>/usr/local/bin</samp>).  To install it in another location (e.g. in
your home directory), provide a <samp>--prefix</samp> location to
<code>configure</code> as follows:
</p>
<div class="example">
<pre class="example">$ ./configure --prefix=/opt/sw
</pre></div>

<p>this will install the executable in <samp>/opt/sw/bin</samp>, libraries in
<samp>/opt/sw/lib/ikarus</samp>, and documentation in
<samp>/opt/sw/share/doc/ikarus</samp>.
</p>
<p>To install Vicare Scheme for personal use (thus not requiring root
permissions to install), specify <code>--prefix=$HOME/local</code>, which
installs everything in a <samp>local</samp> directory of our home directory.
</p>
<p><code>configure</code> allows us to fine&ndash;tune where things are installed,
though this is rarely necessary or useful.  Do
<code>./configure&nbsp;--help</code> for a full list of options.
</p>
<p>The most common <code>configure</code> options are as follows.
</p>
<dl compact="compact">
<dt><samp>--prefix</samp></dt>
<dd><p>Specify the location in the file system where Vicare Scheme will be
installed.
</p>
</dd>
<dt><samp>--enable-ffi</samp></dt>
<dd><p>Include Vicare Scheme&rsquo;s Foreign Function Interface, so that
Vicare code can invoke C code, and vice versa; requires Libffi.
</p>
</dd>
<dt><samp>--disable-arguments-validation</samp></dt>
<dd><p>Disable arguments validation for the functions in Vicare&rsquo;s boot image;
use with care: an invalid argument will cause undefined behaviour (most
likely a process crash).
</p>
<a name="index-VICARE_005fARGUMENTS_005fVALIDATION-environment-variable"></a>
<a name="index-Environment-variable-VICARE_005fARGUMENTS_005fVALIDATION"></a>
<p>This setting can be overridden by setting the environment variable
<code>VICARE_ARGUMENTS_VALIDATION</code>; <a href="../vicare-libs/args-config.html#args-config">(vicare-libs)Enabling or
disabling arguments validation</a> for details.
</p>
</dd>
<dt><code>CFLAGS</code></dt>
<dd><p>Specify options to be used while compiling Vicare&rsquo;s C code.
</p>
</dd>
<dt><code>CPPFLAGS</code></dt>
<dd><p>Specify options to be used while preprocessing Vicare&rsquo;s C code.
</p>
</dd>
<dt><code>LDFLAGS</code></dt>
<dd><p>Specify options to be used while linking Vicare.
</p></dd>
</dl>

<p><code>configure</code> will fail if it cannot find the location where
<acronym>GMP</acronym> is installed.  The script will also fail if we have specified
<samp>--enable-ffi</samp> and it can&rsquo;t find Libffi.  If running
<code>configure</code> fails to locate either of these libraries, we will
need to provide their locations.  Use the <code>CPPFLAGS</code> and
<code>LDFLAGS</code> options to specify the locations of the header and library
files.
</p>
<p>For example, assume that we have installed <acronym>GMP</acronym> and Libffi in
subdirectories of <samp>/opt/sw</samp>, and we wish to support foreign
functions.<a name="DOCF1" href="#FOOT1"><sup>1</sup></a>
</p>
<div class="example">
<pre class="example">./configure                                                  \
  --prefix=$HOME/local                                       \
  --enable-ffi                                               \
  CPPFLAGS=&quot;-I/opt/sw/gmp/include -I/opt/sw/libffi/include&quot;  \
  LDFLAGS=&quot;-L/opt/sw/gmp/lib -L/opt/sw/libffi/lib&quot;
</pre></div>

<p>We can use the <code>CFLAGS</code> and <code>LDFLAGS</code> variables to select more
specialized compilation and linking options; refer to the compiler
documentation for more details.
</p>
<p>We can now build the system by running the command <code>make</code>, with
no arguments; this performs two tasks:
</p>
<ol>
<li> It builds the <code>vicare</code> executable from the C files located in
the <samp>src</samp> directory.

</li><li> It uses the <code>vicare</code> executable and the pre&ndash;built
<samp>ikarus.boot.orig</samp> boot file to rebuild the Scheme boot image file
<samp>vicare.boot</samp> from the Scheme sources located in the <samp>scheme</samp>
directory.
</li></ol>

<p>The final stage is to install Vicare via the command
<code>make install</code>.  If we&rsquo;re installing Vicare in a
system&ndash;wide location, we probably need to have administrator privileges
(use the <code>sudo</code> or <code>su</code> commands); if that&rsquo;s not
feasible, then we need to reconfigure to install within a directory tree
under our home directory.
</p>
<p>Finally, try a small session, to verify that everything installed
properly.
</p>
<div class="example">
<pre class="example">$ vicare
Vicare Scheme version 0.1d0+ \
  (revision master/d844c006eb9ada1a047be3893d0dd40f8ae6204a, \
  build 2010-05-02)
Copyright (c) 2006-2010 Abdulaziz Ghuloum and contributors

&gt; (display &quot;hello, world!\n&quot;)
hello, world!
&gt; (define twice (lambda (f) (lambda (x) (f (f x)))))
&gt; ((twice add1) 3)
5
</pre></div>

<p>If we get the first <code>&gt;</code> prompt, then Vicare was
successfully installed on the system.  We may need to update the
<code>PATH</code> variable in environment to contain the directory in which the
<code>vicare</code> executable was installed.
</p>
<p>Finally, do <code>make clean</code> to get rid of executables, object
files, and other build products in the <samp>vicare-<var>n.n.n</var></samp>
directory.  Do not delete the directory itself: it will be needed if we
ever want to uninstall Vicare.
</p>
<p>After installation, under the directory
<code>$libexecdir/vicare-scheme</code>, scripts with names like
<samp>compile-all.sps</samp> can be executed to precompile the installed
libraries; for example:
</p>
<div class="example">
<pre class="example">$ sudo vicare --compile-dependencies \
   /usr/local/libexec/vicare-scheme/compile-all.sps
</pre></div>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h3><a name="FOOT1" href="#DOCF1">(1)</a></h3>
<p>The <code>configure</code> command shown here is very
imposing, and anyone can easily make mistakes.  In general, it&rsquo;s a good
idea to create a shell script that has the sequence of
<code>configure</code> and <code>make</code> commands needed to configure,
build, and install a package; this not only allows us to re&ndash;install
easily, but also gives us a concrete indication of what options we used
to build the software the last time.  Of course, we should put this
script somewhere other than in the actual Vicare software
directory!</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="overview-install-uninstall.html#overview-install-uninstall" accesskey="n" rel="next">overview install uninstall</a>, Previous: <a href="overview-install-prerequisites.html#overview-install-prerequisites" accesskey="p" rel="prev">overview install prerequisites</a>, Up: <a href="overview-install.html#overview-install" accesskey="u" rel="up">overview install</a> &nbsp; [<a href="concept-index.html#concept-index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
