<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This document describes version 0.2.0-devel.4 of CCStructs, a C11 language library
implementing common programming interfaces for C data structures.

This package supports POSIX platforms.  This package depends on the external packages:
CCExceptions, at least version 0.8.0; CCMemory, at least version
0.2.1.  To run the test suite: this package depends upon the external package
CCTests, at least version 0.3.0.

The package is distributed under the terms of the GNU Lesser General Public License (LGPL).

The latest release can be downloaded from:

https://bitbucket.org/marcomaggi/ccstructs/downloads

development takes place at:

https://github.com/marcomaggi/ccstructs

and as backup at:

https://bitbucket.org/marcomaggi/ccstructs

Copyright (C) 2018, 2019 by Marco Maggi marco.maggi-ipsu@poste.it

Permission is granted to copy, distribute and/or modify this document under the terms of the GNU
Free Documentation License, Version 1.3 or any later version published by the Free Software
Foundation; with Invariant Sections being "GNU Free Documentation License" and "GNU General
Public License", no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license is
included in the section entitled "GNU Free Documentation License". -->
<!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ccnames struct common (CCStructs)</title>

<meta name="description" content="ccnames struct common (CCStructs)">
<meta name="keywords" content="ccnames struct common (CCStructs)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="concept-index.html#concept-index" rel="index" title="concept index">
<link href="type-index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="ccnames.html#ccnames" rel="up" title="ccnames">
<link href="ccnames-struct-table.html#ccnames-struct-table" rel="next" title="ccnames struct table">
<link href="ccnames.html#ccnames" rel="prev" title="ccnames">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="ccnames-struct-common"></span><div class="header">
<p>
Next: <a href="ccnames-struct-table.html#ccnames-struct-table" accesskey="n" rel="next">ccnames struct table</a>, Up: <a href="ccnames.html#ccnames" accesskey="u" rel="up">ccnames</a> &nbsp; [<a href="type-index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html#concept-index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Well-known-functions-for-struct-types"></span><h3 class="appendixsec">A.1 Well known functions for <code>struct</code> types</h3>


<p>The macros for &ldquo;well known functions&rdquo; define an <acronym>API</acronym> for the basic operations upon a data
<code>struct</code>.  The following macros are defined in the header file <samp>ccnames.h</samp>.
</p>

<dl>
<dt id="index-ccname_005finit">Macro: <strong>ccname_init</strong> <em>(<var>STRUCT_TYPE</var>)</em></dt>
<dt id="index-ccname_005finit-1">Macro: <strong>ccname_init</strong> <em>(<var>STRUCT_TYPE</var>, <var>VARIANT</var>)</em></dt>
<dt id="index-ccname_005finit-2">Macro: <strong>ccname_init</strong> <em>(<var>STRUCT_TYPE</var>, <var>VARIANT1</var>, <var>VARIANT2</var>)</em></dt>
<dt id="index-ccname_005finit-3">Macro: <strong>ccname_init</strong> <em>(<var>STRUCT_TYPE</var>, <var>VARIANT1</var>, <var>VARIANT3</var>)</em></dt>
<dd><p>Given a <code>struct</code> type name and an optional variant specification: expand into the name of the
<acronym>API</acronym> function <code>init()</code>.
</p>
<p>Functions with this name are constructors for <code>struct</code> instances allocated on the stack or embedded
into enclosing <code>struct</code> instances.  They allocate all the asynchronous resources and initialise the
<code>struct</code> fields.
</p></dd></dl>


<dl>
<dt id="index-ccname_005ffinal">Macro: <strong>ccname_final</strong> <em>(<var>STRUCT_TYPE</var>)</em></dt>
<dd><p>Given a <code>struct</code> type name: expand into the name of the <acronym>API</acronym> function <code>final()</code>.
</p>
<p>Functions with this name are destructors for <code>struct</code> instances allocated on the stack or embedded
into enclosing <code>struct</code> instances.  They release all the asynchronous resources associated to the
<code>struct</code> fields.
</p></dd></dl>


<dl>
<dt id="index-ccname_005falloc">Macro: <strong>ccname_alloc</strong> <em>(<var>STRUCT_TYPE</var>)</em></dt>
<dd><p>Given a <code>struct</code> type name: expand into the name of the <acronym>API</acronym> function <code>alloc()</code>.
</p>
<p>Functions of this type are memory allocators for <code>struct</code> instances allocated on the heap.  They
might perform the allocation using the <acronym>API</acronym> of the library CCMemory.
</p></dd></dl>


<dl>
<dt id="index-ccname_005frelease">Macro: <strong>ccname_release</strong> <em>(<var>STRUCT_TYPE</var>)</em></dt>
<dd><p>Given a <code>struct</code> type name: expand into the name of the <acronym>API</acronym> function <code>release()</code>.
</p>
<p>Functions of this type are memory releasers for <code>struct</code> instances allocated on the heap.  They
might perform the release using the <acronym>API</acronym> of the library CCMemory.
</p></dd></dl>


<dl>
<dt id="index-ccname_005fnew">Macro: <strong>ccname_new</strong> <em>(<var>STRUCT_TYPE</var>)</em></dt>
<dt id="index-ccname_005fnew-1">Macro: <strong>ccname_new</strong> <em>(<var>STRUCT_TYPE</var>, <var>VARIANT</var>)</em></dt>
<dt id="index-ccname_005fnew-2">Macro: <strong>ccname_new</strong> <em>(<var>STRUCT_TYPE</var>, <var>VARIANT1</var>, <var>VARIANT2</var>)</em></dt>
<dt id="index-ccname_005fnew-3">Macro: <strong>ccname_new</strong> <em>(<var>STRUCT_TYPE</var>, <var>VARIANT1</var>, <var>VARIANT3</var>)</em></dt>
<dd><p>Given a <code>struct</code> type name and an optional variant specification: expand into the name of the
<acronym>API</acronym> function <code>new()</code>.
</p>
<p>Functions with this name are constructors for <code>struct</code> instances allocated on the heap.  The memory
allocation is performed by calling the <code>alloc()</code> function.  The initialisation of the fields is
performed by calling the <code>init()</code> function.
</p></dd></dl>


<dl>
<dt id="index-ccname_005fdelete">Macro: <strong>ccname_delete</strong> <em>(<var>STRUCT_TYPE</var>)</em></dt>
<dd><p>Given a <code>struct</code> type name: expand into the name of the <acronym>API</acronym> function <code>delete()</code>.
</p>
<p>Functions with this name are destructors for <code>struct</code> instances allocated on the heap.  The
finalisation of the fields is performed by calling the <code>final()</code> function.  The memory release
is performed by calling the <code>release()</code> function.
</p></dd></dl>


<p>An example of common function implementation for <code>struct</code> types:
</p>
<div class="example">
<pre class="example">#include &lt;ccexceptions.h&gt;
#include &lt;ccmemory.h&gt;
#include &lt;ccnames.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;

typedef struct my_coords_t      my_coords_t;

struct my_coords_t {
  double        X;
  double        Y;
};

void
ccname_init(my_coords_t, rec) (my_coords_t * S, double X, double Y)
{
  S-&gt;X = X;
  S-&gt;Y = Y;
}

void
ccname_init(my_coords_t, pol) (my_coords_t * S, double RHO, double THETA)
{
  S-&gt;X = RHO * cos(THETA);
  S-&gt;Y = RHO * sin(THETA);
}

void
ccname_final(my_coords_t) (my_coords_t * S)
{
}

static my_coords_t *
ccname_alloc(my_coords_t) (cce_destination_t L)
{
  return (my_coords_t *)ccmem_std_malloc(L, sizeof(my_coords_t));
}

static void
ccname_release(my_coords_t) (my_coords_t * S)
{
  ccmem_std_free(S);
}

my_coords_t *
ccname_new(my_coords_t, rec) (cce_destination_t L, double X, double Y)
{
  my_coords_t * S = ccname_alloc(my_coords_t)(L);

  ccname_init(my_coords_t, rec)(S, X, Y);
  return S;
}

my_coords_t *
ccname_new(my_coords_t, pol) (cce_destination_t L, double RHO, double THETA)
{
  my_coords_t * S = ccname_alloc(my_coords_t)(L);

  ccname_init(my_coords_t, pol)(S, RHO, THETA);
  return S;
}

void
ccname_delete(my_coords_t) (my_coords_t * S)
{
  ccname_final(my_coords_t)(S);
  ccname_release(my_coords_t)(S);
}

int
main (void)
{
  cce_location_t        L[1];
  my_coords_t *         S;

  if (cce_location(L)) {
    cce_run_catch_handlers_final(L);
  } else {
    S = ccname_new(my_coords_t, rec)(L, 1.0, 2.0);

    printf(&quot;X=%f, Y=%f\n&quot;, S-&gt;X, S-&gt;Y);
    ccname_delete(my_coords_t)(S);
  }
  exit(EXIT_SUCCESS);
}
</pre></div>

<hr>
<div class="header">
<p>
Next: <a href="ccnames-struct-table.html#ccnames-struct-table" accesskey="n" rel="next">ccnames struct table</a>, Up: <a href="ccnames.html#ccnames" accesskey="u" rel="up">ccnames</a> &nbsp; [<a href="type-index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html#concept-index" title="Index" rel="index">Index</a>]</p>
</div>


<p>This document describes version <tt>0.2.0-devel.4</tt> of <em>CCStructs</em>.</p>
</body>
</html>
