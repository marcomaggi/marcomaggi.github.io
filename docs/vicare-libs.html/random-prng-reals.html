<html lang="en">
<head>
<title>random prng reals - Libraries for Vicare Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Libraries for Vicare Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="random-prng.html#random-prng" title="random prng">
<link rel="prev" href="random-prng-integers.html#random-prng-integers" title="random prng integers">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes the libraries distributed along with version
0.3d7 of Vicare Scheme, an R6RS compliant native
compiler for the Scheme language.

Copyright (C) 2010-2013 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

The documentation of IrRegex is Copyright (C) 2005-2012 Alex
Shinn.  All rights reserved.

The documentation of Pregexp is Copyright (C) 1999-2005 Dorai
Sitaram.  All rights reserved.

The documentation of the library `(vicare formations)' is derived
from the documentation of Guile.  Copyright (C) 1996-2005,
2009-2013 Free Software Foundation.

The documentation of the libraries `(vicare parser-tools silex
---)' are derived form the documentation of SILex.  Copyright
(C) 2001, 2009 Danny Dube'.

     This program is free software: you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     version 3 as published by the Free Software Foundation.

     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program.  If not, see
     `http://www.gnu.org/licenses/'.

Trademarks used herein are the property of their respective owners.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="random-prng-reals"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="random-prng-integers.html#random-prng-integers">random prng integers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="random-prng.html#random-prng">random prng</a>
<hr>
</div>

<h4 class="subsection">32.2.5 Generating real numbers</h4>

<p>We want a sample X from the discrete range of representable
flonums in 0 &lt;= X &lt; 1 with a distribution that mimics the uniform
distribution of real numbers R in the continuous range 0 &lt;
R &lt; 1.

   <p>Knowing that the integers N generated by a <acronym>PRNG</acronym> are
uniformly distributed in the range 0 &lt;= N &lt; M, a pseudo&ndash;random
flonum X in the range 0 &lt; X &lt; 1 can be computed from a
generated N with the following normalisation formula:

<pre class="example">     X = (1 + N) / (1 + M)
</pre>
   <p class="noindent">notice that:

<pre class="example">     N = 0        =&gt;  X = 1 / (1 + M) &gt; 0
     N = (M - 1)  =&gt;  X = M / (1 + M) &lt; 1
</pre>
   <p class="noindent">sometimes this is enough, but we have to notice that: There may be more
representable flonums in 0 &lt; X &lt; 1 than exact fractions like
(1 + N) / (1 + M).

   <p>The following program prints the generated inexact fractions for the
very simple case M = 5, it prints also the intervals between two
adjacent fractions:

<pre class="example">     (import (rnrs)
       (vicare lists))
     
     (define M 5)
     (fold-left (lambda (prev-X X)
                  (write (list X (- X prev-X)))
                  (newline)
                  X)
                0.0
                (map (lambda (N)
                       (inexact (/ (+ 1 N) (+ 1 M))))
                  (list-tabulate M values)))
     -| (0.16666666666666666 0.16666666666666666)
     -| (0.3333333333333333  0.16666666666666666)
     -| (0.5                 0.16666666666666669)
     -| (0.6666666666666666  0.16666666666666663)
     -| (0.8333333333333334  0.16666666666666674)
</pre>
   <p class="noindent">so the generated flonums are in &ldquo;units&rdquo; of approximately 1/6 =
0.166666666666666; we can compute this unit with 1 / (1 + M).

   <p>It is useful to be able to generate flonums in smaller units: We can do
it by generating a pseudo&ndash;random integer N' uniformly
distributed in a range larger than 0 &lt;= N &lt; M.  We use the same
method previously outlined for large integers generation.  <a href="random-prng-integers.html#random-prng-integers">Generating integers in a specified range</a>

   <p>So, we select a value for the desired unit, then we find M' such
that:

<pre class="example">     1 / (1 + M') &lt;= unit
     =&gt;  1 + M' &gt;= 1 / unit
     =&gt;  M' &gt;= (1 / unit) - 1
     =&gt;  1  &gt;= (1 / unit) - 1 / M'
</pre>
   <p class="noindent">then we generate a big pseudo&ndash;random integer N' in the range
0 &lt;= N' &lt; M' and normalise it with:

<pre class="example">     X = (1 + N') / (1 + M')
</pre>
   <!-- page -->
   </body></html>

