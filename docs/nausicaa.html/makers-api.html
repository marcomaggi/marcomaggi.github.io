<html lang="en">
<head>
<title>makers api - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="makers.html#makers" title="makers">
<link rel="prev" href="makers-intro.html#makers-intro" title="makers intro">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d3 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa takes place at:

               `http://github.com/marcomaggi/nausicaa/'


Copyright (C) 2008, 2009, 2010 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="makers-api"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="makers-intro.html#makers-intro">makers intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="makers.html#makers">makers</a>
<hr>
</div>

<h3 class="section">19.2 Defining makers</h3>

<p>The following bindings are exported by the <code>(makers)</code> library.

<div class="defun">
&mdash; Macro: <b>define-maker</b><var> name-spec maker-sexp keywords-defaults-options<a name="index-define_002dmaker-1069"></a></var><br>
&mdash; Auxiliary Syntax: <b>mandatory</b><var><a name="index-mandatory-1070"></a></var><br>
&mdash; Auxiliary Syntax: <b>optional</b><var><a name="index-optional-1071"></a></var><br>
&mdash; Auxiliary Syntax: <b>with</b><var> identifier ...<a name="index-with-1072"></a></var><br>
&mdash; Auxiliary Syntax: <b>without</b><var> identifier ...<a name="index-without-1073"></a></var><br>
<blockquote><p>Define a new maker macro.  <var>name-spec</var> has one of the forms:

     <pre class="example">          <var>name-identifier</var>
          (<var>name-identifier</var> <var>positional-arg</var> ...)
</pre>
        <p class="noindent">where <var>name-identifier</var> is the name of the defined macro and each
<var>positional-arg</var> is an identifier, name of a mandatory positional
argument for the macro.

        <p><var>maker-sexp</var> has one of the forms:

     <pre class="example">          <var>maker-expr0</var>
          (<var>maker-expr0</var> <var>maker-expr</var> ...)
</pre>
        <p class="noindent">where each <var>maker-expr</var> is a macro keyword or an expression
evaluated in the lexical context of the <code>define-maker</code> macro use;
the expressions are evaluated every time the maker is used.

        <p><var>keywords-defaults-options</var> defines optional arguments selected with an
auxiliary syntax and a value; it has the form:

     <pre class="example">          (<var>clause-spec</var> ...)
</pre>
        <p class="noindent">where each <var>clause-spec</var> has the form:

     <pre class="example">          (<var>auxiliary-syntax</var> <var>default-expr</var>)
          (<var>auxiliary-syntax</var> <var>default-expr</var> <var>option</var> ...)
</pre>
        <p class="noindent">where each <var>auxiliary-syntax</var> is an identifier and
<var>default-expr</var> is an expression representing the default value for
the argument; the expressions are all evaluated in the lexical context
of the <code>define-maker</code> macro use, the expressions are evaluated
every time the maker is used.

        <p>Notice that the <var>auxiliary-syntax</var> identifiers are matched against
the values in the macro use by comparing the syntax objects with
<code>free-identifier=?</code>.

        <p>Each of the <var>option</var> forms can be one among:

     <pre class="example">          (mandatory)
          (optional)
          (with <var>identifier</var> ...)
          (without <var>identifier</var> ...)
</pre>
        <p class="noindent">where the first two specify if the current clause is mandatory or
optional; the <code>with</code> option selects a list of clauses that must be
present when the current clause is used; the <code>without</code> option
selects a list of clauses that must not be present when the current
clause is used.  When the same option is used multiple times: the last
one is considered and the previous ones ignored.

        <p>When the new macro is used without optional auxiliary syntaxes, it is
expanded to:

     <pre class="example">          ;; single maker expression, no positional arguments
          (<var>maker-expr-result</var>)
          
          ;; single maker expression, positional arguments
          (<var>maker-expr-result</var>
           <var>positional-arg0</var> <var>positional-arg</var> ...)
          
          ;; multiple maker expressions, no positional arguments
          (<var>maker-expr-result0</var> <var>maker-expr-result</var> ...)
          
          ;; multiple maker expressions, positional arguments
          (<var>maker-expr-result0</var> <var>maker-expr-result</var> ...
           <var>positional-arg0</var> <var>positional-arg</var> ...)
</pre>
        <p>When the new macro is used with optional auxiliary syntaxes, the
expressions in the synaxes, or the default expressions, are appended to
the output form in the same order as the corresponding syntaxes in
<var>keywords-defaults-options</var>.

        <p>It is an error if the generated maker is invoked with a clause used
multiple times.

        <p>When the clause of a generated maker is used with multiple values: the
values are enclosed in a <code>list</code> form and the result is used as
argument for the maker expression; for example:

     <pre class="example">          (import (rnrs) (makers))
          
          (define-auxiliary-syntax alpha:)
          
          (define-maker doit
            vector ((alpha: 1 2 3)))
          
          (doit (alpha: 10 20 30)) ==&gt; (vector (list 1 2 3))
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>define-auxiliary-syntax</b><var> symbol<a name="index-define_002dauxiliary_002dsyntax-1074"></a></var><br>
&mdash; Macro: <b>define-auxiliary-syntax</b><var> symbol0 symbol ...<a name="index-define_002dauxiliary_002dsyntax-1075"></a></var><br>
<blockquote><p>This is the binding from <code>(syntax-utilities)</code>, it is reexported by
<code>(makers)</code>. 
</p></blockquote></div>

<!-- end of file -->
   </body></html>

