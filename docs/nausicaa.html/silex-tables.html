<html lang="en">
<head>
<title>silex tables - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="silex.html#silex" title="silex">
<link rel="prev" href="silex-example.html#silex-example" title="silex example">
<link rel="next" href="silex-input.html#silex-input" title="silex input">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d8 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa takes place at:

               `http://github.com/marcomaggi/nausicaa/'


Copyright (C) 2008-2011 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="silex-tables"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="silex-input.html#silex-input">silex input</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="silex-example.html#silex-example">silex example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="silex.html#silex">silex</a>
<hr>
</div>

<h3 class="section">62.2 Creating lexer tables</h3>

<p>The following bindings are exported by the <code>(nausicaa silex)</code>
library.

<div class="defun">
&mdash; Syntax: <b>lex</b><var> clause ...<a name="index-lex-4780"></a></var><br>
<blockquote><p>Build a new lexer table from a lexer specification.  <a href="silex-syntax.html#silex-syntax">Syntax of the specification</a>

        <p>The behaviour of this function is configured with the given <var>clause</var>
arguments; see below for the list of supported options.

        <p>The specification can be loaded from a file, or read from a textual
input port, or acquired from a Scheme string.

        <p>The output is the lexer's <dfn>table</dfn>, a Scheme vector representing the
lexer automaton.  It can be saved to a file, or written to a port, or
evaluated using the <code>(rnrs eval (6))</code> library and returned as value. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>input-string:</b><var> spec-str<a name="index-input_002dstring_003a-4781"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to build the lexer tables from the specification in
the given Scheme string.  When used together, this option supersedes
&lsquo;<samp><span class="samp">input-file:</span></samp>&rsquo; and &lsquo;<samp><span class="samp">input-port:</span></samp>&rsquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>input-port:</b><var> port<a name="index-input_002dport_003a-4782"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to build the lexer tables from the specification
read from the given textual input port.  When used together, this option
supersedes &lsquo;<samp><span class="samp">input-file:</span></samp>&rsquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>input-file:</b><var> pathname<a name="index-input_002dfile_003a-4783"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to build the lexer tables from the specification in
the selected file.  <var>pathname</var> must be a string representing an
existent file pathname. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>library-spec:</b><var> library-name<a name="index-library_002dspec_003a-4784"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to build the output as a proper Scheme library. 
This means a Scheme string is built, representing a <code>library</code> form. 
The string may contain Scheme comments.  When this option is not used
the output is the raw table vector or a <code>define</code> form.

        <p>The argument <var>library-name</var> must represent a valid library name; the
following formats are accepted:

          <ul>
<li>A string, including the parentheses.  Example:

          <pre class="example">               (library-spec: "(calc-lexer)")
               ; -&gt; (library (calc-lexer) ---)
</pre>
          <li>A symbol, which will be converted to string and to which parentheses
will be added.  Example:

          <pre class="example">               (library-spec: 'calc-lexer)
               ; -&gt; (library (calc-lexer) ---)
</pre>
          <li>A list of values, which will be simply converted to string.  Example:

          <pre class="example">               (library-spec: '(calc-lexer))
               ; -&gt; (library (calc-lexer) ---)
</pre>
          </ul>

        <p>It is mandatory to use the option &lsquo;<samp><span class="samp">table-name:</span></samp>&rsquo; along with
&lsquo;<samp><span class="samp">library-spec:</span></samp>&rsquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>library-language:</b><var> lang<a name="index-library_002dlanguage_003a-4785"></a></var><br>
<blockquote><p>Select <var>lang</var> as language to use for the library; the language is
the first import specification after <code>import</code> in the <code>library</code>
form.  By default the language is <code>(rnrs)</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>library-imports:</b><var> import-list<a name="index-library_002dimports_003a-4786"></a></var><br>
<blockquote><p>Select a list of libraries which must be imported when using the
generated lexer.  <var>import-list</var> must be a list of library
specifications; for example, if we want to include the <code>(nausicaa
language sentinel)</code> and <code>(nausicaa language parameters)</code> libraries
we do:

     <pre class="example">          (library-imports: '((sentinel) (parameters)))
</pre>
        <p>If the lexer table is written to a proper Scheme library:
<var>import-list</var> is added to the import specification of the generated
library.  If the lexer table is directly evaluated: <var>import-list</var> is
added to the environment which is handed to <code>eval</code>.

        <p>This option is ignored when the selected output is neither a library,
nor an evaluated library. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>table-name:</b><var> name<a name="index-table_002dname_003a-4787"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to output a <code>define</code> form defining a binding
between <var>name</var> and the table vector.  <var>name</var> can be a string or
symbol, and it must represent a valid identifier.

        <p>When this option is used along with &lsquo;<samp><span class="samp">library-spec:</span></samp>&rsquo;, the
<code>library</code> form will export the identifier <var>name</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>output-value:</b><var> #t|#f<a name="index-output_002dvalue_003a-4788"></a></var><br>
<blockquote><p>When the argument is <code>#t</code>, instruct <code>lex</code> to evaluate the vector
table using the <code>(rnrs eval (6))</code> library and to return the result,
which is then directly usable.

        <p>The list of libraries selected by &lsquo;<samp><span class="samp">library-imports:</span></samp>&rsquo; is added to
the environment used for the evaluation.  By default, the environment
always includes <code>(rnrs)</code>, and also <code>(nausicaa silex lexer)</code>
when the selected lexer format is &lsquo;<samp><span class="samp">code</span></samp>&rsquo;.

        <p>It is an error to use this option along with &lsquo;<samp><span class="samp">table-name:</span></samp>&rsquo;.  When
used together, this option supersedes &lsquo;<samp><span class="samp">output-file:</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">output-port:</span></samp>&rsquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>output-port:</b><var> port<a name="index-output_002dport_003a-4789"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to write the output as string in the given textual
output port.

        <p>When used together, this option supersedes &lsquo;<samp><span class="samp">output-file:</span></samp>&rsquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>output-file:</b><var> pathname<a name="index-output_002dfile_003a-4790"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to save the output in a file with given pathname. 
This is especially useful when the output is a proper <code>library</code> or
<code>define</code> form. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>lexer-format:</b><var> format<a name="index-lexer_002dformat_003a-4791"></a></var><br>
<blockquote><p>Instruct <code>lex</code> about the format of the lexer table.  <var>format</var>
can be one among the following symbols: &lsquo;<samp><span class="samp">decision-tree</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">code</span></samp>&rsquo;, &lsquo;<samp><span class="samp">portable</span></samp>&rsquo;; the default is &lsquo;<samp><span class="samp">decision-tree</span></samp>&rsquo;. 
<a href="silex-format.html#silex-format">Tables output format</a>
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>pretty-print:</b><var> #t|#f<a name="index-pretty_002dprint_003a-4792"></a></var><br>
<blockquote><p>Instruct <code>lex</code> to pretty&ndash;print the contents of the table. 
Normally, the table is displayed as a compact mass of characters fitting
in about 75 columns.  The option is useful only for a developer
of <code>(nausicaa silex)</code>.  The Scheme code generated with the
&lsquo;<samp><span class="samp">code</span></samp>&rsquo; option is always pretty&ndash;printed, the others are not by
default. 
</p></blockquote></div>

<div class="defun">
&mdash; Auxiliary Syntax: <b>counters:</b><var> which-ones<a name="index-counters_003a-4793"></a></var><br>
<blockquote><p>Instruct <code>lex</code> about which counters will be available to the lexer.

        <p>Counters are managed by the input system, and can be used by the lexer. 
The following values for <var>which-ones</var> are available: &lsquo;<samp><span class="samp">all</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">line</span></samp>&rsquo;, &lsquo;<samp><span class="samp">none</span></samp>&rsquo;; &lsquo;<samp><span class="samp">line</span></samp>&rsquo; is the default.  The more counters
the input system maintains, the more it is slowed down.

        <p>Notice that the same &lsquo;<samp><span class="samp">counters:</span></samp>&rsquo; option must be given to <code>lex</code>
and to <code>make-IS</code>, a mismatch will result in undefined
behaviour.  This is because an input system is independent from a lexer
table, and it is more efficient to build tables for a specific set of
counters rather than to configure them at run time. 
</p></blockquote></div>

<!-- page -->
   </body></html>

