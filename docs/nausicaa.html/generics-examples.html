<html lang="en">
<head>
<title>generics examples - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="generics.html#generics" title="generics">
<link rel="next" href="generics-application.html#generics-application" title="generics application">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d11 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa takes place at:

               `http://github.com/marcomaggi/nausicaa/'


Copyright (C) 2008-2011 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="generics-examples"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="generics-application.html#generics-application">generics application</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="generics.html#generics">generics</a>
<hr>
</div>

<h3 class="section">25.1 Examples of method dispatching</h3>

<p>Here we show with some examples what we have to expect from the
multimethod dispatching of <code>(nausicaa language generics)</code>.  In the
following examples the string <code>%apple</code> is written in place of the
value bound to the symbol <code>&lt;apple&gt;</code>.

   <p>Let's examine this example which uses the <code>(nausicaa language
classes)</code> library:

<pre class="example">     (define-class &lt;one&gt; (inherit &lt;top&gt;) (nongenerative one))
     (define-class &lt;two&gt; (inherit &lt;one&gt;) (nongenerative two))
     (define-class &lt;c&gt;   (inherit &lt;two&gt;) (nongenerative c))
</pre>
   <p class="noindent">the class hierarchy is:

<pre class="example">     &lt;top&gt; -&gt; &lt;one&gt; -&gt; &lt;two&gt; -&gt; &lt;c&gt;
</pre>
   <p class="noindent">the list of <acronym>UID</acronym>s for <code>&lt;c&gt;</code> is:

<pre class="example">     (class-uid-list &lt;c&gt;)
     &rArr; (c two one nausicaa:builtin:&lt;top&gt;)
</pre>
   <p class="noindent">so for the generic function:

<pre class="example">     (define-generic doit (o))
     (define-method (doit (o &lt;one&gt;)) 'one)
     (define-method (doit (o &lt;two&gt;)) 'two)
</pre>
   <p class="noindent">applied to a value of type <code>&lt;c&gt;</code>: the method with <code>&lt;two&gt;</code> in the
signature is <em>more specific</em> than the method with <code>&lt;one&gt;</code> in
the signature:

<pre class="example">     (doit (make-&lt;c&gt;)) &rArr; two
</pre>
   <p class="noindent">also the method with <code>&lt;one&gt;</code> in the signature is the &ldquo;next method&rdquo;
of the method with <code>&lt;two&gt;</code> in the signature, we can call it using
<code>call-next-method</code>.  The following example shows a call to the next
method:

<pre class="example">     (define-generic fluff (o))
     
     (define-method (fluff (o &lt;one&gt;))
       'one)
     
     (define-method (fluff (o &lt;two&gt;))
       (cons 'two (call-next-method)))
     
     (define o (make-&lt;c&gt;))
     
     (fluff o)
     &rArr; (two . one)
</pre>
   <p>The syntax <code>define-generic</code> defines a macro and the syntax
<code>define-method</code> adds a new method to the generic function;
<code>define-generic</code> establishes the number of arguments for the
generic function: all the methods must have the same number of
arguments.

   <p>It is possible to define a function accepting different numbers of
arguments as follows:

<pre class="example">     (define fluff
       (case-lambda
        ((a)
         (fluff-1 a))
        ((a b)
         (fluff-2 a b))
        ((a b . rest)
         (fluff-3 a b rest))))
     
     (define-generic fluff-1 (o))
     (define-generic fluff-2 (o p))
     (define-generic fluff-3 (o p rest))
     
     (define-method (fluff-1 (o &lt;one&gt;))
       ---)
     
     (define-method (fluff-2 (o &lt;one&gt;) (p &lt;two&gt;))
       ---)
     
     (define-method (fluff-3 (o &lt;one&gt;) (p &lt;two&gt;) rest)
       ---)
</pre>
   <p class="noindent">this way we turn a set of macros into a single &ldquo;generic function&rdquo;
which is truly a function.  If we avoid wrapping the macros into a
function we gain a bit of speed in function calls.

<!-- page -->
   </body></html>

