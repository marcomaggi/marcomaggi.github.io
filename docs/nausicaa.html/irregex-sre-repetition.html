<html lang="en">
<head>
<title>irregex sre repetition - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="irregex-sre.html#irregex-sre" title="irregex sre">
<link rel="prev" href="irregex-sre-basic.html#irregex-sre-basic" title="irregex sre basic">
<link rel="next" href="irregex-sre-char_002dsets.html#irregex-sre-char_002dsets" title="irregex sre char-sets">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d8 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa takes place at:

               `http://github.com/marcomaggi/nausicaa/'


Copyright (C) 2008-2011 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="irregex-sre-repetition"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="irregex-sre-char_002dsets.html#irregex-sre-char_002dsets">irregex sre char-sets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="irregex-sre-basic.html#irregex-sre-basic">irregex sre basic</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="irregex-sre.html#irregex-sre">irregex sre</a>
<hr>
</div>

<h4 class="subsection">59.9.3 Repetition patterns</h4>

<p>There are several ways to control the number of times a pattern is
matched.  The simplest of these is <code>?</code> which just optionally
matches the pattern:

<pre class="example">     (irregex-search '(: "match" (? "es") "!") "matches!")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "match" (? "es") "!") "match!")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "match" (? "es") "!") "matche!")
     &rArr; #f
</pre>
   <p>To optionally match any number of times we use <code>*</code>, the Kleene
star:

<pre class="example">     (irregex-search '(: "&lt;" (* (~ #\&gt;)) "&gt;") "&lt;html&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (* (~ #\&gt;)) "&gt;") "&lt;&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (* (~ #\&gt;)) "&gt;") "&lt;html")
     &rArr; #f
</pre>
   <p>Often we want to match any number of times, but at least one time is
required, and for that we use <code>+</code>:

<pre class="example">     (irregex-search '(: "&lt;" (+ (~ #\&gt;)) "&gt;") "&lt;html&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (+ (~ #\&gt;)) "&gt;") "&lt;a&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (+ (~ #\&gt;)) "&gt;") "&lt;&gt;")
     &rArr; #f
</pre>
   <p>More generally, to match at least a given number of times, we use
<code>&gt;=</code>:

<pre class="example">     (irregex-search '(: "&lt;" (&gt;= 3 (~ #\&gt;)) "&gt;") "&lt;table&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (&gt;= 3 (~ #\&gt;)) "&gt;") "&lt;pre&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (&gt;= 3 (~ #\&gt;)) "&gt;") "&lt;tr&gt;")
     &rArr; #f
</pre>
   <p>To match a specific number of times exactly we use <code>=</code>:

<pre class="example">     (irregex-search '(: "&lt;" (= 4 (~ #\&gt;)) "&gt;") "&lt;html&gt;")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: "&lt;" (= 4 (~ #\&gt;)) "&gt;") "&lt;table&gt;")
     &rArr; #f
</pre>
   <p>And finally, the most general form is <code>**</code> which specifies a range
of times to match.  All of the earlier forms are special cases of this.

<pre class="example">     (irregex-search '(: (= 3 (** 1 3 numeric) ".")
                         (** 1 3 numeric))
                     "192.168.1.10")
     &rArr; #&lt;match&gt;
     
     (irregex-search '(: (= 3 (** 1 3 numeric) ".")
                         (** 1 3 numeric))
                     "192.0168.1.10")
     &rArr; #f
</pre>
   <p>There are also so&ndash;called &ldquo;non-greedy&rdquo; variants of these repetition
operators, by convention suffixed with an additional <code>?</code>.  Since
the normal repetition patterns can match any of the allotted repetition
range, these operators will match a string if and only if the normal
versions matched.  However, when the endpoints of which submatch matched
are taken into account (specifically, all matches when using
<code>irregex-search</code> since the endpoints of the match itself matter),
the use of a non&ndash;greedy repetition can change the result.

   <p>So, whereas <code>?</code> can be thought to mean &ldquo;match or don't match&rdquo;,
<code>??</code> means &ldquo;don't match or match&rdquo;.  <code>*</code> typically consumes
as much as possible, but <code>*?</code>  tries first to match zero times, and
only consumes one at a time if that fails.  If we have a greedy operator
followed by a non&ndash;greedy operator in the same pattern, they can produce
surprising results as they compete to make the match longer or shorter. 
If this seems confusing, that's because it is.  Non&ndash;greedy repetitions
are defined only in terms of the specific backtracking algorithm used to
implement them, which for compatibility purposes always means the Perl
algorithm.  Thus, when using these patterns we force <code>(nausicaa
irregex)</code> to use a backtracking engine, and can't rely on efficient
execution.

<!-- page -->
   </body></html>

