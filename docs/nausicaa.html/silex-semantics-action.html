<html lang="en">
<head>
<title>silex semantics action - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="silex-semantics.html#silex-semantics" title="silex semantics">
<link rel="next" href="silex-semantics-rules.html#silex-semantics-rules" title="silex semantics rules">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d14 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa/Scheme takes place at:

            `http://github.com/marcomaggi/nausicaa-scheme/'


Copyright (C) 2008-2012 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="silex-semantics-action"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="silex-semantics-rules.html#silex-semantics-rules">silex semantics rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="silex-semantics.html#silex-semantics">silex semantics</a>
<hr>
</div>

<h4 class="subsection">74.6.1 Evaluation of the actions</h4>

<p><a name="index-yycontinue-5534"></a><a name="index-yygetc-5535"></a><a name="index-yyungetc-5536"></a><a name="index-yytext-5537"></a><a name="index-yyline-5538"></a><a name="index-yycolumn-5539"></a><a name="index-yyoffset-5540"></a>

   <p>The action of a rule is evaluated when the corresponding pattern is
matched.  The result of its evaluation is the result that the lexical
analyser returns to its caller.

   <p>We can think of an action like this: it is a form which is placed in the
body of a <code>lambda</code> function, which in turn is invoked when a token
matching the regular expression is found.  So the following
specification:

<pre class="example">     decint          [0-9]+
     
     %%
     
     {decint}        (string-&gt;number yytext)
</pre>
   <p class="noindent">will cause the following code to be put in the generated lexer tables:

<pre class="example">     (lambda (yytext)
       (string-&gt;number yytext))
</pre>
   <p class="noindent">arguments in the formals of the <code>lambda</code> are local bindings we can
use in our actions.  There are a few local bindings that are accessible
by the action when it is evaluated: <code>yycontinue</code>, <code>yygetc</code>,
<code>yyungetc</code>, <code>yytext</code>, <code>yyline</code>, <code>yycolumn</code> and
<code>yyoffset</code>.

<div class="defun">
&mdash; Binding: <b>yycontinue</b><var><a name="index-yycontinue-5541"></a></var><br>
<blockquote><p>Contains the lexical analysis function itself.  Use <code>(yycontinue)</code>
to ask for the next token.  Typically, the action associated with a
pattern that matches white space is a call to <code>yycontinue</code>; it has
the effect of skipping the white space. 
</p></blockquote></div>

<div class="defun">
&mdash; Binding: <b>yygetc</b><var><a name="index-yygetc-5542"></a></var><br>
&mdash; Binding: <b>yyungetc</b><var><a name="index-yyungetc-5543"></a></var><br>
<blockquote><p>Contain functions to get and unget characters from the input of the
analyser.  They take no argument.  <code>yygetc</code> returns a character, or
the &lsquo;<samp><span class="samp">(eof-object)</span></samp>&rsquo; value if the end&ndash;of&ndash;input is reached.

        <p>They should be used to read characters instead of accessing directly the
input port because the analyser may have read more characters in order
to have a look&ndash;ahead.

        <p>If we get more characters than we unget: those characters are skipped by
the lexer function at the next invocation.  If we want to perform a
lookahead without loosing characters, we must unget all the characters
we have got.

        <p>It is incorrect to try to unget more characters than has been gotten
since <em>the parsing of the last token</em>.  If such an attempt is made,
<code>yyungetc</code> silently refuses. 
</p></blockquote></div>

<div class="defun">
&mdash; Binding: <b>yytext</b><var><a name="index-yytext-5544"></a></var><br>
<blockquote><p>Bound to a string containing the lexeme.  This string is guaranteed not
to be mutated.  The string is created only if the action <em>seems</em> to
need it.  The action is considered to need the lexeme when &lsquo;<samp><span class="samp">yytext</span></samp>&rsquo;
appears somewhere in the text of the action. 
</p></blockquote></div>

<div class="defun">
&mdash; Binding: <b>yyline</b><var><a name="index-yyline-5545"></a></var><br>
&mdash; Binding: <b>yycolumn</b><var><a name="index-yycolumn-5546"></a></var><br>
&mdash; Binding: <b>yyoffset</b><var><a name="index-yyoffset-5547"></a></var><br>
<blockquote><p>Indicate the position in the input at the beginning of the lexeme. 
<code>yyline</code> is the number of the line; the first line is numbered
1.  <code>yycolumn</code> is the number of the column; the first column
numbered 1.

        <p>It is important to mention that characters such as the tabulation
generate a variable length output when they are printed.  So it would be
more accurate to say that <code>yycolumn</code> is the index of the first
character of the lexeme, starting at the beginning of the line.

        <p><code>yyoffset</code> indicates the distance from the beginning of the input;
the first lexeme has offset 0.

        <p>The three bindings may not all be existent depending on options given to
the function <code>lex</code> when generating the tables. 
</p></blockquote></div>

   <p>There is a default action that is provided for a rule when its action is
omitted.

     <ul>
<li>If the pattern is &lsquo;<samp><span class="samp">&lt;&lt;EOF&gt;&gt;</span></samp>&rsquo;, the default action returns the
end&ndash;of&ndash;file object, &lsquo;<samp><span class="samp">(eof-object)</span></samp>&rsquo;.

     <li>If the pattern is &lsquo;<samp><span class="samp">&lt;&lt;ERROR&gt;&gt;</span></samp>&rsquo;, the default action raises an
assertion violation.  Notice that the error message of this assertion
cannot hold the line and column numbers, because this default action
must be usable by lexers that do not use such counters, too.

     <li>The default action for the other patterns is to call the analyser again. 
</ul>

   <p>It is clearer (and normally more useful) to specify explicitly the
action associated with each rule.

<!-- page -->
   </body></html>

