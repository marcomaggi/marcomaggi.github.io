<html lang="en">
<head>
<title>notes nan inf - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="notes-nan.html#notes-nan" title="notes nan">
<link rel="next" href="notes-nan-nan.html#notes-nan-nan" title="notes nan nan">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d12 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa takes place at:

               `http://github.com/marcomaggi/nausicaa/'


Copyright (C) 2008-2011 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="notes-nan-inf"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="notes-nan-nan.html#notes-nan-nan">notes nan nan</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="notes-nan.html#notes-nan">notes nan</a>
<hr>
</div>

<h4 class="appendixsubsec">A.1.1 How to deal with infinities</h4>

<p>Infinities can appear as literals in Scheme source code as &lsquo;<samp><span class="samp">+inf.0</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">-inf.0</span></samp>&rsquo;, and they can be the result of an expression composing
Scheme arithmetic functions.

   <p>We have to distinguish between <dfn>number objects</dfn> as defined in
<acronym>R6RS</acronym> Scheme, and <dfn>numbers</dfn> as defined by Mathematics.

<!--  -->
<h5 class="subsubheading">Infinities in the mathematical realm</h5>

<p>We can take that Algebra defines <dfn>groups</dfn> as couples (S, o)
where: S is a set of mathematical entities, o is an
operation that composes two entities in S and evaluates to some
mathematical entity.  We can define the group (R, +), where
R is the set of real numbers and + is the common addition,
because they are compliant with the following axioms:

     <dl>
<dt><em>Closure</em><dd>For every couple of reals, their sum is a real.

     <br><dt><em>Associativity</em><dd>For every triplet of reals:

     <pre class="example">          a + (b + c) = (a + b) + c
</pre>
     <br><dt><em>Identity element</em><dd>There exists a unique real 0 for which, for every real a:

     <pre class="example">          0 + a = a + 0 = a
</pre>
     <br><dt><em>Inverse element</em><dd>For every real a there is a unique other real b for which:

     <pre class="example">          a + b = 0  &rArr;  a = -b
</pre>
     </dl>

<p class="noindent">the existence of the inverse element for addition allows the definition
of subtraction.  The couple (R, *), the reals with the ordinary
product, is also a group:

     <dl>
<dt><em>Closure</em><dd>
     <pre class="example">          \forall a, b \in R     a * b = c   c \in R
</pre>
     <br><dt><em>Associativity</em><dd>
     <pre class="example">          a * (b * c) = (a * b) * c
</pre>
     <br><dt><em>Identity element</em><dd>
     <pre class="example">          1 * a = a * 1 = a
</pre>
     <br><dt><em>Inverse element</em><dd>
     <pre class="example">          a * b = 1  &rArr;  a = 1/b
</pre>
     </dl>

<p class="noindent">the existence of the inverse element for multiplication allows the
definition of division.

   <p>The triplet (S, +, *) in which S is a set of mathematical
entities, and + and * are composition operations with the
properties for a group, is called <dfn>field</dfn> if the following
additional axioms hold:

     <dl>
<dt><em>Commutativity</em><dd>
     <pre class="example">          a + b = b + a    a * b = b * a
</pre>
     <br><dt><em>Distributivity</em><dd>
     <pre class="example">          a * (b + c) = a * b + a * c
</pre>
     </dl>

   <p>Human experience shows that it is convenient to state (simplified):
Every mathematical entity which is not compliant with the axioms of a
field is not a number.

   <p>Infinities are abstract mathematical entities which we can define
through the following disequations:

<pre class="example">     \forall r \in R        -\infty &lt; r &lt; +\infty
</pre>
   <p class="noindent">which means:

     <ul>
<li>Positive infinity is comparable to numbers and it is greater than all
the positive numbers.

     <li>Negative infinity is comparable to numbers and it is lesser than all the
negative number. 
</ul>

<p class="noindent">we notice that the comparison operator &lt; does not define a group,
because the result of 1 &lt; 2 (as defined in Mathematics) is a
boolean value not a number.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>

   <p>Despite the fact that we can compare them to numbers, <strong>infinities
are not numbers in the Mathematics sense.</strong>  We can show this with the
following simple mathematical computation; let's consider the following
equation:

<pre class="example">     4 + +\infty = x
</pre>
   <p class="noindent">what should we take as value for x?  x cannot be a number
like, say, 8, because:

<pre class="example">     4 + +\infty = 8
     &rArr; +\infty = 8 - 4 = 4
     &rArr; +\infty = 4  Wrong!
</pre>
   <p class="noindent">the only answer that tries to make some sense is x = +\infty, but
then:

<pre class="example">     4 + +\infty = +\infty
     &rArr;  4 = +\infty - +\infty = 0
     &rArr;  4 = 0  Wrong!
</pre>
   <p class="noindent">if we assume that infinities are numbers, some perfectly legal algebraic
manipulation yields a wrong result.  Human beings define mathematical
entities based on their usefulness; human experience shows that it is
more useful to avoid absurd equations like 4 = 0, than to define
infinities as numbers.

   <p>So, infinities are <strong>not</strong> numbers and the equation 4 +
\infty = x is wrong in the sense that, in Mathematics, it is an error
to write it.

   <p>Mathematics is not &ldquo;perfect&rdquo;, in the sense that it allows us to write
wrong equations; unfortunately we can recognise an equation as wrong
only by trying to solve it.

   <p>Let's look at this equation:

<pre class="example">        4 - 3       1
     ------------ = - = x
     12 - (4 + 8)   0
</pre>
   <p class="noindent">what should we take as value for x?

   <p>If we had the limit:

<pre class="example">              1
     \lim    --- = x      t &gt; 0
     t -&gt; 0   t
</pre>
   <p class="noindent">we would know that x -&gt; +\infty (x approaches
+\infty, it is not equal to it).  Computing 1 / t for
t smaller and smaller, yields a result that is a bigger and
bigger positive number, which approaches the mathematical entity greater
than all the positive numbers; that is +\infty.

   <p>But what about the straight 1 / 0 = x?  The only mathematical
entity that makes sense as answer is x = +\infty, so 1 / 0
is not a number.  We can demonstrate this with the following simple
computation:

<pre class="example">     3 * (1 / 0) = y
     &rArr;  3 / 0 = y
     &rArr;  3 = y * 0 = 0
     &rArr;  3 = 0   Wrong!
</pre>
   <p class="noindent">so, it is impossible for 1 / 0 and y to comply with the
axioms.

<!--  -->
<h5 class="subsubheading">Infinities in the computer realm</h5>

<p>Number objects are all the Scheme values for which the predicate
<code>number?</code> returns <code>#t</code>.  Both the infinities &lsquo;<samp><span class="samp">+inf.0</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">-inf.0</span></samp>&rsquo; are number objects.  This way Scheme defines a class of
values which can be used as arguments to arithmetic procedures, and
which can potentially be the return value of an arithmetic procedure.

   <p>We acknowledged that, when a mathematical expression is non&ndash;compliant
with the axioms of definition of numbers, we can verify it by doing the
computation and checking the final or partial results.  A computer can
do the same by detecting, for example, if a division has 1 and
0 as operands.

   <p>It turns out that making a computer processor interrupt a computation
when an expression is wrong, is inefficient.  So two special values were
defined to allow a computation to signal that special error:
&lsquo;<samp><span class="samp">+inf.0</span></samp>&rsquo; and &lsquo;<samp><span class="samp">-inf.0</span></samp>&rsquo;.

   <p>When a computation returns &lsquo;<samp><span class="samp">+inf.0</span></samp>&rsquo; and &lsquo;<samp><span class="samp">-inf.0</span></samp>&rsquo; we know that
the expression was wrong.  <acronym>R6RS</acronym> Scheme defines the following
conventional results:

<pre class="example">     (div 1 0) &rArr; error
     (/   1 0) &rArr; error
     
     (/   1.0 0)   &rArr; +inf.0
     (/   1   0.0) &rArr; +inf.0
     (/   1.0 0.0) &rArr; +inf.0
</pre>
   <p class="noindent">when both the operands are exact, the expression raises an error; when
one of the operands is inexact, the expression yields infinity.

   <p>Special rules were defined to avoid to mistake a wrong computation for a
correct one; for example:

<pre class="example">     (+ 44 (* 23 +inf.0)) &rArr; +inf.0
     (+ 44 (* 23 -inf.0)) &rArr; -inf.0
</pre>
   <p class="noindent">we know that both of these are wrong, but we also know that they are
wrong in that special way for which returning an infinity makes some
sense.  It is our responsibility to decide what to do.

   <p>The special rules makes it impossible for an expression to return a
finite number if one of the partial results was an infinity.  Sometimes
the composition of two infinities can yield an infinity with no
confusion; examples:

<pre class="example">     (+ +inf.0 +inf.0) &rArr; +inf.0
     (+ -inf.0 -inf.0) &rArr; -inf.0
     
     (- +inf.0 -inf.0) &rArr; +inf.0  ;like (+ +inf.0 +inf.0)
     (- -inf.0 +inf.0) &rArr; -inf.0  ;like (+ -inf.0 -inf.0)
     (- +inf.0 -inf.0) &rArr; +inf.0  ;like (+ +inf.0 +inf.0)
     
     (* +inf.0 +inf.0) &rArr; -inf.0
     (* +inf.0 -inf.0) &rArr; -inf.0
     (* -inf.0 -inf.0) &rArr; +inf.0
</pre>
   <p class="noindent">but some expressions are difficult to deal with:

<pre class="example">     (+ +inf.0 -inf.0) &rArr; ?
     (+ -inf.0 +inf.0) &rArr; ?
     
     (- -inf.0 -inf.0) &rArr; ?
     (- -inf.0 +inf.0) &rArr; ?
     
     (/ +inf.0 +inf.0) &rArr; ?
     (/ +inf.0 -inf.0) &rArr; ?
     (/ -inf.0 +inf.0) &rArr; ?
     (/ -inf.0 -inf.0) &rArr; ?
</pre>
   <p class="noindent">neither a number nor an infinity makes sense as result here; we need
NaN.

<!-- page -->
   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> This holds despite the fact that
many programming languages allow a disequation to yield a number.</p>

   <hr></div>

   </body></html>

