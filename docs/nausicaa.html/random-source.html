<html lang="en">
<head>
<title>random source - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="random.html#random" title="random">
<link rel="prev" href="random-numbers.html#random-numbers" title="random numbers">
<link rel="next" href="random-mrg32k3a.html#random-mrg32k3a" title="random mrg32k3a">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d14 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa/Scheme takes place at:

            `http://github.com/marcomaggi/nausicaa-scheme/'


Copyright (C) 2008-2012 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="random-source"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="random-mrg32k3a.html#random-mrg32k3a">random mrg32k3a</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="random-numbers.html#random-numbers">random numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="random.html#random">random</a>
<hr>
</div>

<h3 class="section">48.4 Randomness sources</h3>

<div class="defun">
&mdash; Parameter: <b>random-source-maker</b><var><a name="index-random_002dsource_002dmaker-4108"></a></var><br>
<blockquote><p>Hold a procedure that can be used to generate a new randomness source. 
It is initialised to <code>make-random-source/mrg32k3a</code>.  For example,
it can be used as:

     <pre class="example">          (define source  ((random-source-maker)))
          (define integer (random-source-integer-maker source))
          (display (integer))
          -| &lt;a random integer&gt;
</pre>
        <p class="noindent">and as:

     <pre class="example">          (parameterise ((random-source-maker
                            make-random-source/device))
            (let* ((source  ((random-source-maker)))
                   (integer (random-source-integer-maker source)))
              (display (integer))))
          -| &lt;a random integer&gt;
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source?</b><var> obj<a name="index-random_002dsource_003f-4109"></a></var><br>
<blockquote><p>Test if <var>obj</var> is a randomness source.  Objects of type randomness
source are distinct from all other types of objects. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-state-ref</b><var> source<a name="index-random_002dsource_002dstate_002dref-4110"></a></var><br>
&mdash; Function: <b>random-source-state-set!</b><var> source state<a name="index-random_002dsource_002dstate_002dset_0021-4111"></a></var><br>
<blockquote><p>Get and set the current state of <var>source</var>.  The purpose of these
functions is to allow saving and restoring the state between sessions
(for example, save the state to a file and reload it later).

        <p>The state value is always a vector whose first element is a symbol
describing the generator.  The other elements of the vector depend on
the kind of generator: Refer to generator's documentation for their
format. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-seed!</b><var> source integers-maker<a name="index-random_002dsource_002dseed_0021-4112"></a></var><br>
<blockquote><p>Reseed <var>source</var> to a new state.  <var>integers-maker</var> must be a a
generator of random integer numbers, like the ones returned by
<code>random-source-integers-maker</code>.  Notice that many random sources
require <var>integer-makers</var> to return integers representable with
32 bits. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-required-seed-values</b><var> source<a name="index-random_002dsource_002drequired_002dseed_002dvalues-4113"></a></var><br>
<blockquote><p>When <code>random-source-seed!</code> is used to reseed a <var>source</var>, some
generator will invoke <var>integers-maker</var> a fixed and known number of
times, other generators will invoke it a configurable number of times,
other generators will invoke it until it first returns <code>#f</code>, other
generators will invoke it until the returned numbers have some desired
property.

        <p>This function returns the number of times <var>integers-maker</var> will be
called; if the return value is <code>#f</code>: <var>integers-maker</var> will be
invoked until it first returns <code>#f</code>; if the return value is
infinity: <var>integers-maker</var> will be invoked until it returns numbers
with some desired property. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-jumpahead!</b><var> source number-of-steps<a name="index-random_002dsource_002djumpahead_0021-4114"></a></var><br>
<blockquote><p>Move ahead <var>number-of-steps</var> randomness <var>source</var>'s state.  What
this means exactly depends on the type of <var>source</var>. 
</p></blockquote></div>

   <p>The following procedures return a closure <var>rand</var> to generate
pseudo&ndash;random integers and real numbers using a randomness
<var>source</var>.  If an application obtains and uses several <var>rand</var>
procedures for the same randomness <var>source</var>, a call to any of these
procedures advances the state of <var>source</var>.  Hence, the procedures do
not produce the same sequence of random integers each, but rather share
a state.

<div class="defun">
&mdash; Function: <b>random-source-integers-maker</b><var> source<a name="index-random_002dsource_002dintegers_002dmaker-4115"></a></var><br>
<blockquote><p>Return a procedure <var>rand</var> to generate random integers using
<var>source</var>.  <var>rand</var> takes a single argument <var>U</var>, which must be
a positive integer, and returns the next uniformly distributed random
integer X in the interval 0 &lt;= X &lt; U by advancing the
state of <var>source</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>random-source-reals-maker</b><var> source<a name="index-random_002dsource_002dreals_002dmaker-4116"></a></var><br>
&mdash; Function: <b>random-source-reals-maker</b><var> source unit<a name="index-random_002dsource_002dreals_002dmaker-4117"></a></var><br>
<blockquote><p>Return a procedure <var>rand</var> which, when invoked with no arguments,
generates random real numbers X in the range <code>0 &lt; X &lt; 1</code>
using <var>source</var>.  X=0 and X=1 are excluded in order to
allow \log(X) and \log(1-X) without the danger of a
numerical exception.

        <p>The optional parameter <var>unit</var> determines the quantization of the
output; to have effect, <var>unit</var> must be a number such that <code>0 &lt;
unit &lt; 1</code>, if <var>unit</var> is greater than, or equal to, 1 the
generated numbers will have the default unit.  The numbers created by
<var>rand</var> are spaced by at most <var>unit</var>.  <a href="random-prng-reals.html#random-prng-reals">Generating real numbers</a>, for details. 
</p></blockquote></div>

<!-- page -->
   </body></html>

