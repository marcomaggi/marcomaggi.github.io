<html lang="en">
<head>
<title>stdlib io port output ports - Nausicaa for Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="stdlib-io-port.html#stdlib-io-port" title="stdlib io port">
<link rel="prev" href="stdlib-io-port-textual-input.html#stdlib-io-port-textual-input" title="stdlib io port textual input">
<link rel="next" href="stdlib-io-port-binary-output.html#stdlib-io-port-binary-output" title="stdlib io port binary output">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d7 of Nausicaa/Scheme, a set of
Scheme libraries defining a slightly modified R6RS Scheme language
and augmenting the features of the base and standard R6RS libraries.

The project home page of Nausicaa is at:

             `http://marcomaggi.github.com/nausicaa.html'


development of Nausicaa takes place at:

               `http://github.com/marcomaggi/nausicaa/'


Copyright (C) 2008, 2009, 2010 by Marco Maggi.

Copyright (C) 1996, 1997, 2000, 2001, 2002, 2003, 2004, 2005
Free Software Foundation.

Copyright (C) 1996, 1999-2005 Dorai Sitaram.

Copyright (C) 1998 Oleg Kiselyov.

Copyright (C) 1998, 1999, 2000 Olin Shivers.

Copyright (C) 1999 John David Stone.

Copyright (C) 1999, 2002 Marc Feeley.

Copyright (C) 2001, 2009 Danny Dube'

Copyright (C) 2002 Dr. Mirko Luedde.

Copyright (C) 2002, 2003, 2005, 2006 Sebastian Egner.

Copyright (C) 2003 Ray Dillinger.

Copyright (C) 2003 Taylor Campbell.

Copyright (C) 2005 Jens Axel Soegaard.

Copyright (C) 2005-2009 Alex Shinn.

Copyright (C) 2008 Taro Minowa (Higepon).

Copyright (C) 2005-2008 Dominique Boucher.

Copyright (C) 2004, 2005 Tony Garnock-Jones

Copyright (C) 2005 LShift Ltd.

Copyright (C) 2007, 2008 Philip L. Bewig.

Copyright (C) 2000 Will Fitzgerald.

Copyright (C) 2000 Neodesic Corporation.

Copyright (C) 2000-2006 Joachim Henke.

Copyright (C) 2004-2009 Neil Van Dyke.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections being ``GNU Free
     Documentation License'' and ``GNU General Public License'', no
     Front--Cover Texts, and no Back--Cover Texts.  A copy of the
     license is included in the section entitled ``GNU Free
     Documentation License''.

This document embeds an unofficial assemblage of several documents
reformatted in Texinfo; the reformatting author and maintainer is
Marco Maggi <marco.maggi-ipsu@poste.it>.  See the appendix ``Credits'' for
the list of original documents and their authors.  See also the
`README' and `CREDITS' files for additional attributions.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="stdlib-io-port-output-ports"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="stdlib-io-port-binary-output.html#stdlib-io-port-binary-output">stdlib io port binary output</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="stdlib-io-port-textual-input.html#stdlib-io-port-textual-input">stdlib io port textual input</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="stdlib-io-port.html#stdlib-io-port">stdlib io port</a>
<hr>
</div>

<h5 class="subsubsection">4.8.2.10 Output ports</h5>

<p>An output port is a sink to which bytes or characters are written.  The
written data may control external devices or may produce files and other
objects that may subsequently be opened for input.

<div class="defun">
&mdash; Procedure: <b>output-port?</b><var> obj<a name="index-output_002dport_003f-599"></a></var><br>
<blockquote><p>Return <code>#t</code> if the argument is an output port (or a combined input
and output port), <code>#f</code> otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>flush-output-port</b><var> output-port<a name="index-flush_002doutput_002dport-600"></a></var><br>
<blockquote><p>Flushes any buffered output from the buffer of <var>output-port</var> to the
underlying file, device, or object.  The <code>flush-output-port</code>
procedure returns unspecified values. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>output-port-buffer-mode</b><var> output-port<a name="index-output_002dport_002dbuffer_002dmode-601"></a></var><br>
<blockquote><p>Return the symbol that represents the buffer mode of <var>output-port</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>open-file-output-port</b><var> filename<a name="index-open_002dfile_002doutput_002dport-602"></a></var><br>
&mdash; Procedure: <b>open-file-output-port</b><var> filename file-options<a name="index-open_002dfile_002doutput_002dport-603"></a></var><br>
&mdash; Procedure: <b>open-file-output-port</b><var> filename file-options buffer-mode<a name="index-open_002dfile_002doutput_002dport-604"></a></var><br>
&mdash; Procedure: <b>open-file-output-port</b><var> filename file-options buffer-mode maybe-transcoder<a name="index-open_002dfile_002doutput_002dport-605"></a></var><br>
<blockquote><p><var>maybe-transcoder</var> must be either a transcoder or <code>#f</code>.

        <p>The <code>open-file-output-port</code> procedure returns an output port for
the named file.

        <p>The <var>file-options</var> argument, which may determine various aspects of
the returned port, defaults to the value of <code>(file-options)</code>.

        <p>The <var>buffer-mode</var> argument, if supplied, must be one of the symbols
that name a buffer mode.  The <var>buffer-mode</var> argument defaults to
<code>block</code>.

        <p>If <var>maybe-transcoder</var> is a transcoder, it becomes the transcoder
associated with the port.

        <p>If <var>maybe-transcoder</var> is <code>#f</code> or absent, the port will be a
binary port and will support the <code>port-position</code> and
<code>set-port-position!</code>  operations.  Otherwise the port will be a
textual port, and whether it supports the <code>port-position</code> and
<code>set-port-position!</code> operations is implementation&ndash;dependent (and
possibly transcoder&ndash;dependent). 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>open-bytevector-output-port</b><var><a name="index-open_002dbytevector_002doutput_002dport-606"></a></var><br>
&mdash; Procedure: <b>open-bytevector-output-port</b><var> maybe-transcoder<a name="index-open_002dbytevector_002doutput_002dport-607"></a></var><br>
<blockquote><p><var>maybe-transcoder</var> must be either a transcoder or <code>#f</code>.

        <p>The <code>open-bytevector-output-port</code> procedure returns two values: an
output port and an extraction procedure.  The output port accumulates
the bytes written to it for later extraction by the procedure.

        <p>If <var>maybe-transcoder</var> is a transcoder, it becomes the transcoder
associated with the port.  If <var>maybe-transcoder</var> is <code>#f</code> or
absent, the port will be a binary port and will support the
<code>port-position</code> and <code>set-port-position!</code>  operations. 
Otherwise the port will be a textual port, and whether it supports the
<code>port-position</code> and <code>set-port-position!</code> operations is
implementation&ndash;dependent (and possibly transcoder&ndash;dependent).

        <p>The extraction procedure takes no arguments.  When called, it returns a
bytevector consisting of all the port's accumulated bytes (regardless of
the port's current position), removes the accumulated bytes from the
port, and resets the port's position. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>call-with-bytevector-output-port</b><var> proc<a name="index-call_002dwith_002dbytevector_002doutput_002dport-608"></a></var><br>
&mdash; Procedure: <b>call-with-bytevector-output-port</b><var> proc maybe-transcoder<a name="index-call_002dwith_002dbytevector_002doutput_002dport-609"></a></var><br>
<blockquote><p><var>proc</var> must accept one argument.  <var>maybe-transcoder</var> must be
either a transcoder or <code>#f</code>.

        <p>The <code>call-with-bytevector-output-port</code> procedure creates an output
port that accumulates the bytes written to it and calls <var>proc</var> with
that output port as an argument.

        <p>Whenever <var>proc</var> returns, a bytevector consisting of all of the
port's accumulated bytes (regardless of the port's current position) is
returned and the port is closed.

        <p>The transcoder associated with the output port is determined as for a
call to <code>open-bytevector-output-port</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>open-string-output-port</b><var><a name="index-open_002dstring_002doutput_002dport-610"></a></var><br>
<blockquote><p>Return two values: a textual output port and an extraction procedure. 
The output port accumulates the characters written to it for later
extraction by the procedure.

        <p>The port may or may not have an associated transcoder; if it does, the
transcoder is implementation-dependent.  The port should support the
<code>port-position</code> and <code>set-port-position!</code> operations.

        <p>The extraction procedure takes no arguments.  When called, it returns a
string consisting of all of the port's accumulated characters
(regardless of the current position), removes the accumulated characters
from the port, and resets the port's position. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>call-with-string-output-port</b><var> proc<a name="index-call_002dwith_002dstring_002doutput_002dport-611"></a></var><br>
<blockquote><p><var>proc</var> must accept one argument.

        <p>The <code>call-with-string-output-port</code> procedure creates a textual
output port that accumulates the characters written to it and calls
<var>proc</var> with that output port as an argument.

        <p>Whenever <var>proc</var> returns, a string consisting of all of the port's
accumulated characters (regardless of the port's current position) is
returned and the port is closed.

        <p>The port may or may not have an associated transcoder; if it does, the
transcoder is implementation-dependent.  The port should support the
<code>port-position</code> and <code>set-port-position!</code> operations. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>standard-output-port</b><var><a name="index-standard_002doutput_002dport-612"></a></var><br>
&mdash; Procedure: <b>standard-error-port</b><var><a name="index-standard_002derror_002dport-613"></a></var><br>
<blockquote><p>Return a fresh binary output port connected to the standard output or
standard error respectively.  Whether the port supports the
<code>port-position</code> and <code>set-port-position!</code> operations is
implementation&ndash;dependent. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>current-output-port</b><var><a name="index-current_002doutput_002dport-614"></a></var><br>
&mdash; Procedure: <b>current-error-port</b><var><a name="index-current_002derror_002dport-615"></a></var><br>
<blockquote><p>These return default textual ports for regular output and error output. 
Normally, these default ports are associated with standard output, and
standard error, respectively.

        <p>The return value of <code>current-output-port</code> can be dynamically
re&ndash;assigned using the <code>with-output-to-file</code> procedure from the
<code>(rnrs io simple (6))</code> library.  A port returned by one of these
procedures may or may not have an associated transcoder; if it does, the
transcoder is implementation&ndash;dependent. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>make-custom-binary-output-port</b><var> id write! get-position set-position! close<a name="index-make_002dcustom_002dbinary_002doutput_002dport-616"></a></var><br>
<blockquote><p>Return a newly created binary output port whose byte sink is an
arbitrary algorithm represented by the <var>write!</var> procedure.  <var>id</var>
must be a string naming the new port, provided for informational
purposes only.  <var>write!</var> must be a procedure and should behave as
specified below; it will be called by operations that perform binary
output.

        <p>Each of the remaining arguments may be <code>#f</code>; if any of those
arguments is not <code>#f</code>, it must be a procedure and should behave as
specified in the description of <code>make-custom-binary-input-port</code>.

          <dl>
<dt><code>(</code><var>write!</var> <var>bytevector</var> <var>start</var> <var>count</var><code>)</code><dd><var>start</var> and <var>count</var> will be non-negative exact integer objects,
and <var>bytevector</var> will be a bytevector whose length is at least
<var>start</var>+<var>count</var>.

          <p>The <var>write!</var> procedure should write up to <var>count</var> bytes from
<var>bytevector</var> starting at index <var>start</var> to the byte sink.  In any
case, the <var>write!</var> procedure should return the number of bytes that
it wrote, as an exact integer object. 
</dl>

        <p><strong>Implementation responsibilities:</strong> The implementation must check
the return values of <var>write!</var> only when it actually calls
<var>write!</var> as part of an I/O operation requested by the program.  The
implementation is not required to check that <var>write!</var> otherwise
behaves as described.  If it does not, however, the behavior of the
resulting port is unspecified. 
</p></blockquote></div>

<div class="defun">
&mdash; Procedure: <b>make-custom-textual-output-port</b><var> id write! get-position set-position! close<a name="index-make_002dcustom_002dtextual_002doutput_002dport-617"></a></var><br>
<blockquote><p>Return a newly created textual output port whose byte sink is an
arbitrary algorithm represented by the <var>write!</var> procedure.  <var>Id</var>
must be a string naming the new port, provided for informational
purposes only.  <var>write!</var> must be a procedure and should behave as
specified below; it will be called by operations that perform textual
output.

        <p>Each of the remaining arguments may be <code>#f</code>; if any of those
arguments is not <code>#f</code>, it must be a procedure and should behave as
specified in the description of <code>make-custom-textual-input-port</code>.

          <dl>
<dt><code>(</code><var>write!</var> <var>string</var> <var>start</var> <var>count</var><code>)</code><dd><var>start</var> and <var>count</var> will be non&ndash;negative exact integer objects,
and <var>string</var> will be a string whose length is at least
<var>start</var>+<var>count</var>.

          <p>The <var>write!</var> procedure should write up to <var>count</var> characters
from <var>string</var> starting at index <var>start</var> to the character sink. 
In any case, the <var>write!</var> procedure should return the number of
characters that it wrote, as an exact integer object. 
</dl>

        <p>The port may or may not have an associated transcoder; if it does, the
transcoder is implementation&ndash;dependent.

        <p><strong>Implementation responsibilities:</strong> The implementation must check
the return values of <var>write!</var> only when it actually calls
<var>write!</var> as part of an I/O operation requested by the program.  The
implementation is not required to check that <var>write!</var> otherwise
behaves as described.  If it does not, however, the behavior of the
resulting port is unspecified. 
</p></blockquote></div>

<!-- page -->
   </body></html>

