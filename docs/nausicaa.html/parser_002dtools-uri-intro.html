<html lang="en">
<head>
<title>parser-tools uri intro - Nausicaa for Vicare Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Nausicaa for Vicare Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="parser_002dtools-uri.html#parser_002dtools-uri" title="parser-tools uri">
<link rel="next" href="parser_002dtools-uri-conditions.html#parser_002dtools-uri-conditions" title="parser-tools uri conditions">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.3d7 of Nausicaa, a
collection of libraries for Vicare Scheme implementing the language
`(nausicaa)' on top of `(vicare)'.

Copyright (C) 2012, 2013 by Marco Maggi <marco.maggi-ipsu@poste.it>

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with Invariant Sections being ``GNU Free Documentation
     License'' and ``GNU General Public License'', no Front--Cover
     Texts, and no Back--Cover Texts.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License''.
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="parser-tools-uri-intro"></a>
<a name="parser_002dtools-uri-intro"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="parser_002dtools-uri-conditions.html#parser_002dtools-uri-conditions">parser-tools uri conditions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="parser_002dtools-uri.html#parser_002dtools-uri">parser-tools uri</a>
<hr>
</div>

<h4 class="subsection">12.5.1 Introduction to <acronym>URI</acronym> elements</h4>

<p><acronym>RFC</acronym> 3986 defines the following <acronym>URI</acronym> grammar (from &ldquo;Appendix A&rdquo;);
there are 4 main elements <code>URI</code>, <code>absolute-URI</code>,
<code>relative-ref</code>, <code>path</code>.

   <p>An <code>URI</code> begins with a mandatory <code>scheme</code> component and has
one of the following path types: <code>path-abempty</code>,
<code>path-absolute</code>, <code>path-rootless</code>, <code>path-empty</code>, with
<code>path-abempty</code> present only when the <code>authority</code> is also
present.  An <code>absolute-URI</code> is just an <code>URI</code> without
<code>fragment</code> component.

   <p>A <code>relative-ref</code> begins with no <code>scheme</code> component and has one
of the following path types: <code>path-abempty</code>, <code>path-absolute</code>,
<code>path-noscheme</code>, <code>path-empty</code>, with <code>path-abempty</code>
present only when the <code>authority</code> is also present.  Notice how a
<code>relative-ref</code> has the <code>path-noscheme</code> component rather than
the <code>path-rootless</code> component of the <code>URI</code>.

<pre class="smallexample">     URI-reference = URI | relative-ref
     
     URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
     
     relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
     
     absolute-URI  = scheme ":" hier-part [ "?" query ]
     
     hier-part     = "//" authority path-abempty
                   | path-absolute
                   | path-rootless
                   | path-empty
     
     relative-part = "//" authority path-abempty
                   | path-absolute
                   | path-noscheme
                   | path-empty
     
     scheme        = ALPHA *( ALPHA | DIGIT | "+" | "-" | "." )
     
     authority     = [ userinfo "@" ] host [ ":" port ]
     userinfo      = *( unreserved | pct-encoded | sub-delims | ":" )
     host          = IP-literal | IPv4address | reg-name
     port          = *DIGIT
     
     IP-literal    = "[" ( IPv6address | IPvFuture  ) "]"
     
     IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved | sub-delims | ":" )
     
     IPv6address   =                            6( h16 ":" ) ls32
                   |                       "::" 5( h16 ":" ) ls32
                   | [               h16 ] "::" 4( h16 ":" ) ls32
                   | [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
                   | [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
                   | [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
                   | [ *4( h16 ":" ) h16 ] "::"              ls32
                   | [ *5( h16 ":" ) h16 ] "::"              h16
                   | [ *6( h16 ":" ) h16 ] "::"
     
     h16           = 1*4HEXDIG
     ls32          = ( h16 ":" h16 ) | IPv4address
     IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
     
     dec-octet     = DIGIT                 ; 0-9
                   | %x31-39 DIGIT         ; 10-99
                   | "1" 2DIGIT            ; 100-199
                   | "2" %x30-34 DIGIT     ; 200-249
                   | "25" %x30-35          ; 250-255
     
     reg-name      = *( unreserved | pct-encoded | sub-delims )
     
     path          = path-abempty    ; begins with "/" or is empty
                   | path-absolute   ; begins with "/" but not "//"
                   | path-noscheme   ; begins with a non-colon segment
                   | path-rootless   ; begins with a segment
                   | path-empty      ; zero characters
     
     path-abempty  = *( "/" segment )
     path-absolute = "/" [ segment-nz *( "/" segment ) ]
     path-noscheme = segment-nz-nc *( "/" segment )
     path-rootless = segment-nz *( "/" segment )
     path-empty    = 0&lt;pchar&gt;
     
     segment       = *pchar
     segment-nz    = 1*pchar
     segment-nz-nc = 1*( unreserved | pct-encoded | sub-delims | "@" )
                   ; non-zero-length segment without any colon ":"
     
     pchar         = unreserved | pct-encoded | sub-delims | ":" | "@"
     
     query         = *( pchar | "/" | "?" )
     
     fragment      = *( pchar | "/" | "?" )
     
     pct-encoded   = "%" HEXDIG HEXDIG
     
     unreserved    = ALPHA | DIGIT | "-" | "." | "_" | "~"
     reserved      = gen-delims | sub-delims
     gen-delims    = ":" | "/" | "?" | "#" | "[" | "]" | "@"
     sub-delims    = "!" | "$" | "&amp;" | "'" | "(" | ")"
                   | "*" | "+" | "," | ";" | "="
</pre>
   <p>Here are some notes on producing <acronym>URI</acronym> references:

     <ul>
<li>Percent&ndash;encoded characters should be produced in upper case.

     <li>The <code>scheme</code> component should be produced in lower case.

     <li>The <code>host</code> component is case insensitive (including the <code>v</code>
starting a <code>ipvfuture</code>), but should be produced in lower case.

     <li>Quoting the <acronym>RFC</acronym> regarding <code>host</code> components:

     <blockquote>
Non&ndash;<acronym>ASCII</acronym> characters must first be encoded according to <acronym>UTF</acronym>-8,
and then each octet of the corresponding <acronym>UTF</acronym>8 sequence must be
percent&ndash;encoded to be represented as <acronym>URI</acronym> characters.  <acronym>URI</acronym>
producing applications must not use percent&ndash;encoding in <code>host</code>
unless it is used to represent a <acronym>UTF</acronym>-8 character sequence. 
</blockquote>

     <li>IPv6 addresses should be produced with hex digits in lower case. 
</ul>

<!-- page -->
   </body></html>

