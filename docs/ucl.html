<html lang="en">
<head>
<title>Useless Containers Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Useless Containers Library">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 2.0d0 of Useless Containers Library, a C
language library implementing a set of containers.

The package is distributed under the terms of the GNU General Public
License (GPL) and can be downloaded from:

                  `http://github.com/marcomaggi/ucl'


Copyright (C) 2001-2010, 2013 by Marco Maggi <marco.maggi-ipsu@poste.it>

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with Invariant Sections being ``GNU Free Documentation
     License'' and ``GNU General Public License'', no Front--Cover
     Texts, and no Back--Cover Texts.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Useless Containers Library</h1>
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#overview">overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">Useless Containers Library</h2>

<p>This document describes version 2.0d0 of Useless Containers Library, a C
language library implementing a set of containers.

   <p>The package is distributed under the terms of the <acronym>GNU</acronym> General Public
License (<acronym>GPL</acronym>) and can be downloaded from:

<div align="center"><a href="http://github.com/marcomaggi/ucl">http://github.com/marcomaggi/ucl</a></div>

<p class="noindent">Copyright &copy; 2001-2010, 2013 by Marco Maggi <a href="mailto:marco.maggi-ipsu@poste.it">marco.maggi-ipsu@poste.it</a>

   <blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the <acronym>GNU</acronym> Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with
Invariant Sections being &ldquo;<acronym>GNU</acronym> Free Documentation License&rdquo; and
&ldquo;<acronym>GNU</acronym> General Public License&rdquo;, no Front&ndash;Cover Texts, and no
Back&ndash;Cover Texts.  A copy of the license is included in the section
entitled &ldquo;<acronym>GNU</acronym> Free Documentation License&rdquo;. 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#overview">overview</a>:                     Overview of the library. 
<li><a accesskey="2" href="#version">version</a>:                      Version functions. 
<li><a accesskey="3" href="#memory">memory</a>:                       Memory allocation. 
<li><a accesskey="4" href="#typedefs">typedefs</a>:                     Data types you have to know. 
<li><a accesskey="5" href="#containers">containers</a>:                   The data structures. 
<li><a accesskey="6" href="#iterators">iterators</a>:                    Container iteration. 
<li><a accesskey="7" href="#misc">misc</a>:                         Miscellaneous functions.

</li></ul>
<p>Appendices

</p>
<ul class="menu">
<li><a accesskey="8" href="#Package-License">Package License</a>:              GNU General Public License. 
<li><a accesskey="9" href="#Documentation-License">Documentation License</a>:        GNU Free Documentation License. 
<li><a href="#references">references</a>:                   Bibliography and references. 
<li><a href="#concept-index">concept index</a>:                An entry for each concept. 
<li><a href="#function-index">function index</a>:               An entry for each function. 
<li><a href="#type-index">type index</a>:                   An entry for each type. 
<li><a href="#variable-index">variable index</a>:               An entry for each variable. 
</ul>

<!-- page -->
<div class="node">
<a name="overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#version">version</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Overview of the library</h2>

<p>This container library may be thought of as &ldquo;low level&rdquo;.  Methods are
provided to handle collected data, but no container can be used without
wrapping it in a module whose functions &ldquo;know&rdquo; how to deal with the
type of collected data.

   <p>Useless Containers Library installs the single header file <samp><span class="file">ucl.h</span></samp>.  All the
function names in the <acronym>API</acronym> are prefixed with <code>ucl_</code>; all the
constant names are prefixed with <code>UCL_</code>; all the type names are
prefixed with <code>ucl_</code> and suffixed with <code>_t</code>.

   <p>There is no error reporting system: it is our responsibility to validate
function's arguments using the appropriate <acronym>UCL</acronym> functions.  With the
single exception of the vector module: <acronym>UCL</acronym> does no memory allocation.

   <p>The library is developed and tested under the <acronym>GNU</acronym>+Linux system and
officially it supports only the <acronym>GNU</acronym> infrastructure: requires the
<acronym>GNU</acronym> C library and compiles fine with the <acronym>GNU</acronym> C compiler
(<code>-std=c99 -pedantic</code> switches).

   <p>The library makes use of inline functions and it is designed to be used
only by C libraries and programs; it is probably impossible to interface
it with other languages, unless through a C language wrapper library.

   <p>When searching for the installed library with the <acronym>GNU</acronym> Autotools, we
can use the following macros in <samp><span class="file">configure.ac</span></samp>:

<pre class="example">     AC_CHECK_LIB([ucl],[ucl_version_string],,
       [AC_MSG_ERROR([test for UCL library failed])])
     AC_CHECK_HEADERS([ucl.h],,
       [AC_MSG_ERROR([test for UCL header failed])])
</pre>
   <ul class="menu">
<li><a accesskey="1" href="#overview-error">overview error</a>:               Error handling. 
<li><a accesskey="2" href="#overview-size">overview size</a>:                Structures size. 
<li><a accesskey="3" href="#overview-const">overview const</a>:               Constification. 
</ul>

<!-- page -->
<div class="node">
<a name="overview-error"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#overview-size">overview size</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#overview">overview</a>

</div>

<h3 class="section">1.1 Error handling</h3>

<p>The design of methods tries to be the one that maximises the number of
functions that cannot fail.  This sometimes leads to &ldquo;strange&rdquo; or
&ldquo;dangerous&rdquo; methods: functions that will cause the application to
crash if an argument is incorrect.  But, in these cases, the library
provides a function to test the argument separately: to assert the
precondition.

   <p>For example: if a vector index is out of range, we have to make sure not
to hand it to an insertion/extraction method; we have to test it first
and make use of it only if the test result is good.

<!-- page -->
<div class="node">
<a name="overview-size"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#overview-const">overview const</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#overview-error">overview error</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#overview">overview</a>

</div>

<h3 class="section">1.2 Structures size</h3>

<p>Under the <samp><span class="file">examples</span></samp> directory of the source tree there is a small
program that links to the library and prints the size of the <acronym>UCL</acronym> data
structures; it can be built and run with the <code>examples</code> makefile
rule.  On a <code>i686-pc-linux-gnu</code> the output is:

<pre class="example">     Size of common data types:
     
     char            1 :)
     void *          4
     int             4
     short int       2
     long int        4
     long long       8
     float           4
     double          8
     long double     12
     size_t          4
     ptrdiff_t       4
     ucl_value_t     4
     
     Limits:
     
     short int (SHRT_MIN, SHRT_MAX)  -32768 32767
     integer (INT_MIN, INT_MAX)      -2147483648 2147483647
     unsigned short int (USHRT_MAX)  65535
     unsigned (UINT_MAX)             4294967295
     
     Size of UCL structures:
     
     ucl_circular_t       16
     ucl_hash_table_t     36
     ucl_heap_t           32
     ucl_iterator_t       20
     ucl_map_t            28
     ucl_vector_t         48
     
     Size of UCL link structures:
     
     ucl_node_tag_t       16
     ucl_graph_node_tag_t 24
     ucl_graph_link_tag_t 28
</pre>
   <!-- page -->
<div class="node">
<a name="overview-const"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#overview-size">overview size</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#overview">overview</a>

</div>

<h3 class="section">1.3 Constification</h3>

<p>This library has the need to write functions, conceptually, like this
one:

<pre class="example">     void data_type_t *
     the_function (data_type_t * p)
     {
       return p;
     }
</pre>
   <p class="noindent">that is: functions that do not modify the arguments, but whose return
value must be modifiable.  To write them like this:

<pre class="example">     void data_type_t *
     the_function (const data_type_t * p)
     {
       return p;
     }
</pre>
   <p class="noindent">would be useful because:

     <ol type=1 start=1>
<li>it makes clear to the user that the data referenced by <code>p</code> is not
modified;
<li>causes the compiler to raise an error if we attempt to modify the data;
        </ol>

<p class="noindent">but a warning is issued because the <code>return</code> statement discards the
<code>const</code> qualifier.

   <p>The adopted solution is to avoid the <code>-Wcast-qual</code> flag of the
<acronym>GNU</acronym> C compiler, which is responsible to issue a warning if we discard
a qualifier with a cast; so the following implementation does not raise
warnings:

<pre class="example">     void data_type_t *
     the_function (const data_type_t * p)
     {
       return (data_type_t *)p;
     }
</pre>
   <p>It is not beautiful.  But the ugliness is only in the <acronym>UCL</acronym> code, the
user does not see it.

<!-- page -->
<div class="node">
<a name="version"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#memory">memory</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#overview">overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Version functions</h2>

<p>The installed libraries follow version numbering as established by the
<acronym>GNU</acronym> Autotools.  For an explanation of interface numbers as managed by
<acronym>GNU</acronym> Libtool See <a href="libtool.html#Libtool-versioning">interface</a>.

<div class="defun">
&mdash; Function: const char * <b>ucl_version_string</b> (<var>void</var>)<var><a name="index-ucl_005fversion_005fstring-1"></a></var><br>
<blockquote><p>Return a pointer to a statically allocated <acronym>ASCIIZ</acronym> string representing
the interface version number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_version_interface_current</b> (<var>void</var>)<var><a name="index-ucl_005fversion_005finterface_005fcurrent-2"></a></var><br>
<blockquote><p>Return an integer representing the library interface current number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_version_interface_revision</b> (<var>void</var>)<var><a name="index-ucl_005fversion_005finterface_005frevision-3"></a></var><br>
<blockquote><p>Return an integer representing the library interface current revision
number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_version_interface_age</b> (<var>void</var>)<var><a name="index-ucl_005fversion_005finterface_005fage-4"></a></var><br>
<blockquote><p>Return an integer representing the library interface current age. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="memory"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#typedefs">typedefs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#version">version</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Memory allocation</h2>

<p><acronym>UCL</acronym> tries to avoid as much as possible the responsibility to allocate
and release memory.  Dynamic structures based on trees or linked lists
do not call any memory allocation function: the responsibility to
allocate <acronym>UCL</acronym> data structures is delegated to the user's code.

   <p>This makes the library a little more complex to use, but it also makes
the code simpler by reducing the error cases that have to be dealt with. 
Also, user's code can implement a custom allocator and feed memory
blocks to <acronym>UCL</acronym>'s functions.  This behaviour can be leveraged to
improve performance, because the <acronym>UCL</acronym> makes use of a lot of little
data structures.

   <p>When needed: the library makes use of a default allocator that reverts
to the standard <code>malloc()</code>, <code>realloc()</code> and
<code>free()</code> functions.

<ul class="menu">
<li><a accesskey="1" href="#memory-typedefs">memory typedefs</a>:              Allocator data types. 
<li><a accesskey="2" href="#memory-functions">memory functions</a>:             The default allocator. 
<li><a accesskey="3" href="#memory-blocks">memory blocks</a>:                Handling blocks of memory. 
<li><a accesskey="4" href="#memory-ascii">memory ascii</a>:                 Handling ASCII strings. 
<li><a accesskey="5" href="#memory-macros">memory macros</a>:                Miscellaneous macros. 
</ul>

<!-- page -->
<div class="node">
<a name="memory-typedefs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#memory-functions">memory functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#memory">memory</a>

</div>

<h3 class="section">3.1 Data types</h3>

<p>The following <acronym>API</acronym> has two main purposes:

     <ol type=1 start=1>
<li>to implement the classic alloc, realloc and free operations;

     <li>to define an allocator data structure that is small enough to be used
directly as function argument (that is: passed by value).
        </ol>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_memory_allocator_t</b><var><a name="index-ucl_005fmemory_005fallocator_005ft-5"></a></var><br>
<blockquote><p>Type of the memory allocator.  We may build structures of this type to
select a memory allocation policy.  Fields description follows.

          <dl>
<dt><code>void * data</code><dd>Pointer to an allocator data structure holding the state of the
allocator; it is used as first argument to the allocator function, it
can be <code>NULL</code>.

          <br><dt><code>ucl_memory_alloc_fun_t * alloc</code><dd>Pointer to a function used to allocate/reallocate/free a memory block. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Function Prototype: void <b>ucl_memory_alloc_fun_t</b> (<var>void * data, void * pp, size_t dim</var>)<var><a name="index-ucl_005fmemory_005falloc_005ffun_005ft-6"></a></var><br>
<blockquote><p>Allocate, reallocate or free memory blocks.

          <dl>
<dt><var>data</var><dd>The value of the <code>data</code> field in the allocator data structure.

          <br><dt><var>pp</var><dd>Internally cast to <code>void **</code>, it is a pointer to the variable that
holds the pointer to handle.

          <br><dt><var>dim</var><dd>The dimension of the memory block.  It is expressed in bytes for the
<acronym>UCL</acronym> functions. 
</dl>

        <p>The protocol:

          <ul>
<li>if <var>dim</var> is zero:

               <ul>
<li>if <code>*</code><var>pp</var> is <code>NULL</code>: nothing happens,
<li>else <code>*</code><var>pp</var> is not <code>NULL</code>: the referenced memory is
freed;
</ul>

          <li>else <var>dim</var> is positive:

               <ul>
<li>if <code>*</code><var>pp</var> is <code>NULL</code>: a new block of memory is allocated
and a pointer to it stored in <code>*</code><var>pp</var>;

               <li>else <code>*</code><var>pp</var> is not <code>NULL</code>: the block of memory referenced
by <code>*</code><var>pp</var> is reallocated and a pointer to the new block is
stored in <code>*</code><var>pp</var>. 
</ul>
          </ul>

        <p>This function must work like <code>malloc()</code>, <code>realloc()</code> and
<code>free()</code> with the fundamental difference that: in case of error
it must not return.  What it does instead of returning is not the
business of <acronym>UCL</acronym>; the default allocator will terminate the process
with an invocation to <code>exit()</code> with code <code>EXIT_FAILURE</code>. 
The <acronym>UCL</acronym> guarantees that an error allocating memory will not corrupt
any container (so the <code>alloc</code> function can <code>longjump()</code> to
somewhere in case of error). 
</p></blockquote></div>

   <p>Example of new memory block allocation:

<pre class="example">     ucl_memory_allocator_t allocator;
     void * p = NULL;
     
     allocator.alloc(allocator.data, &amp;p, 4096);
</pre>
   <p class="noindent">example of memory block reallocation:

<pre class="example">     ucl_memory_allocator_t allocator;
     void * p = ...;
     
     allocator.alloc(allocator.data, &amp;p, 4096);
</pre>
   <p class="noindent">example of memory release:

<pre class="example">     ucl_memory_allocator_t allocator;
     void * p = ...;
     
     allocator.alloc(allocator.data, &amp;p, 0);
</pre>
   <!-- page -->
<div class="node">
<a name="memory-functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#memory-blocks">memory blocks</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#memory-typedefs">memory typedefs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#memory">memory</a>

</div>

<h3 class="section">3.2 Public interface</h3>

<div class="defun">
&mdash; Variable: <b>const</b><var> ucl_memory_allocator_t ucl_memory_allocator<a name="index-const-7"></a></var><br>
<blockquote><p>Predefined memory allocator.  Selects <code>ucl_memory_alloc()</code> as
allocation function. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_memory_alloc</b> (<var>void * data, void * q, size_t dim</var>)<var><a name="index-ucl_005fmemory_005falloc-8"></a></var><br>
<blockquote><p>Allocate, reallocate or free a block of memory using the standard
<code>calloc()</code>, <code>realloc()</code> and <code>free()</code> functions.  <var>data</var>
is ignored: it is perfectly correct to invoke this function with
<var>data</var> set to <code>NULL</code>.

        <p>This function can be used as <code>alloc</code> function in a
<code>ucl_memory_allocator_t</code>.

        <p>The implementation is:

     <pre class="example">          void
          ucl_memory_alloc (void * dummy, void * qq, size_t dim)
          {
            void **       pp = qq;
            void *        p;
            if (0 == dim) {
              if (NULL != *pp) {
                free(*pp);
                *pp = NULL;
              }
            } else {
              p = (NULL == *pp)? calloc(1, dim) : realloc(*pp, dim);
              if (NULL == p) {
                perror(strerror(errno));
                exit(EXIT_FAILURE);
              }
              *pp = p;
            }
          }
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_malloc</b> (<var>ucl_memory_allocator_t allocator, size_t dim</var>)<var><a name="index-ucl_005fmalloc-9"></a></var><br>
&mdash; Function: void * <b>ucl_realloc</b> (<var>ucl_memory_allocator_t allocator, void * p, size_t dim</var>)<var><a name="index-ucl_005frealloc-10"></a></var><br>
&mdash; Function: void <b>ucl_free</b> (<var>ucl_memory_allocator_t allocator, void * p</var>)<var><a name="index-ucl_005ffree-11"></a></var><br>
<blockquote><p>These functions implement the classic alloc, realloc and free operations
using the selected allocator. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="memory-blocks"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#memory-ascii">memory ascii</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#memory-functions">memory functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#memory">memory</a>

</div>

<h3 class="section">3.3 Memory blocks</h3>

<p>This module offers a set of functions to handle memory blocks; its
purpose is to provide a small data structure (<code>ucl_block_t</code>) which
can be used directly as argument to function and return value from
function, instead of the couple: pointer to memory block, block length
in bytes.  All the functions are defined in the header <samp><span class="file">ucl.h</span></samp> and
declared as <code>__inline__</code>.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_block_t</b><var><a name="index-ucl_005fblock_005ft-12"></a></var><br>
<blockquote><p>The type of memory block; fields description follows:

          <dl>
<dt><code>size_t len</code><dd>The number of bytes in the block; can be zero.

          <br><dt><code>uint8_t * ptr</code><dd>Pointer to the memory block or <code>NULL</code>. 
</dl>

        <p>To initialise a block to empty state do this:

     <pre class="example">          ucl_block_t     B = { .ptr = NULL, .len = 0 };
</pre>
        <p class="noindent">or this:

     <pre class="example">          ucl_block_t     B;
          ucl_block_reset(&amp;B);
</pre>
        </blockquote></div>

<!--  -->
<h5 class="subsubheading">Memory allocation</h5>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_block_alloc</b> (<var>ucl_memory_allocator_t allocator, size_t dim</var>)<var><a name="index-ucl_005fblock_005falloc-13"></a></var><br>
&mdash; Function: ucl_block_t <b>ucl_block_realloc</b> (<var>ucl_memory_allocator_t allocator, ucl_block_t block, size_t new_dim</var>)<var><a name="index-ucl_005fblock_005frealloc-14"></a></var><br>
<blockquote><p>Allocate or reallocate a memory block using the <var>allocator</var> and
return the resulting block. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_block_free</b> (<var>ucl_memory_allocator_t allocator, ucl_block_t block</var>)<var><a name="index-ucl_005fblock_005ffree-15"></a></var><br>
<blockquote><p>If the <code>ptr</code> field of <var>block</var> is not <code>NULL</code>: free the
referenced memory block using <var>allocator</var>. 
</p></blockquote></div>

<h5 class="subsubheading">Setting</h5>

<div class="defun">
&mdash; Function: void <b>ucl_block_set</b> (<var>ucl_block_t * block, void * ptr, size_t len</var>)<var><a name="index-ucl_005fblock_005fset-16"></a></var><br>
<blockquote><p>Set the fields of the block structure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_block_reset</b> (<var>ucl_block_t * block</var>)<var><a name="index-ucl_005fblock_005freset-17"></a></var><br>
<blockquote><p>Reset to zero all the fields of the block. 
</p></blockquote></div>

<h5 class="subsubheading">Inspection</h5>

<div class="defun">
&mdash; Function: bool <b>ucl_block_is_null</b> (<var>ucl_block_t block</var>)<var><a name="index-ucl_005fblock_005fis_005fnull-18"></a></var><br>
<blockquote><p>Return true if the <code>ptr</code> field of <var>block</var> is <code>NULL</code>. 
</p></blockquote></div>

<h5 class="subsubheading">Memory operations</h5>

<div class="defun">
&mdash; Function: void <b>ucl_block_clean_memory</b> (<var>ucl_block_t block</var>)<var><a name="index-ucl_005fblock_005fclean_005fmemory-19"></a></var><br>
<blockquote><p>Reset to zero all the bytes in the memory block. 
</p></blockquote></div>

<h5 class="subsubheading">Block operations</h5>

<div class="defun">
&mdash; Function: void <b>ucl_block_shift_x</b> (<var>ucl_block_t * block, ssize_t offset, size_t dim</var>)<var><a name="index-ucl_005fblock_005fshift_005fx-20"></a></var><br>
<blockquote><p>Shift the memory reference in <var>block</var> by <var>offset</var> slots each of
<var>dim</var> bytes.  <var>offset</var> can be zero, positive or negative. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_block_shift</b> (<var>ucl_block_t block, ssize_t offset, size_t dim</var>)<var><a name="index-ucl_005fblock_005fshift-21"></a></var><br>
<blockquote><p>Like <code>ucl_block_shift_x()</code>, but produce a new block. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_block_difference</b> (<var>ucl_block_t a, ucl_block_t b</var>)<var><a name="index-ucl_005fblock_005fdifference-22"></a></var><br>
<blockquote><p>This function assumes that <var>b</var> is contiguous to or included in
<var>a</var>; return a new block <var>c</var> referencing the first portion of
<var>a</var> not in <var>b</var>.

     <pre class="example">                    <var>c</var>.len             <var>b</var>.len
            |.........................|.................|
          
          <var>c</var>.ptr                     <var>b</var>.ptr
            v                         v
            |-------------------------|---------------------|
            ^
          <var>a</var>.ptr
          
            |...............................................|
                                 <var>a</var>.len
          
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="memory-ascii"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#memory-macros">memory macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#memory-blocks">memory blocks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#memory">memory</a>

</div>

<h3 class="section">3.4 Handling ASCII strings</h3>

<p>This module offers a set of functions to handle <acronym>ASCII</acronym> coded, zero
terminated strings; its purpose is to provide a small data structure
(<code>ucl_ascii_t</code>) which can be used directly as argument to function
and return value from function, instead of the couple: pointer to memory
block, block length in bytes.  All the functions are defined in the
header <samp><span class="file">ucl.h</span></samp> and declared as <code>__inline__</code>.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_ascii_t</b><var><a name="index-ucl_005fascii_005ft-23"></a></var><br>
<blockquote><p>The type of zero&ndash;terminated <acronym>ASCII</acronym> strings; fields description
follows:

          <dl>
<dt><code>size_t len</code><dd>The number of characters in the block; can be zero; it does <strong>not</strong>
include the terminating null character.

          <br><dt><code>char * ptr</code><dd>Pointer to the memory block or <code>NULL</code>; the last <code>char</code> must be
zero. 
</dl>

        <p>To initialise an ascii to empty state do this:

     <pre class="example">          ucl_ascii_t     A = { .ptr = NULL, .len = 0 };
</pre>
        <p class="noindent">or this:

     <pre class="example">          ucl_ascii_t     A;
          ucl_ascii_reset(&amp;A);
</pre>
        <p class="noindent">or this:

     <pre class="example">          ucl_ascii_t     A = ucl_ascii_empty;
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_ascii_list_t</b><var><a name="index-ucl_005fascii_005flist_005ft-24"></a></var><br>
<blockquote><p>Holds an array of <code>char *</code>.  Fields:

          <dl>
<dt><code>size_t len</code><dd>the number of strings;
<br><dt><code>char ** ptr</code><dd>the array of pointers. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Variable: const ucl_ascii_t <b>ucl_ascii_empty</b><var><a name="index-ucl_005fascii_005fempty-25"></a></var><br>
<blockquote><p>Represent an empty string.  It is a statically allocated structure,
referencing a zero&ndash;terminated empty string. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_ascii_set</b> (<var>ucl_ascii_t * ascii, void * ptr, size_t len</var>)<var><a name="index-ucl_005fascii_005fset-26"></a></var><br>
<blockquote><p>Initialise the fields of a structure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_ascii_reset</b> (<var>ucl_ascii_t * ascii</var>)<var><a name="index-ucl_005fascii_005freset-27"></a></var><br>
<blockquote><p>Reset to zero the fields. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_ascii_t <b>ucl_ascii_const</b> (<var>char * string</var>)<var><a name="index-ucl_005fascii_005fconst-28"></a></var><br>
<blockquote><p>Build and return a structure initialised with <var>string</var>.  The length
is determined with the standard <code>strlen()</code> function. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: bool <b>ucl_ascii_is_null</b> (<var>ucl_ascii_t ascii</var>)<var><a name="index-ucl_005fascii_005fis_005fnull-29"></a></var><br>
<blockquote><p>Return true if the pointer field is set to <code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_ascii_is_terminated</b> (<var>ucl_ascii_t ascii</var>)<var><a name="index-ucl_005fascii_005fis_005fterminated-30"></a></var><br>
<blockquote><p>Return true if the string referenced by <var>ascii</var> is zero&ndash;terminated. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_ascii_clean_memory</b> (<var>ucl_ascii_t ascii</var>)<var><a name="index-ucl_005fascii_005fclean_005fmemory-31"></a></var><br>
<blockquote><p>Reset the block of memory to zero bytes. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_ascii_terminate</b> (<var>ucl_ascii_t ascii</var>)<var><a name="index-ucl_005fascii_005fterminate-32"></a></var><br>
<blockquote><p>Make sure that the string referenced by <var>ascii</var> is zero&ndash;terminated. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_block_from_ascii</b> (<var>ucl_ascii_t ascii</var>)<var><a name="index-ucl_005fblock_005ffrom_005fascii-33"></a></var><br>
<blockquote><p>Return a block initialised with the fields of an <acronym>ASCII</acronym> block. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_ascii_t <b>ucl_ascii_from_block</b> (<var>ucl_block_t block</var>)<var><a name="index-ucl_005fascii_005ffrom_005fblock-34"></a></var><br>
<blockquote><p>Return an <acronym>ASCII</acronym> block initialised with the fields of a block. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_ascii_t <b>ucl_ascii_alloc</b> (<var>ucl_memory_allocator_t allocator, size_t dim</var>)<var><a name="index-ucl_005fascii_005falloc-35"></a></var><br>
&mdash; Function: ucl_ascii_t <b>ucl_ascii_realloc</b> (<var>ucl_memory_allocator_t allocator, ucl_ascii_t ascii, size_t new_dim</var>)<var><a name="index-ucl_005fascii_005frealloc-36"></a></var><br>
<blockquote><p>Allocate or reallocate an <acronym>ASCII</acronym> block using <var>allocator</var>;
<var>dim</var> and <var>new_dim</var> are the number of characters to be stored in
the block, with the <strong>exclusion</strong> of the terminating zero. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_ascii_free</b> (<var>ucl_memory_allocator_t allocator, ucl_ascii_t ascii</var>)<var><a name="index-ucl_005fascii_005ffree-37"></a></var><br>
<blockquote><p>If the <code>ptr</code> field of <var>ascii</var> is not <code>NULL</code>: free the
referenced memory block using <var>allocator</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="memory-macros"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#memory-ascii">memory ascii</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#memory">memory</a>

</div>

<h3 class="section">3.5 Miscellaneous macros</h3>

<h4 class="subsection">3.5.1 Structures</h4>

<div class="defun">
&mdash; Macro: <b>ucl_struct_clean</b> (<var>struct_p, type</var>)<var><a name="index-ucl_005fstruct_005fclean-38"></a></var><br>
&mdash; Macro: <b>ucl_struct_reset</b> (<var>struct_p, type</var>)<var><a name="index-ucl_005fstruct_005freset-39"></a></var><br>
<blockquote><p>Reset to zero, using <code>memset()</code>, the structure of <var>type</var>
pointed to by <var>struct_p</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_struct_alloc</b> (<var>ucl_memory_allocator_t allocator, void * p, type</var>)<var><a name="index-ucl_005fstruct_005falloc-40"></a></var><br>
<blockquote><p>Allocate a new structure of <var>type</var> using <var>allocator</var> and store a
pointer to it in <var>p</var>.  Example:

     <pre class="example">          typedef struct a_t {
            int      i;
          } a_t;
          
          a_t * p;
          
          ucl_struct_alloc(allocator, p, a_t);
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="typedefs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#containers">containers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#memory">memory</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Data types you have to know</h2>

<p>The types of container structures and links/nodes are described in the
sections dedicated to containers.  Here common data types are described.

<ul class="menu">
<li><a accesskey="1" href="#typedefs-value">typedefs value</a>:               Collected values and others. 
<li><a accesskey="2" href="#typedefs-ranges">typedefs ranges</a>:              Range selectors. 
<li><a accesskey="3" href="#typedefs-compar">typedefs compar</a>:              Comparison functions. 
<li><a accesskey="4" href="#typedefs-hash">typedefs hash</a>:                Hash functions. 
<li><a accesskey="5" href="#typedefs-callback">typedefs callback</a>:            Callback functions. 
<li><a accesskey="6" href="#typedefs-nodes">typedefs nodes</a>:               Wrapping node structures. 
</ul>

<!-- page -->
<div class="node">
<a name="typedefs-value"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#typedefs-ranges">typedefs ranges</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#typedefs">typedefs</a>

</div>

<h3 class="section">4.1 Collected values and others</h3>

<div class="defun">
&mdash; Union Typedef: <b>ucl_value_t</b><var><a name="index-ucl_005fvalue_005ft-41"></a></var><br>
<blockquote><p>The data type of objects that can be stored in the containers; it's a
<code>union</code> with the following members:

          <dl>
<dt><code>char t_char</code><dt><code>unsigned char t_unsigned_char</code><dt><code>int t_int</code><dt><code>unsigned int t_unsigned_int</code><dt><code>long t_long</code><dt><code>unsigned long t_unsigned_long</code><dt><code>int8_t t_int8</code><dt><code>uint8_t t_uint8</code><dt><code>int16_t t_int16</code><dt><code>uint16_t t_uint16</code><dt><code>int32_t t_int32</code><dt><code>uint32_t t_uint32</code><dd>One field for each built in C language type.

          <dt><code>size_t t_size</code><dt><code>ssize_t t_ssize</code><dt><code>intptr_t t_intptr</code><dt><code>uintptr_t t_uintptr</code><dd>Fields for miscellaneous types.

          <br><dt><code>void * ptr</code><dt><code>void * pointer</code><dt><code>uint8_t * bytes</code><dt><code>char * chars</code><dd>Fields for miscellaneous pointer types. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Variable: const ucl_value_t <b>ucl_value_null</b><var><a name="index-ucl_005fvalue_005fnull-42"></a></var><br>
<blockquote><p>Constant value representing the null <code>ucl_value_t</code>; its fields are
set to zero. 
</p></blockquote></div>

<div class="defun">
&mdash; Alias Typedef: <b>ucl_bool_t</b><var><a name="index-ucl_005fbool_005ft-43"></a></var><br>
<blockquote><p>Alias for <code>_Bool</code>, which is defined by the C99 standard.  The
standard defines also the <code>true</code> and <code>false</code> values (in the
<samp><span class="file">stdbool.h</span></samp> header). 
</p></blockquote></div>

<div class="defun">
&mdash; Alias Typedef: <b>ucl_index_t</b><var><a name="index-ucl_005findex_005ft-44"></a></var><br>
<blockquote><p>Alias for <code>size_t</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_array_of_pointers_t</b><var><a name="index-ucl_005farray_005fof_005fpointers_005ft-45"></a></var><br>
<blockquote><p>Array of pointers.  Public fields:

          <dl>
<dt><code>void ** slots</code><dd>pointer to an array of pointers: <code>void *</code>; this type implies no
assumption upon the origin of the array memory, it can be statically or
dynamically allocated, or it can be on the stack;

          <br><dt><code>size_t number_of_slots</code><dd>the number of elements in <code>slots</code>;

          <br><dt><code>ucl_value_t data;</code><dd>custom value that can be used to store a context associated to the
array; this field is useful when we need to hand a pointer to an array
to some function like a callback. 
</dl>
        </p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Temporary linked lists</h5>

<p>Let's say that we want to preallocate a set of structures to be used
with the <acronym>UCL</acronym>, for example: <code>ucl_list_link_t</code>, the structure
representing a node in the <acronym>UCL</acronym>'s doubly linked list.  We allocate them
with code like:

<pre class="example">     #define NUMBER_OF_PREALLOCATED_STRUCTS          4096
     ucl_memory_allocator    allocator;
     ucl_list_link_t *       link_p;
     
     for (size_t i=0; i&lt;NUMBER_OF_PREALLOCATED_STRUCTS; ++i) {
       link_p = NULL;
       allocator.alloc(allocator.data, &amp;link_p, sizeof(ucl_list_link_t));
       /* here we have to put the links somewhere */
     }
</pre>
   <p class="noindent">it can be convenient to put the links in a linked list and extract them
at usage time.  We do not want to use the <code>ucl_list_t</code> container,
because it is overkill for this application, so we can use the following
special type.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_link_t</b><var><a name="index-ucl_005flink_005ft-46"></a></var><br>
<blockquote><p>A structure with a single field, <code>ucl_link_t * next_p</code>, to be used
to collect structures in a linked list. 
</p></blockquote></div>

   <p>With it the preallocation code looks like this:

<pre class="example">     #define NUMBER_OF_PREALLOCATED_STRUCTS          4096
     ucl_memory_allocator    allocator;
     ucl_link_t *            link_list_p = NULL;
     
     
     {
       ucl_link_t *          link_p;
     
     
       for (size_t i=0; i&lt;NUMBER_OF_PREALLOCATED_STRUCTS; ++i)
         {
           link_p = NULL;
           allocator.alloc(allocator.data, &amp;link_p, sizeof(ucl_list_link_t));
           if (link_list_p)
             {
               link_p-&gt;next_p = link_list_p;
               link_list_p    = link_p;
             }
           else
             {
               link_list_p = link_p;
               link_list_p-&gt;next_p = NULL; /* just to be sure */
             }
         }
     }
</pre>
   <p class="noindent">to extract the links we do:

<pre class="example">     ucl_link_t *            link_p;
     ucl_link_t *            link_list_p;
     ucl_list_link_t *       list_link_p;
     
     ...
     
     if (link_list_p)
       {
         link_p = link_list_p;
         link_list_p = link_p-&gt;next_p;
         list_link_p = (ucl_list_link_t *)link_p;
         /* here we can use 'list_link_p' */
       }
     else
       {
         /* no more preallocated links */
       }
</pre>
   <p class="noindent">and to put them back:

<pre class="example">     ucl_link_t *            link_p;
     ucl_link_t *            link_list_p;
     
     ...
     
     if (link_list_p)
       {
         link_p-&gt;next_p = link_list_p;
         link_list_p    = link_p;
       }
     else
       {
         link_list_p = link_p;
         link_list_p-&gt;next_p = NULL;
       }
</pre>
   <p>With better memory allocation:

<pre class="example">     #define NUMBER_OF_PREALLOCATED_STRUCTS          4096
     #define SIZE_OF_PREALLOCATED_MEMORY             \
       (NUMBER_OF_PREALLOCATED_STRUCTS * sizeof(ucl_list_link_t))
     
     ucl_memory_allocator    allocator;
     void *                  preallocated_links = NULL;
     ucl_link_t *            link_list_p;
     
     
     /* let's assume that this allocator initialises the
        block to zero bytes */
     allocator.alloc(allocator.data, &amp;preallocated_links,
                     SIZE_OF_PREALLOCATED_MEMORY);
     
     {
       ucl_link_t *          link_p;
     
     
       link_p = link_list_p = preallocated_links;
       for (size_t i=0; i&lt;NUMBER_OF_PREALLOCATED_STRUCTS-1; ++i)
         {
           link_p-&gt;next_p = link_p + sizeof(ucl_list_link_t);
           link_p = link_p-&gt;next_p;
         }
     }
</pre>
   <!-- page -->
<div class="node">
<a name="typedefs-ranges"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#typedefs-compar">typedefs compar</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#typedefs-value">typedefs value</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#typedefs">typedefs</a>

</div>

<h3 class="section">4.2 Range selectors</h3>

<div align="center"><strong>RANGES ARE INCLUSIVE</strong></div>

<p class="noindent">All these macros accept as <var>range</var> arguments the name of a range
structure, <strong>not</strong> the name of a pointer to the structure.  Range
stuff is written in macros, not <code>__inline__</code> functions, so that
they work with all the type structures defined below.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_range_t</b><var><a name="index-ucl_005frange_005ft-47"></a></var><br>
<blockquote><p>Data type used to describe a range of elements in a sequence, by
selecting the indexes.  The fields are of type <code>size_t</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_char_range_t</b><var><a name="index-ucl_005fchar_005frange_005ft-48"></a></var><br>
&mdash; Struct Typedef: <b>ucl_unsigned_char_range_t</b><var><a name="index-ucl_005funsigned_005fchar_005frange_005ft-49"></a></var><br>
&mdash; Struct Typedef: <b>ucl_int_range_t</b><var><a name="index-ucl_005fint_005frange_005ft-50"></a></var><br>
&mdash; Struct Typedef: <b>ucl_unsigned_range_t</b><var><a name="index-ucl_005funsigned_005frange_005ft-51"></a></var><br>
&mdash; Struct Typedef: <b>ucl_long_range_t</b><var><a name="index-ucl_005flong_005frange_005ft-52"></a></var><br>
&mdash; Struct Typedef: <b>ucl_unsigned_long_range_t</b><var><a name="index-ucl_005funsigned_005flong_005frange_005ft-53"></a></var><br>
&mdash; Struct Typedef: <b>ucl_size_t_range_t</b><var><a name="index-ucl_005fsize_005ft_005frange_005ft-54"></a></var><br>
&mdash; Struct Typedef: <b>ucl_float_range_t</b><var><a name="index-ucl_005ffloat_005frange_005ft-55"></a></var><br>
&mdash; Struct Typedef: <b>ucl_double_range_t</b><var><a name="index-ucl_005fdouble_005frange_005ft-56"></a></var><br>
&mdash; Struct Typedef: <b>ucl_byte_pointer_range_t</b><var><a name="index-ucl_005fbyte_005fpointer_005frange_005ft-57"></a></var><br>
&mdash; Struct Typedef: <b>ucl_pointer_range_t</b><var><a name="index-ucl_005fpointer_005frange_005ft-58"></a></var><br>
<blockquote><p>Ranges of values. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_set_min_max</b> (<var>range, min, max</var>)<var><a name="index-ucl_005frange_005fset_005fmin_005fmax-59"></a></var><br>
<blockquote><p>Initialise the min and max fields. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_set_min_size</b> (<var>range, min, size</var>)<var><a name="index-ucl_005frange_005fset_005fmin_005fsize-60"></a></var><br>
<blockquote><p>Initialise the min and sets the max to: <var>min</var><code>+</code><var>size</var><code>-1</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_set_max_size</b> (<var>range, max, size</var>)<var><a name="index-ucl_005frange_005fset_005fmax_005fsize-61"></a></var><br>
<blockquote><p>Initialise the max and sets the min to: <var>max</var><code>-</code><var>size</var><code>+1</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_set_size_on_min</b> (<var>range, size</var>)<var><a name="index-ucl_005frange_005fset_005fsize_005fon_005fmin-62"></a></var><br>
<blockquote><p>Set the max to: <var>min</var><code>+</code><var>size</var><code>-1</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_set_size_on_max</b> (<var>range, size</var>)<var><a name="index-ucl_005frange_005fset_005fsize_005fon_005fmax-63"></a></var><br>
<blockquote><p>Set the min to: <var>max</var><code>-</code><var>size</var><code>+1</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_size</b> (<var>range</var>)<var><a name="index-ucl_005frange_005fsize-64"></a></var><br>
<blockquote><p>Evaluate to the size of the range. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_is_empty</b> (<var>range</var>)<var><a name="index-ucl_005frange_005fis_005fempty-65"></a></var><br>
<blockquote><p>Evaluate to true if <var>range</var> is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_min</b> (<var>range</var>)<var><a name="index-ucl_005frange_005fmin-66"></a></var><br>
<blockquote><p>Evaluate to the min. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_max</b> (<var>range</var>)<var><a name="index-ucl_005frange_005fmax-67"></a></var><br>
<blockquote><p>Evaluate to the max. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_value_is_in</b> (<var>range, value</var>)<var><a name="index-ucl_005frange_005fvalue_005fis_005fin-68"></a></var><br>
<blockquote><p>Evaluate to true if the value is inside the range. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_value_is_out</b> (<var>range, value</var>)<var><a name="index-ucl_005frange_005fvalue_005fis_005fout-69"></a></var><br>
<blockquote><p>Evaluate to true if the value is outside the range. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>ucl_range_equal</b> (<var>range_a, range_b</var>)<var><a name="index-ucl_005frange_005fequal-70"></a></var><br>
<blockquote><p>Evaluate to true if the ranges are equal. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="typedefs-compar"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#typedefs-hash">typedefs hash</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#typedefs-ranges">typedefs ranges</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#typedefs">typedefs</a>

</div>

<h3 class="section">4.3 Comparison functions</h3>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_comparison_t</b><var><a name="index-ucl_005fcomparison_005ft-71"></a></var><br>
<blockquote><p>Structure holding a policy for values comparison.  Fields:

          <dl>
<dt><code>ucl_value_t data</code><dd>context to be used as first argument to the function;

          <br><dt><code>ucl_comparison_fun_t * func</code><dd>pointer to the function that compares two values of type
<code>ucl_value_t</code>. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Function Typedef: int <b>ucl_comparison_fun_t</b> (<var>ucl_value_t data, ucl_value_t a, ucl_value_t b</var>)<var><a name="index-ucl_005fcomparison_005ffun_005ft-72"></a></var><br>
<blockquote><p>The type of functions used to compare values.  Functions of this type
are used by the associative containers.

        <p>The behaviour of the function must be the one of the standard function
<code>strcmp()</code>: return <code>-1</code> if <code>a&lt;b</code>, return <code>0</code> if
<code>a==b</code>, return <code>1</code> if <code>a&gt;b</code>.

        <p>The function has the responsibility to provide the comparison policy: to
select a field in the <code>ucl_value_t</code> unions and establish when a
value is formally greater than the other. 
</p></blockquote></div>

   <p>Example:

<pre class="example">     ucl_comparison_fun_t    intcmp;
     ucl_comparison_t        compar = {
       .data = NULL, .func = intcmp
     };
     ucl_value_t             a = ...;
     ucl_value_t             b = ...;
     int                     result;
     
     result = compar.func(compar.data, a, b);
</pre>
   <!-- page -->
<div class="node">
<a name="typedefs-hash"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#typedefs-callback">typedefs callback</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#typedefs-compar">typedefs compar</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#typedefs">typedefs</a>

</div>

<h3 class="section">4.4 Hash functions</h3>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_hash_t</b><var><a name="index-ucl_005fhash_005ft-73"></a></var><br>
<blockquote><p>Structure holding the hash function and its context.  Fields:

          <dl>
<dt><code>ucl_value_t data</code><dd>a context to be used as first argument to the function;

          <br><dt><code>ucl_hash_fun_t * func</code><dd>pointer to the function that computes the hash value. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Function Typedef: ucl_index_t <b>ucl_hash_fun_t</b> (<var>ucl_value_t data, ucl_value_t key</var>)<var><a name="index-ucl_005fhash_005ffun_005ft-74"></a></var><br>
<blockquote><p>Type of hash functions used by the hash table.  The return value must be
the &ldquo;position&rdquo; of the key in a vector.  <a href="#hash">hash</a> for details. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="typedefs-callback"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#typedefs-nodes">typedefs nodes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#typedefs-hash">typedefs hash</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#typedefs">typedefs</a>

</div>

<h3 class="section">4.5 Callback functions</h3>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_callback_t</b><var><a name="index-ucl_005fcallback_005ft-75"></a></var><br>
<blockquote><p>Holds a function pointer and a context value.  Public fields:

          <dl>
<dt><code>ucl_callback_fun_t * func</code><dd>pointer to the callback function;
<br><dt><code>ucl_value_t data</code><dd>the context value. 
</dl>

        <p>To initialise a <code>ucl_callback_t</code> structure we can do:

     <pre class="example">          ucl_callback_t cb = {
            .func = pointer_to_function,
            .data = { .ptr = pointer_to_data }
          };
</pre>
        <p class="noindent">to initialise to no&ndash;function and no&ndash;data:

     <pre class="example">          ucl_callback_t cb = ucl_callback_null;
</pre>
        <p>Example of callback invocation:

     <pre class="example">          ucl_callback_t  cb = ...;
          int             a  = 123;
          int             b  = 456;
          
          ucl_callback_apply(cb, a, b);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Variable: const ucl_callback_t <b>ucl_callback_null</b><var><a name="index-ucl_005fcallback_005fnull-76"></a></var><br>
<blockquote><p>Statically allocated structure representing a null callback. 
</p></blockquote></div>

<div class="defun">
&mdash; Function Prototype: ucl_value_t <b>ucl_callback_fun_t</b> (<var>ucl_value_t context, va_list ap</var>)<var><a name="index-ucl_005fcallback_005ffun_005ft-77"></a></var><br>
<blockquote><p>Callback function.  <var>context</var> is the value stored in the callback
structure, representing the callback context.  <var>ap</var> is the list of
arguments: it is responsibility of the function to know how to interpret
them. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: ucl_bool_t <b>ucl_callback_is_present</b> (<var>ucl_callback_t cb</var>)<var><a name="index-ucl_005fcallback_005fis_005fpresent-78"></a></var><br>
<blockquote><p>Return true if the <code>func</code> field of <var>cb</var> is not <code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_value_t <b>ucl_callback_apply</b> (<var>ucl_callback_t cb, ...</var>)<var><a name="index-ucl_005fcallback_005fapply-79"></a></var><br>
<blockquote><p>If <code>ucl_callback_is_present()</code> applied to <var>cb</var> evaluates to
true: invoke the callback function using the callback context as first
argument and a <code>va_list</code> as second argument; the <code>va_list</code>
will hold references to the arguments to this function.  Return the
return value of the callback function.

        <p>If the callback function is not present nothing happens and the return
value is a <code>ucl_value_t</code> with all the bytes set to zero. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_value_t <b>ucl_callback_eval_thunk</b> (<var>ucl_callback_t cb</var>)<var><a name="index-ucl_005fcallback_005feval_005fthunk-80"></a></var><br>
<blockquote><p>Like <code>ucl_callback_invoke()</code> but the <code>va_list</code> argument is
replaced by <code>NULL</code>.  Return the return value of the callback function. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Custom callback application</h5>

<p>The <acronym>UCL</acronym> does not support any error reporting mechanism; this means
that <code>ucl_callback_apply()</code> does not expect the callback to fail. 
To avoid problems all the <acronym>UCL</acronym> modules that need to apply a callback
to arguments, do so by invoking a customisable function and are written
in such a way that if the callback raises an exception nothing bad
happens.  The following <acronym>API</acronym> handles this.

<div class="defun">
&mdash; Function Prototype: ucl_value_t <b>ucl_callback_apply_fun_t</b> (<var>ucl_callback_t callback, ...</var>)<var><a name="index-ucl_005fcallback_005fapply_005ffun_005ft-81"></a></var><br>
<blockquote><p>The prototype of functions that apply a callback to a list of arguments. 
<code>ucl_callback_apply()</code> has this prototype. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_callback_set_application_function</b> (<var>ucl_callback_apply_fun_t * f</var>)<var><a name="index-ucl_005fcallback_005fset_005fapplication_005ffunction-82"></a></var><br>
<blockquote><p>Register in <acronym>UCL</acronym> a new function for the application of callbacks to
arguments; it will be used by all the <acronym>UCL</acronym> functions that invoke a
callback.  The default application function is
<code>ucl_callback_apply()</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="typedefs-nodes"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#typedefs-callback">typedefs callback</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#typedefs">typedefs</a>

</div>

<h3 class="section">4.6 Wrapping node structures</h3>

<div class="defun">
&mdash; Function Prototype: ucl_value_t <b>ucl_node_getkey_fun_t</b> (<var>ucl_value_t context, void * node</var>)<var><a name="index-ucl_005fnode_005fgetkey_005ffun_005ft-83"></a></var><br>
<blockquote><p>Type of function which, applied to a pointer to node, returns the key
(or a reference to the key) associated to the node. 
</p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_node_getkey_t</b><var><a name="index-ucl_005fnode_005fgetkey_005ft-84"></a></var><br>
<blockquote><p>Structure holding the method used to extract the key from a node.  It
has the following fields:

          <dl>
<dt><code>ucl_value_t data</code><dd>Custom data value.

          <br><dt><code>ucl_node_getkey_fun_t * func</code><dd>Pointer to the function used to extract the key. 
</dl>
        </p></blockquote></div>

   <p>The following is a usage example:

<pre class="example">     typedef struct link_tag_t {
       ucl_node_tag_t        node;
       ucl_value_t           key;
     } link_tag_t;
     
     typedef link_tag_t *        link_t;
     
     static ucl_value_t
     link_key (ucl_value_t context UCL_UNUSED, void * L_)
     {
       link_t    L = L_;
       return L-&gt;key;
     }
     
     static const ucl_node_getkey_t getkey = {
       .data = { .pointer = NULL },
       .func = link_key
     };
</pre>
   <p class="noindent">we can use the key extractor directly like this:

<pre class="example">     link_t          L;
     ucl_value_t     K;
     
     K = getkey.func(getkey.data, L);
</pre>
   <!-- page -->
<div class="node">
<a name="containers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#iterators">iterators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#typedefs">typedefs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 The data structures</h2>

<ul class="menu">
<li><a accesskey="1" href="#btree">btree</a>:                        The binary tree structure. 
<li><a accesskey="2" href="#tree">tree</a>:                         The tree structure. 
<li><a accesskey="3" href="#circular">circular</a>:                     The circular list structure. 
<li><a accesskey="4" href="#graph">graph</a>:                        The graph structure. 
<li><a accesskey="5" href="#hash">hash</a>:                         The hash table structure. 
<li><a accesskey="6" href="#heap">heap</a>:                         The heap structure. 
<li><a accesskey="7" href="#list">list</a>:                         The linked list structure. 
<li><a accesskey="8" href="#map">map</a>:                          The map structure. 
<li><a accesskey="9" href="#vector">vector</a>:                       The vector structure. 
</ul>

<!-- page -->
<div class="node">
<a name="btree"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree">tree</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.1 The binary tree container</h3>

<p><a name="index-Binary-tree-container-85"></a>

<ul class="menu">
<li><a accesskey="1" href="#btree-typedefs">btree typedefs</a>:               Implementation and type definitions. 
<li><a accesskey="2" href="#btree-examples">btree examples</a>:               Usage examples. 
<li><a accesskey="3" href="#btree-creation">btree creation</a>:               Building btree hierarchies. 
<li><a accesskey="4" href="#btree-inspection">btree inspection</a>:             Accessing nodes. 
<li><a accesskey="5" href="#btree-removing">btree removing</a>:               Removing elements. 
<li><a accesskey="6" href="#btree-find">btree find</a>:                   Finding values. 
<li><a accesskey="7" href="#btree-swap">btree swap</a>:                   Swapping nodes. 
<li><a accesskey="8" href="#btree-visitors">btree visitors</a>:               Finding nodes. 
<li><a accesskey="9" href="#btree-iteration">btree iteration</a>:              Iterations in a btree hierarchy. 
<li><a href="#btree-bst">btree bst</a>:                    Routines for raw binary search trees. 
<li><a href="#btree-avl">btree avl</a>:                    Routines for <acronym>AVL</acronym> trees. 
</ul>

<!-- page -->
<div class="node">
<a name="btree-typedefs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-examples">btree examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.1 Implementation and type definitions</h4>

<p>This section presents an implementation of binary tree; the container is
a chain of structures:

<pre class="example">       ------  bro   ------
      | node |-----&gt;| node |
      |   1  |&lt;-----|   2  |
       ------  dad   ------
        | ^
     son| |dad
        v |
       ------
      | node |
      |   3  |
       ------
</pre>
   <p class="noindent">each node data structure is a collection of pointers and of metadata
fields whose usage is reserved by <acronym>UCL</acronym>; there's no data field.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_node_tag_t</b><var><a name="index-ucl_005fnode_005ftag_005ft-86"></a></var><br>
&mdash; Pointer Typedef: <b>ucl_node_t</b><var><a name="index-ucl_005fnode_005ft-87"></a></var><br>
<blockquote><p>The data type of the node structure and of the pointer to the node
structure; nodes must be allocated and freed by client code.  Public
fields:

          <dl>
<dt><code>ucl_node_t dad</code><dd>pointer to the parent of this node; <code>NULL</code> if this node has no parent;

          <br><dt><code>ucl_node_t son</code><dd>pointer to the son of this node; <code>NULL</code> if this node has no son;

          <br><dt><code>ucl_node_t bro</code><dd>pointer to the bro of this node; <code>NULL</code> if this node has no bro. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>UCL_NODE_SIZE</b><var><a name="index-UCL_005fNODE_005fSIZE-88"></a></var><br>
<blockquote><p>The size in bytes of the structure <code>ucl_node_tag_t</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-examples"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-creation">btree creation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-typedefs">btree typedefs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.2 Usage examples</h4>

<p>Let's say we want to organise a set of characters in a binary tree; we
define the tree node type and allocation functions like these:

<pre class="example">     typedef struct node_tag_t {
       ucl_node_tag_t  node;
       char            c;
     } node_tag_t;
     
     typedef node_tag_t *    node_t;
     
     ucl_memory_allocator_t  A = {
       .data  = NULL,
       .alloc = ucl_memory_alloc
     };
     
     node_t
     node_make (char c)
     {
       node_t        p = NULL;
     
       A.alloc(A.data, &amp;p, sizeof(node_tag_t));
       p-&gt;c = c;
       return p;
     }
     void
     node_final (node_t p)
     {
       A.alloc(A.data, &amp;p, 0);
     }
     __inline__ void
     node_clean (node_t p)
     {
       ucl_struct_clean(p, node_tag_t);
     }
</pre>
   <p class="noindent">and we remember that the built in <acronym>UCL</acronym> allocation function
(<code>ucl_memory_alloc()</code>) sets to zero all the bytes of newly allocated
blocks.

   <p>We define the getter/setter functions in &ldquo;generic&rdquo; form, like these:

<pre class="example">     __inline__ void
     node_set (node_t p, void * data)
     {
       p-&gt;c = *((char *)data);
     }
     __inline__ void *
     node_get (node_t p)
     {
       return &amp;(p-&gt;c);
     }
</pre>
   <p>Now if we want the following hierarchy:

<pre class="example">            ---  bro  ---
           | a |----&gt;| c |
            ---       ---
             |         |
         son v     son v
            ---       ---
           | b |     | d |
            ---       ---
</pre>
   <p class="noindent">we do it like this, taking advantage of the fact that the binary tree
functions accept <code>void *</code> values as arguments:

<pre class="example">     node_t  a, b, c, d;
     
     a = node_make('a');
     b = node_make('b');
     c = node_make('c');
     d = node_make('d');
     
     ucl_btree_dadson(a, b);
     ucl_btree_dadbro(a, c);
     ucl_btree_dadson(c, d);
</pre>
   <p class="noindent">the following expressions are true:

<pre class="example">     NULL == ucl_btree_getdad(a)
     a    == ucl_btree_getdad(b)
     a    == ucl_btree_getdad(c)
     c    == ucl_btree_getdad(d)
     
     c    == ucl_btree_getbro(a)
     NULL == ucl_btree_getbro(b)
     NULL == ucl_btree_getbro(c)
     NULL == ucl_btree_getbro(d)
     
     b    == ucl_btree_getson(a)
     NULL == ucl_btree_getson(b)
     d    == ucl_btree_getson(c)
     NULL == ucl_btree_getson(d)
</pre>
   <!-- page -->
<div class="node">
<a name="btree-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-inspection">btree inspection</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-examples">btree examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.3 Building btrees hierarchies</h4>

<p>The correct way of building binary trees is to allocate node structures
with a function that cleans them up, like <code>calloc()</code>, then use
the following functions to initialise the fields.  If a structure is
recycled, we must reset its fields to zero first.

   <p>All the following functions accept <code>void *</code> values as arguments:
internally these pointers are cast to <code>ucl_node_t</code>.

<!--  -->
<h5 class="subsubheading">Single link setters</h5>

<div class="defun">
&mdash; Inline Function: void <b>ucl_btree_set_dad</b> (<var>void * self, void * dad</var>)<var><a name="index-ucl_005fbtree_005fset_005fdad-89"></a></var><br>
<blockquote><p>Select a new parent node for <var>self</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void <b>ucl_btree_set_bro</b> (<var>void * self, void * bro</var>)<var><a name="index-ucl_005fbtree_005fset_005fbro-90"></a></var><br>
<blockquote><p>Select a new brother node for <var>self</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void <b>ucl_btree_set_son</b> (<var>void * self, void * son</var>)<var><a name="index-ucl_005fbtree_005fset_005fson-91"></a></var><br>
<blockquote><p>Select a new child node for <var>self</var>. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Double link setters</h5>

<div class="defun">
&mdash; Inline Function: void <b>ucl_btree_set_dadson</b> (<var>void * dad, void * son</var>)<var><a name="index-ucl_005fbtree_005fset_005fdadson-92"></a></var><br>
<blockquote><p>Link <var>dad</var> and <var>son</var> to be the parent and the son respectively. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void <b>ucl_btree_set_dadbro</b> (<var>void * dad, void * bro</var>)<var><a name="index-ucl_005fbtree_005fset_005fdadbro-93"></a></var><br>
<blockquote><p>Link <var>dad</var> and <var>bro</var> to be the parent and the bro respectively. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Triple link setters</h5>

<div class="defun">
&mdash; Inline Function: void <b>ucl_btree_set_dadsonbro</b> (<var>void * dad, void * son, void * bro</var>)<var><a name="index-ucl_005fbtree_005fset_005fdadsonbro-94"></a></var><br>
<blockquote><p>Link <var>dad</var>, <var>son</var> and <var>bro</var> to be the parent, the son and
the bro respectively. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-inspection"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-removing">btree removing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-creation">btree creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.4 Accessing nodes</h4>

<p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_ref_dad</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fref_005fdad-95"></a></var><br>
<blockquote><p>Return a pointer to the parent of <var>self</var> or <code>NULL</code> if the node
has no parent. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_ref_bro</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fref_005fbro-96"></a></var><br>
<blockquote><p>Return a pointer to the brother of <var>self</var> or <code>NULL</code> if the node has
no brother. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_ref_son</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fref_005fson-97"></a></var><br>
<blockquote><p>Return a pointer to the son of <var>self</var> or <code>NULL</code> if the node has no
son. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_data</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fdata-98"></a></var><br>
<blockquote><p>Assuming that the first field of the memory block referenced by
<var>self</var> is a structure of type <code>ucl_node_tag_t</code>, return a
pointer to the first byte after that structure.  The returned pointer
references the first byte of the data area of the tree node. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: ucl_bool_t <b>ucl_btree_is_leaf</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fis_005fleaf-99"></a></var><br>
<blockquote><p>Return true if the node is a leaf (no brother and no son). 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: ucl_bool_t <b>ucl_btree_is_root</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fis_005froot-100"></a></var><br>
<blockquote><p>Return true if the node is the root of a binary tree: it has no dad. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_btree_depth</b> (<var>void * N</var>)<var><a name="index-ucl_005fbtree_005fdepth-101"></a></var><br>
<blockquote><p>Function with recursive implementation which computes the depth of the
tree having <var>N</var> as root, <var>N</var> included.  Return zero if <var>N</var>
is <code>NULL</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-removing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-find">btree find</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-inspection">btree inspection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.5 Removing elements</h4>

<p>It's a matter of setting pointers to <code>NULL</code>; care must be taken not to
loose references to subtrees.

   <p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_detach_son</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fdetach_005fson-102"></a></var><br>
<blockquote><p>Detach the son of <var>self</var> and return a pointer to it.  The two nodes
hold references to each other no more. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_detach_bro</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fdetach_005fbro-103"></a></var><br>
<blockquote><p>Detach the bro of <var>self</var> and return a pointer to it.  The two nodes
hold references to each other no more. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_detach_dad</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fdetach_005fdad-104"></a></var><br>
<blockquote><p>Detach the dad of <var>self</var> and return a pointer to it.  The two nodes
hold references to each other no more. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_clean</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fclean-105"></a></var><br>
<blockquote><p>Set to zero all the bytes in the node structure. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-find"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-swap">btree swap</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-removing">btree removing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.6 Finding values</h4>

<p>The purpose of a binary tree is to organise values in a hierarchy; the
functions described in this section can be used to find values.

   <p>The following function accepts <code>void *</code> values as arguments and
return a <code>void *</code> value; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void * <b>ucl_btree_find_value</b> (<var>void * root, ucl_value_t value, ucl_comparison_t compar</var>)<var><a name="index-ucl_005fbtree_005ffind_005fvalue-106"></a></var><br>
<blockquote><p>Interpret <var>root</var> as a pointer to the root node of a btree (whose dad
is <code>NULL</code>) and find a node equal to <var>value</var> according to the
comparison closure.  <var>compar</var> is invoked like this:

     <pre class="example">          ucl_node_t  N = ...;
          ucl_value_t D = { .pointer = N };
          
          <var>compar</var>.func(<var>compar</var>.data, <var>value</var>, D);
</pre>
        <p class="noindent">where <code>N</code> is the current node in the search; if the return value
is:

          <dl>
<dt>zero<dd>the node is returned;
<br><dt>negative<dd>the search goes on in the son subtree;
<br><dt>positive<dd>the search goes on in the bro subtree;
</dl>

     <p class="noindent">if <var>value</var> is not found, the return value is <code>NULL</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-swap"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-visitors">btree visitors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-find">btree find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.7 Swapping nodes</h4>

<p>The following function accepts <code>void *</code> values as arguments and
return a <code>void *</code> value; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void <b>ucl_btree_swap_out</b> (<var>void * A, void * B</var>)<var><a name="index-ucl_005fbtree_005fswap_005fout-107"></a></var><br>
<blockquote><p>Given two pointers to nodes: interpret <var>A</var> as pointer to a node in a
tree and <var>B</var> as pointer to a node <strong>out of any tree</strong>; store
the links and meta value of <var>A</var> into <var>B</var>, then resets the links
and meta value of <var>A</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_swap</b> (<var>void * A, void * B</var>)<var><a name="index-ucl_005fbtree_005fswap-108"></a></var><br>
<blockquote><p>Given two pointers to nodes: swap the links and the meta value in the
node structures.  Take care of the fact that <var>A</var> and <var>B</var> may
reference each other. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_swap_no_meta</b> (<var>void * A, void * B</var>)<var><a name="index-ucl_005fbtree_005fswap_005fno_005fmeta-109"></a></var><br>
<blockquote><p>Given two pointers to nodes: swap the links but not the meta value in
the node structures.  Take care of the fact that <var>A</var> and <var>B</var> may
reference each other. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-visitors"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-iteration">btree iteration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-swap">btree swap</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.8 Finding nodes</h4>

<p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void * <b>ucl_btree_find_leftmost</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005ffind_005fleftmost-110"></a></var><br>
<blockquote><p>Find the leftmost node in the subtree of the supplied node.  To do this,
we traverse the tree choosing always the son of the current node.

        <p>Example:

     <pre class="example">                5-------10----12
                |        |     |
                1--3--4  7--9 11
                   |     |  |
                   2     6  8
</pre>
        <p class="noindent">starting from <code>5</code> the selected node is <code>1</code>, starting from
<code>10</code> the selected node is <code>6</code>.

        <p>Return a pointer to the leftmost node in the <var>self</var> sub&ndash;hierarchy
or to <var>self</var> itself if it has no son. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_find_rightmost</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005ffind_005frightmost-111"></a></var><br>
<blockquote><p>Find the rightmost node in the subtree of the supplied node.  To do this,
we traverse the tree choosing always the brother of the current node.

        <p>Example:

     <pre class="example">                5-------10----12
                |        |     |
                1--3--4  7--9 11
                   |     |  |
                   2     6  8
</pre>
        <p class="noindent">starting from <code>5</code> the selected node is <code>12</code>, starting from
<code>7</code> the selected node is <code>9</code>.

        <p>Return a pointer to the rightmost node in the <var>self</var> sub&ndash;hierarchy
or to <var>self</var> itself if it has no brother. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_find_deepest_son</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005ffind_005fdeepest_005fson-112"></a></var><br>
<blockquote><p>Find the deepest leftmost son in a subtree.  This is different from
<code>ucl_btree_find_leftmost()</code>.

        <p>Example:

     <pre class="example">                5-------10----12
                |        |     |
                1--3--4  7--9 11
                   |     |  |
                   2     6  8
</pre>
        <p class="noindent">starting from <code>5</code> the selected node is <code>2</code>, starting from
<code>10</code> the selected node is <code>6</code>.

        <p>Return a pointer to the deepest son in the <var>self</var> sub&ndash;hierarchy, or
<var>self</var> itself if it has no son. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_find_deepest_bro</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005ffind_005fdeepest_005fbro-113"></a></var><br>
<blockquote><p>Find the deepest rightmost bro in a subtree.  This is different from
<code>ucl_btree_find_rightmost()</code>.

        <p>Example:

     <pre class="example">                5-------10----12
                |        |     |
                1--3--4  7--9 11
                   |     |  |
                   2     6  8
</pre>
        <p class="noindent">starting from <code>5</code> the selected node is <code>11</code>, starting from
<code>1</code> the selected node is <code>4</code>.

        <p>Return a pointer to the deepest bro in the <var>self</var> sub&ndash;hierarchy, or
<var>self</var> itself if it has no son. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_find_root</b> (<var>void * node</var>)<var><a name="index-ucl_005fbtree_005ffind_005froot-114"></a></var><br>
<blockquote><p>Step up the hierarchy, dad by dad, and return a pointer to a node that
has <code>NULL</code> as dad. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-iteration"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-bst">btree bst</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-visitors">btree visitors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.9 Iterations in a btree hierarchy</h4>

<ul class="menu">
<li><a accesskey="1" href="#btree-inorder-iteration">btree inorder iteration</a>:      Inorder iteration. 
<li><a accesskey="2" href="#btree-preorder-iteration">btree preorder iteration</a>:     Preorder iteration. 
<li><a accesskey="3" href="#btree-postorder-iteration">btree postorder iteration</a>:    Postorder iteration. 
<li><a accesskey="4" href="#btree-breadth-first">btree breadth first</a>:          Breadth first iteration. 
</ul>

<!-- page -->
<div class="node">
<a name="btree-inorder-iteration"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-preorder-iteration">btree preorder iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree-iteration">btree iteration</a>

</div>

<h5 class="subsubsection">5.1.9.1 Inorder iteration</h5>

<p>Forward inorder iteration: visit all the nodes from the leftmost to the
rightmost.  Backward inorder iteration: visit all the nodes from the
rightmost to the leftmost.  Example: given the tree:

<pre class="example">     5-------10----12
     |        |     |
     1--3--4  7--9 11
        |     |  |
        2     6  8
</pre>
   <p class="noindent">the inorder iteration is:

<pre class="example">     forward:   1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12
     backward: 12, 11, 10,  9,  8,  7,  6,  5,  4,  3,  2,  1
</pre>
   <p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_first_inorder</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005finorder-115"></a></var><br>
&mdash; Inline Function: void * <b>ucl_btree_first_inorder_backward</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005finorder_005fbackward-116"></a></var><br>
<blockquote><p>Given a pointer to the root node of a tree, return the first node of an
inorder iteration.  For the forward iteration: it is the leftmost node;
for the backward iteration: it is the rightmost node. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_step_inorder</b> (<var>void * current</var>)<var><a name="index-ucl_005fbtree_005fstep_005finorder-117"></a></var><br>
&mdash; Function: void * <b>ucl_btree_step_inorder_backward</b> (<var>void * current</var>)<var><a name="index-ucl_005fbtree_005fstep_005finorder_005fbackward-118"></a></var><br>
<blockquote><p>Advance an inorder iteration.  Given a pointer to a node in a tree:
perform a single step and return a pointer to the next node, or <code>NULL</code>
if the iteration is over. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_iterator_inorder</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005finorder-119"></a></var><br>
&mdash; Function: void <b>ucl_btree_iterator_inorder_backward</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005finorder_005fbackward-120"></a></var><br>
<blockquote><p>Initialise a whole tree iterator; <var>root</var> must be the root node of a
btree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_subtree_iterator_inorder</b> (<var>ucl_iterator_t iter, void * node</var>)<var><a name="index-ucl_005fbtree_005fsubtree_005fiterator_005finorder-121"></a></var><br>
&mdash; Function: void <b>ucl_btree_subtree_iterator_inorder_backward</b> (<var>ucl_iterator_t iter, void * node</var>)<var><a name="index-ucl_005fbtree_005fsubtree_005fiterator_005finorder_005fbackward-122"></a></var><br>
<blockquote><p>Initialise a subtree iterator; <var>node</var> must be the a node of a btree,
and will be used as root node of the subtree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_range_iterator_inorder</b> (<var>ucl_iterator_t iter, ucl_pointer_range_t range</var>)<var><a name="index-ucl_005fbtree_005frange_005fiterator_005finorder-123"></a></var><br>
&mdash; Function: void <b>ucl_btree_range_iterator_inorder_backward</b> (<var>ucl_iterator_t iter, ucl_pointer_range_t range</var>)<var><a name="index-ucl_005fbtree_005frange_005fiterator_005finorder_005fbackward-124"></a></var><br>
<blockquote><p>Initialise a range iterator over the range of nodes selected by
<var>range</var> (remember that ranges are inclusive); the minimum field of
<var>range</var> is interpreted as the starting node of the iteration, while
the maximum field of <var>range</var> is interpreted as the ending node of
the iteration. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Examples of forward iteration</h5>

<p>To perform a complete forward inorder iteration, we have to start from
the leftmost node (<code>0</code> in the picture above), already visited, and
begin from there.  Example:

<pre class="example">     ucl_node_t   cur = get_the_top_node();
     
     for (cur = ucl_btree_find_leftmost(cur);
          cur;
          cur = ucl_btree_step_inorder(cur));
       {
         do_something_with(cur);
       }
</pre>
   <p>To restrict the iteration to a subtree of a tree or to a range of nodes
in a tree, we have to select the first and last nodes and check when the
iterator reaches the last.

   <p>Example of subtree restriction: does an inorder iteration from the top
of a subtree to the rightmost node in the subtree:

<pre class="example">     ucl_node_t        cur, end;
     
     cur = get_a_node(...);
     end = ucl_btree_find_rightmost(cur);
     
     for (cur = ucl_btree_find_leftmost(cur);
          cur != end;
          cur = ucl_btree_step_inorder(cur))
       {
         do_something_with(cur);
       }
     
     /* Here "cur == end" and we visit it. */
     do_something_with(cur);
</pre>
   <p class="noindent"><code>cur</code> can't be <code>NULL</code> because <code>end</code> is in the subtree of the
top node; this code will work even when <code>cur == end</code> at the
beginning.

   <p>Example of range restriction: does an iteration starting from a node
(not the leftmost) to the rightmost one:

<pre class="example">     ucl_node_t        root, cur, end;
     
     root	= get_a_node();
     end	= ucl_btree_find_rightmost(root);
     
     for (cur = select_first(root, ...);
          cur != end;
          cur = ucl_btree_step_inorder(cur))
       {
         do_something_with(cur);
       }
</pre>
   <p class="noindent"><code>cur</code> can't be <code>NULL</code> because we selected the first and last nodes
in a subtree; this code will work even when <code>root == cur == end</code> at
the beginning.

<!--  -->
<h5 class="subsubheading">Examples of backward iteration</h5>

<p>To perform a complete backward iteration, we have to start from the
rightmost node (<code>12</code> in the picture above), already visited, and
begin from there.  Example:

<pre class="example">     ucl_node_t   cur = get_the_top_node();
     
     for (cur = ucl_btree_find_rightmost(cur);
          cur;
          cur = ucl_btree_step_inorder_backward(cur))
       {
         do_something_with(cur);
       }
</pre>
   <p>To restrict the iteration to a subtree of a tree or to a range of nodes
in a tree, we have to select the first and last nodes and check when the
iterator reaches the last.

   <p>Example of subtree restriction: does an iteration from the rightmost to
the leftmost nodes in a subtree:

<pre class="example">     ucl_node_t        cur, end;
     
     cur = get_a_node(...);
     end = ucl_btree_find_leftmost(cur);
     
     for (cur = ucl_btree_find_rightmost(cur);
          cur != end;
          cur = ucl_btree_step_inorder_backward(cur))
       {
         do_something_with(cur);
       }
     
     /* Here "cur == end" and we visit it. */
     do_something_with(cur);
</pre>
   <p class="noindent"><code>cur</code> can't be <code>NULL</code> because <code>end</code> is in the subtree of the
top node; this code will work even when <code>cur == end</code> at the
beginning.

   <p>Example of range restriction:

<pre class="example">     ucl_node_t        root, cur, end;
     
     root	= get_a_node();
     end	= ucl_btree_find_leftmost(root);
     
     for (cur = select_first(root, ...);
          cur != end;
          cur = ucl_btree_step_inorder_backward(cur))
       {
         do_something_with(cur);
       }
     
     /* Here "cur == end" and we visit it. */
     do_something_with(cur);
</pre>
   <p class="noindent"><code>cur</code> can't be <code>NULL</code> since we selected the first and last nodes
in a subtree; this code will work even when <code>root == cur == end</code> a
the beginning.

<!-- page -->
<div class="node">
<a name="btree-preorder-iteration"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-postorder-iteration">btree postorder iteration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-inorder-iteration">btree inorder iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree-iteration">btree iteration</a>

</div>

<h5 class="subsubsection">5.1.9.2 Preorder iteration</h5>

<p>Preorder iteration: visit the current node then the son then the
brother.  Example:

<pre class="example">     5-------10----12
     |        |     |
     1--3--4  7--9 11
        |     |  |
        2     6  8
</pre>
   <p class="noindent">the preorder iteration is:

<pre class="example">     forward:    5,  1,  3,  2,  4, 10,  7,  6,  9,  8, 12, 11
     backward:   5, 10, 12, 11,  7,  9,  8,  6,  1,  3,  4,  2
</pre>
   <p class="noindent">the forward iteration is a &ldquo;worm that always turns right&rdquo;, while the
backward iteration is a &ldquo;worm that always turns left&rdquo;.

   <p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_first_preorder</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005fpreorder-125"></a></var><br>
&mdash; Inline Function: void * <b>ucl_btree_first_preorder_backward</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005fpreorder_005fbackward-126"></a></var><br>
<blockquote><p>Given a pointer to the root node of a tree, return the first node of a
preorder iteration.  For both the forward and backward iterations: it is
the root node itself. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_step_preorder</b> (<var>void * current</var>)<var><a name="index-ucl_005fbtree_005fstep_005fpreorder-127"></a></var><br>
&mdash; Function: void * <b>ucl_btree_step_preorder_backward</b> (<var>void * current</var>)<var><a name="index-ucl_005fbtree_005fstep_005fpreorder_005fbackward-128"></a></var><br>
<blockquote><p>Advance a preorder iteration.  Given a node in a btree: perform a single
step and return a pointer to the next node, or <code>NULL</code> if the iteration
is over. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_iterator_preorder</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005fpreorder-129"></a></var><br>
&mdash; Function: void <b>ucl_btree_iterator_preorder_backward</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005fpreorder_005fbackward-130"></a></var><br>
<blockquote><p>Initialise a whole tree iterator; <var>root</var> must be the root node of a
btree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_subtree_iterator_preorder</b> (<var>ucl_iterator_t iter, void * node</var>)<var><a name="index-ucl_005fbtree_005fsubtree_005fiterator_005fpreorder-131"></a></var><br>
&mdash; Function: void <b>ucl_btree_subtree_iterator_preorder_backward</b> (<var>ucl_iterator_t iter, void * node</var>)<var><a name="index-ucl_005fbtree_005fsubtree_005fiterator_005fpreorder_005fbackward-132"></a></var><br>
<blockquote><p>Initialise a subtree iterator; <var>node</var> must be the a node of a btree,
and will be used as root node of the subtree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_range_iterator_preorder</b> (<var>ucl_iterator_t iter, ucl_pointer_range_t range</var>)<var><a name="index-ucl_005fbtree_005frange_005fiterator_005fpreorder-133"></a></var><br>
&mdash; Function: void <b>ucl_btree_range_iterator_preorder_backward</b> (<var>ucl_iterator_t iter, ucl_pointer_range_t range</var>)<var><a name="index-ucl_005fbtree_005frange_005fiterator_005fpreorder_005fbackward-134"></a></var><br>
<blockquote><p>Initialise a range iterator over the range of nodes selected by
<var>range</var> (remember that ranges are inclusive); the minimum field of
<var>range</var> is interpreted as the starting node of the iteration, while
the maximum field of <var>range</var> is interpreted as the ending node of
the iteration. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Examples of forward iteration</h5>

<p>To perform a complete iteration, we have to start from the top node of
the tree (<code>5</code> in the picture above), already visited, and begin
from there.  Example:

<pre class="example">     ucl_node_t        cur;
     
     for (cur = select_the_top_node();
          cur;
          cur = ucl_btree_step_pre(cur))
       {
         do_something_with(cur);
       }
</pre>
   <p class="noindent">this works because the top node of a btree has a <code>NULL</code> value in the
dad pointer field.

   <p>To restrict the iteration to a subtree of a tree: we cannot loop until
the function returns <code>NULL</code>, because the top node of a subtree has a
non&ndash;<code>NULL</code> value in the dad pointer field.  With reference to the
picture above: we select the top node (number 10) and we visit it; then
we step to the next (number 7) and visit it; then we enter the loop
until the iterator reaches the top node (number 10 again).

   <p>Example:

<pre class="example">     ucl_node_t        cur, end;
     
     end = cur = get_a_node();
     
     do_something_with(cur);
     for (cur = ucl_btree_step_preorder(cur);
          cur != end;
          cur = ucl_btree_step_preorder(cur))
       {
         do_something_with(cur);
       }
</pre>
   <!-- page -->
<div class="node">
<a name="btree-postorder-iteration"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-breadth-first">btree breadth first</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-preorder-iteration">btree preorder iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree-iteration">btree iteration</a>

</div>

<h5 class="subsubsection">5.1.9.3 Postorder iteration</h5>

<p>Postorder iteration: visit the son, then the brother, then the parent
node.  Example:

<pre class="example">     5-------10----12
     |        |     |
     1--3--4  7--9 11
        |     |  |
        2     6  8
</pre>
   <p class="noindent">the postorder iteration is:

<pre class="example">     forward:    2,  4,  3,  1,  6,  8,  9,  7, 11, 12, 10,  5
     backward:  11, 12,  8,  9,  6,  7, 10,  4,  2,  3,  1,  5
</pre>
   <p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_first_postorder</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005fpostorder-135"></a></var><br>
&mdash; Inline Function: void * <b>ucl_btree_first_postorder_backward</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005fpostorder_005fbackward-136"></a></var><br>
<blockquote><p>Given a pointer to the root node of a tree, return the first node of a
postorder iteration.  For the forward iteration: it is the deepest son
found by <code>ucl_btree_find_deepest_son()</code>; for the backward
iteration: it is the deepest bro found by
<code>ucl_btree_find_deepest_bro()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_step_postorder</b> (<var>void * current</var>)<var><a name="index-ucl_005fbtree_005fstep_005fpostorder-137"></a></var><br>
&mdash; Function: void * <b>ucl_btree_step_postorder_backward</b> (<var>void * current</var>)<var><a name="index-ucl_005fbtree_005fstep_005fpostorder_005fbackward-138"></a></var><br>
<blockquote><p>Advance a forward postorder iteration.  Given a node in a btree: perform
a single step and return a pointer to the next node, or <code>NULL</code> if the
iteration is over. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_iterator_postorder</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005fpostorder-139"></a></var><br>
&mdash; Function: void <b>ucl_btree_iterator_postorder_backward</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005fpostorder_005fbackward-140"></a></var><br>
<blockquote><p>Initialise a whole tree iterator; <var>root</var> must be the root node of a
btree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_subtree_iterator_postorder</b> (<var>ucl_iterator_t iter, void * node</var>)<var><a name="index-ucl_005fbtree_005fsubtree_005fiterator_005fpostorder-141"></a></var><br>
&mdash; Function: void <b>ucl_btree_subtree_iterator_postorder_backward</b> (<var>ucl_iterator_t iter, void * node</var>)<var><a name="index-ucl_005fbtree_005fsubtree_005fiterator_005fpostorder_005fbackward-142"></a></var><br>
<blockquote><p>Initialise a subtree iterator; <var>node</var> must be the a node of a btree,
and will be used as root node of the subtree. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_range_iterator_postorder</b> (<var>ucl_iterator_t iter, ucl_pointer_range_t range</var>)<var><a name="index-ucl_005fbtree_005frange_005fiterator_005fpostorder-143"></a></var><br>
&mdash; Function: void <b>ucl_btree_range_iterator_postorder_backward</b> (<var>ucl_iterator_t iter, ucl_pointer_range_t range</var>)<var><a name="index-ucl_005fbtree_005frange_005fiterator_005fpostorder_005fbackward-144"></a></var><br>
<blockquote><p>Initialise a range iterator over the range of nodes selected by
<var>range</var> (remember that ranges are inclusive); the minimum field of
<var>range</var> is interpreted as the starting node of the iteration, while
the maximum field of <var>range</var> is interpreted as the ending node of
the iteration. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Examples of forward iteration</h5>

<p>To perform a complete iteration, we have to select the deepest leftmost
son in the tree (<code>2</code> in the example) and begin from there.  Example:

<pre class="example">     ucl_node_t        cur;
     
     cur = get_a_node();
     for (cur = ucl_btree_find_deepest_son(cur);
          cur != NULL;
          cur = ucl_btree_step_postorder(cur));
       {
         do_something_with(cur);
       }
</pre>
   <p>To restrict the iteration to a subtree of a tree, we have to check when
the iterator reaches the top node.  Example:

   <p>To restrict the iteration to a subtree of a tree: we cannot loop until
the function returns <code>NULL</code>, because the top node of a subtree has a
non&ndash;<code>NULL</code> value in the parent pointer field.  With reference to the
tree in the picture above: we select the top node (number 10); then we
move to the deepest son (number 6) and we visit it; then we enter the
loop until the iterator reaches the top node (number 10 again).

   <p>Example:

<pre class="example">     ucl_node_t        cur, end;
     
     cur = end = get_a_node();
     
     for (cur = ucl_btree_find_deepest_son(cur);
          cur != end;
          cur = ucl_btree_step_postorder(cur));
       {
         do_something_with(cur);
       }
     
     /* Here "cur == end" and we visit it. */
     do_something_with(cur);
</pre>
   <p class="noindent"><code>cur</code> can't be null in the loop.

<!-- page -->
<div class="node">
<a name="btree-breadth-first"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-postorder-iteration">btree postorder iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree-iteration">btree iteration</a>

</div>

<h5 class="subsubsection">5.1.9.4 Breadth first iteration</h5>

<p>Breadth first iteration: visit the tree level by level.  Example:

<pre class="example">     5-------10----12
     |        |     |
     1--3--4  7--9 11
        |     |  |
        2     6  8
</pre>
   <p class="noindent">the order of the forward iteration is: 5, 1, 10, 3, 7, 12, 2, 4, 6, 9,
11, 8.  To do it we need a moving cursor that always &ldquo;turns right&rdquo;
keeping the count of the level.  The order of the backward iteration is:
5, 10, 1, 12, 7, 3, 11, 9, 6, 4, 2, 8.

   <p>All the following functions accept <code>void *</code> values as arguments and
return <code>void *</code> values; internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Inline Function: void * <b>ucl_btree_first_levelorder</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005flevelorder-145"></a></var><br>
&mdash; Inline Function: void * <b>ucl_btree_first_levelorder_backward</b> (<var>void * root</var>)<var><a name="index-ucl_005fbtree_005ffirst_005flevelorder_005fbackward-146"></a></var><br>
<blockquote><p>Given a pointer to the root node of a tree, return the first node of a
levelorder iteration.  For both the forward and backward iterations: it
is the root node itself. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_step_levelorder</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fstep_005flevelorder-147"></a></var><br>
&mdash; Function: void * <b>ucl_btree_step_levelorder_backward</b> (<var>void * self</var>)<var><a name="index-ucl_005fbtree_005fstep_005flevelorder_005fbackward-148"></a></var><br>
<blockquote><p>Advance a breadth first iteration.  Given a node in the three: perform a
single step and return a pointer to the next node, or <code>NULL</code> if the
iteration is over. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_btree_iterator_levelorder</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005flevelorder-149"></a></var><br>
&mdash; Function: void <b>ucl_btree_iterator_levelorder_backward</b> (<var>ucl_iterator_t iter, void * root</var>)<var><a name="index-ucl_005fbtree_005fiterator_005flevelorder_005fbackward-150"></a></var><br>
<blockquote><p>Initialise a whole tree iterator; <var>root</var> must be the root node of a
btree. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Examples of forward iteration</h5>

<p>To perform a complete iteration, we just call the function until it
returns <code>NULL</code>.  Example:

<pre class="example">     ucl_node_t cur;
     
     for (cur = get_the_top_node();
          cur != NULL;
          cur = ucl_btree_step_levelorder(cur));
       {
         do_something_with(cur);
       }
</pre>
   <!--  -->
<h5 class="subsubheading">Examples of backward iteration</h5>

<p>To perform a complete iteration, we just call the function until it
returns <code>NULL</code>.  Example:

<pre class="example">     ucl_node_t cur;
     
     for (cur = get_the_top_node();
          cur != NULL;
          cur = ucl_btree_step_levelorder_backward(cur));
       {
         do_something_with(cur);
       }
</pre>
   <!-- page -->
<div class="node">
<a name="btree-bst"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#btree-avl">btree avl</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-iteration">btree iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.10 Routines for raw binary search trees</h4>

<p>The following routines can be used in the implementation of raw binary
search trees (<acronym>BST</acronym>); they are included in <acronym>UCL</acronym> only for
completeness, because we should use balanced trees not raw ones.

   <p>All the following functions accept <code>void *</code> values as arguments and
return values; internally these pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void <b>ucl_bst_insert</b> (<var>void * top, void * new, ucl_comparison_t keycmp, ucl_node_getkey_t getkey</var>)<var><a name="index-ucl_005fbst_005finsert-151"></a></var><br>
<blockquote><p>Insert the node referenced by <var>new</var> in the binary search tree whose
root is referenced by <var>top</var>; use <var>keycmp</var> to compare keys and
<var>getkey</var> to extract a key from its node. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_bst_find</b> (<var>void * top, ucl_value_t K, ucl_comparison_t keycmp, ucl_node_getkey_t getkey</var>)<var><a name="index-ucl_005fbst_005ffind-152"></a></var><br>
<blockquote><p>Find the node having key referenced by <var>K</var> in the binary search tree
having root referenced by <var>top</var>; use <var>keycmp</var> to compare keys
and <var>getkey</var> to extract a key from its node.  Return a pointer to
the first found node, or <code>NULL</code> if none was found. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_bst_delete</b> (<var>void * root, void * cur</var>)<var><a name="index-ucl_005fbst_005fdelete-153"></a></var><br>
<blockquote><p>Remove the node referenced by <var>cur</var> from the binary search tree
whose root is <var>root</var>.  Return the root node after the deletion,
which may be <var>root</var> or not. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="btree-avl"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree-bst">btree bst</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#btree">btree</a>

</div>

<h4 class="subsection">5.1.11 Routines for <acronym>AVL</acronym> trees</h4>

<p>The following routines are used in the implementation of the <acronym>AVL</acronym>
binary search tree; they are not meant to be used directly.  <a href="#map">map</a>
for the <acronym>UCL</acronym> implementation of <acronym>AVL</acronym> search trees.

   <p>All the following functions accept <code>void *</code> values as arguments and
return values; internally these pointers are cast to <code>ucl_node_t</code>.

   <p>The <code>meta</code> field of the <code>ucl_node_tag_t</code> structure is used to
store an <dfn><acronym>AVL</acronym> status</dfn> integer which is: -1 when the son
subtree is higher than the bro subtree; +1 when the bro subtree
is higher than the son subtree; 0 when the son subtree and the
bro subtree have equal depth.  In a balanced <acronym>AVL</acronym> tree the difference
in depth between a son subtree and a bro subtree is always at most
1; so we can say that the <acronym>AVL</acronym> status is the bro's subtree
depth minus the son's subtree depth, such difference is called
<dfn>balance factor</dfn>.

<div class="defun">
&mdash; Function: void * <b>ucl_btree_avl_rot_left</b> (<var>void * cur</var>)<var><a name="index-ucl_005fbtree_005favl_005frot_005fleft-154"></a></var><br>
<blockquote><p>Perform a <dfn>clockwise rotation</dfn> (or <dfn>son rotation</dfn> or <dfn>left
rotation</dfn>) which balances a son deeper subtree:

     <pre class="example">             cur      son
            /     =&gt;    \
          son            cur
</pre>
        <p class="noindent">return a pointer to the node that has replaced <var>cur</var> in the tree,
which is always the son of <var>cur</var>.

        <p>This function must be called only when &lsquo;<samp><span class="samp">cur</span></samp>&rsquo; has balance factor
-2 and &lsquo;<samp><span class="samp">son</span></samp>&rsquo; has balance factor -1 or 0; these
are the useful cases and also the cases for which computing the <acronym>AVL</acronym>
statuses after the rotation is not costly.

        <p>Example with <var>cur</var> being &lsquo;<samp><span class="samp">11</span></samp>&rsquo; and having son being son deeper
(balance factors in parentheses):

     <pre class="example">               (top)                   (top)
                 |                       |
                11(-2)                   9(0)
               /  \                 -----+-----
           9(-1)   12              7          11(0)
             / \             =&gt;   / \        /  \
            7   10               6   8     10    12
           / \
          6   8
</pre>
        <p>Example with <var>cur</var> being 12 and having son being equal depth
(balance factors in parentheses):

     <pre class="example">               (top)                      (top)
                 |                          |
                12(-2)                      9(+1)
               /  \                    -----+-----
             9(0)  13                 7          12(-1)
             / \              =&gt;     / \         /  \
            7   10                  6   8      10    13
           / \    \                              \
          6   8    11                             11
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_avl_rot_right</b> (<var>void * cur</var>)<var><a name="index-ucl_005fbtree_005favl_005frot_005fright-155"></a></var><br>
<blockquote><p>Perform a <dfn>counterclockwise rotation</dfn> (or <dfn>right rotation</dfn> or
<dfn>bro rotation</dfn>) which balances a right&ndash;right&ndash;higher subtree:

     <pre class="example">          cur            bro
             \    =&gt;    /
             bro      cur
</pre>
        <p class="noindent">return a pointer to the node that has replaced <var>cur</var> in the tree,
which is always the bro of <var>cur</var>.

        <p>This function must be called only when &lsquo;<samp><span class="samp">cur</span></samp>&rsquo; has balance factor
+2 and its bro has balance factor +1 or 0; these
are the useful cases and also the cases for which computing the <acronym>AVL</acronym>
statuses after the rotation is not costly.

        <p>Example with <var>cur</var> being &lsquo;<samp><span class="samp">7</span></samp>&rsquo; and having bro being bro deeper
(balance factors in parentheses):

     <pre class="example">          (top)                              (top)
            |                                  |
            7(+2)                              9(0)
           / \                            -----+-----
          6   9(+1)         =&gt;           7(0)        11
             / \                        / \         /  \
            8   11                     6   8      10    12
               /  \
             10    12
</pre>
        <p>Example with <var>cur</var> being &lsquo;<samp><span class="samp">6</span></samp>&rsquo; and having bro being equal depth
(balance factors in parentheses):

     <pre class="example">          (top)                              (top)
            |                                  |
            6(+2)                              9(-1)
           / \                            -----+-----
          5   9(0)          =&gt;           6(+1)       11
             / \                        / \         /  \
            8   11                     5=  8      10    12
           /   /  \                       /
          7  10    12                    7
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_avl_rot_left_right</b> (<var>void * cur</var>)<var><a name="index-ucl_005fbtree_005favl_005frot_005fleft_005fright-156"></a></var><br>
<blockquote><p>Perform a <dfn>left/right rotation</dfn> (or <dfn>son/bro rotation</dfn>) which
balances a left&ndash;right&ndash;higher subtree:

     <pre class="example">             cur           son_bro
            /              /     \
          son        =&gt;  son     cur
             \
            son_bro
</pre>
        <p class="noindent">it can be seen as the sequence of a counterclockwise rotation for
&lsquo;<samp><span class="samp">son</span></samp>&rsquo; and a clockwise rotation for &lsquo;<samp><span class="samp">cur</span></samp>&rsquo;:

     <pre class="example">             cur              cur        son_bro
            /                /           /     \
          son        =&gt;    son     =&gt;  son     cur
             \            /
            son_bro     son_bro
</pre>
        <p class="noindent">return a pointer to the node that has replaced <var>cur</var> in the
tree, which is always the bro of the son of <var>cur</var>.

        <p>This function must be called only when &lsquo;<samp><span class="samp">cur</span></samp>&rsquo; has balance factor
-2 and &lsquo;<samp><span class="samp">son</span></samp>&rsquo; has balance factor +1.

        <p>Example:

     <pre class="example">                   (top)                            (top)
                     |                                |
                    10 (old_cur)                      8 (new_cur)
                   /  \                     ----------+----------
            (son) 5    13            (son) 5          (old_cur) 10
                 / \              =&gt;      / \                  /  \
                3   8 (new_cur)          3   7                9    13
                   / \                     (deep_son)  (deep_bro)
                  7   9
          (deep_son) (deep_bro)
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_btree_avl_rot_right_left</b> (<var>void * cur</var>)<var><a name="index-ucl_005fbtree_005favl_005frot_005fright_005fleft-157"></a></var><br>
<blockquote><p>Perform a <dfn>right/left rotation</dfn> (or <dfn>bro/son rotation</dfn>) which
balances a right&ndash;left&ndash;higher subtree:

     <pre class="example">          cur            bro_son
             \            /   \
             bro    =&gt;  cur   bro
            /
           bro_son
</pre>
        <p class="noindent">it can be seen as the sequence of a clockwise rotation for &lsquo;<samp><span class="samp">bro</span></samp>&rsquo;
and a counterclockwise rotation for &lsquo;<samp><span class="samp">cur</span></samp>&rsquo;:

     <pre class="example">          cur           cur                  bro_son
             \             \                  /   \
             bro    =&gt;    bro_son       =&gt;  cur   bro
            /                \
           bro_son            bro
</pre>
        <p class="noindent">return a pointer to the node that has replaced <var>cur</var> in the tree,
which is always the bro of the bro of <var>cur</var>.

        <p>This function must be called only when &lsquo;<samp><span class="samp">cur</span></samp>&rsquo; has balance factor
+2 and &lsquo;<samp><span class="samp">son</span></samp>&rsquo; has balance factor -1.

        <p>Example:

     <pre class="example">                    (top)                           (top)
                      |                               |
            (old_cur) 9(+2)                          11 (0) (new_cur)
                     / \                    ----------+---------
                    8   13(-1) (bro)       9(0) (old_cur)       13(0) (bro)
                       /  \         =&gt;    / \                  /  \
           (new_cur) 11    14            8   10              12    14
                    /  \                   (deep_son)  (deep_bro)
                  10    12
          (deep_son)    (deep_bro)
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_btree_avl_depth</b> (<var>void * N</var>)<var><a name="index-ucl_005fbtree_005favl_005fdepth-158"></a></var><br>
<blockquote><p>Return the depth of the tree of which <var>N</var> is the root; if <var>N</var> is
<code>NULL</code> the return value is zero.  For this function to return the
correct result: the tree must have nodes with correct status.  This
function is faster than <code>ucl_btree_depth()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_btree_avl_factor</b> (<var>void * N</var>)<var><a name="index-ucl_005fbtree_005favl_005ffactor-159"></a></var><br>
<blockquote><p>Return the balance factor of <var>N</var>: the depth of the bro subtree minus
the depth of the son subtree.  If <var>N</var> is <code>NULL</code> the return value
is zero. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_btree_avl_is_balanced</b> (<var>void * N</var>)<var><a name="index-ucl_005fbtree_005favl_005fis_005fbalanced-160"></a></var><br>
<blockquote><p>Return true if the tree of which <var>N</var> is the root is balanced; if
<var>N</var> is <code>NULL</code> the return value is true.  This function only checks
that the left and right subtrees of each node have depth at most
different by 1, it does <strong>not</strong> validate the <acronym>AVL</acronym> status
of the nodes. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_btree_avl_is_correct</b> (<var>void * N</var>)<var><a name="index-ucl_005fbtree_005favl_005fis_005fcorrect-161"></a></var><br>
<blockquote><p>Return true if the tree of which <var>N</var> is the root is balanced and all
the statuses are correct; if <var>N</var> is <code>NULL</code> the return value is
true.  This function checks that the left and right subtrees of each
node have depth at most different by 1, and also verifies that
the <acronym>AVL</acronym> status of each node is coherent with the difference between
depths. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="tree"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#circular">circular</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#btree">btree</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.2 The tree structure</h3>

<ul class="menu">
<li><a accesskey="1" href="#tree-implementation">tree implementation</a>:          How it's done. 
<li><a accesskey="2" href="#tree-creation">tree creation</a>:                Creating a tree hierarchy. 
<li><a accesskey="3" href="#tree-insertion">tree insertion</a>:               Inserting nodes into a tree. 
<li><a accesskey="4" href="#tree-testing">tree testing</a>:                 Testing relationships between nodes. 
<li><a accesskey="5" href="#tree-relatives">tree relatives</a>:               Accessing or setting the relatives of
                                a node. 
<li><a accesskey="6" href="#tree-removing">tree removing</a>:                Removing elements from a tree. 
<li><a accesskey="7" href="#tree-iterators">tree iterators</a>:               Traversing a tree. 
</ul>

<!-- page -->
<div class="node">
<a name="tree-implementation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree-creation">tree creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.1 How it's done</h4>

<p>The implementation is a binary tree with nodes of type
<code>ucl_node_t</code>; the only difference between the btree and the tree is
the interpretation of the bro nodes.  This means that all the functions
in the btree module can be used on a tree, and the tree module adds
functions to establish the interpretation policy.

   <p>In the following picture: the nodes <code>B</code>, <code>C</code>, <code>D</code> and
<code>E</code> are all &ldquo;children&rdquo; of the node <code>A</code>; the node <code>A</code> is
the father of the nodes <code>B</code>, <code>C</code>, <code>D</code> and <code>E</code>.  So
in a tree a node can have and indefinite number of children.

<pre class="example">        -----
       |  A  |
        -----
         ^ |son
      dad| v
        -----  bro   -----  bro   -----  bro   -----  bro
       |  B  |-----&gt;|  C  |-----&gt;|  D  |-----&gt;|  E  |-----&gt;NULL
        ----- &lt;----- ----- &lt;----- ----- &lt;----- -----
         ^ |   dad    ^ |   dad          dad
      dad| vson    dad| vson
        -----        -----
       |  F  |      |  G  |
        -----        -----
</pre>
   <p>Pointers condition meaning:

     <dl>
<dt><code>node.dad == NULL</code><dd>the node is the root node of a tree;

     <br><dt><code>node.bro == NULL</code><dd>the node has no brothers, so it's the last brother between the children
of its father;

     <br><dt><code>node.son == NULL</code><dd>the node has no children;

     <br><dt><code>A.dad == B &amp;&amp; B.son == A</code><dd>A is the first between the children of node B;

     <br><dt><code>A.dad == B &amp;&amp; B.bro == A</code><dd>A and B are brothers, and children of the same parent node. 
</dl>

<!-- page -->
<div class="node">
<a name="tree-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree-insertion">tree insertion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree-implementation">tree implementation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.2 Creating a tree hierarchy</h4>

<p>The node structures must be allocated by the client code and all the
bytes set to zero before usage.  The btree functions can be used
directly, but <acronym>UCL</acronym> provides aliases for them when they must be used
for a tree.

   <p>All the following functions accept <code>void *</code> values as arguments:
internally these pointers are cast <code>ucl_node_t</code>.

<!--  -->
<h5 class="subsubheading">Single link setters</h5>

<div class="defun">
&mdash; Function: void <b>ucl_tree_set_next</b> (<var>void * node, void * next</var>)<var><a name="index-ucl_005ftree_005fset_005fnext-162"></a></var><br>
<blockquote><p>Mutate <var>node</var> so that <var>next</var> becomes the new right brother of
<var>node</var>.  The old reference to the right brother of <var>node</var> is
lost. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_tree_set_prev</b> (<var>void * node, void * prev</var>)<var><a name="index-ucl_005ftree_005fset_005fprev-163"></a></var><br>
<blockquote><p>Mutate <var>node</var> so that <var>prev</var> becomes the new left brother of
<var>node</var>.  The old reference to the left brother of <var>node</var> is
lost. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Double link setters</h5>

<div class="defun">
&mdash; Function: void <b>ucl_tree_set_dadson</b> (<var>void * dad, void * son</var>)<var><a name="index-ucl_005ftree_005fset_005fdadson-164"></a></var><br>
<blockquote><p>Mutate <var>prev</var> and <var>next</var> so that the two become left and right
brothers.  The old references to the left and right brothers are lost. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_tree_set_prevnext</b> (<var>void * prev, void * next</var>)<var><a name="index-ucl_005ftree_005fset_005fprevnext-165"></a></var><br>
<blockquote><p>Mutate <var>prev</var> and <var>next</var> so that the two become left and right
brothers.  The old references to the left and right brothers are lost. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="tree-insertion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree-testing">tree testing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree-creation">tree creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.3 Inserting nodes into a tree</h4>

<p>The following functions are used to insert subtrees in a tree.  None of
the nodes in the target tree are detached.  The links in the new subtrees
that are not interested by the relations in these functions, are left
untouched.

   <p>All the following functions accept <code>void *</code> values as arguments:
internally these pointers are cast <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void <b>ucl_tree_insert_dad</b> (<var>void * node, void * dad</var>)<var><a name="index-ucl_005ftree_005finsert_005fdad-166"></a></var><br>
<blockquote><p>Inserts a new dad for a node.  The dad node becomes the father of the
node and the first son of the old dad (if any).

     <pre class="example">           ---       ---
          | A |     | A |
           ---       ---
            |         |
           ---       ---
          |nod| -&gt;  |dad|
           ---       ---
                      |
                     ---
                    |nod|
                     ---
</pre>
        </blockquote></div>

   <p>Example of dad insertion:

<pre class="example">     ucl_tree_insert_dad( 1, A )
     
     0               D         0
     |               |         |
     1--2--3--4  +   A--C  =   A--C
     |  |            |         |
     5  6            B         1--2--3--4
                               |  |
                               5  6
</pre>
   <p class="noindent">the <code>D</code> and <code>B</code> nodes are detached and will be lost if we
don't keep a reference to them.

<div class="defun">
&mdash; Function: void <b>ucl_tree_insert_son</b> (<var>void * node, void * son</var>)<var><a name="index-ucl_005ftree_005finsert_005fson-167"></a></var><br>
<blockquote><p>Insert a new child for a node.  The node referenced by <var>son</var> becomes
the last between the children of the node referenced by <var>node</var>.

     <pre class="example">           ---         ---
          |nod|       |nod|
           ---         ---
            |     -&gt;    |
           ---         ---     ---
          | A |       | A |--&gt;|son|
           ---         ---     ---
</pre>
        </blockquote></div>

   <p>Example of son insertion:

<pre class="example">     ucl_tree_insert_son( 0, A )
     
     0               D         0
     |               |         |
     1--2--3--4  +   A--C  =   1--2--3--4--A--C
     |  |            |         |  |        |
     5  6            B         5  6        B
</pre>
   <p class="noindent">the node <code>D</code> is detached and will be lost if we don't keep a
reference to it.

<div class="defun">
&mdash; Function: void <b>ucl_tree_insert_prev</b> (<var>void * node, void * bro</var>)<var><a name="index-ucl_005ftree_005finsert_005fprev-168"></a></var><br>
<blockquote><p>Insert a new brother for a node.  The node referenced by <var>bro</var>
becomes the left brother of the node referenced by <var>node</var>.

     <pre class="example">           ---    ---          ---    ---    ---
          | A |--|nod|   -&gt;   | A |--|bro|--|nod|
           ---    ---          ---    ---    ---
</pre>
        </blockquote></div>

   <p>Example of prev node insertion:

<pre class="example">     ucl_tree_insert_prev( 2, A )
     
     0               D         0
     |               |         |
     1--2--3--4  +   A--C  =   1--A--2--3--4
     |  |            |         |  |  |
     5  6            B         5  B  6
</pre>
   <p class="noindent">the <code>D</code> and <code>C</code> nodes are detached and will be lost if we
don't keep a reference to them.

<div class="defun">
&mdash; Function: void <b>ucl_tree_insert_next</b> (<var>void * node, void * bro</var>)<var><a name="index-ucl_005ftree_005finsert_005fnext-169"></a></var><br>
<blockquote><p>Insert a new brother for a node.  The node referenced by <var>bro</var>
becomes the right brother of the node referenced by <var>node</var>.

     <pre class="example">           ---    ---          ---    ---    ---
          |nod|--| A |   -&gt;   |nod|--|bro|--| A |
           ---    ---          ---    ---    ---
</pre>
        </blockquote></div>

   <p>Example of next brother insertion:

<pre class="example">     ucl_tree_insert_next( 2, A )
     
     0               D         0
     |               |         |
     1--2--3--4  +   A--C  =   1--2--A--3--4
     |  |            |         |  |
     5  6            B         5  6
</pre>
   <p class="noindent">the <code>D</code>, <code>B</code> and <code>C</code> nodes are detached and will be lost
if we don't keep a reference to them.

<!-- page -->
<div class="node">
<a name="tree-testing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree-relatives">tree relatives</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree-insertion">tree insertion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.4 Testing relationships between nodes</h4>

<p>All the following functions accept <code>void *</code> values as arguments:
internally these pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_tree_is_dad</b> (<var>void * dad, void * cld_p</var>)<var><a name="index-ucl_005ftree_005fis_005fdad-170"></a></var><br>
<blockquote><p>Return true if the node referenced by <var>dad</var> is the father of the
node referenced by <var>cld_p</var>, otherwise return false. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_tree_is_bro</b> (<var>void * node, void * bro</var>)<var><a name="index-ucl_005ftree_005fis_005fbro-171"></a></var><br>
<blockquote><p>Return true if the node referenced by <var>node</var> is a brother of the
node referenced by <var>bro</var>, otherwise return false. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_tree_has_dad</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fhas_005fdad-172"></a></var><br>
<blockquote><p>Return true if the node referenced by <var>self</var> has a parent,
otherwise return false. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_tree_has_prev</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fhas_005fprev-173"></a></var><br>
<blockquote><p>Return true if the node referenced by <var>self</var> has a brother to the
left, otherwise return false. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_tree_has_next</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fhas_005fnext-174"></a></var><br>
<blockquote><p>Return true if the node referenced by <var>self</var> has a brother to the
right, otherwise return false. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_tree_has_son</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fhas_005fson-175"></a></var><br>
<blockquote><p>Return true if the node referenced by <var>self</var> has a son, otherwise
return false. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="tree-relatives"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree-removing">tree removing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree-testing">tree testing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.5 Accessing or setting the relatives of a node</h4>

<p>All the following functions accept <code>void *</code> values as arguments:
internally these pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void * <b>ucl_tree_ref_dad</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fref_005fdad-176"></a></var><br>
<blockquote><p>Return a pointer to the father of the node referenced by <var>self</var>; if
the node has no parent: return <code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_ref_prev</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fref_005fprev-177"></a></var><br>
<blockquote><p>Return a pointer to the left brother of the node referenced by
<var>self</var>; if the node has no left brother: return <code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_ref_next</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fref_005fnext-178"></a></var><br>
<blockquote><p>Return a pointer to the right brother of the node referenced by
<var>self</var>; if the node has no right brother: return <code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_ref_son</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fref_005fson-179"></a></var><br>
<blockquote><p>Return a pointer to the son of the node referenced by <var>self</var>; if the
node has no child: return <code>NULL</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_ref_first</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fref_005ffirst-180"></a></var><br>
<blockquote><p>Return a pointer to the first between the brothers of the node
referenced by <var>self</var>; it can be a pointer to <var>self</var> itself, if
<var>self</var> is the first. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_ref_last</b> (<var>void * self</var>)<var><a name="index-ucl_005ftree_005fref_005flast-181"></a></var><br>
<blockquote><p>Return a pointer to the last between the brothers of the node
referenced by <var>self</var>; it can be a pointer to <var>self</var> itself, if
<var>self</var> is the last. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="tree-removing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#tree-iterators">tree iterators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree-relatives">tree relatives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.6 Removing elements from a tree</h4>

<p>These functions will extract a node from a tree, returning a pointer to
the extracted node.  All the following functions accept <code>void *</code>
values as arguments and return <code>void *</code> values: internally these
pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void * <b>ucl_tree_extract_dad</b> (<var>void * node</var>)<var><a name="index-ucl_005ftree_005fextract_005fdad-182"></a></var><br>
<blockquote><p>Extract the dad of the node referenced by <var>node</var> from the tree. 
The referenced node and all its brothers are inserted in place of the
extracted dad.

        <p>Returns a pointer to the extracted node, or <code>NULL</code> if the selected
node has no dad.  All the pointers in the extracted node structure are
reset to <code>NULL</code>.

     <pre class="example">           ---    ---    ---       ---    ---    ---    ---
          | A |--|dad|--| B |     | A |--|nod|--| C |--| B |
           ---    ---    ---       ---    ---    ---    ---
                   |          -&gt;
                  ---    ---              ---
                 |nod|--| C |            |dad|
                  ---    ---              ---
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_extract_son</b> (<var>void * node</var>)<var><a name="index-ucl_005ftree_005fextract_005fson-183"></a></var><br>
<blockquote><p>Extract the son of the node referenced by <var>node</var> from the tree. 
The son of the selected node is extracted from the hierarchy.  All of its
children become children of the selected node.

        <p>Return a pointer to the extracted node or <code>NULL</code> if the selected node
has no son.  All the pointers in the extracted node structure are reset
to <code>NULL</code>.

     <pre class="example">           ---               ---
          |nod|             |nod|
           ---               ---
            |                 |
           ---    ---        ---    ---    ---
          |son|--| C |  -&gt;  | A |--| B |--| C |
           ---    ---        ---    ---    ---
            |
           ---    ---            ---
          | A |--| B |          |son|
           ---    ---            ---
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_extract_prev</b> (<var>void * node</var>)<var><a name="index-ucl_005ftree_005fextract_005fprev-184"></a></var><br>
<blockquote><p>Extract the left brother of the node referenced by <var>node</var>.  The
left brother of the selected node is extracted from the hierarchy.  Its
children become left brothers of the selected node.

        <p>Return a pointer to the extracted node, or <code>NULL</code> if the selected node
has no left brother.   All the pointers in the extracted node structure
are reset to <code>NULL</code>.

     <pre class="example">           ---               ---
          | A |             | A |
           ---               ---
            |                 |
           ---    ---        ---    ---
          |prv|--|nod|  -&gt;  | B |--|nod|
           ---    ---        ---    ---
            |
           ---                   ---
          | B |                 |prv|
           ---                   ---
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_tree_extract_next</b> (<var>void * node</var>)<var><a name="index-ucl_005ftree_005fextract_005fnext-185"></a></var><br>
<blockquote><p>Extract the right brother of the node referenced by <var>node</var>.   The
right brother of the selected node is extracted from the hierarchy.  Its
children become right brothers of the selected node.

        <p>Return a pointer to the extracted node, or <code>NULL</code> if the selected node
has no right brother.   All the pointers in the extracted node structure
are reset to <code>NULL</code>.

     <pre class="example">           ---    ---    ---       ---    ---    ---
          |nod|--|nxt|--| A |     |nod|--| B |--| A |
           ---    ---    ---       ---    ---    ---
                   |           -&gt;
                  ---                 ---
                 | B |               |nxt|
                  ---                 ---
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="tree-iterators"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree-removing">tree removing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#tree">tree</a>

</div>

<h4 class="subsection">5.2.7 Traversing a tree</h4>

<p>For the tree iterators, the return value of <code>ucl_iterator_ptr()</code>
is a pointer to the current node.  All the following functions accept
<code>void *</code> values as arguments: internally these pointers are cast to
<code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void <b>ucl_tree_iterator_inorder</b> (<var>void * node, ucl_iterator_t iter</var>)<var><a name="index-ucl_005ftree_005fiterator_005finorder-186"></a></var><br>
<blockquote><p>Initialises an in&ndash;order iteration. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_tree_iterator_preorder</b> (<var>void * node, ucl_iterator_t iter</var>)<var><a name="index-ucl_005ftree_005fiterator_005fpreorder-187"></a></var><br>
<blockquote><p>Initialises a pre&ndash;order iteration. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_tree_iterator_postorder</b> (<var>void * node, ucl_iterator_t iter</var>)<var><a name="index-ucl_005ftree_005fiterator_005fpostorder-188"></a></var><br>
<blockquote><p>Initialises a post&ndash;order iteration. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="heap"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#list">list</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash">hash</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.3 The heap structure</h3>

<p><a name="index-Heap-container-189"></a><a name="index-Binary-heap-container-190"></a>

   <p>The heap container allows us to collect a bunch of values and extract
them sorted, from the lesser to the greater, according to a custom
comparison function.  The <acronym>UCL</acronym> heap is implemented as a binary tree,
with nodes of type <code>ucl_node_tag_t</code>; the current implementation is
probably inefficient, especially because of the cost of finding the next
node under which append new nodes; but even without that, it would not
be an efficient implementation anyway.

<ul class="menu">
<li><a accesskey="1" href="#heap-intro">heap intro</a>:                   How it is done. 
<li><a accesskey="2" href="#heap-types">heap types</a>:                   Heap type definitions. 
<li><a accesskey="3" href="#heap-creation">heap creation</a>:                Creating and destroying heaps. 
<li><a accesskey="4" href="#heap-insertion">heap insertion</a>:               Adding elements to a heaps. 
<li><a accesskey="5" href="#heap-deletion">heap deletion</a>:                Removing elements from a heaps. 
<li><a accesskey="6" href="#heap-ops">heap ops</a>:                     Various operations on a heaps. 
</ul>

<!-- page -->
<div class="node">
<a name="heap-intro"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heap-types">heap types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#heap">heap</a>

</div>

<h4 class="subsection">5.3.1 How it is done</h4>

<p>The heap is implemented as binary tree in which we keep track of the
root node and of the &ldquo;next dad&rdquo; node; new nodes are appended as
children of the next dad, first as son then as bro; if a new node has
key lesser than its dad we raise it in the tree.

   <p>Let's see an example of heap construction.  Let's say the heap already
has &lsquo;<samp><span class="samp">5</span></samp>&rsquo; as root node; being the only one, the root node is also the
next dad (marked with &lsquo;<samp><span class="samp">n</span></samp>&rsquo; in the pictures).  Let's append &lsquo;<samp><span class="samp">8</span></samp>&rsquo;
as son of the next dad:

<pre class="example">     n5
      |
      8
</pre>
   <p class="noindent">now let's append &lsquo;<samp><span class="samp">10</span></samp>&rsquo; as bro of next dad; the next dad becomes full
so we do a breadth first step from &lsquo;<samp><span class="samp">5</span></samp>&rsquo; to update it:

<pre class="example">     n5--10       5--10
      |      =&gt;   |
      8          n8
</pre>
   <p class="noindent">now let's append &lsquo;<samp><span class="samp">3</span></samp>&rsquo; as son of next dad, then raise it in the tree
while it is lesser than its dad:

<pre class="example">      5--10       5--10       3--10
      |           |           |
     n8      =&gt;  n3      =&gt;  n5
      |           |           |
      3           8           8
</pre>
   <p class="noindent">now let's append &lsquo;<samp><span class="samp">4</span></samp>&rsquo; as bro of next dad, then raise it in the tree
while it is lesser than its dad; finally, since the next dad has become
full, we do a breadth first step from &lsquo;<samp><span class="samp">4</span></samp>&rsquo; to update it:

<pre class="example">      3--10       3--10      3--n10
      |           |          |
     n5--4   =&gt;  n4--5   =&gt;  4--5
      |           |          |
      8           8          8
</pre>
   <p class="noindent">we understand how to add &lsquo;<samp><span class="samp">12</span></samp>&rsquo;:

<pre class="example">     3--n10      3----n10
     |           |     |
     4--5    =&gt;  4--5  12
     |           |
     8           8
</pre>
   <p class="noindent">and how to add &lsquo;<samp><span class="samp">14</span></samp>&rsquo; updating the next dad with a breadth first step
from &lsquo;<samp><span class="samp">10</span></samp>&rsquo;:

<pre class="example">     3----n10--14      3-----10--14
     |     |           |     |
     4--5  12      =&gt;  4--5  12
     |                 |
     8                n8
</pre>
   <p class="noindent">further nodes will be appended to &lsquo;<samp><span class="samp">8</span></samp>&rsquo;.

   <p>Let's see some examples of node extraction.  Extracting a node from the
heap means to extract its root, which is the lesser one; we replace it
with the lesser among its children, then recursively descend the tree
always replacing with the lesser.  So first we extract &lsquo;<samp><span class="samp">3</span></samp>&rsquo;:

<pre class="example">      3-----10--14      4-----10--14      4-----10--14
      |     |           |     |           |     |
      4--5  12      =&gt;  *--5  12      =&gt;  5     12
      |                 |                 |
     n8                n8                n8
</pre>
   <p class="noindent">then we extract &lsquo;<samp><span class="samp">4</span></samp>&rsquo;:

<pre class="example">      4-----10--14      5-----10--14      5-----10--14
      |     |           |     |           |     |
      5     12      =&gt;  *     12      =&gt; n8     12
      |                 |
     n8                n8
</pre>
   <p class="noindent">and so on.

<!-- page -->
<div class="node">
<a name="heap-types"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heap-creation">heap creation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heap-intro">heap intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#heap">heap</a>

</div>

<h4 class="subsection">5.3.2 Heap type definitions</h4>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_heap_tag_t</b><var><a name="index-ucl_005fheap_005ftag_005ft-191"></a></var><br>
&mdash; One Element Array Typedef: <b>ucl_heap_t</b><var><a name="index-ucl_005fheap_005ft-192"></a></var><br>
<blockquote><p>The base structure of the heap container.  The base structure stores the
context associated to a heap such as the comparison function for the
nodes. 
</p></blockquote></div>

   <p>The <acronym>UCL</acronym> heap container collects nodes of type <code>ucl_node_tag_t</code>,
which hold no custom data; we have to at least associate a key to each
node, doing something like this:

<pre class="example">     typedef struct link_tag_t {
       ucl_node_tag_t        node;
       ucl_value_t           key;
     } link_tag_t;
     
     typedef link_tag_t *        link_t;
     
     static ucl_value_t
     link_key (ucl_value_t context UCL_UNUSED, void * L_)
     {
       link_t    L = L_;
       return L-&gt;key;
     }
     
     static const ucl_node_getkey_t getkey = {
       .data = { .pointer = NULL },
       .func = link_key
     };
</pre>
   <p class="noindent">and then use <code>getkey</code> as last argument to
<code>ucl_heap_initialise()</code>; we can use the key extractor directly like
this:

<pre class="example">     link_t          L;
     ucl_value_t     K;
     
     K = getkey.func(getkey.data, L);
</pre>
   <!-- page -->
<div class="node">
<a name="heap-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heap-insertion">heap insertion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heap-types">heap types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#heap">heap</a>

</div>

<h4 class="subsection">5.3.3 Creating and destroying heap</h4>

<div class="defun">
&mdash; Function: void <b>ucl_heap_initialise</b> (<var>ucl_heap_t H, ucl_comparison_t keycmp, ucl_node_getkey_t getkey</var>)<var><a name="index-ucl_005fheap_005finitialise-193"></a></var><br>
<blockquote><p>Initialise an already allocated heap structure. <var>keycmp</var> is the
function+context used to compare keys; <var>getkey</var> is the
function+context used to extract the key from nodes.

        <p>When a heap must be destroyed: all its nodes must be extracted and
released with the appropriate function. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="heap-insertion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heap-deletion">heap deletion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heap-creation">heap creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#heap">heap</a>

</div>

<h4 class="subsection">5.3.4 Adding elements to a heap</h4>

<div class="defun">
&mdash; Function: void <b>ucl_heap_insert</b> (<var>ucl_heap_t H, void * N</var>)<var><a name="index-ucl_005fheap_005finsert-194"></a></var><br>
<blockquote><p>Insert a new node in the heap.  <var>N</var> is internally cast to
<code>ucl_node_t</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="heap-deletion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heap-ops">heap ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heap-insertion">heap insertion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#heap">heap</a>

</div>

<h4 class="subsection">5.3.5 Removing elements from a heap</h4>

<div class="defun">
&mdash; Function: void * <b>ucl_heap_extract</b> (<var>ucl_heap_t H</var>)<var><a name="index-ucl_005fheap_005fextract-195"></a></var><br>
<blockquote><p>Extract a node from the heap; return a pointer to it, or <code>NULL</code> if the
heap is empty.  The extracted node is the one with the smallest value;
the returned value can be safely cast to <code>ucl_node_t</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="heap-ops"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heap-deletion">heap deletion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#heap">heap</a>

</div>

<h4 class="subsection">5.3.6 Various operations on a heap</h4>

<div class="defun">
&mdash; Inline Function: size_t <b>ucl_heap_size</b> (<var>const ucl_heap_t H</var>)<var><a name="index-ucl_005fheap_005fsize-196"></a></var><br>
<blockquote><p>Return a value of type <code>size_t</code> representing the number of nodes in
the heap. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_heap_merge</b> (<var>ucl_heap_t H, ucl_heap_t other</var>)<var><a name="index-ucl_005fheap_005fmerge-197"></a></var><br>
<blockquote><p>Merge two heaps: nodes from <var>other</var> are extracted and inserted into
<var>H</var>.  When the function returns <var>other</var> is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Inline Function: void * <b>ucl_heap_root</b> (<var>const ucl_heap_t H</var>)<var><a name="index-ucl_005fheap_005froot-198"></a></var><br>
<blockquote><p>Return a pointer to the top node in the heap, without extracting it. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="circular"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph">graph</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tree">tree</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.4 The circular list</h3>

<p><a name="index-Circular-list-199"></a>

   <p>The circular container provides a circular doubly linked list; it is
implemented as a chain of <code>ucl_node_t</code> structures; a pointer to the
<em>current</em> position is stored in a base structure.  The current
position marker can be moved forward and backward as a cursor.

   <blockquote>
The handling of list links is derived from the handling of elements in
the <acronym>TCL</acronym> (Tool Command Language) hash table by John Ousterhout
and others (<a href="http://www.tcl.tk">http://www.tcl.tk</a> for more about <acronym>TCL</acronym>). 
</blockquote>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_circular_tag_t</b><var><a name="index-ucl_005fcircular_005ftag_005ft-200"></a></var><br>
&mdash; One Element Array: <b>ucl_circular_t</b><var><a name="index-ucl_005fcircular_005ft-201"></a></var><br>
<blockquote><p>Base structure of the container.  It must be allocated by the user's
code. 
</p></blockquote></div>

<ul class="menu">
<li><a accesskey="1" href="#circular-creation">circular creation</a>:            Creating and destroying circulars. 
<li><a accesskey="2" href="#circular-adding">circular adding</a>:              Adding elements to a circular. 
<li><a accesskey="3" href="#circular-removing">circular removing</a>:            Removing elements from a circular. 
<li><a accesskey="4" href="#circular-moving">circular moving</a>:              Moving the cursor. 
<li><a accesskey="5" href="#circular-search">circular search</a>:              Searching elements. 
<li><a accesskey="6" href="#circular-ops">circular ops</a>:                 Various operations on a circular. 
</ul>

<!-- page -->
<div class="node">
<a name="circular-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#circular-adding">circular adding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#circular">circular</a>

</div>

<h4 class="subsection">5.4.1 Creating and destroying circulars</h4>

<div class="defun">
&mdash; Function: void <b>ucl_circular_constructor</b> (<var>ucl_circular_t self</var>)<var><a name="index-ucl_005fcircular_005fconstructor-202"></a></var><br>
<blockquote><p>Initialise an already allocated structure.  Set all the fields of
<var>self</var> so that the structure represents an empty circular list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_circular_destructor</b> (<var>ucl_circular_t self</var>)<var><a name="index-ucl_005fcircular_005fdestructor-203"></a></var><br>
<blockquote><p>Destroys the structure.  Set all the fields of <var>self</var> so that the
structure represents an empty circular list.  Before calling this
function the user's code has to make sure that all the links are
extracted from the list. 
</p></blockquote></div>

   <p>To extract all the links from a circular list, we can do:

<pre class="example">     ucl_circular_t  circ;
     ucl_node_t      link;
     ucl_value_t     val;
     
     while (ucl_circular_size(circ))
       {
         link = ucl_circular_extract(circ);
         /* insert here the code to destroy the value */
         /* insert here the code to free the link memory */
       }
</pre>
   <p class="noindent">if the value needs no destructor and we are using a memory allocator as
implemented by <acronym>UCL</acronym>, we can do:

<pre class="example">     ucl_memory_allocator_t  A;
     ucl_circular_t  circ;
     ucl_node_t      link;
     
     while (ucl_circular_size(circ))
       {
         link = ucl_circular_extract(circ);
         A.alloc(A.data, &amp;link, 0);
       }
</pre>
   <!-- page -->
<div class="node">
<a name="circular-adding"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#circular-removing">circular removing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#circular-creation">circular creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#circular">circular</a>

</div>

<h4 class="subsection">5.4.2 Adding elements to a circular</h4>

<div class="defun">
&mdash; Function: void <b>ucl_circular_insert</b> (<var>ucl_circular_t self, ucl_node_t link_p</var>)<var><a name="index-ucl_005fcircular_005finsert-204"></a></var><br>
<blockquote><p>Insert an element at the current position.  To do this the user's code
has to allocate a new circular link structure, store the value into it
and hand a pointer to the node to this function.

        <p>The old current link becomes the next link. 
</p></blockquote></div>

   <p>Example of link insertion (the link has no value):

<pre class="example">     ucl_memory_allocator_t  A;
     ucl_circular_t  circ;
     ucl_node_t      link = NULL;
     
     A.alloc(A.data, &amp;link, sizeof(ucl_node_tag_t));
     ucl_circular_insert(circ, link);
</pre>
   <!-- page -->
<div class="node">
<a name="circular-removing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#circular-moving">circular moving</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#circular-adding">circular adding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#circular">circular</a>

</div>

<h4 class="subsection">5.4.3 Removing elements from a circular</h4>

<div class="defun">
&mdash; Function: ucl_node_t <b>ucl_circular_extract</b> (<var>ucl_circular_t self</var>)<var><a name="index-ucl_005fcircular_005fextract-205"></a></var><br>
<blockquote><p>Extract the current link and return a pointer to it, or <code>NULL</code> if the
list is empty.  The new current element is the next in the forward
direction. 
</p></blockquote></div>

   <p>Example of link deletion and memory release:

<pre class="example">     ucl_memory_allocator_t  A;
     ucl_circular_t  circ;
     ucl_node_t      link;
     
     link = ucl_circular_extract(circ);
     if (NULL != link)
       A.alloc(A.data, &amp;link, 0);
</pre>
   <!-- page -->
<div class="node">
<a name="circular-moving"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#circular-search">circular search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#circular-removing">circular removing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#circular">circular</a>

</div>

<h4 class="subsection">5.4.4 Moving the cursor</h4>

<div class="defun">
&mdash; Function: void <b>ucl_circular_forward</b> (<var>ucl_circular_t self, int times</var>)<var><a name="index-ucl_005fcircular_005fforward-206"></a></var><br>
<blockquote><p>Move forwards the current position, <var>times</var> is the forward offset:
it can be a positive or negative integer.  If the container is empty, or
the offset is zero, nothing happens. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_circular_backward</b> (<var>ucl_circular_t self, int times</var>)<var><a name="index-ucl_005fcircular_005fbackward-207"></a></var><br>
<blockquote><p>A wrapper for <code>ucl_circular_forward()</code>: move backwards the
current position, <var>times</var> is the backward offset.  If the container
is empty, or the offset is zero, nothing happens. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="circular-search"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#circular-ops">circular ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#circular-moving">circular moving</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#circular">circular</a>

</div>

<h4 class="subsection">5.4.5 Searching elements</h4>

<div class="defun">
&mdash; Function: void <b>ucl_circular_set_compar</b> (<var>ucl_circular_t this, ucl_comparison_t compar</var>)<var><a name="index-ucl_005fcircular_005fset_005fcompar-208"></a></var><br>
<blockquote><p>Register the function to be used to compare elements. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_node_t <b>ucl_circular_find</b> (<var>ucl_circular_t self, ucl_value_t val</var>)<var><a name="index-ucl_005fcircular_005ffind-209"></a></var><br>
<blockquote><p>Move the current position to the first forward element whose value is
equal to <var>val</var>; return a pointer to the link, or <code>NULL</code> if the
value was not found.

        <p>While performing the search, the selected comparison function is invoked
with <var>val</var> as second argument and a pointer to the current link as
third argument:

     <pre class="example">          ucl_comparison_t compar = <var>self</var>.compar;
          ucl_node_t   link  = ...;
          ucl_value_t  inner = { .pointer = link };
          
          compar.func(compar.data, <var>val</var>, inner);
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="circular-ops"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#circular-search">circular search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#circular">circular</a>

</div>

<h4 class="subsection">5.4.6 Various operations on a circular</h4>

<div class="defun">
&mdash; Function: size_t <b>ucl_circular_size</b> (<var>ucl_circular_t self</var>)<var><a name="index-ucl_005fcircular_005fsize-210"></a></var><br>
<blockquote><p>Return the number of elements in the container. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_node_t <b>ucl_circular_current</b> (<var>ucl_circular_t self</var>)<var><a name="index-ucl_005fcircular_005fcurrent-211"></a></var><br>
<blockquote><p>Return a pointer to the current link, or <code>NULL</code> if the container is
empty. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash">hash</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#circular">circular</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.5 The graph structure</h3>

<p>A <acronym>UCL</acronym> graph is a network of (not so) little data structures; the
elements of the graph are nodes and links.

<ul class="menu">
<li><a accesskey="1" href="#graph-overview">graph overview</a>:               How it's done. 
<li><a accesskey="2" href="#graph-types">graph types</a>:                  Graph type definitions. 
<li><a accesskey="3" href="#graph-insert">graph insert</a>:                 Inserting links and nodes. 
<li><a accesskey="4" href="#graph-extract">graph extract</a>:                Extracting links and nodes. 
<li><a accesskey="5" href="#graph-merge">graph merge</a>:                  Merging links. 
<li><a accesskey="6" href="#graph-value">graph value</a>:                  Accessing values. 
<li><a accesskey="7" href="#graph-link-iter">graph link iter</a>:              Link iterators. 
<li><a accesskey="8" href="#graph-ops">graph ops</a>:                    Various operations on a graph. 
<li><a accesskey="9" href="#graph-dfs">graph dfs</a>:                    Depth first search. 
</ul>

<!-- page -->
<div class="node">
<a name="graph-overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-types">graph types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.1 How it's done</h4>

<p><acronym>UCL</acronym> does not enforce the use of a container to collect graph node
structures: it is responsibility of the user to put nodes somewhere. 
For convenience: the node structure has a &ldquo;next node&rdquo; field that
allows us to put nodes into a simply linked list, but it is not
mandatory to use it.

   <p>Each node references two doubly linked lists of links: one for outgoing
links and one for incoming links.

<pre class="example">                      ------
         NULL  ------| node |-----  NULL
           ^  |       ------      |  ^
           |  v                   v  |
      -----------               ------------
     | in link 0 |             | out link 0 |
      -----------               ------------
          |^                         |^
          v|                         v|
      -----------               ------------
     | in link 1 |             | out link 1 |
      -----------               ------------
          |^                         |^
          v|                         v|
      -----------               ------------
     | in link 2 |             | out link 2 |
      -----------               ------------
          |                          |
          v                          v
        NULL                        NULL
</pre>
   <p>Each link has references of both the source and destination nodes and is
part of two doubly linked lists: one of outgoing links of the source
node, one of incoming links of the destination node.

<pre class="example">         ------------------          -----------------
        | prev output link |        | prev input link |
         ------------------          -----------------
                        |^            ^|
                        ||            ||
                        | ---      --- |
                         --- |    | ---
                            ||    ||
                            v|    |v
      -------------       ------------       -----------
     | source node |&lt;----|    link    |----&gt;| dest node |
      -------------       ------------       -----------
                            |^    ^|
                            ||    ||
                         --- |    | ---
                        | ---      --- |
                        ||            ||
                        v|            |v
         ------------------          -----------------
        | next output link |        | next input link |
         ------------------          -----------------
</pre>
   <!-- page -->
<div class="node">
<a name="graph-types"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-insert">graph insert</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-overview">graph overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.2 Graph type definitions</h4>

<p>Both node and link structures should be allocated using an equivalent of
<code>calloc()</code>, or reset to zero before being inserted in a graph.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_graph_node_tag_t</b><var><a name="index-ucl_005fgraph_005fnode_005ftag_005ft-212"></a></var><br>
&mdash; Pointer Typedef: <b>ucl_graph_node_t</b><var><a name="index-ucl_005fgraph_005fnode_005ft-213"></a></var><br>
<blockquote><p>Structure type and pointer to structure type for nodes.  They should be
treated as opaque even if it is not. 
</p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_graph_link_tag_t</b><var><a name="index-ucl_005fgraph_005flink_005ftag_005ft-214"></a></var><br>
&mdash; Pointer Typedef: <b>ucl_graph_link_t</b><var><a name="index-ucl_005fgraph_005flink_005ft-215"></a></var><br>
<blockquote><p>Structure type and pointer to structure type for links.  They should be
treated as opaque even if it is not. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-insert"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-extract">graph extract</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-types">graph types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.3 Inserting links and nodes</h4>

<div class="defun">
&mdash; Function: void <b>ucl_graph_link</b> (<var>src_node, link, dst_node</var>)<var><a name="index-ucl_005fgraph_005flink-216"></a></var><br>
<blockquote><p>Insert a link between two nodes.  The source and destination node
structures cannot be exchanged: the link is directed.  Arguments:

          <dl>
<dt><code>ucl_graph_node_t </code><var>src_node</var><dd>pointer to the source node structure;

          <br><dt><code>ucl_graph_link_t </code><var>link</var><dd>pointer to the link structure;

          <br><dt><code>ucl_graph_node_t </code><var>dst_node</var><dd>pointer to the destination node structure. 
</dl>

        <p>Usage example:

     <pre class="example">          ucl_memory_allocator_t  A;
          ucl_graph_node_t        src = NULL, dst = NULL;
          ucl_graph_link_t        lnk = NULL;
          
          A.alloc(A.data, &amp;src, sizeof(ucl_graph_node_tag_t));
          A.alloc(A.data, &amp;dst, sizeof(ucl_graph_node_tag_t));
          A.alloc(A.data, &amp;lnk, sizeof(ucl_graph_link_tag_t));
          
          ucl_graph_link(src, lnk, dst);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_graph_nodes_are_linked</b> (<var>ucl_graph_node_t src, ucl_graph_node_t dst</var>)<var><a name="index-ucl_005fgraph_005fnodes_005fare_005flinked-217"></a></var><br>
<blockquote><p>Return true if there is a link between <var>src</var> and <var>dst</var>, with
source <var>src</var> and destination <var>dst</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_graph_nodes_doubly_linked</b> (<var>ucl_graph_node_t A, ucl_graph_node_t B</var>)<var><a name="index-ucl_005fgraph_005fnodes_005fdoubly_005flinked-218"></a></var><br>
<blockquote><p>Return true if there are two links between <var>A</var> and <var>B</var>, one from
<var>A</var> to <var>B</var> and one from <var>B</var> to <var>A</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_graph_nodes_are_connected</b> (<var>ucl_graph_node_t A, ucl_graph_node_t B</var>)<var><a name="index-ucl_005fgraph_005fnodes_005fare_005fconnected-219"></a></var><br>
<blockquote><p>Return true if there is a link between <var>A</var> and <var>B</var>, no matter
the direction. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-extract"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-merge">graph merge</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-insert">graph insert</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.4 Extracting links and nodes</h4>

<div class="defun">
&mdash; Function: void <b>ucl_graph_unlink</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005funlink-220"></a></var><br>
<blockquote><p>Remove a link from the graph.  After this function has been called, it
is safe to free the memory of the link. 
</p></blockquote></div>

   <p>To erase a node from a graph we have to remove all the links between it
and the other nodes.  To do it in the case of structures allocated with
a <acronym>UCL</acronym> memory allocator:

<pre class="example">     ucl_memory_allocator_t  A;
     ucl_graph_node_t        N;
     ucl_graph_link_t        L;
     
     for (L = ucl_graph_output_link(N); L;
          L = ucl_graph_output_link(N))
       {
         ucl_graph_unlink(L);
         A.alloc(A.data, &amp;L, 0);
       }
     
     for (L = ucl_graph_input_link(N); L;
          L = ucl_graph_input_link(N))
       {
         ucl_graph_unlink(L);
         A.alloc(A.data, &amp;L, 0);
       }
     
     A.alloc(A.data, &amp;N, 0);
</pre>
   <div class="defun">
&mdash; Macro: <b>UCL_GRAPH_FIRST_INPUT_LINK_LOOP</b> (<var>node, link</var>)<var><a name="index-UCL_005fGRAPH_005fFIRST_005fINPUT_005fLINK_005fLOOP-221"></a></var><br>
&mdash; Macro: <b>UCL_GRAPH_FIRST_OUTPUT_LINK_LOOP</b> (<var>node, link</var>)<var><a name="index-UCL_005fGRAPH_005fFIRST_005fOUTPUT_005fLINK_005fLOOP-222"></a></var><br>
<blockquote><p>Loop over the first input or output link until it is <code>NULL</code>.  These
macros do the same loops described above; with them the extraction code
looks like this:

     <pre class="example">          ucl_memory_allocator_t  A;
          ucl_graph_node_t        N;
          ucl_graph_link_t        L;
          
          UCL_GRAPH_FIRST_INPUT_LINK_LOOP(N, L) {
            ucl_graph_unlink(L);
            A.alloc(A.data, &amp;L, 0);
          }
          
          UCL_GRAPH_FIRST_OUTPUT_LINK_LOOP(N, L) {
            ucl_graph_unlink(L);
            A.alloc(A.data, &amp;L, 0);
          }
          
          A.alloc(A.data, &amp;N, 0);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_graph_erase_node_destroy_links</b> (<var>ucl_graph_node_t node, ucl_callback_t destructor</var>)<var><a name="index-ucl_005fgraph_005ferase_005fnode_005fdestroy_005flinks-223"></a></var><br>
<blockquote><p>Erase a node from a graph finalising all the links; the erasure code
looks like this:

     <pre class="example">          ucl_graph_node_t        N;
          ucl_callback_t          destructor;
          
          ucl_graph_erase_node_destroy_links(N, destructor);
          A.alloc(A.data, &amp;N, 0);
</pre>
        <p class="noindent">and we can implement:

     <pre class="example">          ucl_value_t
          destructor_fun (ucl_value_t dummy, ucl_graph_link_t L)
          {
            A.alloc(A.data, &amp;L, 0);
          }
          ucl_callback_t destructor = {
            .data = ucl_value_null,
            .func = destructor_fun
          };
</pre>
        <p>The node structure itself is not finalised: its link fields are set to
<code>NULL</code>, the value field is left untouched, the structure memory is
not freed. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-merge"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-value">graph value</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-extract">graph extract</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.5 Merging links</h4>

<p>Merging means to replace two links with one that represents the whole
path; before merging the scenario is:

<pre class="example">      --------     ---------     --------     ----------     ------
     | source |&lt;--| in link |--&gt;| middle |&lt;--| out link |--&gt;| dest |
     |  node  |    ---------    |  node  |    ----------    | node |
      --------                   --------                    ------
</pre>
   <p class="noindent">merging can be done upon the input or the output link; after merging
upon the input link:

<pre class="example">      --------     ---------     ------
     | source |&lt;--| in link |--&gt;| dest |
     |  node  |    ---------    | node |
      --------                   ------
</pre>
   <p class="noindent">after merging upon the output link:

<pre class="example">      --------     ----------     ------
     | source |&lt;--| out link |--&gt;| dest |
     |  node  |    ----------    | node |
      --------                    ------
</pre>
   <div class="defun">
&mdash; Function: void <b>ucl_graph_merge_upon_input_link</b> (<var>ucl_graph_link_t in, ucl_graph_link_t out</var>)<var><a name="index-ucl_005fgraph_005fmerge_005fupon_005finput_005flink-224"></a></var><br>
&mdash; Function: void <b>ucl_graph_merge_upon_output_link</b> (<var>ucl_graph_link_t in, ucl_graph_link_t out</var>)<var><a name="index-ucl_005fgraph_005fmerge_005fupon_005foutput_005flink-225"></a></var><br>
<blockquote><p>Merge two links; <var>in</var> references the link incoming to the middle
node; <var>out</var> references the link outgoing from the middle node.

        <p>Merging is meaningful if <var>in</var> and <var>out</var> are connected to the
same node, but these functions do not check for this.

        <p>The middle node is excluded from the path: if other links connect the
node to the graph nothing needs to be done, but if merging the links
removes the last links between the node and the graph: the node must be
finalised. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-value"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-link-iter">graph link iter</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-merge">graph merge</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.6 Accessing values</h4>

<div class="defun">
&mdash; Function: void <b>ucl_graph_node_set_value</b> (<var>ucl_graph_node_t * p, ucl_value_t newval</var>)<var><a name="index-ucl_005fgraph_005fnode_005fset_005fvalue-226"></a></var><br>
&mdash; Function: void <b>ucl_graph_link_set_value</b> (<var>ucl_graph_link_t * p, ucl_value_t newval</var>)<var><a name="index-ucl_005fgraph_005flink_005fset_005fvalue-227"></a></var><br>
<blockquote><p>Store a new value in the structure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_value_t <b>ucl_graph_node_get_value</b> (<var>ucl_graph_node_t * p</var>)<var><a name="index-ucl_005fgraph_005fnode_005fget_005fvalue-228"></a></var><br>
&mdash; Function: ucl_value_t <b>ucl_graph_link_get_value</b> (<var>ucl_graph_link_t * p</var>)<var><a name="index-ucl_005fgraph_005flink_005fget_005fvalue-229"></a></var><br>
<blockquote><p>Return the current value in the structure. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_graph_node_set_mark</b> (<var>ucl_graph_node_t * p, ucl_value_t mark</var>)<var><a name="index-ucl_005fgraph_005fnode_005fset_005fmark-230"></a></var><br>
&mdash; Function: ucl_value_t <b>ucl_graph_node_get_mark</b> (<var>ucl_graph_link_t * p</var>)<var><a name="index-ucl_005fgraph_005fnode_005fget_005fmark-231"></a></var><br>
<blockquote><p>Set/get the mark value, a field of <code>ucl_value_t</code> type. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-link-iter"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-ops">graph ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-value">graph value</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.7 Link iterators</h4>

<div class="defun">
&mdash; Macro: <b>UCL_GRAPH_OUTPUT_LINKS_LOOP</b> (<var>node, link</var>)<var><a name="index-UCL_005fGRAPH_005fOUTPUT_005fLINKS_005fLOOP-232"></a></var><br>
&mdash; Macro: <b>UCL_GRAPH_INPUT_LINKS_LOOP</b> (<var>node, link</var>)<var><a name="index-UCL_005fGRAPH_005fINPUT_005fLINKS_005fLOOP-233"></a></var><br>
<blockquote><p>Iterate over the outgoing or ingoing links of <var>node</var> using
<var>link</var> as iterator in a <code>for ()</code> loop.

        <p>Example of iteration over outgoing links:

     <pre class="example">          ucl_graph_node_t        N;
          ucl_graph_link_t        L;
          
          UCL_GRAPH_OUTPUT_LINKS_LOOP(N, L) {
            do_something_with(L);
          }
</pre>
        <p class="noindent">example of iteration over incoming links:

     <pre class="example">          ucl_graph_node_t        N;
          ucl_graph_link_t        L;
          
          UCL_GRAPH_INPUT_LINKS_LOOP(N, L) {
            do_something_with(L);
          }
</pre>
        </blockquote></div>

<!--  -->
<h5 class="subsubheading">Finding first and last links</h5>

<div class="defun">
&mdash; Function: ucl_graph_link_t <b>ucl_graph_input_link</b> (<var>ucl_graph_node_t N</var>)<var><a name="index-ucl_005fgraph_005finput_005flink-234"></a></var><br>
&mdash; Function: ucl_graph_link_t <b>ucl_graph_output_link</b> (<var>ucl_graph_node_t N</var>)<var><a name="index-ucl_005fgraph_005foutput_005flink-235"></a></var><br>
<blockquote><p>Return a pointer to the first incoming or outgoing link of <var>N</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_graph_link_t <b>ucl_graph_last_output_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005flast_005foutput_005flink-236"></a></var><br>
&mdash; Function: ucl_graph_link_t <b>ucl_graph_last_input_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005flast_005finput_005flink-237"></a></var><br>
<blockquote><p>Traverse toward the end the list of incoming or outgoing links, starting
at <var>L</var>.  Return the last link. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_graph_link_t <b>ucl_graph_first_output_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005ffirst_005foutput_005flink-238"></a></var><br>
&mdash; Function: ucl_graph_link_t <b>ucl_graph_first_input_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005ffirst_005finput_005flink-239"></a></var><br>
<blockquote><p>Traverse toward the beginning the list of incoming or outgoing links,
starting at <var>L</var>.  Return the first link. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Finding previous and next links</h5>

<div class="defun">
&mdash; Function: ucl_graph_link_t <b>ucl_graph_prev_input_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005fprev_005finput_005flink-240"></a></var><br>
&mdash; Function: ucl_graph_link_t <b>ucl_graph_prev_output_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005fprev_005foutput_005flink-241"></a></var><br>
<blockquote><p>Return a pointer to the previous link in the chain.  The return value is
<code>NULL</code> if <var>L</var> is the first link. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_graph_link_t <b>ucl_graph_next_input_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005fnext_005finput_005flink-242"></a></var><br>
&mdash; Function: ucl_graph_link_t <b>ucl_graph_next_output_link</b> (<var>ucl_graph_link_t L</var>)<var><a name="index-ucl_005fgraph_005fnext_005foutput_005flink-243"></a></var><br>
<blockquote><p>Return a pointer to the next link in the chain.  The return value is
<code>NULL</code> if <var>L</var> is the last link. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-dfs">graph dfs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-link-iter">graph link iter</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.8 Various operations on a graph</h4>

<div class="defun">
&mdash; Function: size_t <b>ucl_graph_number_of_input_links</b> (<var>ucl_graph_node_t N</var>)<var><a name="index-ucl_005fgraph_005fnumber_005fof_005finput_005flinks-244"></a></var><br>
&mdash; Function: size_t <b>ucl_graph_number_of_output_links</b> (<var>ucl_graph_node_t N</var>)<var><a name="index-ucl_005fgraph_005fnumber_005fof_005foutput_005flinks-245"></a></var><br>
<blockquote><p>Return the number of incoming or outgoing links. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-dfs"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-ops">graph ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph">graph</a>

</div>

<h4 class="subsection">5.5.9 Depth first search</h4>

<p>Depth first search (<acronym>DFS</acronym>) is an iteration over the nodes of a graph
that starts from a selected node and visits a node only once; the result
of the iteration is a string of nodes.  The iteration is analogous to the
preorder iteration in trees (the worm that always turns right in the
labyrinth).

   <p>The iteration may not touch all the nodes:

     <ul>
<li>if the graph is not connected: the <acronym>DFS</acronym> does not touch all the nodes;

     <li>if the <acronym>DFS</acronym> follows the direction of the links and there are nodes
with outgoing links only: the <acronym>DFS</acronym> does not touch all the nodes. 
</ul>

   <p><acronym>UCL</acronym> implements two types of <acronym>DFS</acronym>: one that honors the direction of
the links; one that does not.

<ul class="menu">
<li><a accesskey="1" href="#graph-dfs-example">graph dfs example</a>:            <acronym>DFS</acronym> example. 
<li><a accesskey="2" href="#graph-dfs-types">graph dfs types</a>:              <acronym>DFS</acronym> related type defintions. 
<li><a accesskey="3" href="#graph-dfs-api">graph dfs api</a>:                <acronym>DFS</acronym> programming interface. 
</ul>

<!-- page -->
<div class="node">
<a name="graph-dfs-example"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-dfs-types">graph dfs types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph-dfs">graph dfs</a>

</div>

<h5 class="subsubsection">5.5.9.1 <acronym>DFS</acronym> example</h5>

<p>Given the following connected graph:

<pre class="example">      -- A ---&gt; B ---&gt; C
     |   |      |
     |   |       ------
     |   |             |
     |   |             v
     |    ----&gt; D &lt;--- E
     |          ^
     v          |
     F ---------
</pre>
   <p class="noindent">we see that we can partition the nodes in two sets:

<pre class="example">     one = { A, F }  two = { B, C, E, D }
</pre>
   <p class="noindent">there are no links going from partition <code>two</code> to partition
<code>one</code>; the directed <acronym>DFS</acronym> starting at node <code>B</code> is:

<pre class="example">     B, C, E, D
</pre>
   <p class="noindent">nodes in partition <code>one</code> are not touched; while the undirected
<acronym>DFS</acronym> starting at node <code>B</code> is:

<pre class="example">     B, C, E, D, F, A
</pre>
   <p class="noindent">all the nodes are touched.

   <p>We note that:

     <ol type=1 start=1>
<li>if the number of nodes touched by the directed <acronym>DFS</acronym> equals the number
of nodes in the graph: the graph is connected;

     <li>the iteration goes &ldquo;deep&rdquo; inside a graph and then steps back in search
of new ramifications;

     <li>if every time the iterator does a step we increment a counter: by saving
the values of counter when entering a node and leaving a node, we can
infer properties of the graph.
        </ol>

<!-- page -->
<div class="node">
<a name="graph-dfs-types"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#graph-dfs-api">graph dfs api</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-dfs-example">graph dfs example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph-dfs">graph dfs</a>

</div>

<h5 class="subsubsection">5.5.9.2 <acronym>DFS</acronym> related type defintions</h5>

<p>The <acronym>DFS</acronym> is implemented as a recursive process that puts touched nodes
on a stack.  The stack is the result of the iteration.  A <acronym>DFS</acronym> is not
reentrant because nodes are marked by setting a field in
<code>ucl_graph_node_t</code> structures: while a <acronym>DFS</acronym> is performed the
graph must be locked for mutual exclusion.

   <p>Also, do not modify a graph while a <acronym>DFS</acronym> is running: the result is
undefined.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_graph_dfs_tag_t</b><var><a name="index-ucl_005fgraph_005fdfs_005ftag_005ft-246"></a></var><br>
&mdash; One Element Array: <b>ucl_graph_dfs_t</b><var><a name="index-ucl_005fgraph_005fdfs_005ft-247"></a></var><br>
<blockquote><p>Hold the result of a <acronym>DFS</acronym>, both directed and not.  This structure must
be handled as opaque. 
</p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_graph_dfs_item_t</b><var><a name="index-ucl_005fgraph_005fdfs_005fitem_005ft-248"></a></var><br>
<blockquote><p>Represent a node touched by the iteration.  Public fields:

          <dl>
<dt><code>ucl_graph_node_t node</code><dd>pointer to the node;

          <br><dt><code>size_t in_counter</code><dd>the value of the counter when the node was entered;

          <br><dt><code>size_t out_counter</code><dd>the value of the counter when the node was left. 
</dl>

        <p>The initial value of the counters is zero; the root node of the <acronym>DFS</acronym>
is recognisable because it has <code>in_counter = 0</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="graph-dfs-api"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph-dfs-types">graph dfs types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#graph-dfs">graph dfs</a>

</div>

<h5 class="subsubsection">5.5.9.3 <acronym>DFS</acronym> programming interface</h5>

<div class="defun">
&mdash; Function: void <b>ucl_graph_dfs_initialise_handle</b> (<var>ucl_graph_dfs_t S</var>)<var><a name="index-ucl_005fgraph_005fdfs_005finitialise_005fhandle-249"></a></var><br>
<blockquote><p>Initialise an already allocated search handle. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_graph_dfs_finalise_handle</b> (<var>ucl_graph_dfs_t S</var>)<var><a name="index-ucl_005fgraph_005fdfs_005ffinalise_005fhandle-250"></a></var><br>
<blockquote><p>Finalise a search handle.  All the memory is released.  A <acronym>DFS</acronym> must
<strong>always</strong> be finalised with a call to this function. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_graph_dfs_directed</b> (<var>ucl_graph_dfs_t S, ucl_graph_node_t root</var>)<var><a name="index-ucl_005fgraph_005fdfs_005fdirected-251"></a></var><br>
<blockquote><p>Perform a directed <acronym>DFS</acronym> over a graph starting from <code>root</code>; store
the result into <var>S</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_graph_dfs</b> (<var>ucl_graph_dfs_t S, ucl_graph_node_t root</var>)<var><a name="index-ucl_005fgraph_005fdfs-252"></a></var><br>
<blockquote><p>Perform a non&ndash;directed <acronym>DFS</acronym> over a graph starting from <code>root</code>;
store the result into <var>S</var>. 
</p></blockquote></div>

   <p>Example:

<pre class="example">     ucl_graph_dfs_t         S;
     ucl_vector_t            visited_nodes;
     
     ucl_graph_initialise_dfs_handle(S, visited_nodes);
     {
       ucl_iterator_t          I;
       ucl_graph_node_t *      root;
     
       ucl_graph_dfs_directed(S, root);
       for (ucl_vector_iterator_forward(visited_nodes, I);
            ucl_iterator_more(I); ucl_iterator_next(I))
         {
           ucl_graph_dfs_item_t *  item;
     
           item = ucl_iterator_ptr(I);
           do_something_with(item);
         }
     }
     ucl_graph_dfs_finalise_handle(S);
</pre>
   <!-- page -->
<div class="node">
<a name="hash"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#heap">heap</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#graph">graph</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.6 The hash table structure</h3>

<p><a name="index-Hash-table-container-253"></a>
A hash table is a structure that maps keys to values in a way that
allows the search operation to be performed with constant time for all
the keys.

   <blockquote>
The hash was inspired by the book on C++ by Bjarne Stroustrup and the
hash structure in the <acronym>TCL</acronym> (Tool Command Language) source code, by
John Ousterhout and others (<a href="http://www.tcl.tk/">http://www.tcl.tk/</a> for more about
<acronym>TCL</acronym>).  However, no code comes from <acronym>TCL</acronym>. 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#hash-intro">hash intro</a>:                   How it is done. 
<li><a accesskey="2" href="#hash-types">hash types</a>:                   Hash table types definitions. 
<li><a accesskey="3" href="#hash-creation">hash creation</a>:                Creating and destroying hash tables. 
<li><a accesskey="4" href="#hash-insertion">hash insertion</a>:               Adding elements to a hash table. 
<li><a accesskey="5" href="#hash-deletion">hash deletion</a>:                Removing elements from a hash table. 
<li><a accesskey="6" href="#hash-ops">hash ops</a>:                     Various operations on a hash table. 
<li><a accesskey="7" href="#hash-resizing">hash resizing</a>:                Resizing a hash table. 
<li><a accesskey="8" href="#hash-iterator">hash iterator</a>:                Visiting elements in the table. 
<li><a accesskey="9" href="#hash-functions">hash functions</a>:               Provided hash function. 
</ul>

<!-- page -->
<div class="node">
<a name="hash-intro"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-types">hash types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.1 How it is done</h4>

<p>A <acronym>UCL</acronym> vector of pointers is allocated by the constructor; each
pointer, called &ldquo;bucket&rdquo; in this document, can be <code>NULL</code> (empty
bucket) or referencing an entry structure.  Entry structures are chained
in a linked list.

<pre class="example">                 buckets
     
                  ----         -----     -----
                 |  o-+------&gt;|entry|--&gt;|entry|
                 |----|        -----     -----
     empty  .....|NULL|
     buckets  .  |----|        -----
              .  |  o-+------&gt;|entry|
              .  |----|        -----    -----
              .  |  o-+---------------&gt;|entry|
              .  |----|                 -----
               ..|NULL|
                  ----
</pre>
   <p>The <acronym>UCL</acronym> way of managing a vector is to allocate a block of memory,
with hysteresis, and consider a sub&ndash;block of it as &ldquo;in use&rdquo;, that is:
as holding the collected data.  When the hash table is constructed all
the slots are marked as used, even when the bucket is set to
<code>NULL</code>.  Reallocations can cause some of the slots to be unused, but if
we never reallocate the vector all the memory is used to hold buckets.

<!--  -->
<h5 class="subsubheading">Elements insertion and deletion</h5>

<p>When inserting a new entry in the table, the hash function converts the
keys to integers in the range <code>[0, number_of_buckets)</code>, selecting a
bucket; then the bucket is examined:

     <ul>
<li>if it's <code>NULL</code>, it's set to the entry pointer:

     <pre class="example">          before the insertion           after the insertion
          
             ----                           ----
            |    |                         |    |
             ----     -----                 ----     -----
            |NULL|   |entry|               |  o-+--&gt;|entry|
             ----     -----                 ----     -----
            |    |                         |    |
             ----                           ----
</pre>
     <li>if it's not <code>NULL</code>, the referenced entry is appended to the new entry
and the bucket is set to a pointer to the new entry:

     <pre class="example">                     ---
           ---   ...|new|               ---
          |   | .    ---               |   |
           ---  v  ---     ---          ---     ---     ---     ---
          | o-+--&gt;|en1|--&gt;|en2|   -&gt;   | o-+--&gt;|new|--&gt;|en1|--&gt;|en2|
           ---     ---     ---          ---     ---     ---     ---
          |   |                        |   |
           ---                          ---
</pre>
     </ul>

   <p>It's obvious how the extraction operation works.

   <p>If the keys are such that the hash function distributes entries
uniformly over all the buckets, the time spent to find an entry is (more
or less) constant.

<!--  -->
<h5 class="subsubheading">Resizing</h5>

<p>Enlarging or restricting the hash table means enlarging or restricting
the vector of buckets.  This happens with rules similar, but not equal,
to the ones for the <code>ucl_vector_t</code> structure; the differences are:

     <ul>
<li>when enlarging all the allocated slots are marked as used, so each
allocated slot becomes a bucket;

     <li>when restricting the number of used slots is artificially reduced by the
amount of slots selected with the &ldquo;step down&rdquo; parameter of the <acronym>UCL</acronym>
vector;

     <li>when restricting the number of used slots cannot become smaller than the
amount selected by the preprocessor symbol <code>UCL_HASH_MINIMUM_SIZE</code>,
which defaults to <code>13</code>. 
</ul>

   <p>Enlarging and restricting changes the number of buckets, so it requires
a rehashing of all the entries in the table: this is expensive.

<!-- page -->
<div class="node">
<a name="hash-types"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-creation">hash creation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-intro">hash intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.2 Hash table types definitions</h4>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_hash_table_tag_t</b><var><a name="index-ucl_005fhash_005ftable_005ftag_005ft-254"></a></var><br>
&mdash; One Element Array: <b>ucl_hash_table_t</b><var><a name="index-ucl_005fhash_005ftable_005ft-255"></a></var><br>
<blockquote><p>The base structure.  The vector of buckets is available as the field
<code>ucl_vector_t buckets</code>. 
</p></blockquote></div>

   <p>The <acronym>UCL</acronym> hash container collects entries of type
<code>ucl_node_tag_t</code>, which hold no custom data; we have to at least
associate a key to each node, doing something like this:

<pre class="example">     typedef struct entry_tag_t {
       ucl_node_tag_t        node;
       ucl_value_t           key;
     } entry_tag_t;
     
     typedef entry_tag_t *        entry_t;
     
     static ucl_value_t
     entry_key (ucl_value_t context UCL_UNUSED, void * L_)
     {
       entry_t    L = L_;
       return L-&gt;key;
     }
     
     static const ucl_node_getkey_t getkey = {
       .data = { .pointer = NULL },
       .func = entry_key
     };
</pre>
   <p class="noindent">and then use <code>getkey</code> as last argument to
<code>ucl_hash_initialise()</code>; we can use the key extractor directly like
this:

<pre class="example">     entry_t         L;
     ucl_value_t     K;
     
     K = getkey.func(getkey.data, L);
</pre>
   <!-- page -->
<div class="node">
<a name="hash-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-insertion">hash insertion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-types">hash types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.3 Creating and destroying hash tables</h4>

<p>The construction of a hash table is split in two steps, to allow custom
configuration of the vector of buckets.  A simple construction, using
the default values, for a table using strings as keys goes like this:

<pre class="example">     ucl_vector_config_t C;
     ucl_vector_t        V;
     ucl_hash_table_t    H;
     ucl_node_getkey_t   getkey;
     
     ucl_vector_initialise_config_hash(C);
     ucl_vector_alloc(V, C);
     ucl_hash_initialise(H, V, ucl_compare_string, ucl_hash_string,
                         getkey);
</pre>
   <p class="noindent">when finalising a hash table we have to release the <acronym>UCL</acronym> vector
explicitly, but only after having extracted and released all the table
entries; when using a <acronym>UCL</acronym> memory allocator, it goes like this:

<pre class="example">     ucl_memory_allocator_t  A;
     ucl_vector_t            V;
     ucl_hash_table_t        H;
     entry_t                 E;
     
     while ((E = ucl_hash_first(H)))
       {
         ucl_hash_extract(H, E);
         A.alloc(A.data, &amp;E, 0);
       }
     ucl_vector_free(V);
</pre>
   <p class="noindent">the hash table structure does not need finalisation.

<div class="defun">
&mdash; Function: void <b>ucl_hash_initialise</b> (<var>ucl_hash_t self, ucl_vector_t buckets, ucl_comparison_t compar, ucl_hash_t hash, ucl_node_getkey_t getkey</var>)<var><a name="index-ucl_005fhash_005finitialise-256"></a></var><br>
<blockquote><p>Initialise the hash table referenced by <var>self</var>.  The <acronym>UCL</acronym> vector
of buckets, already initialised, becomes part of the hash table state.

        <p><var>compar</var> is the function+context used to compare keys.

        <p><var>hash</var> is the function+context used to compute the hash value of
keys; <a href="#typedefs-hash">typedefs hash</a> for details.

        <p><var>getkey</var> is the function+context used to extract the key from an
entry structures; <a href="#typedefs-nodes">typedefs nodes</a> for details. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="hash-insertion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-deletion">hash deletion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-creation">hash creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.4 Adding elements to a hash table</h4>

<div class="defun">
&mdash; Function: void <b>ucl_hash_insert</b> (<var>ucl_hash_table_t H, void * E</var>)<var><a name="index-ucl_005fhash_005finsert-257"></a></var><br>
<blockquote><p>Insert a new entry in the table.  The entry structure must be allocated
and filled with key and value by the user's code; the pointer <var>E</var> is
internally cast to <code>ucl_node_t</code>.

        <p>Inserting an entry with a key that already exists in the table will
work, but future invocations of <code>ucl_hash_find()</code> will return one or
the other: nobody knows which one.  To avoid collision of keys, we have
to check the existence of a key with <code>ucl_hash_find()</code> before
attempting to insert a new entry.

        <p>Example:

     <pre class="example">          ucl_memory_allocator_t  A;
          ucl_hash_table_t        H;
          entry_t                 E;
          ucl_value_t             K;
          
          K = ...
          E = ucl_hash_find(H, K);
          if (NULL == E)
            {
              A.alloc(A.data, &amp;E, sizeof(entry_t));
              E-&gt;key = K;
              ucl_hash_insert(H, E);
            }
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="hash-deletion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-ops">hash ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-insertion">hash insertion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.5 Removing elements from a hash table</h4>

<div class="defun">
&mdash; Function: void <b>ucl_hash_extract</b> (<var>ucl_hash_table_t H, void * E</var>)<var><a name="index-ucl_005fhash_005fextract-258"></a></var><br>
<blockquote><p>Extract an entry from the table.  <var>E</var>, a pointer to the entry to be
removed, must be the return value of a previous invocation to
<code>ucl_hash_find()</code>; the pointer <var>E</var> is internally cast to
<code>ucl_node_t</code>.  The entry structure is neither destroyed nor freed,
just extracted.

        <p>Example:

     <pre class="example">          ucl_memory_allocator_t  A;
          ucl_hash_t              H;
          entry_t                 E;
          ucl_value_t             K;
          
          E = ucl_hash_find(H, K);
          if (NULL != E)
            {
              ucl_hash_extract(H, E);
              A.alloc(A.data, &amp;E, 0);
            }
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="hash-ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-resizing">hash resizing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-deletion">hash deletion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.6 Various operations on a hash table</h4>

<div class="defun">
&mdash; Function: void * <b>ucl_hash_find</b> (<var>const ucl_hash_table_t H, const ucl_value_t K</var>)<var><a name="index-ucl_005fhash_005ffind-259"></a></var><br>
<blockquote><p>Search in the table an entry associated with the selected key.  Return a
pointer to the entry or <code>NULL</code> if the key was not found; the returned
pointer can be safely cast to <code>ucl_node_t</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_hash_first</b> (<var>const ucl_hash_table_t H</var>)<var><a name="index-ucl_005fhash_005ffirst-260"></a></var><br>
<blockquote><p>Return a pointer to the first entry in the table: the first link in the
list of the first non&ndash;<code>NULL</code> bucket.  If the table is empty: return
<code>NULL</code>; the returned pointer can be safely cast to
<code>ucl_node_t</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_hash_size</b> (<var>const ucl_hash_table_t H</var>)<var><a name="index-ucl_005fhash_005fsize-261"></a></var><br>
<blockquote><p>Return the number of entries in the table. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_hash_number_of_buckets</b> (<var>const ucl_hash_table_t H</var>)<var><a name="index-ucl_005fhash_005fnumber_005fof_005fbuckets-262"></a></var><br>
<blockquote><p>Return the number of buckets. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_hash_number_of_used_buckets</b> (<var>const ucl_hash_table_t H</var>)<var><a name="index-ucl_005fhash_005fnumber_005fof_005fused_005fbuckets-263"></a></var><br>
<blockquote><p>Return the number of used buckets. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_hash_bucket_chain_length</b> (<var>const ucl_hash_table_t this, ucl_index_t position</var>)<var><a name="index-ucl_005fhash_005fbucket_005fchain_005flength-264"></a></var><br>
<blockquote><p>Return the number of entries in the chain refereces by bucket at
<var>position</var>.  <var>position</var> must be a valid bucket index: a
non&ndash;negative integer in the range <code>[0,
ucl_hash_number_of_buckets(</code><var>this</var><code>))</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: double <b>ucl_hash_average_search_distance</b> (<var>const ucl_hash_table_t this</var>)<var><a name="index-ucl_005fhash_005faverage_005fsearch_005fdistance-265"></a></var><br>
<blockquote><p>Return the average number of entries per bucket. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="hash-resizing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-iterator">hash iterator</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-ops">hash ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.7 Resizing a hash table</h4>

<p>At present the hash table is not enlarged automatically.  The decision
is delegated to the user's code.

<div class="defun">
&mdash; Function: void <b>ucl_hash_enlarge</b> (<var>ucl_hash_table_t H</var>)<var><a name="index-ucl_005fhash_005fenlarge-266"></a></var><br>
<blockquote><p>Enlarge the table using the underlying <acronym>UCL</acronym> vector module.  This is an
expensive operation because it requires rehashing all the entries.  If
an error occurs reallocating the vector: the table is not corrupted. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_hash_restrict</b> (<var>ucl_hash_table_t H</var>)<var><a name="index-ucl_005fhash_005frestrict-267"></a></var><br>
<blockquote><p>Restrict the table using the underlying <acronym>UCL</acronym> vector module.  This is
an expensive operation because it requires rehashing all the entries. 
If an error occurs reallocating the vector: the table is not corrupted. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="hash-iterator"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#hash-functions">hash functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-resizing">hash resizing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.8 Visiting elements in the table</h4>

<div class="defun">
&mdash; Function: void <b>ucl_hash_iterator</b> (<var>const ucl_hash_table_t H, ucl_iterator_t I</var>)<var><a name="index-ucl_005fhash_005fiterator-268"></a></var><br>
<blockquote><p>Initialise the table iterator.  The iterator pointer references the
entries in the table.  The order in which the entries are visited is
unknown.

        <p>Example:

     <pre class="example">          ucl_hash_table_t  H;
          ucl_iterator_t    I;
          entry_t           E;
          
          for (ucl_hash_iterator(H, I);
               ucl_iterator_more(I);
               ucl_iterator_next(I))
            {
              E = ucl_iterator_ptr(I);
            }
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="hash-functions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hash-iterator">hash iterator</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#hash">hash</a>

</div>

<h4 class="subsection">5.6.9 Provided hash function</h4>

<div class="defun">
&mdash; Variable: ucl_hash_t <b>ucl_hash_string</b><var><a name="index-ucl_005fhash_005fstring-269"></a></var><br>
<blockquote><p>Function and context required to hash strings.  The function is
<code>ucl_hash_string_fun()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_hash_string_fun</b> (<var>ucl_value_t unused, const ucl_value_t K</var>)<var><a name="index-ucl_005fhash_005fstring_005ffun-270"></a></var><br>
<blockquote><p>Return an unsigned integer representing the hash value for the string in
<var>K</var>; the <code>chars</code> member of <var>K</var> must be a pointer to a
<code>NULL</code>&ndash;terminated string of characters, <a href="#typedefs-value">typedefs value</a> for
details.

        <p>The hashing algorithm comes from a C++ book by Bjarne Stroustrup
(<a href="#references">references</a>). 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="list"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map">map</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#heap">heap</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.7 The linked list structure</h3>

<p>The <acronym>UCL</acronym> list is a way of chaining <code>ucl_node_tag_t</code> structures in
a doubly linked list; all the functions from the <code>btree</code> and
<code>tree</code> modules can be used upon lists.

<ul class="menu">
<li><a accesskey="1" href="#list-overview">list overview</a>:                How it is done. 
<li><a accesskey="2" href="#list-cons">list cons</a>:                    Constructing lists. 
<li><a accesskey="3" href="#list-visit">list visit</a>:                   Visiting a list. 
<li><a accesskey="4" href="#list-deletion">list deletion</a>:                Removing elements from a list. 
<li><a accesskey="5" href="#list-ops">list ops</a>:                     Various operations on a list. 
<li><a accesskey="6" href="#list-iteration">list iteration</a>:               Iteration over a list. 
</ul>

<!-- page -->
<div class="node">
<a name="list-overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#list-cons">list cons</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#list">list</a>

</div>

<h4 class="subsection">5.7.1 How it is done</h4>

<p>A <acronym>UCL</acronym> list is a chain of <code>ucl_node_tag_t</code> structures in which
the <code>bro</code> and <code>dad</code> fields are involved:

<pre class="example">                ----  bro   ----  bro   ----  bro
     NULL &lt;----| N1 |-----&gt;| N2 |-----&gt;| N3 |----&gt; NULL
           dad  ---- &lt;----  ---- &lt;----  ----
                      dad         dad
</pre>
   <p class="noindent">it is equivalent to a level of brothers in the <acronym>UCL</acronym> tree module; the
<code>son</code> field can be set to <code>NULL</code>, or used to reference a nested
list, or used to reference some other value.  The brother of a node is
called <dfn>cdr</dfn>, the son of a node is called <dfn>car</dfn>.

   <blockquote>
<strong>NOTE</strong> We use the terms <em>car</em> and <em>cdr</em> to refer to the
son and bro of a node, but notice that their meaning in the context of
the <acronym>UCL</acronym> is different from their meaning in the context of Lisp
languages. 
</blockquote>

   <p>Going <em>forwards</em> in a list chain means to follow the <code>bro</code>
pointers; going <em>backwards</em> in a list chain means to follow the
<code>dad</code> pointers.

<!-- page -->
<div class="node">
<a name="list-cons"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#list-visit">list visit</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#list-overview">list overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#list">list</a>

</div>

<h4 class="subsection">5.7.2 Constructing lists</h4>

<p>Structures of type <code>ucl_node_tag_t</code> must be allocated and released
by the user code.  The fields of a node structure must be set to
<code>NULL</code> when they are not used as reference for another node.

   <p>All the following functions return and accept as arguments <code>void *</code>
values; they are internally cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void <b>ucl_list_set_car</b> (<var>void * N, void * M</var>)<var><a name="index-ucl_005flist_005fset_005fcar-271"></a></var><br>
<blockquote><p>If <var>N</var> is non&ndash;<code>NULL</code>: set <var>M</var> as <code>son</code> of <var>N</var>; if
<var>M</var> is non&ndash;<code>NULL</code>: set <var>N</var> as <code>dad</code> of <var>M</var>. 
<a href="#btree-typedefs">btree typedefs</a> for the meaning of this. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_list_set_cdr</b> (<var>void * N, void * P</var>)<var><a name="index-ucl_005flist_005fset_005fcdr-272"></a></var><br>
<blockquote><p>If <var>N</var> is non&ndash;<code>NULL</code>: set <var>M</var> as <code>bro</code> of <var>N</var>; if
<var>M</var> is non&ndash;<code>NULL</code>: set <var>N</var> as <code>dad</code> of <var>M</var>. 
<a href="#btree-typedefs">btree typedefs</a> for the meaning of this. 
</p></blockquote></div>

   <p>For example, to build the hierarchy:

<pre class="example">      -----    -----    -------
     | one |--| two |--| three |-- NULL
      -----    -----    -------
</pre>
   <p class="noindent">using the <acronym>UCL</acronym> memory allocator:

<pre class="example">     ucl_memory_allocator_t  A;
     ucl_node_t              one, two, three;
     
     one   = ucl_malloc(ucl_memory_allocator, UCL_NODE_SIZE);
     two   = ucl_malloc(ucl_memory_allocator, UCL_NODE_SIZE);
     three = ucl_malloc(ucl_memory_allocator, UCL_NODE_SIZE);
     
     ucl_list_set_cdr(one, two);
     ucl_list_set_cdr(two, three);
</pre>
   <p class="noindent">remember that the <acronym>UCL</acronym> default allocator sets to zero every newly
allocated block, so the fields in the allocated nodes are automatically
set to <code>NULL</code>.

<!-- page -->
<div class="node">
<a name="list-visit"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#list-deletion">list deletion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#list-cons">list cons</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#list">list</a>

</div>

<h4 class="subsection">5.7.3 Visiting a list</h4>

<p>All the following functions return and accept as arguments <code>void *</code>
values; they are internally cast to <code>ucl_node_t</code>.  <a href="#btree-typedefs">btree typedefs</a> for the meaning of the fields of <code>ucl_node_tag_t</code>.

<div class="defun">
&mdash; Function: void * <b>ucl_list_car</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcar-273"></a></var><br>
<blockquote><p>Return the <code>son</code> of <var>N</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cdr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcdr-274"></a></var><br>
<blockquote><p>Return the <code>bro</code> of <var>N</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_prev</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fprev-275"></a></var><br>
<blockquote><p>Return the <code>dad</code> of <var>N</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_first</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005ffirst-276"></a></var><br>
<blockquote><p>Return the first element of the list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_last</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005flast-277"></a></var><br>
<blockquote><p>Return the last element of the list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_ref</b> (<var>void * N, ucl_index_t position</var>)<var><a name="index-ucl_005flist_005fref-278"></a></var><br>
<blockquote><p>Assuming <var>N</var> references the first node in a list: return a pointer
to the link at <var>position</var> (zero based), or <code>NULL</code> if the index is
out of range. 
</p></blockquote></div>

   <p>When using the following operations, it is impossible to distinguish
between a <code>NULL</code> representing a legitimate return value and a <code>NULL</code>
representing a return from an invalid operation; we have to take care of
applying these operations only when they are legitimate.

<div class="defun">
&mdash; Function: void * <b>ucl_list_caar</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcaar-279"></a></var><br>
<blockquote><p>Apply twice the car operator.  Return <code>NULL</code> if the operation is
invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cadr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcadr-280"></a></var><br>
<blockquote><p>Apply the cdr operator, then the car operator.  Return <code>NULL</code> if the
operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cdar</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcdar-281"></a></var><br>
<blockquote><p>Apply the car operator, then the cdr operator.  Return <code>NULL</code> if the
operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cddr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcddr-282"></a></var><br>
<blockquote><p>Apply twice the cdr operator.  Return <code>NULL</code> if the operation is
invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_caaar</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcaaar-283"></a></var><br>
<blockquote><p>Apply the car operator three times.  Return <code>NULL</code> if the operation is
invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_caadr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcaadr-284"></a></var><br>
<blockquote><p>Apply the cdr operator, then the car operator twice.  Return <code>NULL</code> if
the operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cadar</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcadar-285"></a></var><br>
<blockquote><p>Apply the car operator, then the cdr operator, then the car operator. 
Return <code>NULL</code> if the operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_caddr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcaddr-286"></a></var><br>
<blockquote><p>Apply the cdr operator twice, then the car operator.  Return <code>NULL</code> if
the operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cdaar</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcdaar-287"></a></var><br>
<blockquote><p>Apply the car operator twice, then the cdr operator.  Return <code>NULL</code> if
the operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cdadr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcdadr-288"></a></var><br>
<blockquote><p>Apply the cdr operator, then the car operator, then the cdr operator. 
Return <code>NULL</code> if the operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cddar</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcddar-289"></a></var><br>
<blockquote><p>Apply the car operator, then the cdr operator twice.  Return <code>NULL</code> if
the operation is invalid. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_cdddr</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fcdddr-290"></a></var><br>
<blockquote><p>Apply the cdr operator three times.  Return <code>NULL</code> if the operation is
invalid. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="list-deletion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#list-ops">list ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#list-visit">list visit</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#list">list</a>

</div>

<h4 class="subsection">5.7.4 Removing elements from a list</h4>

<p>All the following functions return and accept as arguments <code>void *</code>
values; they are internally cast to <code>ucl_node_t</code>.  <a href="#btree-typedefs">btree typedefs</a> for the meaning of the fields of <code>ucl_node_tag_t</code>.

<div class="defun">
&mdash; Function: void * <b>ucl_list_remove</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fremove-291"></a></var><br>
<blockquote><p>Remove <var>N</var> from its chain; return <var>N</var> itself. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_popfront</b> (<var>void * N, void ** new_first</var>)<var><a name="index-ucl_005flist_005fpopfront-292"></a></var><br>
<blockquote><p>Remove an element at the beginning of the list of which <var>N</var> is an
element.  Return a pointer to the removed element; store in
<var>new_first</var> a pointer to the new first element of the list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_popback</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005fpopback-293"></a></var><br>
<blockquote><p>Remove an element at the end of the list of which <var>N</var> is an element. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="list-ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#list-iteration">list iteration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#list-deletion">list deletion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#list">list</a>

</div>

<h4 class="subsection">5.7.5 Various operations on a list</h4>

<p>All the following functions return and accept as arguments <code>void *</code>
values; they are internally cast to <code>ucl_node_t</code>.  <a href="#btree-typedefs">btree typedefs</a> for the meaning of the fields of <code>ucl_node_tag_t</code>.

<div class="defun">
&mdash; Function: size_t <b>ucl_list_length</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005flength-294"></a></var><br>
<blockquote><p>Return the count of elements in the list from <var>N</var> towards the end. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_list_for_each</b> (<var>ucl_callback_t cb, void * N</var>)<var><a name="index-ucl_005flist_005ffor_005feach-295"></a></var><br>
<blockquote><p>Apply the callback to <var>N</var> and all its brothers up to the end of the
list. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_list_map</b> (<var>void * P, ucl_callback_t cb, void * Q</var>)<var><a name="index-ucl_005flist_005fmap-296"></a></var><br>
<blockquote><p>Apply the callback to <var>P</var> and <var>Q</var>, and all their brothers up to
the end of the <var>P</var> list.  <var>Q</var> is meant to be the source value
and <var>P</var> the destination value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_list_reverse</b> (<var>void * N</var>)<var><a name="index-ucl_005flist_005freverse-297"></a></var><br>
<blockquote><p>Assuming <var>N</var> is the first element of a list: reverse the list and
return it new first element. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="list-iteration"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#list-ops">list ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#list">list</a>

</div>

<h4 class="subsection">5.7.6 Iteration over a list</h4>

<p>Example of forward iteration:

<pre class="example">     ucl_node_t        N;
     
     while (N) {
       /* do something with N */
       N = ucl_list_cdr(N);
     }
</pre>
   <p class="noindent">example of backward iteration:

<pre class="example">     ucl_node_t        N;
     
     while (N) {
       /* do something with N */
       N = ucl_list_prev(N);
     }
</pre>
   <!-- page -->
<div class="node">
<a name="map"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector">vector</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#list">list</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.8 The map structure</h3>

<p><a name="index-Map-container-298"></a>

   <p>The map container is an <acronym>AVL</acronym> tree; it can be used to implement an
associative array.

   <blockquote>
The map/multimap idea was inspired by the book on C++ by Bjarne
Stroustrup and by the STL C++ (Standard Template Library) by Stepanov
and Lee.

   <p>The handling of nodes is influenced by the handling of elements in the
<acronym>TCL</acronym> (Tool Command Language) hash table by John Ousterhout and
others (<a href="http://www.tcl.tk/">http://www.tcl.tk/</a> for more about <acronym>TCL</acronym>). 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#map-intro">map intro</a>:                    Introduction to operations and
                                implementation. 
<li><a accesskey="2" href="#map-types">map types</a>:                    Type definitions for map. 
<li><a accesskey="3" href="#map-creation">map creation</a>:                 Creating and destroying maps. 
<li><a accesskey="4" href="#map-insertion">map insertion</a>:                Adding elements to a map. 
<li><a accesskey="5" href="#map-deletion">map deletion</a>:                 Removing elements from a map. 
<li><a accesskey="6" href="#map-ops">map ops</a>:                      Various operations on a map. 
<li><a accesskey="7" href="#map-iterators">map iterators</a>:                Iteration over a map. 
<li><a accesskey="8" href="#map-set">map set</a>:                      Composing map iterators. 
</ul>

<!-- page -->
<div class="node">
<a name="map-intro"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-types">map types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.1 Introduction to operations and implementation</h4>

<p>Maps are often used as associative arrays, that is: as collections of
key/value pairs.  The operations we want to do on a map are:

     <ul>
<li>add a key/value pair (or just a key) to a collection, if the element
already exists replace the old value with the new one or add a new
key/value pair;

     <li>find a key/value pair with a specified key;

     <li>remove all key/value pairs with a selected key, or the one with a
selected value among the ones having the same key;

     <li>traverse the collection of key/value pairs from the lesser key to the
greater;

     <li>traverse the collection of key/value pairs from the greater key to the
lesser. 
</ul>

   <p>Clearly there are two sub&ndash;types of map container: the one that allows
multiple values to be associated to the same key, and the one that does
not.  We call the first a <dfn>multimap</dfn> and the second a <dfn>simple
map</dfn>.

<!-- page -->
<div class="node">
<a name="map-types"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-creation">map creation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-intro">map intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.2 Type definitions for map</h4>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_map_tag_t</b><var><a name="index-ucl_005fmap_005ftag_005ft-299"></a></var><br>
&mdash; Single Element Array Typedef: <b>ucl_map_t</b><var><a name="index-ucl_005fmap_005ft-300"></a></var><br>
<blockquote><p>Base structure for the container.  It must be allocated by the user's
code. 
</p></blockquote></div>

   <p>The <acronym>UCL</acronym> map container collects nodes of type <code>ucl_node_tag_t</code>,
which hold no custom data; we have to at least associate a key to each
node, doing something like this:

<pre class="example">     typedef struct link_tag_t {
       ucl_node_tag_t        node;
       ucl_value_t           key;
     } link_tag_t;
     
     typedef link_tag_t *        link_t;
     
     static ucl_value_t
     link_key (ucl_value_t context UCL_UNUSED, void * L_)
     {
       link_t    L = L_;
       return L-&gt;key;
     }
     
     static const ucl_node_getkey_t getkey = {
       .data = { .pointer = NULL },
       .func = link_key
     };
</pre>
   <p class="noindent">and then use <code>getkey</code> as last argument to
<code>ucl_map_initialise()</code>; we can use the key extractor directly like
this:

<pre class="example">     link_t          L;
     ucl_value_t     K;
     
     K = getkey.func(getkey.data, L);
</pre>
   <!-- page -->
<div class="node">
<a name="map-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-insertion">map insertion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-types">map types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.3 Creating and destroying maps</h4>

<div class="defun">
&mdash; Function: void <b>ucl_map_initialise</b> (<var>ucl_map_t M, unsigned int flags, ucl_comparison_t keycmp, ucl_node_getkey_t getkey</var>)<var><a name="index-ucl_005fmap_005finitialise-301"></a></var><br>
<blockquote><p>Initialise an already allocated map structure.  <var>flags</var> configures
the map behaviour; <var>keycmp</var> is the function+context used to compare
keys; <var>getkey</var> is the function+context used to extract the key from
nodes.

        <p>Map configuration <var>flags</var> can be zero or an ORed combination of:

          <dl>
<dt><code>UCL_ALLOW_MULTIPLE_OBJECTS</code><dd>Allows more than one object to be associated to the same key, with this
the map behaves like a multimap. 
</dl>

        <p>The map structure needs no destructor, but before releasing its memory
block the user code has to extract all the nodes from the map. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="map-insertion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-deletion">map deletion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-creation">map creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.4 Adding elements to a map</h4>

<p>The following functions accept <code>void *</code> as arguments and return
values; internally these pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_map_insert</b> (<var>ucl_map_t M, void * L</var>)<var><a name="index-ucl_005fmap_005finsert-302"></a></var><br>
<blockquote><p>Given an already allocated and constructed map link, insert it in the
map.

        <p>An invocation to this function always inserts <var>L</var> into <var>M</var> if
<var>M</var> is a multimap.  If <var>M</var> is a simple map: <var>L</var> is inserted
only if there is no link in <var>M</var> having key equal to the key of
<var>L</var>.

        <p>The return value is true if the link has been inserted, or false if the
link was not inserted. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="map-deletion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-ops">map ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-insertion">map insertion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.5 Removing elements from a map</h4>

<p>The following functions accept <code>void *</code> as arguments and return
values; internally these pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: void <b>ucl_map_delete</b> (<var>ucl_map_t M, void * L</var>)<var><a name="index-ucl_005fmap_005fdelete-303"></a></var><br>
<blockquote><p>Remove the node <var>L</var> from the referenced map.  <var>L</var> must be the
return value of a previous invocation to <code>ucl_map_find()</code>.  This
function only removes the link from the map, it's our responsibility to
free the memory and resources associated to it. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="map-ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-iterators">map iterators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-deletion">map deletion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.6 Various operations on a map</h4>

<p>The following functions accept <code>void *</code> as arguments and return
values; internally these pointers are cast to <code>ucl_node_t</code>.

<div class="defun">
&mdash; Function: size_t <b>ucl_map_count</b> (<var>const ucl_map_t M, const ucl_value_t key</var>)<var><a name="index-ucl_005fmap_005fcount-304"></a></var><br>
<blockquote><p>Return the number of elements with <var>key</var>; this is always 0 or 1 for
simple maps. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_find</b> (<var>const ucl_map_t M, const ucl_value_t key</var>)<var>;<a name="index-ucl_005fmap_005ffind-305"></a></var><br>
<blockquote><p>Return a pointer to the (first found) element associated with <var>key</var>. 
The return value is <code>NULL</code> if such an element does not exist.

        <p>For a multimap, this function returns a pointer to the first element
with the selected key, so that the others can be found with repeated
invocations of <code>ucl_map_next()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_map_find_node</b> (<var>const ucl_map_t M, void * N</var>)<var><a name="index-ucl_005fmap_005ffind_005fnode-306"></a></var><br>
<blockquote><p>Return true if <var>N</var> is the pointer to a node in <var>M</var>, return false
otherwise. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_first</b> (<var>const ucl_map_t M</var>)<var><a name="index-ucl_005fmap_005ffirst-307"></a></var><br>
<blockquote><p>Return a pointer to the element with lesser key in the map, or <code>NULL</code>
if the map is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_last</b> (<var>const ucl_map_t M</var>)<var><a name="index-ucl_005fmap_005flast-308"></a></var><br>
<blockquote><p>Return a pointer to the element with greater key in the map, or <code>NULL</code>
if the map is empty. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_next</b> (<var>const void * L</var>)<var><a name="index-ucl_005fmap_005fnext-309"></a></var><br>
<blockquote><p>Return a pointer to the element adjacent to the one referenced by
<var>L</var> with greater key, or <code>NULL</code> if <var>L</var> has the greater key in
the map. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_prev</b> (<var>const void * L</var>)<var><a name="index-ucl_005fmap_005fprev-310"></a></var><br>
<blockquote><p>Return a pointer to the element adjacent to the one referenced by
<var>L</var> with lesser key, or <code>NULL</code> if <var>L</var> has the lesser key in
the map. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_find_or_next</b> (<var>const ucl_map_t M, const ucl_value_t key</var>)<var><a name="index-ucl_005fmap_005ffind_005for_005fnext-311"></a></var><br>
<blockquote><p>Given a key find the element in the map associated with it, or the
element with the lesser key greater than the selected one; if there are
multiple links having key equal to <var>key</var>, select the rightmost one. 
Return a pointer to the requested link or <code>NULL</code> if all the keys in
the map are lesser than the selected one. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_map_find_or_prev</b> (<var>const ucl_map_t M, const ucl_value_t key</var>)<var><a name="index-ucl_005fmap_005ffind_005for_005fprev-312"></a></var><br>
<blockquote><p>Given a key find the element in the map associated with it, or the
element with the greater key lesser than the selected one; if there are
multiple links having key equal to <var>key</var>, select the leftmost one. 
Return a pointer to the requested link or <code>NULL</code> if all the keys in
the map are greater than the selected one. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_map_size</b> (<var>const ucl_map_t M</var>)<var><a name="index-ucl_005fmap_005fsize-313"></a></var><br>
<blockquote><p>Return the number of elements in the map. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>*</b><var> ucl_map_root </var>(<var>const ucl_map_t M</var>)<var><a name="index-g_t_002a-314"></a></var><br>
<blockquote><p>Return a pointer to the current root node. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_map_depth</b> (<var>const ucl_map_t M</var>)<var><a name="index-ucl_005fmap_005fdepth-315"></a></var><br>
<blockquote><p>Return the depth of the tree. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="map-iterators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#map-set">map set</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-ops">map ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.7 Iteration over a map</h4>

<p>The iteration is over the map links: <code>ucl_iterator_ptr()</code> returns a
pointer to the current map link.

<div class="defun">
&mdash; Function: void <b>ucl_map_iterator_inorder</b> (<var>const ucl_map_t M, ucl_iterator_t I</var>)<var><a name="index-ucl_005fmap_005fiterator_005finorder-316"></a></var><br>
&mdash; Function: void <b>ucl_map_iterator_preorder</b> (<var>const ucl_map_t M, ucl_iterator_t I</var>)<var><a name="index-ucl_005fmap_005fiterator_005fpreorder-317"></a></var><br>
&mdash; Function: void <b>ucl_map_iterator_postorder</b> (<var>const ucl_map_t M, ucl_iterator_t I</var>)<var><a name="index-ucl_005fmap_005fiterator_005fpostorder-318"></a></var><br>
&mdash; Function: void <b>ucl_map_iterator_levelorder</b> (<var>const ucl_map_t M, ucl_iterator_t I</var>)<var><a name="index-ucl_005fmap_005fiterator_005flevelorder-319"></a></var><br>
<blockquote><p>Initalise an inorder, preorder, postorder or breadth first iteration. 
<a href="#btree-iteration">btree iteration</a> for details. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_map_lower_bound</b> (<var>const ucl_map_t M, ucl_iterator_t I, ucl_value_t key</var>)<var><a name="index-ucl_005fmap_005flower_005fbound-320"></a></var><br>
<blockquote><p>Initialise an iteration over the elements with the selected key,
starting with the first element. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_map_upper_bound</b> (<var>const ucl_map_t M, ucl_iterator_t I, ucl_value_t key</var>)<var><a name="index-ucl_005fmap_005fupper_005fbound-321"></a></var><br>
<blockquote><p>Initialise an iteration over the elements with the selected key,
starting with the last element. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="map-set"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map-iterators">map iterators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#map">map</a>

</div>

<h4 class="subsection">5.8.8 Composing map iterators</h4>

<p><a name="index-Set-iterators-322"></a>
It's possible to compose map iterators to implement set operations: the
keys from a map are used as set elements.  A set operation is
implemented as an iterator that visits one by one the result of the
operation itself.

   <p>The key values must be of the same data type.  That means that the
compare function used by both the maps must accept the same type of
values and return the same values when called with the same arguments.

   <p>For all the set iterators, the arguments are:

     <dl>
<dt><code>ucl_iterator_t </code><var>it1</var><dd>pointer to an in&ndash;order iterator over set 1, already initialised;

     <br><dt><code>ucl_iterator_t </code><var>it2</var><dd>pointer to an in&ndash;order iterator over set 2, already initialised;

     <br><dt><code>ucl_iterator_t </code><var>iter</var><dd>pointer to the set iterator structure. 
</dl>

   <p>The input map iterators must be of in&ndash;order type: if the sequences are
visited from the lesser to the greater key, the minimum amount of key
comparison is performed.

   <p>If the sequences are not visited with the in&ndash;order iterator, the result
is not defined.

   <p>The set iterators are used in the same fashion of all the other
iterators in the <acronym>UCL</acronym> (<a href="#iterators">iterators</a>).  The value retrieved
with <code>ucl_iterator_ptr()</code> is the pointer to the referenced map
link.

<div class="defun">
&mdash; Function: void <b>ucl_map_iterator_union</b> (<var>it1, it2, iter</var>)<var><a name="index-ucl_005fmap_005fiterator_005funion-323"></a></var><br>
<blockquote><p>Initialise the iteration over all the elements from both the
sequences.  Elements present in both sequences are included twice. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_map_iterator_intersection</b> (<var>it1, it2, iter</var>)<var><a name="index-ucl_005fmap_005fiterator_005fintersection-324"></a></var><br>
<blockquote><p>Initialise  the iteration  over all  the elements  present in  both the
sequences.  Elements included in only one sequence are discarded. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_map_iterator_complintersect</b> (<var>it1, it2, iter</var>)<var><a name="index-ucl_005fmap_005fiterator_005fcomplintersect-325"></a></var><br>
<blockquote><p>Initialise the iteration over all the elements present in only one of
the two sequences. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_map_iterator_subtraction</b> (<var>it1, it2, iter</var>)<var><a name="index-ucl_005fmap_005fiterator_005fsubtraction-326"></a></var><br>
<blockquote><p>Initialise the iteration over all the elements from sequence 1 that are
not present in sequence 2. 
</p></blockquote></div>

   <p>Example:

<pre class="example">     Sequence 1: 0 1 2 3 4 5 6
     Sequence 2: 4 5 6 7 8 9
     Union: 0 1 2 3 4 4 5 5 6 6 7 8 9
     Intersection: 4 5 6
     Complementary intersection: 0 1 2 3 7 8 9
     Subtraction: 0 1 2 3
</pre>
   <!-- page -->
<div class="node">
<a name="vector"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map">map</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#containers">containers</a>

</div>

<h3 class="section">5.9 The vector structure</h3>

<p><a name="index-Vector-container-327"></a>

   <p>The vector container is an implementation of array, with hysteresis in
memory allocation.

   <blockquote>
<strong>NOTE</strong> This module was inspired by the book on C++ by Bjarne
Stroustrup and by the <acronym>STL</acronym> C++ (Standard Template Library). 
</blockquote>

   <blockquote>
<strong>NOTE</strong> In the following documentation, when describing valid
values for vector indexes, we denote a range of values with <code>[min,
max)</code>, where <code>[</code> means inclusive bound and <code>(</code> means exclusive
bound. 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#vector-implementation">vector implementation</a>:        How it's done. 
<li><a accesskey="2" href="#vector-typedefs">vector typedefs</a>:              Type definitions
<li><a accesskey="3" href="#vector-creation">vector creation</a>:              Creating and destroying vectors. 
<li><a accesskey="4" href="#vector-indexes">vector indexes</a>:               Converting indexes to pointers. 
<li><a accesskey="5" href="#vector-adding">vector adding</a>:                Adding elements to a vector. 
<li><a accesskey="6" href="#vector-removing">vector removing</a>:              Removing elements from a vector. 
<li><a accesskey="7" href="#vector-ops">vector ops</a>:                   Various operations on a vector. 
<li><a accesskey="8" href="#vector-find">vector find</a>:                  Finding elements. 
<li><a accesskey="9" href="#vector-iteration">vector iteration</a>:             Iteration over a vector. 
<li><a href="#vector-memory">vector memory</a>:                Allocating and freeing memory. 
<li><a href="#vector-as-pqueue">vector as pqueue</a>:             Using a vector as a priority queue. 
<li><a href="#vector-high">vector high</a>:                  High level functions. 
</ul>

<!-- page -->
<div class="node">
<a name="vector-implementation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-typedefs">vector typedefs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.1 How it's done</h4>

<p>This container is heavyweight: its complexity is overkill for simple
arrays with fixed size.

   <p>The vector structure can be allocated anywhere; the data area is always
dynamically allocated and it is described by four pointers of type
<code>uint8_t *</code>:

<pre class="example">     first_allocated_slot    first_used_slot
     last_allocated_slot     last_used_slot
</pre>
   <p>A <dfn>slot</dfn> is a section of the allocated memory that can hold an
element; the dimension of the slots is configured at vector
initialisation time.  A <dfn>free slot</dfn> is a slot that does not contain
an element; free slots can be present at the beginning and end of the
allocated memory.  A <dfn>used slot</dfn> is a slot that holds an element;
used slots are always contiguous in the allocated memory.

<!--  -->
<h5 class="subsubheading">Pointer usage charts</h5>

<p>Pointers when some slot is used:

<pre class="example">      free     used slots           free
     |'''''|.................|''''''''''''''''''''|
     |--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^     ^              ^                    ^
     |     |              |                    last_allocated_slot
     |     |              |
     |     |              last_used_slot
     |     |
     |     first_used_slot
     |
     first_allocated_slot
</pre>
   <p class="noindent">pointers when the used area is attached to the beginning of the
allocated memory:

<pre class="example">           used slots           free
     |.................|''''''''''''''''''''''''''|
     |--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^              ^                          ^
     |              |                          last_allocated_slot
     |              |
     |              last_used_slot
     |
     first_allocated_slot == first_used_slot
</pre>
   <p class="noindent">pointers when the used area is attached to the end of the allocated
memory:

<pre class="example">        free slots           used slots
     |''''''''''''''|.............................|
     |--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^              ^                          ^
     |              |         last_allocated_slot == last_used_slot
     |              |
     |              first_used_slot
     |
     first_allocated_slot
</pre>
   <p class="noindent">pointers when the allocated memory is full (all the slots are used):

<pre class="example">                      used slots
     |............................................|
     |--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^                                         ^
     |                        last_allocated_slot == last_used_slot
     |
     |
     |
     first_allocated_slot == first_used_slot
</pre>
   <p class="noindent">pointers when only one slot is used:

<pre class="example">           used
      free slot              free
     |'''''|..|'''''''''''''''''''''''''''''''''''|
     |--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^     ^                                   ^
     |     |                                   last_allocated_slot
     |     |
     |     first_used_slot == last_used_slot
     |
     first_allocated_slot
</pre>
   <p class="noindent">pointers when the vector is empty and a non-zero pad area was
configured:

<pre class="example">       free pad           free slots
       area
     |'''''''''''|''''''''''''''''''''''''''''''''|
     |--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^        ^  ^                             ^
     |        |  |                             last_allocated_slot
     |        |  first_used_slot
     |        |
     |        last_used_slot
     |
     first_allocated_slot
</pre>
   <p class="noindent">pointers when the vector is empty and a zero pad area was configured:

<pre class="example">                         free slots
        |''''''''''''''''''''''''''''''''''''''''''''|
     |__|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
     ^  ^                                         ^
     |  |                                         last_allocated_slot
     |  |
     |  first_allocated_slot == first_used_slot
     |
     last_used_slot
</pre>
   <!--  -->
<h5 class="subsubheading">Pointers usage rules</h5>

     <ul>
<li><code>first_allocated_slot</code> references the first byte/slot of the
allocated memory; its value is modified only when the memory is
reallocated.

     <p>It represents the mimimum allowed value of <code>first_used_slot</code>; when
the two are equal: it means that the used area is attached to the
beginning of the allocated block.

     <li><code>last_allocated_slot</code> references the last slot of the allocated
memory (not the last byte, unless the size of the slot is one); its
value is modified only when the memory is reallocated and is always:

     <pre class="example">          last_allocated_slot == first_allocated_slot
            + slot_dimension * allocated_slot_number
</pre>
     <p>It represents the maximum allowed value for <code>last_used_slot</code>; when
the two are equal: it means that the used area is attached to the end of
the allocated block.

     <li>When some slot is used: <code>first_used_slot</code> references the first slot
that holds data and it can be casted to the type of contained elements,
to reference the first element in the array.

     <p>When the vector is empty: <code>first_used_slot</code> references the first
byte after a (dynamic and configurable) padding area; if the size of the
padding area is zero: its value is equal to <code>first_allocated_slot</code>.

     <p><code>first_used_slot</code> can be accessed to start a forward iteration over
all the elements in the array.

     <li>When the array is used: <code>last_used_slot</code> references the first byte
of the last used slot.

     <p>When the array is empty: <code>last_used_slot</code> has the value of
<code>first_used_slot</code> minus the slot dimension.

     <p><code>last_used_slot</code> can be accessed to start a backward iteration over
all the elements in the array.

     <li>When some slot is used, it is always:

     <pre class="example">          first_used_slot &lt;= last_used_slot
</pre>
     <p class="noindent">the two are equal when only one slot is used; it must always be:

     <pre class="example">          number_of_used_slots * slot_dimension ==
               last_used_slot - first_used_slot + slot_dimension
</pre>
     <li>When no slots are used, it is always:

     <pre class="example">          first_used_slot == last_used_slot + slot_dimension
</pre>
     <p class="noindent">and <code>first_used_slot</code> is set to reference the beginning of the
padding area.  We use this definition of empty vector so that it is
possible to iterate with:

     <pre class="example">          uint8_t *   p;
          
          for (p =  vector-&gt;first_used_slot;
               p &lt;= vector-&gt;last_used_slot;
               p += vector-&gt;slot_dimension) { ... }
          
          for (p =  vector-&gt;last_used_slot;
               p &gt;= vector-&gt;first_used_slot;
               p -= vector-&gt;slot_dimension) { ... }
</pre>
     </ul>

   <p>The padding area, whose starting size can be configured, has the purpose
of allowing fast insertion of elements at the beginning, with no
reallocation of the memory block.

<!-- page -->
<div class="node">
<a name="vector-typedefs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-creation">vector creation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-implementation">vector implementation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.2 Type definitions</h4>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_vector_tag_t</b><var><a name="index-ucl_005fvector_005ftag_005ft-328"></a></var><br>
&mdash; One Element Array Typedef: <b>ucl_vector_t</b><var><a name="index-ucl_005fvector_005ft-329"></a></var><br>
<blockquote><p>The data type of the base structure; it must be allocated by the user
code.  <a href="#vector-memory">vector memory</a> for deatils on (re)allocation. 
</p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_vector_config_tag_t</b><var><a name="index-ucl_005fvector_005fconfig_005ftag_005ft-330"></a></var><br>
&mdash; One Element Array Typedef: <b>ucl_vector_config_t</b><var><a name="index-ucl_005fvector_005fconfig_005ft-331"></a></var><br>
<blockquote><p>Data structure used to configure a vector; it must be allocated by the
user code; public fields description follows.

          <dl>
<dt><code>size_t slot_dimension</code><dd>This is the array stride, which, in simple cases, is the size, in bytes,
of the elements the vector will hold; it should be the result of the
<code>sizeof()</code> operator applied to the data type, possibly normalised
to a multiple of 4 or something.

          <br><dt><code>size_t number_of_slots</code><dd>The number of slots to allocate.

          <br><dt><code>ucl_index_t step_up</code><dd>The number of slots to add when reallocating the array to enlarge it, it
must be a non&ndash;zero positive integer.

          <br><dt><code>ucl_index_t step_down</code><dd>The number of free slots that will trigger the reallocation of he array
for restriction, it must be a non&ndash;zero positive integer.

          <br><dt><code>ucl_index_t size_of_padding_area</code><dd>The numer of slots to keep free, if possible, at the beginning of the
array when moving elements (during insertion, deletion and reallocation),
it must be non&ndash;negative integer.

          <br><dt><code>ucl_comparison_t compar</code><dd>Function and context used to compare elements; this function is used
only by the sort operations, so this field can be left blank if no sort
operations are required; <a href="#typedefs-compar">typedefs compar</a> for details.

          <br><dt><code>ucl_memory_allocator_t allocator</code><dd>The memory allocator to use for the data area; <a href="#memory-typedefs">memory typedefs</a> for
details. 
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Struct Typedef: <b>ucl_vector_array_t</b><var><a name="index-ucl_005fvector_005farray_005ft-332"></a></var><br>
<blockquote><p>Holds an array of vectors.  Public slots:

          <dl>
<dt><code>size_t number_of_vectors</code><dd>the number of vectors in the array;

          <br><dt><code>ucl_vector_tag_t ** vectors</code><dd>array of pointers to vectors; this type implies no assumption upon the
origin of the array memory, it can be statically or dynamically
allocated, or it can be on the stack. 
</dl>

        <p>To declare an array of vectors we can do:

     <pre class="example">          #define NUMBER  1000
          
          ucl_vector_tag_t *    vectors[NUMBER];
          ucl_vector_array_t    array = {
            .number_of_vectors = NUMBER,
            .vectors           = vectors
          };
</pre>
        </blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-creation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-indexes">vector indexes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-typedefs">vector typedefs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.3 Creating and destroying vectors</h4>

<p>The construction of a new vector is a 3&ndash;step sequence:
declaration, configuration, allocation:

<pre class="example">     ucl_vector_config_t     C;
     ucl_vector_t            V;
     size_t  slot_dimension  = ...;
     size_t  number_of_slots = ...;
     
     ucl_vector_initialise_config(C, slot_dimension, number_of_slots);
     ucl_vector_alloc(V, C);
</pre>
   <p class="noindent">if we want to set custom values:

<pre class="example">     ucl_vector_config_t     C;
     ucl_vector_t            V;
     size_t  slot_dimension  =   16;
     size_t  number_of_slots = 1024;
     
     ucl_vector_initialise_config(C, slot_dimension, number_of_slots);
     C-&gt;step_up              = 128;
     C-&gt;step_down            = 264;
     C-&gt;size_of_padding_area =  32;
     ucl_vector_alloc(V, C);
</pre>
   <!--  -->
<h5 class="subsubheading">Configuration functions</h5>

<p>After the invocation to the configuration functions, the user's code may
override the default values by explicitly setting them before invoking
the allocator function.  All the functions select
<code>ucl_memory_alloc()</code> as allocation function and set to zero the
comparison structure.

<div class="defun">
&mdash; Function: void <b>ucl_vector_initialise_config</b> (<var>ucl_vector_config_t C, size_t slot_dimension, size_t number_of_slots</var>)<var><a name="index-ucl_005fvector_005finitialise_005fconfig-333"></a></var><br>
<blockquote><p>Initialise a vector configuration structure with default values. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_initialise_config_buffer</b> (<var>ucl_vector_config_t C</var>)<var><a name="index-ucl_005fvector_005finitialise_005fconfig_005fbuffer-334"></a></var><br>
<blockquote><p>Initialise a vector configuration structure for a vector used as byte
buffer. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_initialise_config_hash</b> (<var>ucl_vector_config_t C</var>)<var><a name="index-ucl_005fvector_005finitialise_005fconfig_005fhash-335"></a></var><br>
<blockquote><p>Initialise a vector configuration structure for a vector used as hash
table buckets collector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_initialise_config_dfs</b> (<var>ucl_vector_config_t C</var>)<var><a name="index-ucl_005fvector_005finitialise_005fconfig_005fdfs-336"></a></var><br>
<blockquote><p>Initialise a vector configuration structure for a vector used as
depth&ndash;first search data for the graph container. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Default values</h5>

<p>The following are the default values
<code>ucl_vector_initialise_config()</code> puts into the
<code>ucl_vector_config_t</code> structure: a set of preprocessor symbols
declared in <samp><span class="file">ucl.h</span></samp>.  The declarations allow overriding, they are
in the form:

<pre class="example">     #ifndef UCL_VECTOR_DEFAULT_STEP_UP
     #  define UCL_VECTOR_DEFAULT_STEP_UP     8
     #endif
</pre>
   <div class="defun">
&mdash; Macro: <b>UCL_VECTOR_DEFAULT_STEP_UP</b><var> 8<a name="index-UCL_005fVECTOR_005fDEFAULT_005fSTEP_005fUP-337"></a></var><br>
<blockquote><p>Default value for the <code>step_up</code> structure field. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>UCL_VECTOR_DEFAULT_STEP_DOWN</b><var> 10<a name="index-UCL_005fVECTOR_005fDEFAULT_005fSTEP_005fDOWN-338"></a></var><br>
<blockquote><p>Default value for the <code>step_down</code> structure field. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>UCL_VECTOR_DEFAULT_PAD</b><var> 3<a name="index-UCL_005fVECTOR_005fDEFAULT_005fPAD-339"></a></var><br>
<blockquote><p>Default value for the <code>size_of_padding_area</code> structure field. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Construction and destruction functions</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_alloc</b> (<var>ucl_vector_t V, ucl_vector_config_t C</var>)<var><a name="index-ucl_005fvector_005falloc-340"></a></var><br>
<blockquote><p>Allocate memory with the selected <acronym>UCL</acronym> allocator and initialise the
fields of <var>V</var>.

        <p>If the <code>step_up</code> field holds a value greater than the
<code>step_down</code> field: the <code>step_down</code> field is changed to
<code>step_up+1</code>.  <a href="#vector-memory">vector memory</a> for details. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_free</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005ffree-341"></a></var><br>
<blockquote><p>Release the memory allocate in <var>V</var> and set to zero all its fields. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_running</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005frunning-342"></a></var><br>
<blockquote><p>Return true if the vector has been constructed. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Inspection functions</h5>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_number_of_step_up_slots</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fnumber_005fof_005fstep_005fup_005fslots-343"></a></var><br>
<blockquote><p>Return the number of stup up slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_number_of_step_down_slots</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fnumber_005fof_005fstep_005fdown_005fslots-344"></a></var><br>
<blockquote><p>Return the number of step down slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_number_of_padding_slots</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fnumber_005fof_005fpadding_005fslots-345"></a></var><br>
<blockquote><p>Return the number of padding slots. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Updating configuration functions</h5>

<p>The following functions can be applied to an already constructed vector.

<div class="defun">
&mdash; Function: void <b>ucl_vector_update_number_of_step_up_slots</b> (<var>ucl_vector_t V, size_t step_up</var>)<var><a name="index-ucl_005fvector_005fupdate_005fnumber_005fof_005fstep_005fup_005fslots-346"></a></var><br>
<blockquote><p>Update the number of the step up slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_update_number_of_step_down_slots</b> (<var>ucl_vector_t V, size_t step_down</var>)<var><a name="index-ucl_005fvector_005fupdate_005fnumber_005fof_005fstep_005fdown_005fslots-347"></a></var><br>
<blockquote><p>Update the number of the step down slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_update_number_of_padding_slots</b> (<var>ucl_vector_t V, size_t padding</var>)<var><a name="index-ucl_005fvector_005fupdate_005fnumber_005fof_005fpadding_005fslots-348"></a></var><br>
<blockquote><p>Update the number of the padding slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_set_compar</b> (<var>ucl_vector_t V, ucl_comparison_t compar</var>)<var><a name="index-ucl_005fvector_005fset_005fcompar-349"></a></var><br>
<blockquote><p>Register the function+context used to compare elements. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Special functions</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_mark_all_slots_as_used</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fmark_005fall_005fslots_005fas_005fused-350"></a></var><br>
<blockquote><p>Set the fields of <var>V</var> to describe a vector that uses all the
allocated memory.  This is for special vector usage. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_mark_allocated_range_as_used</b> (<var>ucl_vector_t V, ucl_range_t range</var>)<var><a name="index-ucl_005fvector_005fmark_005fallocated_005frange_005fas_005fused-351"></a></var><br>
<blockquote><p>Mark a range of slots as used.  This destroys the previous concept of
used slots.  Notice that <var>range</var> is relative to the allocated slots,
not to the previously used slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_reset</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005freset-352"></a></var><br>
<blockquote><p>Reset the internal fields so that the vector appears to be empty.  The
allocated slots memory is not touched. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_clean</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fclean-353"></a></var><br>
<blockquote><p>Set all the allocated memory to null bytes, without touching anything
else. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_swallow_block</b> (<var>ucl_vector_t V, ucl_vector_config_t C, ucl_block_t block</var>)<var><a name="index-ucl_005fvector_005fswallow_005fblock-354"></a></var><br>
<blockquote><p>A replacement for <code>ucl_vector_alloc()</code> that takes an already
allocated block as data area; it is mandatory for the size of the block
to be an integer multiple of the slot's dimension.  The vector is
initialised to be full: all the slots are marked as used.

        <p>The responsibility of the block memory is transferred to the vector, so
the block must be freed only by calling <code>ucl_vector_free()</code>; this
means that the memory will be freed by the allocator registered in
<var>C</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-indexes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-adding">vector adding</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-creation">vector creation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.4 Converting indexes to pointers</h4>

<ul class="menu">
<li><a accesskey="1" href="#vector-indexes-i2p">vector indexes i2p</a>:           Index to pointer conversion. 
<li><a accesskey="2" href="#vector-indexes-p2i">vector indexes p2i</a>:           Pointer to index conversion. 
<li><a accesskey="3" href="#vector-indexes-validation">vector indexes validation</a>:    Validating indexes. 
<li><a accesskey="4" href="#vector-indexes-range">vector indexes range</a>:         Range functions. 
<li><a accesskey="5" href="#vector-indexes-block">vector indexes block</a>:         Range/block conversion. 
</ul>

<!-- page -->
<div class="node">
<a name="vector-indexes-i2p"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-indexes-p2i">vector indexes p2i</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-indexes">vector indexes</a>

</div>

<h5 class="subsubsection">5.9.4.1 Index to pointer conversion</h5>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_index_to_slot</b> (<var>const ucl_vector_t V, ucl_index_t index</var>)<var><a name="index-ucl_005fvector_005findex_005fto_005fslot-355"></a></var><br>
<blockquote><p>Convert <var>index</var> into the corresponding pointer to a slot in the
vector.  Return a pointer to the selected slot, or <code>NULL</code> if the
selected index is out of range.  The range of valid values for
<var>index</var> is <code>[0, </code><var>size</var><code>)</code>, where <var>size</var> is the return
value of <code>ucl_vector_size()</code>.

        <p>Applying <code>ucl_vector_enlarge()</code> or <code>ucl_vector_restrict()</code> to
<var>V</var> invalidates the return value of this function.

        <p>Example:

     <pre class="example">          ucl_vector_config_t     C;
          ucl_vector_t            V;
          int *                   P;
          int                     D;
          
          ucl_vector_initialise_config(C, sizeof(int), 1024);
          ucl_vector_alloc(V, C);
          fill_with_values(V);
          
          P = ucl_vector_index_to_slot(V, 13);
          if (P)
            D = *P;
          else
            error();
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_index_to_new_slot</b> (<var>const ucl_vector_t V, ucl_index_t index</var>)<var><a name="index-ucl_005fvector_005findex_005fto_005fnew_005fslot-356"></a></var><br>
<blockquote><p>Convert <var>index</var> into the corresponding pointer to a slot in the
vector.  This is different from <code>ucl_vector_index_to_slot()</code> in that
the requested position can be one unit greater than the last position in
the vector: that way the returned value can be used with
<code>ucl_vector_insert()</code> to append an element to the end of the vector.

        <p>Return a pointer to the selected slot, or <code>NULL</code> if the selected index
is out of range.  The range of valid values for <var>index</var> is <code>[0,
</code><var>size</var><code>]</code>, where <var>size</var> is the return value of
<code>ucl_vector_size()</code>.

        <p>Applying <code>ucl_vector_enlarge()</code> or <code>ucl_vector_restrict()</code> to
<var>V</var> invalidates the return value of this function.  When adding a
new slot: we have to make room for the new slot before attempting to
convert the index to the slot's pointer.

        <p>Example:

     <pre class="example">          ucl_vector_config_t     C;
          ucl_vector_t            V;
          int *                   P;
          int                     D;
          
          ucl_vector_initialise_config(C, sizeof(int), 1024);
          ucl_vector_alloc(V, C);
          fill_with_values(V);
          
          ucl_vector_enlarge(V);
          P = ucl_vector_index_to_new_slot(V, 13);
          if (P)
            D = *P;
          else
            error();
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_front</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005ffront-357"></a></var><br>
<blockquote><p>A wrapper for <code>ucl_vector_index_to_slot()</code> that returns a pointer
to the first element in the array. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_back</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fback-358"></a></var><br>
<blockquote><p>A wrapper for <code>ucl_vector_index_to_slot()</code> that returns a pointer to
the last element in the array. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-indexes-p2i"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-indexes-validation">vector indexes validation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-indexes-i2p">vector indexes i2p</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-indexes">vector indexes</a>

</div>

<h5 class="subsubsection">5.9.4.2 Pointer to index conversion</h5>

<div class="defun">
&mdash; Function: ucl_index_t <b>ucl_vector_last_index</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005flast_005findex-359"></a></var><br>
<blockquote><p>Return the index of the last element. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_index_t <b>ucl_vector_slot_to_index</b> (<var>const ucl_vector_t V, const void * pointer_to_slot_p</var>)<var><a name="index-ucl_005fvector_005fslot_005fto_005findex-360"></a></var><br>
<blockquote><p>Return the index corresponding to a pointer to slot.  It is the inverse
of <code>ucl_vector_index_to_slot()</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-indexes-validation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-indexes-range">vector indexes range</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-indexes-p2i">vector indexes p2i</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-indexes">vector indexes</a>

</div>

<h5 class="subsubsection">5.9.4.3 Validating indexes</h5>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_pointer_is_valid_slot</b> (<var>const ucl_vector_t V, const void * pointer_to_slot_p</var>)<var><a name="index-ucl_005fvector_005fpointer_005fis_005fvalid_005fslot-361"></a></var><br>
<blockquote><p>Return true if the pointer is a valid slot pointer, else return false. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_index_is_valid</b> (<var>const ucl_vector_t V, ucl_index_t index</var>)<var><a name="index-ucl_005fvector_005findex_005fis_005fvalid-362"></a></var><br>
<blockquote><p>Return true if <var>index</var> is a valid index for the vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_index_is_valid_new</b> (<var>const ucl_vector_t V, ucl_index_t index</var>)<var><a name="index-ucl_005fvector_005findex_005fis_005fvalid_005fnew-363"></a></var><br>
<blockquote><p>Return true if <var>index</var> is a valid index for a new slot of the
vector. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-indexes-range"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-indexes-block">vector indexes block</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-indexes-validation">vector indexes validation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-indexes">vector indexes</a>

</div>

<h5 class="subsubsection">5.9.4.4 Range functions</h5>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_range_is_valid</b> (<var>const ucl_vector_t V, ucl_range_t R</var>)<var><a name="index-ucl_005fvector_005frange_005fis_005fvalid-364"></a></var><br>
<blockquote><p>Return true if <var>R</var>, interpreted as inclusive range of indexes, is
valid for <var>V</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_range_t <b>ucl_vector_range</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005frange-365"></a></var><br>
<blockquote><p>Return the inclusive range of indexes representing the whole vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_range_t <b>ucl_vector_range_from_position_to_end</b> (<var>const ucl_vector_t V, ucl_index_t position</var>)<var><a name="index-ucl_005fvector_005frange_005ffrom_005fposition_005fto_005fend-366"></a></var><br>
<blockquote><p>Return the inclusive range of indexes from <var>position</var> to the end of
the vector.  <var>position</var> must be a valid index for <var>V</var>. 
</p></blockquote></div>

   <p>Notice that to build the range of indexes from the beginning of a vector
to a selected position we just need to do:

<pre class="example">     ucl_range_t     range;
     
     ucl_range_set_min_max(range, 0, position);
</pre>
   <div class="defun">
&mdash; Function: ucl_range_t <b>ucl_vector_range_from_end_to_position</b> (<var>const ucl_vector_t V, ucl_index_t position</var>)<var><a name="index-ucl_005fvector_005frange_005ffrom_005fend_005fto_005fposition-367"></a></var><br>
<blockquote><p>Return the inclusive range of indexes from the end of the vector to
<var>position</var>.  <var>position</var> must be greater or equal to the size of
<var>V</var>.

        <p>The returned range of indexes is invalid for <var>V</var>, but it can be used
to append new elements to it; to add slots from the end to index
15 included:

     <pre class="example">          ucl_vector_config_t     C;
          ucl_vector_t            V;
          int *                   P;
          ucl_range_t             R;
          ucl_index_t             i;
          
          ucl_vector_initialise_config(C, sizeof(int), 10);
          ucl_vector_alloc(V, C);
          fill_with_10_values(V);
          
          R = ucl_vector_range_from_end_to_position(V, 15);
          for (i=ucl_range_min(T); i&lt;=ucl_range_max(R); ++i)
            {
              ucl_vector_enlarge(V);
              P = ucl_vector_index_to_new_slot(V, i);
              ...
            }
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: ucl_range_t <b>ucl_vector_range_from_end_with_span</b> (<var>const ucl_vector_t V, size_t span</var>)<var><a name="index-ucl_005fvector_005frange_005ffrom_005fend_005fwith_005fspan-368"></a></var><br>
<blockquote><p>Return the inclusive range of indexes from the end of the vector with
<var>span</var>.

        <p>The returned range of indexes is invalid for <var>V</var>, but it can be used
to append new elements to it; to add 5 slots to the end:

     <pre class="example">          ucl_vector_config_t     C;
          ucl_vector_t            V;
          int *                   P;
          ucl_range_t             R;
          ucl_index_t             i;
          
          ucl_vector_initialise_config(C, sizeof(int), 10);
          ucl_vector_alloc(V, C);
          fill_with_values(V);
          
          R = ucl_vector_range_from_end_with_span(V, 5);
          for (i=ucl_range_min(R); i&lt;=ucl_range_max(R); ++i)
            {
              ucl_vector_enlarge(V);
              P = ucl_vector_index_to_new_slot(V, i);
            }
</pre>
        <p class="noindent">of course this is just an example, because it is much easiear to use
<code>ucl_vector_push_back()</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-indexes-block"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-indexes-range">vector indexes range</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-indexes">vector indexes</a>

</div>

<h5 class="subsubsection">5.9.4.5 Range/block conversion</h5>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_vector_block_from_range</b> (<var>const ucl_vector_t V, const ucl_range_t R</var>)<var><a name="index-ucl_005fvector_005fblock_005ffrom_005frange-369"></a></var><br>
<blockquote><p>Return a block referencing the slots selected by a range. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_range_t <b>ucl_vector_range_from_block</b> (<var>const ucl_vector_t V, const ucl_block_t B</var>)<var><a name="index-ucl_005fvector_005frange_005ffrom_005fblock-370"></a></var><br>
<blockquote><p>Return the range of slots referenced by a block. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-adding"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-removing">vector removing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-indexes">vector indexes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.5 Adding elements to a vector</h4>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_insert</b> (<var>ucl_vector_t V, void * target</var>)<var><a name="index-ucl_005fvector_005finsert-371"></a></var><br>
<blockquote><p>Insert an empty slot at a selected position.  This function assumes that
the array has a free slot to hold the new element: to make sure that
this is true, a call to this function must be preceeded by a call to
<code>ucl_vector_enlarge()</code>.

        <p>The pointer to the slot must be the return value of a previous
invocation to <code>ucl_vector_index_to_new_slot()</code>.

        <p>This function tries to move less elements as possible to create an empty
slot at the selected position.  The return value is a pointer to the
empty slot: it can be different from the value of the <var>target</var>
argument. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_insert_sort</b> (<var>ucl_vector_t V, ucl_value_t data</var>)<var><a name="index-ucl_005fvector_005finsert_005fsort-372"></a></var><br>
<blockquote><p>Find the position in the vector in which an element must be inserted to
keep the array sorted and create a new slot there; the return value is a
pointer to the empty slot.

        <p>This function assumes that:

          <ol type=1 start=1>
<li>there's room in the vector to insert a new element;
<li>the array is sorted;
<li>a comparison function has been registered in <var>V</var> to be used to
compare elements.
             </ol>

        <p><var>data</var> must represent the element to be inserted, it's used as first
argument to the comparison function.  When a sequence of elements equal
to <var>data</var> is present: the new slot is appended at its end. 
</p></blockquote></div>

   <p>The correct sequence of function calls required to insert a new element
is: enlarge the vector, acquire the pointer, make a free slot, copy the
value.  Example of insertion:

<pre class="example">     ucl_vector_t     vector;
     ucl_index_t      index;
     data_type_t      data;
     data_type_t *    ptr;
     
     ...
     
     data  = ...;
     index = ...;
     ucl_vector_enlarge(vector);
     ptr   = ucl_vector_index_to_new_slot(vector, index);
     ptr   = ucl_vector_insert(vector, ptr);
     *ptr  = data;
</pre>
   <p class="noindent">example of insert sort operation:

<pre class="example">     ucl_vector_t     vector;
     ucl_index_t      index;
     data_type_t      data;
     data_type_t *    ptr;
     
     ...
     
     data  = ...;
     index = ...;
     ucl_vector_enlarge(vector);
     ptr   = ucl_vector_insert_sort(vector, &amp;data);
     *ptr  = data;
</pre>
   <!-- page -->
<div class="node">
<a name="vector-removing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-ops">vector ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-adding">vector adding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.6 Removing elements from a vector</h4>

<div class="defun">
&mdash; Function: void <b>ucl_vector_erase</b> (<var>ucl_vector_t V, void * slot</var>)<var><a name="index-ucl_005fvector_005ferase-373"></a></var><br>
<blockquote><p>Erase an element at a selected position: the slot is overwritten by
moving less elements as possible.  After the invocation: the pointer
represented by <var>slot</var> is not guaranteed to be a pointer to a valid
slot in the vector. 
</p></blockquote></div>

   <p>After the invocation of this function, it's possible to attempt a
reallocation of the array to free some unused memory with a call to
<code>ucl_vector_restrict()</code>.

   <p>Example of data erasure:

<pre class="example">     ucl_vector_t     V;
     ucl_index_t      index;
     data_type_t *    ptr;
     
     ...
     
     index = ...
     ptr   = ucl_vector_index_to_slot(V, index);
     ucl_vector_erase(V, ptr);
     ucl_vector_restrict(V);
</pre>
   <p class="noindent">example of data extraction:

<pre class="example">     ucl_vector_t     V;
     ucl_index_t      index;
     data_type_t *    ptr;
     data_type_t      data;
     
     ...
     
     index = ...
     ptr   = ucl_vector_index_to_slot(V, index);
     data  = *ptr;
     ucl_vector_erase(V, ptr);
     ucl_vector_restrict(V);
</pre>
   <!--  -->
<!-- page -->
<div class="node">
<a name="vector-ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-find">vector find</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-removing">vector removing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.7 Various operations on a vector</h4>

<h5 class="subsubheading">Dimension inspection</h5>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_size</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fsize-374"></a></var><br>
<blockquote><p>Return a value representing the number of elements in the container. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_slot_dimension</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fslot_005fdimension-375"></a></var><br>
<blockquote><p>Return a value representing the size of the elements. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_increment_slot</b> (<var>const ucl_vector_t V, void * slot</var>)<var><a name="index-ucl_005fvector_005fincrement_005fslot-376"></a></var><br>
<blockquote><p>Interpret <var>slot</var> as a pointer to a slot of <var>V</var> and increment it
so that it references the next element.  This function does no bounds
checking. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_decrement_slot</b> (<var>const ucl_vector_t V, void * slot</var>)<var><a name="index-ucl_005fvector_005fdecrement_005fslot-377"></a></var><br>
<blockquote><p>Interpret <var>slot</var> as a pointer to a slot of <var>V</var> and decrement it
so that it references the previous element.  This function does no
bounds checking. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Access to memory blocks</h5>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_vector_get_memory_block</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fget_005fmemory_005fblock-378"></a></var><br>
<blockquote><p>Return a block referencing the allocated memory block. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_vector_get_data_block</b> (<var>const ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fget_005fdata_005fblock-379"></a></var><br>
<blockquote><p>Return a block referencing the data block: the used slots. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_vector_get_free_block_at_end</b> (<var>ucl_vector_t V, size_t count</var>)<var><a name="index-ucl_005fvector_005fget_005ffree_005fblock_005fat_005fend-380"></a></var><br>
<blockquote><p>Return a block referencing <var>count</var> free slots at the end of the
vector; the slots are still marked as free.

        <p>This function may haul the used slots inside the allocated memory, so
slot pointers requested early will become invalid.

        <p>This function has to be called only if there are at least <var>count</var>
free slots already allocated, see
<code>ucl_vector_enlarge_for_slots()</code> (<a href="#vector-memory">vector memory</a> for
details).

        <p>At present, blocks returned by this function cannot be converted to a
range with <code>ucl_vector_range_from_block()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_block_t <b>ucl_vector_get_free_block_at_beginning</b> (<var>ucl_vector_t V, size_t count</var>)<var><a name="index-ucl_005fvector_005fget_005ffree_005fblock_005fat_005fbeginning-381"></a></var><br>
<blockquote><p>Return a block referencing <var>count</var> free slots at the beginning of
the vector; the slots are still marked as free.

        <p>This function may haul the used slots inside the allocated memory, so
slot pointers requested early will become invalid.

        <p>This function has to be called only if there are at least <var>count</var>
free slots already allocated, see <code>ucl_vector_enlarge_for_slots()</code>
(<a href="#vector-memory">vector memory</a> for details).

        <p>At present, blocks returned by this function cannot be converted to a
range with <code>ucl_vector_range_from_block()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_mark_as_used</b> (<var>ucl_vector_t V, ucl_block_t B</var>)<var><a name="index-ucl_005fvector_005fmark_005fas_005fused-382"></a></var><br>
<blockquote><p>Mark the range of free slots referenced by <var>B</var> as used.  This
function is meant to commit usage of blocks requested with
<code>ucl_vector_get_free_block_at_beginning()</code> and
<code>ucl_vector_get_free_block_at_end()</code>.

        <p><var>B</var> must be adjacent to the used slots inside the vector, its size
must be an integer multiple of the slot dimension, its memory must be
completely contained in the allocated vector memory. 
</p></blockquote></div>

<!--  -->
<h5 class="subsubheading">Sorting</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_quick_sort</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fquick_005fsort-383"></a></var><br>
<blockquote><p>Quick sort the vector using the C library function
<code>ucl_quicksort()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_sorted</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fsorted-384"></a></var><br>
<blockquote><p>Return true if the vector is sorted.  This function scans the whole
vector, so it is slow. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-find"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-iteration">vector iteration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-ops">vector ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.8 Finding elements</h4>

<p>The functions described in this section search for an element in the
vector, given a copy of the element to be found.  The <var>D</var> argument
represents the element to be found, it's used as first argument to the
comparison function.

   <p>The return value is always a pointer to the found element in the array,
or <code>NULL</code> if the element is not present.

<div class="defun">
&mdash; Function: void * <b>ucl_vector_find</b> (<var>const ucl_vector_t V, const ucl_value_t D</var>)<var><a name="index-ucl_005fvector_005ffind-385"></a></var><br>
<blockquote><p>Find an element in the array with a linear search. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_binary_search</b> (<var>const ucl_vector_t V, const ucl_value_t D</var>)<var><a name="index-ucl_005fvector_005fbinary_005fsearch-386"></a></var><br>
<blockquote><p>Find an element in the array with a binary search; this function assumes
that the array is sorted. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_sort_find</b> (<var>const ucl_vector_t V, const ucl_value_t D</var>)<var><a name="index-ucl_005fvector_005fsort_005ffind-387"></a></var><br>
<blockquote><p>Find an element in the array; this function assumes that the array is
sorted.  If there are few elements in the vector: a linear search is
performed, else a binary search is used. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-iteration"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-memory">vector memory</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-find">vector find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.9 Iteration over a vector</h4>

<p>It's easy to iterate over all the elements of a vector.  Example of
forward iteration:

<pre class="example">     ucl_vector_t    V;
     data_type_t *   P;
     data_type_t *   end = ucl_vector_back(V);
     
     for (P = ucl_vector_front(V); P &lt;= end; ++P)
       {
         ... *P ...
       }
</pre>
   <p class="noindent">example of backward iteration:

<pre class="example">     ucl_vector_t    V;
     data_type_t *   P;
     data_type_t *   end = ucl_vector_front(V);
     
     for (P = ucl_vector_back(V); P &gt;= end; --P)
       {
         ... *P ...
       }
</pre>
   <p class="noindent">nevertheless the following iterators are provided; <a href="#iterators">iterators</a> for
details on iteration.

<div class="defun">
&mdash; Function: void <b>ucl_vector_iterator_forward</b> (<var>const ucl_vector_t V, ucl_iterator_t I</var>)<var><a name="index-ucl_005fvector_005fiterator_005fforward-388"></a></var><br>
<blockquote><p>Initialise a forward iteration. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_iterator_backward</b> (<var>const ucl_vector_t V, ucl_iterator_t I</var>)<var><a name="index-ucl_005fvector_005fiterator_005fbackward-389"></a></var><br>
<blockquote><p>Initialise a backward iteration. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_iterator_range_forward</b> (<var>const ucl_vector_t V, ucl_range_t R, ucl_iterator_t I</var>)<var><a name="index-ucl_005fvector_005fiterator_005frange_005fforward-390"></a></var><br>
<blockquote><p>Initialise a forward iteration over the inclusive range of elements
selected by <var>R</var>.  <var>R</var> must be a valid range for <var>V</var>, we can
test this with <code>ucl_vector_range_is_valid()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_iterator_range_backward</b> (<var>const ucl_vector_t V, ucl_range_t R, ucl_iterator_t I</var>)<var><a name="index-ucl_005fvector_005fiterator_005frange_005fbackward-391"></a></var><br>
<blockquote><p>Initialise a backward iteration over the inclusive range of elements
selected by <var>R</var>.  <var>R</var> must be a valid range for <var>V</var>, we can
test this with <code>ucl_vector_range_is_valid()</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-memory"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-as-pqueue">vector as pqueue</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-iteration">vector iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.10 Allocating and freeing memory</h4>

<ul class="menu">
<li><a accesskey="1" href="#vector-memory-intro">vector memory intro</a>:          Introduction to vector memory handling. 
<li><a accesskey="2" href="#vector-memory-enlarge">vector memory enlarge</a>:        Enlarging allocated memory. 
<li><a accesskey="3" href="#vector-memory-restrict">vector memory restrict</a>:       Restricting allocated memory. 
<li><a accesskey="4" href="#vector-memory-misc">vector memory misc</a>:           Miscellaneous memory functions. 
</ul>

<!-- page -->
<div class="node">
<a name="vector-memory-intro"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-memory-enlarge">vector memory enlarge</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-memory">vector memory</a>

</div>

<h5 class="subsubsection">5.9.10.1 Introduction to vector memory handling</h5>

<p>The allocation policy for a vector container is ruled by the arguments
stored into the configuration structure (<a href="#vector-creation">vector creation</a>).  The
rules are:

     <ul>
<li>an initial number of slots is selected and an array of such size is
allocated;

     <li>an optional number of slots to be kept free at the beginning of the
array is selected, so elements can be moved there when inserting new
slots;

     <li>the function <code>ucl_vector_enlarge()</code> enlarges the array when one
of the two conditions are true:

          <ul>
<li>the array is full;

          <li>a specific number of free slots is requested and there are not enough in
the array;
</ul>

     <li>a &ldquo;step up&rdquo; number is selected: when the array is reallocated to be
enlarged, the new size is the minimum multiple of this number greater
than the number of elements in the container (in units of slot size):

     <pre class="example">          rest = old_size % step_up
          new_size = old_size + (rest)? rest : step_up
</pre>
     <li>a &ldquo;step down&rdquo; number is selected: when <code>ucl_vector_restrict()</code>
has to determine if the array has to be reallocated for restriction, the
operation is performed if there are at least that number of free slots;
the new size is computed with the following formula (in units of slot
size):

     <pre class="example">          rest = old_size % step_up
          new_size = old_size - step_down
          new_size += (rest)? rest : step_up
</pre>
     <p class="noindent">example:

     <pre class="example">          old_size  = 20
          step_up   = 4
          step_down = 10
          
          rest     = 20 %  4 =  0
          new_size = 20 - 10 = 10
          new_size = 10 +  4 = 14
</pre>
     <p class="noindent">notice that if <code>step_up &gt;= step_down</code> it can result that
<code>new_size &gt;= old_size</code>, example:

     <pre class="example">          old_size  = 10
          step_up   = 4
          step_down = 2
          
          rest     = 10 % 4 = 2
          new_size = 10 - 2 = 8
          new_size =  8 + 2 = 10
</pre>
     <p class="noindent">another example:

     <pre class="example">          old_size  = 11
          step_up   = 4
          step_down = 2
          
          rest     = 11 % 4 = 3
          new_size = 11 - 2 = 9
          new_size =  9 + 3 = 12
</pre>
     <p class="noindent">that is why <code>ucl_vector_alloc()</code> sets <code>step_down</code> to a value
greater than <code>step_up</code>. 
</ul>

   <p>By default the <acronym>UCL</acronym> allocator is used (<a href="#memory-functions">memory functions</a>), but it
is possible to register a vector&ndash;specific allocator.

<!-- page -->
<div class="node">
<a name="vector-memory-enlarge"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-memory-restrict">vector memory restrict</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-memory-intro">vector memory intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-memory">vector memory</a>

</div>

<h5 class="subsubsection">5.9.10.2 Enlarging allocated memory</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_enlarge</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fenlarge-392"></a></var><br>
<blockquote><p>To be used to make sure that at least one free slot exists.

        <p>Check if there are free slots in the allocated memory: if there are,
nothing happens; else the array is reallocated and enlarged according to
the reallocation rules.

        <p>An error reallocating memory does not corrupt the vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_will_enlarge</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fwill_005fenlarge-393"></a></var><br>
<blockquote><p>Return true if the next call to <code>ucl_vector_enlarge()</code> will
reallocate the vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_enlarged_size</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fenlarged_005fsize-394"></a></var><br>
<blockquote><p>Return the number of allocated slots after a reallocation for
enlarging.  This function returns a meaningful value only when
<code>ucl_vector_will_enlarge()</code> returns true. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_enlarge_for_slots</b> (<var>ucl_vector_t V, size_t required_free_slots</var>)<var><a name="index-ucl_005fvector_005fenlarge_005ffor_005fslots-395"></a></var><br>
<blockquote><p>To be used to make sure that there is room for at least the selected
number of free slots.

        <p>Check if there are at least <var>required_free_slots</var> in the allocated
memory: if there are, nothing happens; else the array is reallocated and
enlarged to get enough room.

        <p>An error reallocating memory does not corrupt the vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_enlarge_for_range</b> (<var>ucl_vector_t V, ucl_range_t R</var>)<var><a name="index-ucl_005fvector_005fenlarge_005ffor_005frange-396"></a></var><br>
<blockquote><p>Make sure that there is enough memory to hold the inclusive range of
indexes described by <var>R</var>.  This works despite <var>R</var> being: already
a valid range of indexes, completely beyond the upper index limits,
across the current upper index limit. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-memory-restrict"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-memory-misc">vector memory misc</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-memory-enlarge">vector memory enlarge</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-memory">vector memory</a>

</div>

<h5 class="subsubsection">5.9.10.3 Restricting allocated memory</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_restrict</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005frestrict-397"></a></var><br>
<blockquote><p>Check if there are enough free slots in the allocated memory so that
it's correct to restrict the array: if there aren't, nothing happens;
else the array is reallocated and restricted according to the
reallocation rules.

        <p>An error reallocating memory does not corrupt the vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_will_restrict</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fwill_005frestrict-398"></a></var><br>
<blockquote><p>Return true if the next call to <code>ucl_vector_restrict()</code> will
reallocate the vector. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_restricted_size</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005frestricted_005fsize-399"></a></var><br>
<blockquote><p>Return the number of allocated slots after a reallocation for
restricting.  This function returns a meaningful value only when
<code>ucl_vector_will_restrict()</code> returns true. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-memory-misc"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-memory-restrict">vector memory restrict</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-memory">vector memory</a>

</div>

<h5 class="subsubsection">5.9.10.4 Miscellaneous memory functions</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_set_memory_to_zero</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fset_005fmemory_005fto_005fzero-400"></a></var><br>
<blockquote><p>Set all the slots to zero.  This does not change the vector size: it is
not like extracting all the elements. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: size_t <b>ucl_vector_number_of_free_slots</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fnumber_005fof_005ffree_005fslots-401"></a></var><br>
<blockquote><p>Returns the number of allocated but currently unused slots.  It is the
number of elements that can be added without causing a memory
reallocation. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_register_allocator</b> (<var>ucl_vector_t V, ucl_memory_allocator_t A</var>)<var><a name="index-ucl_005fvector_005fregister_005fallocator-402"></a></var><br>
<blockquote><p>Register a new allocator. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-as-pqueue"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high">vector high</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-memory">vector memory</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.11 Using a vector as a priority queue</h4>

<p>The vector structure provides all the functions required to implement a
priority queue.  This is a structure in which elements are associated
with keys: when an element is added and the structure is kept sorted
comparing its key with the keys of the elements already in the
container.

   <p>Let's say we have declared a structure like this:

<pre class="example">     typedef struct pair_t {
       key_t   key;
       val_t   val;
     } pair_t;
</pre>
   <p class="noindent">and a <code>ucl_comparison_t</code> function+context to compare keys.

   <p>If any time a <code>pair_t</code> must be inserted in the vector we use the
<code>ucl_vector_insert_sort()</code> function to determine the insertion
position, the elements will be kept sorted according to the key values
and comparison algorithm.

   <p>Then <code>ucl_vector_front()</code> or <code>ucl_vector_back()</code> can be
used to extract the element with lesser or greater key.

<!-- page -->
<div class="node">
<a name="vector-high"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-as-pqueue">vector as pqueue</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector">vector</a>

</div>

<h4 class="subsection">5.9.12 High level functions</h4>

<p>The functions described in this section are built upon the basic ones;
some of them invoke the enlarge/restrict memory functions.

<ul class="menu">
<li><a accesskey="1" href="#vector-high-stack">vector high stack</a>:            Stack and queue. 
<li><a accesskey="2" href="#vector-high-append">vector high append</a>:           Appending data to a vector. 
<li><a accesskey="3" href="#vector-high-insert">vector high insert</a>:           Inserting into a vector. 
<li><a accesskey="4" href="#vector-high-erase">vector high erase</a>:            Removing from a vector. 
<li><a accesskey="5" href="#vector-high-access">vector high access</a>:           Setters and getters. 
<li><a accesskey="6" href="#vector-high-compare">vector high compare</a>:          Comparing vectors. 
<li><a accesskey="7" href="#vector-high-apply">vector high apply</a>:            Applying functions. 
</ul>

<!-- page -->
<div class="node">
<a name="vector-high-stack"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high-append">vector high append</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.1 Stack and queue</h5>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_push_front</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fpush_005ffront-403"></a></var><br>
<blockquote><p>Add a slot to the front of the vector and return a pointer to it.

        <p>This function invokes <code>ucl_vector_enlarge()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_vector_push_back</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fpush_005fback-404"></a></var><br>
<blockquote><p>Add a slot to the tail of the vector and return a pointer to it.

        <p>This function invokes <code>ucl_vector_enlarge()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_pop_front</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fpop_005ffront-405"></a></var><br>
<blockquote><p>If the vector is not empty: erase the first slot, else do nothing.

        <p>This function invokes <code>ucl_vector_restrict()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_pop_back</b> (<var>ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fpop_005fback-406"></a></var><br>
<blockquote><p>If the vector is not empty: erase the last slot, else do nothing.

        <p>This function invokes <code>ucl_vector_restrict()</code>. 
</p></blockquote></div>

   <p>Notice that the &ldquo;top&rdquo; operations of the stack and queue are already
implemented by <code>ucl_vector_front()</code> and <code>ucl_vector_back()</code>.

<!-- page -->
<div class="node">
<a name="vector-high-append"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high-insert">vector high insert</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-high-stack">vector high stack</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.2 Appending data to a vector</h5>

<p>In the following functions the <var>dst</var> vector must be an already
allocated vector.

<div class="defun">
&mdash; Function: void <b>ucl_vector_append_block</b> (<var>ucl_vector_t dst, const ucl_block_t B</var>)<var><a name="index-ucl_005fvector_005fappend_005fblock-407"></a></var><br>
<blockquote><p>Append a block to the vector by copying data from <var>B</var> with
<code>memcpy()</code>.  The size of the block must be an integer multiple of
the destination vector's slot dimension.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_append</b> (<var>ucl_vector_t dst, const ucl_vector_t src</var>)<var><a name="index-ucl_005fvector_005fappend-408"></a></var><br>
<blockquote><p>Append all the elements of <var>src</var> to the end of <var>dst</var> by copying
data with <code>memcpy()</code>.  If <var>dst</var> is empty: this operation is
equivalent to duplicating <var>src</var>.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_append_range</b> (<var>ucl_vector_t dst, const ucl_vector_t src, ucl_range_t R</var>)<var><a name="index-ucl_005fvector_005fappend_005frange-409"></a></var><br>
<blockquote><p>Append the elements of <var>src</var> referenced by <var>R</var> to the end of
<var>dst</var> by copying data with <code>memcpy()</code>.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_append_more</b> (<var>ucl_vector_t dst, const ucl_vector_t src, <small class="dots">...</small></var>)<var><a name="index-ucl_005fvector_005fappend_005fmore-410"></a></var><br>
<blockquote><p>Append elements from a set of vectors to the end of <var>dst</var>.  The
<code>...</code> arguments are a list of <code>ucl_vector_t</code> values terminated
by a <code>NULL</code>.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>.

        <p>Example:

     <pre class="example">          ucl_vector_t    dst, a, b, c, d;
          
          ...
          ucl_vector_append_more(dst, a, b, c, d, NULL);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_append_more_from_array</b> (<var>ucl_vector_t dst, const ucl_vector_array_t * vectors</var>)<var><a name="index-ucl_005fvector_005fappend_005fmore_005ffrom_005farray-411"></a></var><br>
<blockquote><p>Like <code>ucl_vector_append_more()</code> but takes source vectors from an
array rather than from application parameters. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-high-insert"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high-erase">vector high erase</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-high-append">vector high append</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.3 Inserting into a vector</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_insert_vector</b> (<var>ucl_vector_t dst, ucl_index_t offset, ucl_vector_t src</var>)<var><a name="index-ucl_005fvector_005finsert_005fvector-412"></a></var><br>
<blockquote><p>Insert all the elements of <var>src</var> into <var>dst</var> at <var>offset</var>.

        <p><var>offset</var> must be a valid value for
<code>ucl_vector_index_to_new_slot()</code>.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_insert_block</b> (<var>ucl_vector_t dst, ucl_index_t offset, const ucl_block_t B</var>)<var><a name="index-ucl_005fvector_005finsert_005fblock-413"></a></var><br>
<blockquote><p>Insert the data referenced by <var>B</var> into <var>dst</var> at <var>offset</var>.

        <p>The size of <var>B</var> must be an integer multiple of the slot's dimension
of <var>dst</var>.  <var>offset</var> must be a valid value for
<code>ucl_vector_index_to_new_slot()</code>.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_insert_range</b> (<var>ucl_vector_t dst, ucl_index_t offset, const ucl_vector_t src, ucl_range_t R</var>)<var><a name="index-ucl_005fvector_005finsert_005frange-414"></a></var><br>
<blockquote><p>Insert the data referenced by the inclusive <var>R</var> of indexes from
<var>src</var> into <var>dst</var> at <var>offset</var>.

        <p>The size of <var>B</var> must be an integer multiple of the slot's dimension
of <var>dst</var>.  <var>offset</var> must be a valid value for
<code>ucl_vector_index_to_new_slot()</code>.

        <p>This function invokes <code>ucl_vector_enlarge_for_slots()</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-high-erase"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high-access">vector high access</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-high-insert">vector high insert</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.4 Removing from a vector</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_erase_range</b> (<var>ucl_vector_t V, ucl_range_t R</var>)<var><a name="index-ucl_005fvector_005ferase_005frange-415"></a></var><br>
<blockquote><p>Erase all the elements in the selected range.

        <p>This function invokes <code>ucl_vector_restrict()</code>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-high-access"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high-compare">vector high compare</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-high-erase">vector high erase</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.5 Setters and getters</h5>

<div class="defun">
&mdash; Function: void <b>ucl_vector_copy_range</b> (<var>ucl_vector_t dst, ucl_index_t position, ucl_vector_t src, ucl_range_t src_range</var>)<var><a name="index-ucl_005fvector_005fcopy_005frange-416"></a></var><br>
<blockquote><p>Copy slots referenced by <var>src_range</var> in <var>src</var> to <var>position</var>
in <var>dst</var>; data in <var>dst</var> is overwritten.

        <p><var>position</var> must be a valid index for <var>dst</var>.  <var>src_range</var>
must be valid for <var>src</var>.  There must be enough slots after
<var>position</var> in <var>dst</var> to hold the whole range from <var>src</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_set_block</b> (<var>ucl_vector_t dst, ucl_index_t position, ucl_block_t src</var>)<var><a name="index-ucl_005fvector_005fset_005fblock-417"></a></var><br>
<blockquote><p>Copy data from <var>src</var> into <var>dst</var> at <var>position</var>; data in
<var>dst</var> is overwritten.

        <p><var>position</var> must be a valid index for <var>dst</var> and enough slots must
exist after it to accept the whole <var>src</var> block.  The length of
<var>src</var> must be an integer multiple of the slot's dimension in
<var>dst</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_get_block</b> (<var>ucl_block_t dst, ucl_index_t position, ucl_vector_t src</var>)<var><a name="index-ucl_005fvector_005fget_005fblock-418"></a></var><br>
<blockquote><p>Copy data from <var>src</var> at <var>position</var> into <var>dst</var>, overwriting
data.

        <p><var>position</var> must be a valid index for <var>dst</var> and there must be
enough slots in <var>dst</var> to fill the block.  The length of <var>src</var>
must be an integer multiple of the slot's dimension in <var>dst</var>. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-high-compare"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#vector-high-apply">vector high apply</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-high-access">vector high access</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.6 Comparing vectors</h5>

<div class="defun">
&mdash; Function: int <b>ucl_vector_compare_range</b> (<var>ucl_vector_t a, ucl_range_t range_a, ucl_vector_t b, ucl_range_t range_b</var>)<var><a name="index-ucl_005fvector_005fcompare_005frange-419"></a></var><br>
<blockquote><p>Compare two ranges of elements in two vectors, element by element, using
the comparison function of <var>a</var>.  If the size of the ranges is not
equal: only a number of elements equal to the lesser size is compared. 
The comparison stops at the first pair of elements for which the
comparison function returns non&ndash;zero.

        <p>Works somewhat like <code>strcmp()</code>.  Return:

          <dl>
<dt><code>0</code><dd>if all the compared elements are equal;
<br><dt><code>+1</code><dd>if, for the last compared pair, the element from <var>a</var> is greater than
the last element from <var>b</var>;
<br><dt><code>-1</code><dd>if, for the last compared pair, the element from <var>a</var> is lesser than
the last element from <var>b</var>. 
</dl>

        <p><var>a</var> can be equal to <var>b</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_equal_range</b> (<var>ucl_vector_t a, ucl_range_t range_a, ucl_vector_t b, ucl_range_t range_b</var>)<var><a name="index-ucl_005fvector_005fequal_005frange-420"></a></var><br>
<blockquote><p>Wrapper for <code>ucl_vector_compare_range()</code> that returns true if the
two ranges are equal. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_vector_compare</b> (<var>ucl_vector_t a, ucl_vector_t b</var>)<var><a name="index-ucl_005fvector_005fcompare-421"></a></var><br>
<blockquote><p>Wrapper for <code>ucl_vector_compare_range()</code> that compares the whole
vectors. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_vector_equal</b> (<var>ucl_vector_t a, ucl_vector_t b</var>)<var><a name="index-ucl_005fvector_005fequal-422"></a></var><br>
<blockquote><p>Wrapper for <code>ucl_vector_compare()</code>: return true if the vectors are
equal. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="vector-high-apply"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#vector-high-compare">vector high compare</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#vector-high">vector high</a>

</div>

<h5 class="subsubsection">5.9.12.7 Applying functions</h5>

<p>The functions described in this section allow us to apply a function, in
the form of a callback (<a href="#typedefs-callback">typedefs callback</a>), to each element in a
vector or to each element in a range over a vector.  The &ldquo;for each&rdquo;
kind leaves to the callback the responsibility to produce a result,
while the &ldquo;map&rdquo; kind produces a vector holding processed elements.

<div class="defun">
&mdash; Function: void <b>ucl_vector_for_each</b> (<var>ucl_callback_t cb, ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005ffor_005feach-423"></a></var><br>
<blockquote><p>Apply the callback <var>cb</var> to each element in the vector <var>V</var>.  The
callback function is invoked with a pointer to the element's slot as
custom value.

        <p>Example of callback that sums the values in a vector:

     <pre class="example">          void
          callback (ucl_value_t state, ucl_value_t custom)
          {
            int * accumulator_p   = state.ptr;
            int * slot            = custom.ptr;
          
            *accumulator_p += *slot;
          }
          
          int             accumulator = 0;
          ucl_callback_t  cb = {
            .func = callback,
            .data = { .ptr = &amp;accumulator }
          };
          
          ucl_vector_t    V;
          ucl_vector_for_each(cb, V);
</pre>
        <p class="noindent">with this setup the operation is like a &ldquo;fold&rdquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_for_each_in_range</b> (<var>ucl_callback_t cb, ucl_range_t R, ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005ffor_005feach_005fin_005frange-424"></a></var><br>
<blockquote><p>Like <code>ucl_vector_for_each()</code>, but apply the callback only to the
elements selected by the inclusive <var>R</var>.

        <p>Example of callback that sums the values in a vector's range:

     <pre class="example">          void
          callback (ucl_value_t state, ucl_value_t custom)
          {
            int * accumulator_p   = state.ptr;
            int * slot            = custom.ptr;
          
            *accumulator_p += *slot;
          }
          
          int             accumulator = 0;
          ucl_callback_t  cb = {
            .func = callback,
            .data = { .ptr = &amp;accumulator }
          };
          ucl_range_t     range;
          
          ucl_vector_t    V;
          ucl_range_set_min_max(range, 3, 8);
          ucl_vector_for_each_in_range(cb, range, V);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_for_each_multiple</b> (<var>ucl_callback_t cb, ucl_vector_t V, <small class="dots">...</small></var>)<var><a name="index-ucl_005fvector_005ffor_005feach_005fmultiple-425"></a></var><br>
<blockquote><p>Like <code>ucl_vector_for_each()</code>, but apply the callback to an array of
pointers to slots from the vectors used as arguments.

        <p>This function must be invoked with a list of <code>ucl_vector_t</code>
arguments ended by a <code>NULL</code>.

        <p>The callback function is invoked with a pointer to a
<code>ucl_array_of_pointers_t</code> structure as custom value:

          <dl>
<dt><code>ucl_value_t data</code><dd>the <code>t_unsigned_int</code> field is set to the index of the slot
currently visited;

          <br><dt><code>size_t number_of_slots</code><dd>the number of slots which is equal to the number of vectors used as
arguments;

          <br><dt><code>void ** slots</code><dd>a pointer to an array of pointers to the slots. 
</dl>

        <p>The iteration stops when the end of the shortest vector is found.

        <p>Example:

     <pre class="example">          static void
          callback (ucl_value_t state, ucl_value_t custom)
          {
            int *                         sums    = state.ptr;
            ucl_array_of_pointers_t *     slots   = custom.ptr;
            int **                        values  = (int **)slots-&gt;slots;
          
            for (size_t i=0; i&lt;slots-&gt;number_of_slots; ++i)
              sums[slots-&gt;data.unum] += *values[i];
          }
          
          int            sums[5] = { 0, 0, 0, 0, 0 };
          ucl_callback_t cb = {
            .func = callback,
            .data = { .ptr = &amp;sums }
          };
          
          ucl_vector_t   A, B, C;
          ucl_vector_for_each_multiple(cb, A, B, C, NULL);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_for_each_multiple_from_array</b> (<var>ucl_callback_t cb, ucl_vector_array_t * vectors</var>)<var><a name="index-ucl_005fvector_005ffor_005feach_005fmultiple_005ffrom_005farray-426"></a></var><br>
<blockquote><p>Like <code>ucl_vector_for_each_multiple()</code> but the vectors are given
in an array rather than a list of arguments. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_map</b> (<var>ucl_vector_t R, ucl_callback_t cb, ucl_vector_t V</var>)<var><a name="index-ucl_005fvector_005fmap-427"></a></var><br>
<blockquote><p>Apply the callback <var>cb</var> to each element in the vector <var>V</var> and
store the result in the vector <var>R</var>.  New slots are added to <var>R</var>
using <code>ucl_vector_push_back()</code>.

        <p>The callback function is invoked with a pointer to a
<code>ucl_array_of_pointers_t</code> structure as custom value:

          <dl>
<dt><code>ucl_value_t data</code><dd>the <code>t_unsigned_int</code> field is set to the index of the slot
currently visited;

          <br><dt><code>size_t number_of_slots</code><dd>the number of slots: always <code>2</code> for this function;

          <br><dt><code>void ** slots</code><dd>a pointer to an array of pointers to the slots; the first element
(<code>slots[0]</code>) references the result slot, while the second element
(<code>slots[1]</code>) references the operand slot. 
</dl>

        <p>Example of callback that negates the values:

     <pre class="example">          void
          callback (ucl_value_t state UCL_UNUSED, ucl_value_t custom)
          {
            ucl_array_of_pointers_t * slots   = custom.ptr;
            int *                     result  = slots.slots[0];
            int *                     operand = slots.slots[1];
          
            *result = - *operand;
          }
          
          ucl_callback_t  cb = {
            .func = callback,
            .data = { .ptr = NULL }
          };
          
          ucl_vector_t    result, operand;
          ucl_vector_map(result, cb, operand);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_map_range</b> (<var>ucl_vector_t dst, ucl_callback_t cb, ucl_range_t R, ucl_vector_t src</var>)<var><a name="index-ucl_005fvector_005fmap_005frange-428"></a></var><br>
<blockquote><p>Like <code>ucl_vector_map()</code>, but apply the callback only to the elements
selected by the inclusive <var>R</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_map_multiple</b> (<var>ucl_vector_t R, ucl_callback_t cb, ucl_vector_t first, ...</var>)<var><a name="index-ucl_005fvector_005fmap_005fmultiple-429"></a></var><br>
<blockquote><p>Like <code>ucl_vector_map()</code>, but apply the callback to an array of
pointers to slots from the vectors used as arguments.

        <p>The function must be invoked with a list of <code>ucl_vector_t</code>
arguments ended by <code>NULL</code>.

        <p>The callback function is invoked with a pointer to a
<code>ucl_array_of_pointers_t</code> structure as custom value:

          <dl>
<dt><code>ucl_value_t data</code><dd>the <code>t_unsigned_int</code> field is set to the index of the slot
currently visited;

          <br><dt><code>size_t number_of_slots</code><dd>the number of slots which is equal to 1 plus the number of vectors used
as arguments;

          <br><dt><code>void ** slots</code><dd>a pointer to an array of pointers to the slots; the first element
(<code>slots[0]</code>) references the result slots, while the following
elements (<code>slots[1]</code>, <code>slots[2]</code>, <small class="dots">...</small>) reference the
operands. 
</dl>

        <p>The iteration stops when the end of the shortest operand vector is
found.

        <p>Example of callback that computes the sum of vectors:

     <pre class="example">          static void
          callback (ucl_value_t state UCL_UNUSED, ucl_value_t custom)
          {
            ucl_array_of_pointers_t *  slots  = custom.ptr;
            int **                     values = (int **)slots-&gt;slots;
          
            *values[0] = 0;
            for (size_t i=1; i&lt;slots-&gt;number_of_slots; ++i)
              *values[0] += *values[i];
          }
          
          ucl_callback_t  cb = {
            .func = callback,
            .data = { .ptr = NULL }
          };
          
          ucl_vector_t    R, A, B, C;
          ucl_vector_map_multiple(R, cb, A, B, C, NULL);
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_vector_map_multiple_from_array</b> (<var>ucl_vector_t R, ucl_callback_t cb, ucl_vector_array_t * vectors</var>)<var><a name="index-ucl_005fvector_005fmap_005fmultiple_005ffrom_005farray-430"></a></var><br>
<blockquote><p>Like <code>ucl_vector_map_multiple()</code> but the vectors are given in an
array rather than a list of arguments. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="iterators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#misc">misc</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#containers">containers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Container iteration</h2>

<p class="noindent">Each container has its iteration constructors that must be invoked
explicitly, but the functions used to do the actual iterations and to
access the objects are accessed through a set of macros.

<div class="defun">
&mdash; Struct Typedef: <b>ucl_iterator_tag_t</b><var><a name="index-ucl_005fiterator_005ftag_005ft-431"></a></var><br>
&mdash; One&ndash;Element Array Typedef: <b>ucl_iterator_t</b><var><a name="index-ucl_005fiterator_005ft-432"></a></var><br>
<blockquote><p>Base structure for all the iterators. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ucl_bool_t <b>ucl_iterator_more</b> (<var>ucl_iterator_t iterator</var>)<var><a name="index-ucl_005fiterator_005fmore-433"></a></var><br>
<blockquote><p>Return true if there are more elements to iterate, false if the
iteration is over. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void <b>ucl_iterator_next</b> (<var>ucl_iterator_t iterator</var>)<var><a name="index-ucl_005fiterator_005fnext-434"></a></var><br>
<blockquote><p>Advance the iteration. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: void * <b>ucl_iterator_ptr</b> (<var>ucl_iterator_t iterator</var>)<var><a name="index-ucl_005fiterator_005fptr-435"></a></var><br>
<blockquote><p>Return a pointer referencing the current value.  If the iteration is
already over: return <code>NULL</code>. 
</p></blockquote></div>

<h3 class="section">6.1 Examples</h3>

<p class="noindent">Example of iterator usage:

<pre class="example">     ucl_value_t       val;
     ucl_iterator_t    iterator;
     ucl_map_link_t *  link_p;
     
     ...
     
     for (ucl_map_iterator_inorder(this, iterator);
          ucl_iterator_more(iterator);
          ucl_iterator_next(iterator))
       {
         link_p = ucl_iterator_ptr(iterator);
         val = ucl_map_getval(link_p);
       }
</pre>
   <!--  -->
<!-- page -->
<div class="node">
<a name="misc"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Package-License">Package License</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#iterators">iterators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Miscellaneous functions</h2>

<ul class="menu">
<li><a accesskey="1" href="#misc-version">misc version</a>:                 Version functions. 
<li><a accesskey="2" href="#misc-compar">misc compar</a>:                  Comparison functions. 
<li><a accesskey="3" href="#misc-sort">misc sort</a>:                    Sorting functions. 
</ul>

<!-- page -->
<div class="node">
<a name="misc-version"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#misc-compar">misc compar</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#misc">misc</a>

</div>

<h3 class="section">7.1 Version functions</h3>

<div class="defun">
&mdash; Function: const char * <b>ucl_version</b> (<var>void</var>)<var><a name="index-ucl_005fversion-436"></a></var><br>
<blockquote><p>Return a pointer to a string representing the version number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: unsigned <b>ucl_interface_major_version</b> (<var>void</var>)<var><a name="index-ucl_005finterface_005fmajor_005fversion-437"></a></var><br>
<blockquote><p>Return a number representing the library interface major version
number. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: unsigned <b>ucl_interface_minor_version</b> (<var>void</var>)<var><a name="index-ucl_005finterface_005fminor_005fversion-438"></a></var><br>
<blockquote><p>Return a number representing the library interface minor version
number. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="misc-compar"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#misc-sort">misc sort</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#misc-version">misc version</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#misc">misc</a>

</div>

<h3 class="section">7.2 Comparison functions</h3>

<p>All the following function have prototype matching
<code>ucl_comparison_fun_t</code>; for all of them <var>data</var> is unused and
the return value is: <code>0</code> if <var>a</var> equals <var>b</var>; <code>1</code> if
<var>a</var> is greater than <var>b</var>; <code>-1</code> if <var>a</var> is lesser than
<var>b</var>.

<div class="defun">
&mdash; Function: int <b>ucl_compare_int_fun</b> (<var>ucl_value_t data, const ucl_value_t a, const ucl_value_t b</var>)<var><a name="index-ucl_005fcompare_005fint_005ffun-439"></a></var><br>
<blockquote><p>Compare the <code>t_int</code> fields of two values. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_compare_unsigned_int_fun</b> (<var>ucl_value_t data, const ucl_value_t a, const ucl_value_t b</var>)<var><a name="index-ucl_005fcompare_005funsigned_005fint_005ffun-440"></a></var><br>
<blockquote><p>Compare the <code>unum</code> fields of two values. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_compare_string_fun</b> (<var>ucl_value_t data, const ucl_value_t a, const ucl_value_t b</var>)<var><a name="index-ucl_005fcompare_005fstring_005ffun-441"></a></var><br>
<blockquote><p>Wrapper for <code>strcmp()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: int <b>ucl_compare_int_pointer_fun</b> (<var>ucl_value_t data, const ucl_value_t a, const ucl_value_t b</var>)<var><a name="index-ucl_005fcompare_005fint_005fpointer_005ffun-442"></a></var><br>
<blockquote><p>Interpret the <code>ptr</code> fields of <var>a</var> and <var>b</var> as pointers of
type <code>int</code>: compare the two referenced numbers by invoking
<code>ucl_compare_int()</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: const ucl_comparison_t <b>ucl_compare_int</b><var><a name="index-ucl_005fcompare_005fint-443"></a></var><br>
&mdash; Variable: const ucl_comparison_t <b>ucl_compare_unsigned_int</b><var><a name="index-ucl_005fcompare_005funsigned_005fint-444"></a></var><br>
&mdash; Variable: const ucl_comparison_t <b>ucl_compare_string</b><var><a name="index-ucl_005fcompare_005fstring-445"></a></var><br>
&mdash; Variable: const ucl_comparison_t <b>ucl_compare_int_pointer</b><var><a name="index-ucl_005fcompare_005fint_005fpointer-446"></a></var><br>
<blockquote><p>Statically allocated comparison structures which use the comparison
functions described above. 
</p></blockquote></div>

<!-- page -->
<div class="node">
<a name="misc-sort"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#misc-compar">misc compar</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#misc">misc</a>

</div>

<h3 class="section">7.3 Sorting functions</h3>

<div class="defun">
&mdash; Function: void <b>ucl_quicksort</b> (<var>void * array, size_t count, size_t size, ucl_comparison_t compar</var>)<var><a name="index-ucl_005fquicksort-447"></a></var><br>
<blockquote><p>Like the standard <code>qsort()</code>, but makes use of the comparison
function and context in <var>compar</var>.  <var>array</var> is an array of
<var>count</var> elements of <var>size</var>.

        <blockquote>
<strong>NOTE</strong> This is indeed the <code>qsort()</code> function from the <acronym>GNU</acronym>
C Library version 2.4, modified to use <var>compar</var>. 
</blockquote>
        </p></blockquote></div>

<!-- page -->
<div class="node">
<a name="references"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#concept-index">concept index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Documentation-License">Documentation License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A Bibliography and references</h2>

<p class="noindent">Ellis Horowitz, Sartaj  Sahni and Susan Anderson&ndash;Freed.  <em>Strutture
dati in C</em>.  McGraw&ndash;Hill, 1993.

<p class="noindent">Bjarne Stroustroup.  <em>C++</em>.  Addison-Wesley, 1997.

<!-- page -->
<div class="node">
<a name="Package-License"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Documentation-License">Documentation License</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#misc">misc</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B <acronym>GNU</acronym> General Public License</h2>

<!-- The GNU General Public License. -->
<div align="center">Version 3, 29 June 2007</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright &copy; 2007 Free Software Foundation, Inc. <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies of this
     license document, but changing it is not allowed.
</pre>
   <h3 class="heading">Preamble</h3>

<p>The GNU General Public License is a free, copyleft license for
software and other kinds of works.

   <p>The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom
to share and change all versions of a program&mdash;to make sure it remains
free software for all its users.  We, the Free Software Foundation,
use the GNU General Public License for most of our software; it
applies also to any other work released this way by its authors.  You
can apply it to your programs, too.

   <p>When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

   <p>To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you
have certain responsibilities if you distribute copies of the
software, or if you modify it: responsibilities to respect the freedom
of others.

   <p>For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too,
receive or can get the source code.  And you must show them these
terms so they know their rights.

   <p>Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.

   <p>For the developers' and authors' protection, the GPL clearly explains
that there is no warranty for this free software.  For both users' and
authors' sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.

   <p>Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the
manufacturer can do so.  This is fundamentally incompatible with the
aim of protecting users' freedom to change the software.  The
systematic pattern of such abuse occurs in the area of products for
individuals to use, which is precisely where it is most unacceptable. 
Therefore, we have designed this version of the GPL to prohibit the
practice for those products.  If such problems arise substantially in
other domains, we stand ready to extend this provision to those
domains in future versions of the GPL, as needed to protect the
freedom of users.

   <p>Finally, every program is threatened constantly by software patents. 
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish
to avoid the special danger that patents applied to a free program
could make it effectively proprietary.  To prevent this, the GPL
assures that patents cannot be used to render the program non-free.

   <p>The precise terms and conditions for copying, distribution and
modification follow.

<h3 class="heading">TERMS AND CONDITIONS</h3>

     <ol type=1 start=0>
<li>Definitions.

     <p>&ldquo;This License&rdquo; refers to version 3 of the GNU General Public License.

     <p>&ldquo;Copyright&rdquo; also means copyright-like laws that apply to other kinds
of works, such as semiconductor masks.

     <p>&ldquo;The Program&rdquo; refers to any copyrightable work licensed under this
License.  Each licensee is addressed as &ldquo;you&rdquo;.  &ldquo;Licensees&rdquo; and
&ldquo;recipients&rdquo; may be individuals or organizations.

     <p>To &ldquo;modify&rdquo; a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of
an exact copy.  The resulting work is called a &ldquo;modified version&rdquo; of
the earlier work or a work &ldquo;based on&rdquo; the earlier work.

     <p>A &ldquo;covered work&rdquo; means either the unmodified Program or a work based
on the Program.

     <p>To &ldquo;propagate&rdquo; a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

     <p>To &ldquo;convey&rdquo; a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user
through a computer network, with no transfer of a copy, is not
conveying.

     <p>An interactive user interface displays &ldquo;Appropriate Legal Notices&rdquo; to
the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

     <li>Source Code.

     <p>The &ldquo;source code&rdquo; for a work means the preferred form of the work for
making modifications to it.  &ldquo;Object code&rdquo; means any non-source form
of a work.

     <p>A &ldquo;Standard Interface&rdquo; means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

     <p>The &ldquo;System Libraries&rdquo; of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
&ldquo;Major Component&rdquo;, in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

     <p>The &ldquo;Corresponding Source&rdquo; for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

     <p>The Corresponding Source need not include anything that users can
regenerate automatically from other parts of the Corresponding Source.

     <p>The Corresponding Source for a work in source code form is that same
work.

     <li>Basic Permissions.

     <p>All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

     <p>You may make, run and propagate covered works that you do not convey,
without conditions so long as your license otherwise remains in force. 
You may convey covered works to others for the sole purpose of having
them make modifications exclusively for you, or provide you with
facilities for running those works, provided that you comply with the
terms of this License in conveying all material for which you do not
control copyright.  Those thus making or running the covered works for
you must do so exclusively on your behalf, under your direction and
control, on terms that prohibit them from making any copies of your
copyrighted material outside their relationship with you.

     <p>Conveying under any other circumstances is permitted solely under the
conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

     <li>Protecting Users' Legal Rights From Anti-Circumvention Law.

     <p>No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

     <p>When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such
circumvention is effected by exercising rights under this License with
respect to the covered work, and you disclaim any intention to limit
operation or modification of the work as a means of enforcing, against
the work's users, your or third parties' legal rights to forbid
circumvention of technological measures.

     <li>Conveying Verbatim Copies.

     <p>You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

     <p>You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

     <li>Conveying Modified Source Versions.

     <p>You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these
conditions:

          <ol type=a start=1>
<li>The work must carry prominent notices stating that you modified it,
and giving a relevant date.

          <li>The work must carry prominent notices stating that it is released
under this License and any conditions added under section 7.  This
requirement modifies the requirement in section 4 to &ldquo;keep intact all
notices&rdquo;.

          <li>You must license the entire work, as a whole, under this License to
anyone who comes into possession of a copy.  This License will
therefore apply, along with any applicable section 7 additional terms,
to the whole of the work, and all its parts, regardless of how they
are packaged.  This License gives no permission to license the work in
any other way, but it does not invalidate such permission if you have
separately received it.

          <li>If the work has interactive user interfaces, each must display
Appropriate Legal Notices; however, if the Program has interactive
interfaces that do not display Appropriate Legal Notices, your work
need not make them do so.
          </ol>

     <p>A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
&ldquo;aggregate&rdquo; if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

     <li>Conveying Non-Source Forms.

     <p>You may convey a covered work in object code form under the terms of
sections 4 and 5, provided that you also convey the machine-readable
Corresponding Source under the terms of this License, in one of these
ways:

          <ol type=a start=1>
<li>Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by the
Corresponding Source fixed on a durable physical medium customarily
used for software interchange.

          <li>Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by a written
offer, valid for at least three years and valid for as long as you
offer spare parts or customer support for that product model, to give
anyone who possesses the object code either (1) a copy of the
Corresponding Source for all the software in the product that is
covered by this License, on a durable physical medium customarily used
for software interchange, for a price no more than your reasonable
cost of physically performing this conveying of source, or (2) access
to copy the Corresponding Source from a network server at no charge.

          <li>Convey individual copies of the object code with a copy of the written
offer to provide the Corresponding Source.  This alternative is
allowed only occasionally and noncommercially, and only if you
received the object code with such an offer, in accord with subsection
6b.

          <li>Convey the object code by offering access from a designated place
(gratis or for a charge), and offer equivalent access to the
Corresponding Source in the same way through the same place at no
further charge.  You need not require recipients to copy the
Corresponding Source along with the object code.  If the place to copy
the object code is a network server, the Corresponding Source may be
on a different server (operated by you or a third party) that supports
equivalent copying facilities, provided you maintain clear directions
next to the object code saying where to find the Corresponding Source. 
Regardless of what server hosts the Corresponding Source, you remain
obligated to ensure that it is available for as long as needed to
satisfy these requirements.

          <li>Convey the object code using peer-to-peer transmission, provided you
inform other peers where the object code and Corresponding Source of
the work are being offered to the general public at no charge under
subsection 6d.

          </ol>

     <p>A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

     <p>A &ldquo;User Product&rdquo; is either (1) a &ldquo;consumer product&rdquo;, which means any
tangible personal property which is normally used for personal,
family, or household purposes, or (2) anything designed or sold for
incorporation into a dwelling.  In determining whether a product is a
consumer product, doubtful cases shall be resolved in favor of
coverage.  For a particular product received by a particular user,
&ldquo;normally used&rdquo; refers to a typical or common use of that class of
product, regardless of the status of the particular user or of the way
in which the particular user actually uses, or expects or is expected
to use, the product.  A product is a consumer product regardless of
whether the product has substantial commercial, industrial or
non-consumer uses, unless such uses represent the only significant
mode of use of the product.

     <p>&ldquo;Installation Information&rdquo; for a User Product means any methods,
procedures, authorization keys, or other information required to
install and execute modified versions of a covered work in that User
Product from a modified version of its Corresponding Source.  The
information must suffice to ensure that the continued functioning of
the modified object code is in no case prevented or interfered with
solely because modification has been made.

     <p>If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

     <p>The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or
updates for a work that has been modified or installed by the
recipient, or for the User Product in which it has been modified or
installed.  Access to a network may be denied when the modification
itself materially and adversely affects the operation of the network
or violates the rules and protocols for communication across the
network.

     <p>Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

     <li>Additional Terms.

     <p>&ldquo;Additional permissions&rdquo; are terms that supplement the terms of this
License by making exceptions from one or more of its conditions. 
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

     <p>When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

     <p>Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders
of that material) supplement the terms of this License with terms:

          <ol type=a start=1>
<li>Disclaiming warranty or limiting liability differently from the terms
of sections 15 and 16 of this License; or

          <li>Requiring preservation of specified reasonable legal notices or author
attributions in that material or in the Appropriate Legal Notices
displayed by works containing it; or

          <li>Prohibiting misrepresentation of the origin of that material, or
requiring that modified versions of such material be marked in
reasonable ways as different from the original version; or

          <li>Limiting the use for publicity purposes of names of licensors or
authors of the material; or

          <li>Declining to grant rights under trademark law for use of some trade
names, trademarks, or service marks; or

          <li>Requiring indemnification of licensors and authors of that material by
anyone who conveys the material (or modified versions of it) with
contractual assumptions of liability to the recipient, for any
liability that these contractual assumptions directly impose on those
licensors and authors.
          </ol>

     <p>All other non-permissive additional terms are considered &ldquo;further
restrictions&rdquo; within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

     <p>If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

     <p>Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions; the
above requirements apply either way.

     <li>Termination.

     <p>You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

     <p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     <p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     <p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

     <li>Acceptance Not Required for Having Copies.

     <p>You are not required to accept this License in order to receive or run
a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

     <li>Automatic Licensing of Downstream Recipients.

     <p>Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

     <p>An &ldquo;entity transaction&rdquo; is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

     <p>You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

     <li>Patents.

     <p>A &ldquo;contributor&rdquo; is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's &ldquo;contributor version&rdquo;.

     <p>A contributor's &ldquo;essential patent claims&rdquo; are all patent claims owned
or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, &ldquo;control&rdquo; includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

     <p>Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

     <p>In the following three paragraphs, a &ldquo;patent license&rdquo; is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To &ldquo;grant&rdquo; such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

     <p>If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  &ldquo;Knowingly relying&rdquo; means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

     <p>If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

     <p>A patent license is &ldquo;discriminatory&rdquo; if it does not include within the
scope of its coverage, prohibits the exercise of, or is conditioned on
the non-exercise of one or more of the rights that are specifically
granted under this License.  You may not convey a covered work if you
are a party to an arrangement with a third party that is in the
business of distributing software, under which you make payment to the
third party based on the extent of your activity of conveying the
work, and under which the third party grants, to any of the parties
who would receive the covered work from you, a discriminatory patent
license (a) in connection with copies of the covered work conveyed by
you (or copies made from those copies), or (b) primarily for and in
connection with specific products or compilations that contain the
covered work, unless you entered into that arrangement, or that patent
license was granted, prior to 28 March 2007.

     <p>Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

     <li>No Surrender of Others' Freedom.

     <p>If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey
a covered work so as to satisfy simultaneously your obligations under
this License and any other pertinent obligations, then as a
consequence you may not convey it at all.  For example, if you agree
to terms that obligate you to collect a royalty for further conveying
from those to whom you convey the Program, the only way you could
satisfy both those terms and this License would be to refrain entirely
from conveying the Program.

     <li>Use with the GNU Affero General Public License.

     <p>Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.

     <li>Revised Versions of this License.

     <p>The Free Software Foundation may publish revised and/or new versions
of the GNU General Public License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.

     <p>Each version is given a distinguishing version number.  If the Program
specifies that a certain numbered version of the GNU General Public
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that numbered version or
of any later version published by the Free Software Foundation.  If
the Program does not specify a version number of the GNU General
Public License, you may choose any version ever published by the Free
Software Foundation.

     <p>If the Program specifies that a proxy can decide which future versions
of the GNU General Public License can be used, that proxy's public
statement of acceptance of a version permanently authorizes you to
choose that version for the Program.

     <p>Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

     <li>Disclaimer of Warranty.

     <p>THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM &ldquo;AS IS&rdquo; WITHOUT
WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND
PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE
DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR
CORRECTION.

     <li>Limitation of Liability.

     <p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR
CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT
NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR
LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM
TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER
PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

     <li>Interpretation of Sections 15 and 16.

     <p>If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

     </ol>

<h3 class="heading">END OF TERMS AND CONDITIONS</h3>

<h3 class="heading">How to Apply These Terms to Your New Programs</h3>

<p>If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these
terms.

   <p>To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the &ldquo;copyright&rdquo; line and a pointer to where the full notice is found.

<pre class="smallexample">     <var>one line to give the program's name and a brief idea of what it does.</var>
     Copyright (C) <var>year</var> <var>name of author</var>
     
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
     the Free Software Foundation, either version 3 of the License, or (at
     your option) any later version.
     
     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.
     
     You should have received a copy of the GNU General Public License
     along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
</pre>
   <p>Also add information on how to contact you by electronic and paper mail.

   <p>If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:

<pre class="smallexample">     <var>program</var> Copyright (C) <var>year</var> <var>name of author</var>
     This program comes with ABSOLUTELY NO WARRANTY; for details type &lsquo;<samp><span class="samp">show w</span></samp>&rsquo;.
     This is free software, and you are welcome to redistribute it
     under certain conditions; type &lsquo;<samp><span class="samp">show c</span></samp>&rsquo; for details.
</pre>
   <p>The hypothetical commands &lsquo;<samp><span class="samp">show w</span></samp>&rsquo; and &lsquo;<samp><span class="samp">show c</span></samp>&rsquo; should show
the appropriate parts of the General Public License.  Of course, your
program's commands might be different; for a GUI interface, you would
use an &ldquo;about box&rdquo;.

   <p>You should also get your employer (if you work as a programmer) or school,
if any, to sign a &ldquo;copyright disclaimer&rdquo; for the program, if necessary. 
For more information on this, and how to apply and follow the GNU GPL, see
<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.

   <p>The GNU General Public License does not permit incorporating your
program into proprietary programs.  If your program is a subroutine
library, you may consider it more useful to permit linking proprietary
applications with the library.  If this is what you want to do, use
the GNU Lesser General Public License instead of this License.  But
first, please read <a href="http://www.gnu.org/philosophy/why-not-lgpl.html">http://www.gnu.org/philosophy/why-not-lgpl.html</a>.

<div class="node">
<a name="Documentation-License"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#references">references</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Package-License">Package License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix C GNU Free Documentation License</h2>

<p><a name="index-FDL_002c-GNU-Free-Documentation-License-448"></a><div align="center">Version 1.3, 3 November 2008</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type=1 start=0>
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     <li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.

     <p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.

     <p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

          <li>Preserve any Warranty Disclaimers.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     <p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

     <p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     <p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     <p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

     <li>RELICENSING

     <p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.

     <p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

     <p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.

     <p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

     <p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

        </ol>

<h3 class="heading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with<small class="dots">...</small>Texts.&rdquo; line with this:

<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<!-- page -->
<div class="node">
<a name="concept-index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#function-index">function index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#references">references</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix D An entry for each concept</h2>

<ul class="index-cp" compact>
<li><a href="#index-Binary-heap-container-190">Binary heap container</a>: <a href="#heap">heap</a></li>
<li><a href="#index-Binary-tree-container-85">Binary tree container</a>: <a href="#btree">btree</a></li>
<li><a href="#index-Circular-list-199">Circular list</a>: <a href="#circular">circular</a></li>
<li><a href="#index-FDL_002c-GNU-Free-Documentation-License-448">FDL, GNU Free Documentation License</a>: <a href="#Documentation-License">Documentation License</a></li>
<li><a href="#index-Hash-table-container-253">Hash table container</a>: <a href="#hash">hash</a></li>
<li><a href="#index-Heap-container-189">Heap container</a>: <a href="#heap">heap</a></li>
<li><a href="#index-Map-container-298">Map container</a>: <a href="#map">map</a></li>
<li><a href="#index-Set-iterators-322">Set iterators</a>: <a href="#map-set">map set</a></li>
<li><a href="#index-Vector-container-327">Vector container</a>: <a href="#vector">vector</a></li>
</ul><div class="node">
<a name="function-index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#type-index">type index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#concept-index">concept index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix E An entry for each function</h2>



<ul class="index-fn" compact>
<li><a href="#index-g_t_002a-314"><code>*</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fascii_005falloc-35"><code>ucl_ascii_alloc</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005fclean_005fmemory-31"><code>ucl_ascii_clean_memory</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005fconst-28"><code>ucl_ascii_const</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005ffree-37"><code>ucl_ascii_free</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005ffrom_005fblock-34"><code>ucl_ascii_from_block</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005fis_005fnull-29"><code>ucl_ascii_is_null</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005fis_005fterminated-30"><code>ucl_ascii_is_terminated</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005frealloc-36"><code>ucl_ascii_realloc</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005freset-27"><code>ucl_ascii_reset</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005fset-26"><code>ucl_ascii_set</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005fterminate-32"><code>ucl_ascii_terminate</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fblock_005falloc-13"><code>ucl_block_alloc</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005fclean_005fmemory-19"><code>ucl_block_clean_memory</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005fdifference-22"><code>ucl_block_difference</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005ffree-15"><code>ucl_block_free</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005ffrom_005fascii-33"><code>ucl_block_from_ascii</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fblock_005fis_005fnull-18"><code>ucl_block_is_null</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005frealloc-14"><code>ucl_block_realloc</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005freset-17"><code>ucl_block_reset</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005fset-16"><code>ucl_block_set</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005fshift-21"><code>ucl_block_shift</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fblock_005fshift_005fx-20"><code>ucl_block_shift_x</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fbst_005fdelete-153"><code>ucl_bst_delete</code></a>: <a href="#btree-bst">btree bst</a></li>
<li><a href="#index-ucl_005fbst_005ffind-152"><code>ucl_bst_find</code></a>: <a href="#btree-bst">btree bst</a></li>
<li><a href="#index-ucl_005fbst_005finsert-151"><code>ucl_bst_insert</code></a>: <a href="#btree-bst">btree bst</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005fdepth-158"><code>ucl_btree_avl_depth</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005ffactor-159"><code>ucl_btree_avl_factor</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005fis_005fbalanced-160"><code>ucl_btree_avl_is_balanced</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005fis_005fcorrect-161"><code>ucl_btree_avl_is_correct</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005frot_005fleft-154"><code>ucl_btree_avl_rot_left</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005frot_005fleft_005fright-156"><code>ucl_btree_avl_rot_left_right</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005frot_005fright-155"><code>ucl_btree_avl_rot_right</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005favl_005frot_005fright_005fleft-157"><code>ucl_btree_avl_rot_right_left</code></a>: <a href="#btree-avl">btree avl</a></li>
<li><a href="#index-ucl_005fbtree_005fclean-105"><code>ucl_btree_clean</code></a>: <a href="#btree-removing">btree removing</a></li>
<li><a href="#index-ucl_005fbtree_005fdata-98"><code>ucl_btree_data</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fdepth-101"><code>ucl_btree_depth</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fdetach_005fbro-103"><code>ucl_btree_detach_bro</code></a>: <a href="#btree-removing">btree removing</a></li>
<li><a href="#index-ucl_005fbtree_005fdetach_005fdad-104"><code>ucl_btree_detach_dad</code></a>: <a href="#btree-removing">btree removing</a></li>
<li><a href="#index-ucl_005fbtree_005fdetach_005fson-102"><code>ucl_btree_detach_son</code></a>: <a href="#btree-removing">btree removing</a></li>
<li><a href="#index-ucl_005fbtree_005ffind_005fdeepest_005fbro-113"><code>ucl_btree_find_deepest_bro</code></a>: <a href="#btree-visitors">btree visitors</a></li>
<li><a href="#index-ucl_005fbtree_005ffind_005fdeepest_005fson-112"><code>ucl_btree_find_deepest_son</code></a>: <a href="#btree-visitors">btree visitors</a></li>
<li><a href="#index-ucl_005fbtree_005ffind_005fleftmost-110"><code>ucl_btree_find_leftmost</code></a>: <a href="#btree-visitors">btree visitors</a></li>
<li><a href="#index-ucl_005fbtree_005ffind_005frightmost-111"><code>ucl_btree_find_rightmost</code></a>: <a href="#btree-visitors">btree visitors</a></li>
<li><a href="#index-ucl_005fbtree_005ffind_005froot-114"><code>ucl_btree_find_root</code></a>: <a href="#btree-visitors">btree visitors</a></li>
<li><a href="#index-ucl_005fbtree_005ffind_005fvalue-106"><code>ucl_btree_find_value</code></a>: <a href="#btree-find">btree find</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005finorder-115"><code>ucl_btree_first_inorder</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005finorder_005fbackward-116"><code>ucl_btree_first_inorder_backward</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005flevelorder-145"><code>ucl_btree_first_levelorder</code></a>: <a href="#btree-breadth-first">btree breadth first</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005flevelorder_005fbackward-146"><code>ucl_btree_first_levelorder_backward</code></a>: <a href="#btree-breadth-first">btree breadth first</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005fpostorder-135"><code>ucl_btree_first_postorder</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005fpostorder_005fbackward-136"><code>ucl_btree_first_postorder_backward</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005fpreorder-125"><code>ucl_btree_first_preorder</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005ffirst_005fpreorder_005fbackward-126"><code>ucl_btree_first_preorder_backward</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fis_005fleaf-99"><code>ucl_btree_is_leaf</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fis_005froot-100"><code>ucl_btree_is_root</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005finorder-119"><code>ucl_btree_iterator_inorder</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005finorder_005fbackward-120"><code>ucl_btree_iterator_inorder_backward</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005flevelorder-149"><code>ucl_btree_iterator_levelorder</code></a>: <a href="#btree-breadth-first">btree breadth first</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005flevelorder_005fbackward-150"><code>ucl_btree_iterator_levelorder_backward</code></a>: <a href="#btree-breadth-first">btree breadth first</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005fpostorder-139"><code>ucl_btree_iterator_postorder</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005fpostorder_005fbackward-140"><code>ucl_btree_iterator_postorder_backward</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005fpreorder-129"><code>ucl_btree_iterator_preorder</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fiterator_005fpreorder_005fbackward-130"><code>ucl_btree_iterator_preorder_backward</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005frange_005fiterator_005finorder-123"><code>ucl_btree_range_iterator_inorder</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005frange_005fiterator_005finorder_005fbackward-124"><code>ucl_btree_range_iterator_inorder_backward</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005frange_005fiterator_005fpostorder-143"><code>ucl_btree_range_iterator_postorder</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005frange_005fiterator_005fpostorder_005fbackward-144"><code>ucl_btree_range_iterator_postorder_backward</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005frange_005fiterator_005fpreorder-133"><code>ucl_btree_range_iterator_preorder</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005frange_005fiterator_005fpreorder_005fbackward-134"><code>ucl_btree_range_iterator_preorder_backward</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fref_005fbro-96"><code>ucl_btree_ref_bro</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fref_005fdad-95"><code>ucl_btree_ref_dad</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fref_005fson-97"><code>ucl_btree_ref_son</code></a>: <a href="#btree-inspection">btree inspection</a></li>
<li><a href="#index-ucl_005fbtree_005fset_005fbro-90"><code>ucl_btree_set_bro</code></a>: <a href="#btree-creation">btree creation</a></li>
<li><a href="#index-ucl_005fbtree_005fset_005fdad-89"><code>ucl_btree_set_dad</code></a>: <a href="#btree-creation">btree creation</a></li>
<li><a href="#index-ucl_005fbtree_005fset_005fdadbro-93"><code>ucl_btree_set_dadbro</code></a>: <a href="#btree-creation">btree creation</a></li>
<li><a href="#index-ucl_005fbtree_005fset_005fdadson-92"><code>ucl_btree_set_dadson</code></a>: <a href="#btree-creation">btree creation</a></li>
<li><a href="#index-ucl_005fbtree_005fset_005fdadsonbro-94"><code>ucl_btree_set_dadsonbro</code></a>: <a href="#btree-creation">btree creation</a></li>
<li><a href="#index-ucl_005fbtree_005fset_005fson-91"><code>ucl_btree_set_son</code></a>: <a href="#btree-creation">btree creation</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005finorder-117"><code>ucl_btree_step_inorder</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005finorder_005fbackward-118"><code>ucl_btree_step_inorder_backward</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005flevelorder-147"><code>ucl_btree_step_levelorder</code></a>: <a href="#btree-breadth-first">btree breadth first</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005flevelorder_005fbackward-148"><code>ucl_btree_step_levelorder_backward</code></a>: <a href="#btree-breadth-first">btree breadth first</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005fpostorder-137"><code>ucl_btree_step_postorder</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005fpostorder_005fbackward-138"><code>ucl_btree_step_postorder_backward</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005fpreorder-127"><code>ucl_btree_step_preorder</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fstep_005fpreorder_005fbackward-128"><code>ucl_btree_step_preorder_backward</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fsubtree_005fiterator_005finorder-121"><code>ucl_btree_subtree_iterator_inorder</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fsubtree_005fiterator_005finorder_005fbackward-122"><code>ucl_btree_subtree_iterator_inorder_backward</code></a>: <a href="#btree-inorder-iteration">btree inorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fsubtree_005fiterator_005fpostorder-141"><code>ucl_btree_subtree_iterator_postorder</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fsubtree_005fiterator_005fpostorder_005fbackward-142"><code>ucl_btree_subtree_iterator_postorder_backward</code></a>: <a href="#btree-postorder-iteration">btree postorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fsubtree_005fiterator_005fpreorder-131"><code>ucl_btree_subtree_iterator_preorder</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fsubtree_005fiterator_005fpreorder_005fbackward-132"><code>ucl_btree_subtree_iterator_preorder_backward</code></a>: <a href="#btree-preorder-iteration">btree preorder iteration</a></li>
<li><a href="#index-ucl_005fbtree_005fswap-108"><code>ucl_btree_swap</code></a>: <a href="#btree-swap">btree swap</a></li>
<li><a href="#index-ucl_005fbtree_005fswap_005fno_005fmeta-109"><code>ucl_btree_swap_no_meta</code></a>: <a href="#btree-swap">btree swap</a></li>
<li><a href="#index-ucl_005fbtree_005fswap_005fout-107"><code>ucl_btree_swap_out</code></a>: <a href="#btree-swap">btree swap</a></li>
<li><a href="#index-ucl_005fcallback_005fapply-79"><code>ucl_callback_apply</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcallback_005fapply_005ffun_005ft-81"><code>ucl_callback_apply_fun_t</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcallback_005feval_005fthunk-80"><code>ucl_callback_eval_thunk</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcallback_005ffun_005ft-77"><code>ucl_callback_fun_t</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcallback_005fis_005fpresent-78"><code>ucl_callback_is_present</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcallback_005fset_005fapplication_005ffunction-82"><code>ucl_callback_set_application_function</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcircular_005fbackward-207"><code>ucl_circular_backward</code></a>: <a href="#circular-moving">circular moving</a></li>
<li><a href="#index-ucl_005fcircular_005fconstructor-202"><code>ucl_circular_constructor</code></a>: <a href="#circular-creation">circular creation</a></li>
<li><a href="#index-ucl_005fcircular_005fcurrent-211"><code>ucl_circular_current</code></a>: <a href="#circular-ops">circular ops</a></li>
<li><a href="#index-ucl_005fcircular_005fdestructor-203"><code>ucl_circular_destructor</code></a>: <a href="#circular-creation">circular creation</a></li>
<li><a href="#index-ucl_005fcircular_005fextract-205"><code>ucl_circular_extract</code></a>: <a href="#circular-removing">circular removing</a></li>
<li><a href="#index-ucl_005fcircular_005ffind-209"><code>ucl_circular_find</code></a>: <a href="#circular-search">circular search</a></li>
<li><a href="#index-ucl_005fcircular_005fforward-206"><code>ucl_circular_forward</code></a>: <a href="#circular-moving">circular moving</a></li>
<li><a href="#index-ucl_005fcircular_005finsert-204"><code>ucl_circular_insert</code></a>: <a href="#circular-adding">circular adding</a></li>
<li><a href="#index-ucl_005fcircular_005fset_005fcompar-208"><code>ucl_circular_set_compar</code></a>: <a href="#circular-search">circular search</a></li>
<li><a href="#index-ucl_005fcircular_005fsize-210"><code>ucl_circular_size</code></a>: <a href="#circular-ops">circular ops</a></li>
<li><a href="#index-ucl_005fcompare_005fint_005ffun-439"><code>ucl_compare_int_fun</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcompare_005fint_005fpointer_005ffun-442"><code>ucl_compare_int_pointer_fun</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcompare_005fstring_005ffun-441"><code>ucl_compare_string_fun</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcompare_005funsigned_005fint_005ffun-440"><code>ucl_compare_unsigned_int_fun</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcomparison_005ffun_005ft-72"><code>ucl_comparison_fun_t</code></a>: <a href="#typedefs-compar">typedefs compar</a></li>
<li><a href="#index-ucl_005ffree-11"><code>ucl_free</code></a>: <a href="#memory-functions">memory functions</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs-252"><code>ucl_graph_dfs</code></a>: <a href="#graph-dfs-api">graph dfs api</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs_005fdirected-251"><code>ucl_graph_dfs_directed</code></a>: <a href="#graph-dfs-api">graph dfs api</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs_005ffinalise_005fhandle-250"><code>ucl_graph_dfs_finalise_handle</code></a>: <a href="#graph-dfs-api">graph dfs api</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs_005finitialise_005fhandle-249"><code>ucl_graph_dfs_initialise_handle</code></a>: <a href="#graph-dfs-api">graph dfs api</a></li>
<li><a href="#index-ucl_005fgraph_005ferase_005fnode_005fdestroy_005flinks-223"><code>ucl_graph_erase_node_destroy_links</code></a>: <a href="#graph-extract">graph extract</a></li>
<li><a href="#index-ucl_005fgraph_005ffirst_005finput_005flink-239"><code>ucl_graph_first_input_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-UCL_005fGRAPH_005fFIRST_005fINPUT_005fLINK_005fLOOP-221"><code>UCL_GRAPH_FIRST_INPUT_LINK_LOOP</code></a>: <a href="#graph-extract">graph extract</a></li>
<li><a href="#index-ucl_005fgraph_005ffirst_005foutput_005flink-238"><code>ucl_graph_first_output_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-UCL_005fGRAPH_005fFIRST_005fOUTPUT_005fLINK_005fLOOP-222"><code>UCL_GRAPH_FIRST_OUTPUT_LINK_LOOP</code></a>: <a href="#graph-extract">graph extract</a></li>
<li><a href="#index-ucl_005fgraph_005finput_005flink-234"><code>ucl_graph_input_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-UCL_005fGRAPH_005fINPUT_005fLINKS_005fLOOP-233"><code>UCL_GRAPH_INPUT_LINKS_LOOP</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005flast_005finput_005flink-237"><code>ucl_graph_last_input_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005flast_005foutput_005flink-236"><code>ucl_graph_last_output_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005flink-216"><code>ucl_graph_link</code></a>: <a href="#graph-insert">graph insert</a></li>
<li><a href="#index-ucl_005fgraph_005flink_005fget_005fvalue-229"><code>ucl_graph_link_get_value</code></a>: <a href="#graph-value">graph value</a></li>
<li><a href="#index-ucl_005fgraph_005flink_005fset_005fvalue-227"><code>ucl_graph_link_set_value</code></a>: <a href="#graph-value">graph value</a></li>
<li><a href="#index-ucl_005fgraph_005fmerge_005fupon_005finput_005flink-224"><code>ucl_graph_merge_upon_input_link</code></a>: <a href="#graph-merge">graph merge</a></li>
<li><a href="#index-ucl_005fgraph_005fmerge_005fupon_005foutput_005flink-225"><code>ucl_graph_merge_upon_output_link</code></a>: <a href="#graph-merge">graph merge</a></li>
<li><a href="#index-ucl_005fgraph_005fnext_005finput_005flink-242"><code>ucl_graph_next_input_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005fnext_005foutput_005flink-243"><code>ucl_graph_next_output_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005fnode_005fget_005fmark-231"><code>ucl_graph_node_get_mark</code></a>: <a href="#graph-value">graph value</a></li>
<li><a href="#index-ucl_005fgraph_005fnode_005fget_005fvalue-228"><code>ucl_graph_node_get_value</code></a>: <a href="#graph-value">graph value</a></li>
<li><a href="#index-ucl_005fgraph_005fnode_005fset_005fmark-230"><code>ucl_graph_node_set_mark</code></a>: <a href="#graph-value">graph value</a></li>
<li><a href="#index-ucl_005fgraph_005fnode_005fset_005fvalue-226"><code>ucl_graph_node_set_value</code></a>: <a href="#graph-value">graph value</a></li>
<li><a href="#index-ucl_005fgraph_005fnodes_005fare_005fconnected-219"><code>ucl_graph_nodes_are_connected</code></a>: <a href="#graph-insert">graph insert</a></li>
<li><a href="#index-ucl_005fgraph_005fnodes_005fare_005flinked-217"><code>ucl_graph_nodes_are_linked</code></a>: <a href="#graph-insert">graph insert</a></li>
<li><a href="#index-ucl_005fgraph_005fnodes_005fdoubly_005flinked-218"><code>ucl_graph_nodes_doubly_linked</code></a>: <a href="#graph-insert">graph insert</a></li>
<li><a href="#index-ucl_005fgraph_005fnumber_005fof_005finput_005flinks-244"><code>ucl_graph_number_of_input_links</code></a>: <a href="#graph-ops">graph ops</a></li>
<li><a href="#index-ucl_005fgraph_005fnumber_005fof_005foutput_005flinks-245"><code>ucl_graph_number_of_output_links</code></a>: <a href="#graph-ops">graph ops</a></li>
<li><a href="#index-ucl_005fgraph_005foutput_005flink-235"><code>ucl_graph_output_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-UCL_005fGRAPH_005fOUTPUT_005fLINKS_005fLOOP-232"><code>UCL_GRAPH_OUTPUT_LINKS_LOOP</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005fprev_005finput_005flink-240"><code>ucl_graph_prev_input_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005fprev_005foutput_005flink-241"><code>ucl_graph_prev_output_link</code></a>: <a href="#graph-link-iter">graph link iter</a></li>
<li><a href="#index-ucl_005fgraph_005funlink-220"><code>ucl_graph_unlink</code></a>: <a href="#graph-extract">graph extract</a></li>
<li><a href="#index-ucl_005fhash_005faverage_005fsearch_005fdistance-265"><code>ucl_hash_average_search_distance</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005fbucket_005fchain_005flength-264"><code>ucl_hash_bucket_chain_length</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005fenlarge-266"><code>ucl_hash_enlarge</code></a>: <a href="#hash-resizing">hash resizing</a></li>
<li><a href="#index-ucl_005fhash_005fextract-258"><code>ucl_hash_extract</code></a>: <a href="#hash-deletion">hash deletion</a></li>
<li><a href="#index-ucl_005fhash_005ffind-259"><code>ucl_hash_find</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005ffirst-260"><code>ucl_hash_first</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005ffun_005ft-74"><code>ucl_hash_fun_t</code></a>: <a href="#typedefs-hash">typedefs hash</a></li>
<li><a href="#index-ucl_005fhash_005finitialise-256"><code>ucl_hash_initialise</code></a>: <a href="#hash-creation">hash creation</a></li>
<li><a href="#index-ucl_005fhash_005finsert-257"><code>ucl_hash_insert</code></a>: <a href="#hash-insertion">hash insertion</a></li>
<li><a href="#index-ucl_005fhash_005fiterator-268"><code>ucl_hash_iterator</code></a>: <a href="#hash-iterator">hash iterator</a></li>
<li><a href="#index-ucl_005fhash_005fnumber_005fof_005fbuckets-262"><code>ucl_hash_number_of_buckets</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005fnumber_005fof_005fused_005fbuckets-263"><code>ucl_hash_number_of_used_buckets</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005frestrict-267"><code>ucl_hash_restrict</code></a>: <a href="#hash-resizing">hash resizing</a></li>
<li><a href="#index-ucl_005fhash_005fsize-261"><code>ucl_hash_size</code></a>: <a href="#hash-ops">hash ops</a></li>
<li><a href="#index-ucl_005fhash_005fstring_005ffun-270"><code>ucl_hash_string_fun</code></a>: <a href="#hash-functions">hash functions</a></li>
<li><a href="#index-ucl_005fheap_005fextract-195"><code>ucl_heap_extract</code></a>: <a href="#heap-deletion">heap deletion</a></li>
<li><a href="#index-ucl_005fheap_005finitialise-193"><code>ucl_heap_initialise</code></a>: <a href="#heap-creation">heap creation</a></li>
<li><a href="#index-ucl_005fheap_005finsert-194"><code>ucl_heap_insert</code></a>: <a href="#heap-insertion">heap insertion</a></li>
<li><a href="#index-ucl_005fheap_005fmerge-197"><code>ucl_heap_merge</code></a>: <a href="#heap-ops">heap ops</a></li>
<li><a href="#index-ucl_005fheap_005froot-198"><code>ucl_heap_root</code></a>: <a href="#heap-ops">heap ops</a></li>
<li><a href="#index-ucl_005fheap_005fsize-196"><code>ucl_heap_size</code></a>: <a href="#heap-ops">heap ops</a></li>
<li><a href="#index-ucl_005finterface_005fmajor_005fversion-437"><code>ucl_interface_major_version</code></a>: <a href="#misc-version">misc version</a></li>
<li><a href="#index-ucl_005finterface_005fminor_005fversion-438"><code>ucl_interface_minor_version</code></a>: <a href="#misc-version">misc version</a></li>
<li><a href="#index-ucl_005fiterator_005fmore-433"><code>ucl_iterator_more</code></a>: <a href="#iterators">iterators</a></li>
<li><a href="#index-ucl_005fiterator_005fnext-434"><code>ucl_iterator_next</code></a>: <a href="#iterators">iterators</a></li>
<li><a href="#index-ucl_005fiterator_005fptr-435"><code>ucl_iterator_ptr</code></a>: <a href="#iterators">iterators</a></li>
<li><a href="#index-ucl_005flist_005fcaaar-283"><code>ucl_list_caaar</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcaadr-284"><code>ucl_list_caadr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcaar-279"><code>ucl_list_caar</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcadar-285"><code>ucl_list_cadar</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcaddr-286"><code>ucl_list_caddr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcadr-280"><code>ucl_list_cadr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcar-273"><code>ucl_list_car</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcdaar-287"><code>ucl_list_cdaar</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcdadr-288"><code>ucl_list_cdadr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcdar-281"><code>ucl_list_cdar</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcddar-289"><code>ucl_list_cddar</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcdddr-290"><code>ucl_list_cdddr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcddr-282"><code>ucl_list_cddr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fcdr-274"><code>ucl_list_cdr</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005ffirst-276"><code>ucl_list_first</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005ffor_005feach-295"><code>ucl_list_for_each</code></a>: <a href="#list-ops">list ops</a></li>
<li><a href="#index-ucl_005flist_005flast-277"><code>ucl_list_last</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005flength-294"><code>ucl_list_length</code></a>: <a href="#list-ops">list ops</a></li>
<li><a href="#index-ucl_005flist_005fmap-296"><code>ucl_list_map</code></a>: <a href="#list-ops">list ops</a></li>
<li><a href="#index-ucl_005flist_005fpopback-293"><code>ucl_list_popback</code></a>: <a href="#list-deletion">list deletion</a></li>
<li><a href="#index-ucl_005flist_005fpopfront-292"><code>ucl_list_popfront</code></a>: <a href="#list-deletion">list deletion</a></li>
<li><a href="#index-ucl_005flist_005fprev-275"><code>ucl_list_prev</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fref-278"><code>ucl_list_ref</code></a>: <a href="#list-visit">list visit</a></li>
<li><a href="#index-ucl_005flist_005fremove-291"><code>ucl_list_remove</code></a>: <a href="#list-deletion">list deletion</a></li>
<li><a href="#index-ucl_005flist_005freverse-297"><code>ucl_list_reverse</code></a>: <a href="#list-ops">list ops</a></li>
<li><a href="#index-ucl_005flist_005fset_005fcar-271"><code>ucl_list_set_car</code></a>: <a href="#list-cons">list cons</a></li>
<li><a href="#index-ucl_005flist_005fset_005fcdr-272"><code>ucl_list_set_cdr</code></a>: <a href="#list-cons">list cons</a></li>
<li><a href="#index-ucl_005fmalloc-9"><code>ucl_malloc</code></a>: <a href="#memory-functions">memory functions</a></li>
<li><a href="#index-ucl_005fmap_005fcount-304"><code>ucl_map_count</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005fdelete-303"><code>ucl_map_delete</code></a>: <a href="#map-deletion">map deletion</a></li>
<li><a href="#index-ucl_005fmap_005fdepth-315"><code>ucl_map_depth</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005ffind-305"><code>ucl_map_find</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005ffind_005fnode-306"><code>ucl_map_find_node</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005ffind_005for_005fnext-311"><code>ucl_map_find_or_next</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005ffind_005for_005fprev-312"><code>ucl_map_find_or_prev</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005ffirst-307"><code>ucl_map_first</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005finitialise-301"><code>ucl_map_initialise</code></a>: <a href="#map-creation">map creation</a></li>
<li><a href="#index-ucl_005fmap_005finsert-302"><code>ucl_map_insert</code></a>: <a href="#map-insertion">map insertion</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005fcomplintersect-325"><code>ucl_map_iterator_complintersect</code></a>: <a href="#map-set">map set</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005finorder-316"><code>ucl_map_iterator_inorder</code></a>: <a href="#map-iterators">map iterators</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005fintersection-324"><code>ucl_map_iterator_intersection</code></a>: <a href="#map-set">map set</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005flevelorder-319"><code>ucl_map_iterator_levelorder</code></a>: <a href="#map-iterators">map iterators</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005fpostorder-318"><code>ucl_map_iterator_postorder</code></a>: <a href="#map-iterators">map iterators</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005fpreorder-317"><code>ucl_map_iterator_preorder</code></a>: <a href="#map-iterators">map iterators</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005fsubtraction-326"><code>ucl_map_iterator_subtraction</code></a>: <a href="#map-set">map set</a></li>
<li><a href="#index-ucl_005fmap_005fiterator_005funion-323"><code>ucl_map_iterator_union</code></a>: <a href="#map-set">map set</a></li>
<li><a href="#index-ucl_005fmap_005flast-308"><code>ucl_map_last</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005flower_005fbound-320"><code>ucl_map_lower_bound</code></a>: <a href="#map-iterators">map iterators</a></li>
<li><a href="#index-ucl_005fmap_005fnext-309"><code>ucl_map_next</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005fprev-310"><code>ucl_map_prev</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005fsize-313"><code>ucl_map_size</code></a>: <a href="#map-ops">map ops</a></li>
<li><a href="#index-ucl_005fmap_005fupper_005fbound-321"><code>ucl_map_upper_bound</code></a>: <a href="#map-iterators">map iterators</a></li>
<li><a href="#index-ucl_005fmemory_005falloc-8"><code>ucl_memory_alloc</code></a>: <a href="#memory-functions">memory functions</a></li>
<li><a href="#index-ucl_005fmemory_005falloc_005ffun_005ft-6"><code>ucl_memory_alloc_fun_t</code></a>: <a href="#memory-typedefs">memory typedefs</a></li>
<li><a href="#index-ucl_005fnode_005fgetkey_005ffun_005ft-83"><code>ucl_node_getkey_fun_t</code></a>: <a href="#typedefs-nodes">typedefs nodes</a></li>
<li><a href="#index-UCL_005fNODE_005fSIZE-88"><code>UCL_NODE_SIZE</code></a>: <a href="#btree-typedefs">btree typedefs</a></li>
<li><a href="#index-ucl_005fquicksort-447"><code>ucl_quicksort</code></a>: <a href="#misc-sort">misc sort</a></li>
<li><a href="#index-ucl_005frange_005fequal-70"><code>ucl_range_equal</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fis_005fempty-65"><code>ucl_range_is_empty</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fmax-67"><code>ucl_range_max</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fmin-66"><code>ucl_range_min</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fset_005fmax_005fsize-61"><code>ucl_range_set_max_size</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fset_005fmin_005fmax-59"><code>ucl_range_set_min_max</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fset_005fmin_005fsize-60"><code>ucl_range_set_min_size</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fset_005fsize_005fon_005fmax-63"><code>ucl_range_set_size_on_max</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fset_005fsize_005fon_005fmin-62"><code>ucl_range_set_size_on_min</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fsize-64"><code>ucl_range_size</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fvalue_005fis_005fin-68"><code>ucl_range_value_is_in</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005fvalue_005fis_005fout-69"><code>ucl_range_value_is_out</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frealloc-10"><code>ucl_realloc</code></a>: <a href="#memory-functions">memory functions</a></li>
<li><a href="#index-ucl_005fstruct_005falloc-40"><code>ucl_struct_alloc</code></a>: <a href="#memory-macros">memory macros</a></li>
<li><a href="#index-ucl_005fstruct_005fclean-38"><code>ucl_struct_clean</code></a>: <a href="#memory-macros">memory macros</a></li>
<li><a href="#index-ucl_005fstruct_005freset-39"><code>ucl_struct_reset</code></a>: <a href="#memory-macros">memory macros</a></li>
<li><a href="#index-ucl_005ftree_005fextract_005fdad-182"><code>ucl_tree_extract_dad</code></a>: <a href="#tree-removing">tree removing</a></li>
<li><a href="#index-ucl_005ftree_005fextract_005fnext-185"><code>ucl_tree_extract_next</code></a>: <a href="#tree-removing">tree removing</a></li>
<li><a href="#index-ucl_005ftree_005fextract_005fprev-184"><code>ucl_tree_extract_prev</code></a>: <a href="#tree-removing">tree removing</a></li>
<li><a href="#index-ucl_005ftree_005fextract_005fson-183"><code>ucl_tree_extract_son</code></a>: <a href="#tree-removing">tree removing</a></li>
<li><a href="#index-ucl_005ftree_005fhas_005fdad-172"><code>ucl_tree_has_dad</code></a>: <a href="#tree-testing">tree testing</a></li>
<li><a href="#index-ucl_005ftree_005fhas_005fnext-174"><code>ucl_tree_has_next</code></a>: <a href="#tree-testing">tree testing</a></li>
<li><a href="#index-ucl_005ftree_005fhas_005fprev-173"><code>ucl_tree_has_prev</code></a>: <a href="#tree-testing">tree testing</a></li>
<li><a href="#index-ucl_005ftree_005fhas_005fson-175"><code>ucl_tree_has_son</code></a>: <a href="#tree-testing">tree testing</a></li>
<li><a href="#index-ucl_005ftree_005finsert_005fdad-166"><code>ucl_tree_insert_dad</code></a>: <a href="#tree-insertion">tree insertion</a></li>
<li><a href="#index-ucl_005ftree_005finsert_005fnext-169"><code>ucl_tree_insert_next</code></a>: <a href="#tree-insertion">tree insertion</a></li>
<li><a href="#index-ucl_005ftree_005finsert_005fprev-168"><code>ucl_tree_insert_prev</code></a>: <a href="#tree-insertion">tree insertion</a></li>
<li><a href="#index-ucl_005ftree_005finsert_005fson-167"><code>ucl_tree_insert_son</code></a>: <a href="#tree-insertion">tree insertion</a></li>
<li><a href="#index-ucl_005ftree_005fis_005fbro-171"><code>ucl_tree_is_bro</code></a>: <a href="#tree-testing">tree testing</a></li>
<li><a href="#index-ucl_005ftree_005fis_005fdad-170"><code>ucl_tree_is_dad</code></a>: <a href="#tree-testing">tree testing</a></li>
<li><a href="#index-ucl_005ftree_005fiterator_005finorder-186"><code>ucl_tree_iterator_inorder</code></a>: <a href="#tree-iterators">tree iterators</a></li>
<li><a href="#index-ucl_005ftree_005fiterator_005fpostorder-188"><code>ucl_tree_iterator_postorder</code></a>: <a href="#tree-iterators">tree iterators</a></li>
<li><a href="#index-ucl_005ftree_005fiterator_005fpreorder-187"><code>ucl_tree_iterator_preorder</code></a>: <a href="#tree-iterators">tree iterators</a></li>
<li><a href="#index-ucl_005ftree_005fref_005fdad-176"><code>ucl_tree_ref_dad</code></a>: <a href="#tree-relatives">tree relatives</a></li>
<li><a href="#index-ucl_005ftree_005fref_005ffirst-180"><code>ucl_tree_ref_first</code></a>: <a href="#tree-relatives">tree relatives</a></li>
<li><a href="#index-ucl_005ftree_005fref_005flast-181"><code>ucl_tree_ref_last</code></a>: <a href="#tree-relatives">tree relatives</a></li>
<li><a href="#index-ucl_005ftree_005fref_005fnext-178"><code>ucl_tree_ref_next</code></a>: <a href="#tree-relatives">tree relatives</a></li>
<li><a href="#index-ucl_005ftree_005fref_005fprev-177"><code>ucl_tree_ref_prev</code></a>: <a href="#tree-relatives">tree relatives</a></li>
<li><a href="#index-ucl_005ftree_005fref_005fson-179"><code>ucl_tree_ref_son</code></a>: <a href="#tree-relatives">tree relatives</a></li>
<li><a href="#index-ucl_005ftree_005fset_005fdadson-164"><code>ucl_tree_set_dadson</code></a>: <a href="#tree-creation">tree creation</a></li>
<li><a href="#index-ucl_005ftree_005fset_005fnext-162"><code>ucl_tree_set_next</code></a>: <a href="#tree-creation">tree creation</a></li>
<li><a href="#index-ucl_005ftree_005fset_005fprev-163"><code>ucl_tree_set_prev</code></a>: <a href="#tree-creation">tree creation</a></li>
<li><a href="#index-ucl_005ftree_005fset_005fprevnext-165"><code>ucl_tree_set_prevnext</code></a>: <a href="#tree-creation">tree creation</a></li>
<li><a href="#index-ucl_005fvector_005falloc-340"><code>ucl_vector_alloc</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fappend-408"><code>ucl_vector_append</code></a>: <a href="#vector-high-append">vector high append</a></li>
<li><a href="#index-ucl_005fvector_005fappend_005fblock-407"><code>ucl_vector_append_block</code></a>: <a href="#vector-high-append">vector high append</a></li>
<li><a href="#index-ucl_005fvector_005fappend_005fmore-410"><code>ucl_vector_append_more</code></a>: <a href="#vector-high-append">vector high append</a></li>
<li><a href="#index-ucl_005fvector_005fappend_005fmore_005ffrom_005farray-411"><code>ucl_vector_append_more_from_array</code></a>: <a href="#vector-high-append">vector high append</a></li>
<li><a href="#index-ucl_005fvector_005fappend_005frange-409"><code>ucl_vector_append_range</code></a>: <a href="#vector-high-append">vector high append</a></li>
<li><a href="#index-ucl_005fvector_005fback-358"><code>ucl_vector_back</code></a>: <a href="#vector-indexes-i2p">vector indexes i2p</a></li>
<li><a href="#index-ucl_005fvector_005fbinary_005fsearch-386"><code>ucl_vector_binary_search</code></a>: <a href="#vector-find">vector find</a></li>
<li><a href="#index-ucl_005fvector_005fblock_005ffrom_005frange-369"><code>ucl_vector_block_from_range</code></a>: <a href="#vector-indexes-block">vector indexes block</a></li>
<li><a href="#index-ucl_005fvector_005fclean-353"><code>ucl_vector_clean</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fcompare-421"><code>ucl_vector_compare</code></a>: <a href="#vector-high-compare">vector high compare</a></li>
<li><a href="#index-ucl_005fvector_005fcompare_005frange-419"><code>ucl_vector_compare_range</code></a>: <a href="#vector-high-compare">vector high compare</a></li>
<li><a href="#index-ucl_005fvector_005fcopy_005frange-416"><code>ucl_vector_copy_range</code></a>: <a href="#vector-high-access">vector high access</a></li>
<li><a href="#index-ucl_005fvector_005fdecrement_005fslot-377"><code>ucl_vector_decrement_slot</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-UCL_005fVECTOR_005fDEFAULT_005fPAD-339"><code>UCL_VECTOR_DEFAULT_PAD</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-UCL_005fVECTOR_005fDEFAULT_005fSTEP_005fDOWN-338"><code>UCL_VECTOR_DEFAULT_STEP_DOWN</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-UCL_005fVECTOR_005fDEFAULT_005fSTEP_005fUP-337"><code>UCL_VECTOR_DEFAULT_STEP_UP</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fenlarge-392"><code>ucl_vector_enlarge</code></a>: <a href="#vector-memory-enlarge">vector memory enlarge</a></li>
<li><a href="#index-ucl_005fvector_005fenlarge_005ffor_005frange-396"><code>ucl_vector_enlarge_for_range</code></a>: <a href="#vector-memory-enlarge">vector memory enlarge</a></li>
<li><a href="#index-ucl_005fvector_005fenlarge_005ffor_005fslots-395"><code>ucl_vector_enlarge_for_slots</code></a>: <a href="#vector-memory-enlarge">vector memory enlarge</a></li>
<li><a href="#index-ucl_005fvector_005fenlarged_005fsize-394"><code>ucl_vector_enlarged_size</code></a>: <a href="#vector-memory-enlarge">vector memory enlarge</a></li>
<li><a href="#index-ucl_005fvector_005fequal-422"><code>ucl_vector_equal</code></a>: <a href="#vector-high-compare">vector high compare</a></li>
<li><a href="#index-ucl_005fvector_005fequal_005frange-420"><code>ucl_vector_equal_range</code></a>: <a href="#vector-high-compare">vector high compare</a></li>
<li><a href="#index-ucl_005fvector_005ferase-373"><code>ucl_vector_erase</code></a>: <a href="#vector-removing">vector removing</a></li>
<li><a href="#index-ucl_005fvector_005ferase_005frange-415"><code>ucl_vector_erase_range</code></a>: <a href="#vector-high-erase">vector high erase</a></li>
<li><a href="#index-ucl_005fvector_005ffind-385"><code>ucl_vector_find</code></a>: <a href="#vector-find">vector find</a></li>
<li><a href="#index-ucl_005fvector_005ffor_005feach-423"><code>ucl_vector_for_each</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005ffor_005feach_005fin_005frange-424"><code>ucl_vector_for_each_in_range</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005ffor_005feach_005fmultiple-425"><code>ucl_vector_for_each_multiple</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005ffor_005feach_005fmultiple_005ffrom_005farray-426"><code>ucl_vector_for_each_multiple_from_array</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005ffree-341"><code>ucl_vector_free</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005ffront-357"><code>ucl_vector_front</code></a>: <a href="#vector-indexes-i2p">vector indexes i2p</a></li>
<li><a href="#index-ucl_005fvector_005fget_005fblock-418"><code>ucl_vector_get_block</code></a>: <a href="#vector-high-access">vector high access</a></li>
<li><a href="#index-ucl_005fvector_005fget_005fdata_005fblock-379"><code>ucl_vector_get_data_block</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fget_005ffree_005fblock_005fat_005fbeginning-381"><code>ucl_vector_get_free_block_at_beginning</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fget_005ffree_005fblock_005fat_005fend-380"><code>ucl_vector_get_free_block_at_end</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fget_005fmemory_005fblock-378"><code>ucl_vector_get_memory_block</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fincrement_005fslot-376"><code>ucl_vector_increment_slot</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005findex_005fis_005fvalid-362"><code>ucl_vector_index_is_valid</code></a>: <a href="#vector-indexes-validation">vector indexes validation</a></li>
<li><a href="#index-ucl_005fvector_005findex_005fis_005fvalid_005fnew-363"><code>ucl_vector_index_is_valid_new</code></a>: <a href="#vector-indexes-validation">vector indexes validation</a></li>
<li><a href="#index-ucl_005fvector_005findex_005fto_005fnew_005fslot-356"><code>ucl_vector_index_to_new_slot</code></a>: <a href="#vector-indexes-i2p">vector indexes i2p</a></li>
<li><a href="#index-ucl_005fvector_005findex_005fto_005fslot-355"><code>ucl_vector_index_to_slot</code></a>: <a href="#vector-indexes-i2p">vector indexes i2p</a></li>
<li><a href="#index-ucl_005fvector_005finitialise_005fconfig-333"><code>ucl_vector_initialise_config</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005finitialise_005fconfig_005fbuffer-334"><code>ucl_vector_initialise_config_buffer</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005finitialise_005fconfig_005fdfs-336"><code>ucl_vector_initialise_config_dfs</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005finitialise_005fconfig_005fhash-335"><code>ucl_vector_initialise_config_hash</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005finsert-371"><code>ucl_vector_insert</code></a>: <a href="#vector-adding">vector adding</a></li>
<li><a href="#index-ucl_005fvector_005finsert_005fblock-413"><code>ucl_vector_insert_block</code></a>: <a href="#vector-high-insert">vector high insert</a></li>
<li><a href="#index-ucl_005fvector_005finsert_005frange-414"><code>ucl_vector_insert_range</code></a>: <a href="#vector-high-insert">vector high insert</a></li>
<li><a href="#index-ucl_005fvector_005finsert_005fsort-372"><code>ucl_vector_insert_sort</code></a>: <a href="#vector-adding">vector adding</a></li>
<li><a href="#index-ucl_005fvector_005finsert_005fvector-412"><code>ucl_vector_insert_vector</code></a>: <a href="#vector-high-insert">vector high insert</a></li>
<li><a href="#index-ucl_005fvector_005fiterator_005fbackward-389"><code>ucl_vector_iterator_backward</code></a>: <a href="#vector-iteration">vector iteration</a></li>
<li><a href="#index-ucl_005fvector_005fiterator_005fforward-388"><code>ucl_vector_iterator_forward</code></a>: <a href="#vector-iteration">vector iteration</a></li>
<li><a href="#index-ucl_005fvector_005fiterator_005frange_005fbackward-391"><code>ucl_vector_iterator_range_backward</code></a>: <a href="#vector-iteration">vector iteration</a></li>
<li><a href="#index-ucl_005fvector_005fiterator_005frange_005fforward-390"><code>ucl_vector_iterator_range_forward</code></a>: <a href="#vector-iteration">vector iteration</a></li>
<li><a href="#index-ucl_005fvector_005flast_005findex-359"><code>ucl_vector_last_index</code></a>: <a href="#vector-indexes-p2i">vector indexes p2i</a></li>
<li><a href="#index-ucl_005fvector_005fmap-427"><code>ucl_vector_map</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005fmap_005fmultiple-429"><code>ucl_vector_map_multiple</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005fmap_005fmultiple_005ffrom_005farray-430"><code>ucl_vector_map_multiple_from_array</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005fmap_005frange-428"><code>ucl_vector_map_range</code></a>: <a href="#vector-high-apply">vector high apply</a></li>
<li><a href="#index-ucl_005fvector_005fmark_005fall_005fslots_005fas_005fused-350"><code>ucl_vector_mark_all_slots_as_used</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fmark_005fallocated_005frange_005fas_005fused-351"><code>ucl_vector_mark_allocated_range_as_used</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fmark_005fas_005fused-382"><code>ucl_vector_mark_as_used</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fnumber_005fof_005ffree_005fslots-401"><code>ucl_vector_number_of_free_slots</code></a>: <a href="#vector-memory-misc">vector memory misc</a></li>
<li><a href="#index-ucl_005fvector_005fnumber_005fof_005fpadding_005fslots-345"><code>ucl_vector_number_of_padding_slots</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fnumber_005fof_005fstep_005fdown_005fslots-344"><code>ucl_vector_number_of_step_down_slots</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fnumber_005fof_005fstep_005fup_005fslots-343"><code>ucl_vector_number_of_step_up_slots</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fpointer_005fis_005fvalid_005fslot-361"><code>ucl_vector_pointer_is_valid_slot</code></a>: <a href="#vector-indexes-validation">vector indexes validation</a></li>
<li><a href="#index-ucl_005fvector_005fpop_005fback-406"><code>ucl_vector_pop_back</code></a>: <a href="#vector-high-stack">vector high stack</a></li>
<li><a href="#index-ucl_005fvector_005fpop_005ffront-405"><code>ucl_vector_pop_front</code></a>: <a href="#vector-high-stack">vector high stack</a></li>
<li><a href="#index-ucl_005fvector_005fpush_005fback-404"><code>ucl_vector_push_back</code></a>: <a href="#vector-high-stack">vector high stack</a></li>
<li><a href="#index-ucl_005fvector_005fpush_005ffront-403"><code>ucl_vector_push_front</code></a>: <a href="#vector-high-stack">vector high stack</a></li>
<li><a href="#index-ucl_005fvector_005fquick_005fsort-383"><code>ucl_vector_quick_sort</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005frange-365"><code>ucl_vector_range</code></a>: <a href="#vector-indexes-range">vector indexes range</a></li>
<li><a href="#index-ucl_005fvector_005frange_005ffrom_005fblock-370"><code>ucl_vector_range_from_block</code></a>: <a href="#vector-indexes-block">vector indexes block</a></li>
<li><a href="#index-ucl_005fvector_005frange_005ffrom_005fend_005fto_005fposition-367"><code>ucl_vector_range_from_end_to_position</code></a>: <a href="#vector-indexes-range">vector indexes range</a></li>
<li><a href="#index-ucl_005fvector_005frange_005ffrom_005fend_005fwith_005fspan-368"><code>ucl_vector_range_from_end_with_span</code></a>: <a href="#vector-indexes-range">vector indexes range</a></li>
<li><a href="#index-ucl_005fvector_005frange_005ffrom_005fposition_005fto_005fend-366"><code>ucl_vector_range_from_position_to_end</code></a>: <a href="#vector-indexes-range">vector indexes range</a></li>
<li><a href="#index-ucl_005fvector_005frange_005fis_005fvalid-364"><code>ucl_vector_range_is_valid</code></a>: <a href="#vector-indexes-range">vector indexes range</a></li>
<li><a href="#index-ucl_005fvector_005fregister_005fallocator-402"><code>ucl_vector_register_allocator</code></a>: <a href="#vector-memory-misc">vector memory misc</a></li>
<li><a href="#index-ucl_005fvector_005freset-352"><code>ucl_vector_reset</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005frestrict-397"><code>ucl_vector_restrict</code></a>: <a href="#vector-memory-restrict">vector memory restrict</a></li>
<li><a href="#index-ucl_005fvector_005frestricted_005fsize-399"><code>ucl_vector_restricted_size</code></a>: <a href="#vector-memory-restrict">vector memory restrict</a></li>
<li><a href="#index-ucl_005fvector_005frunning-342"><code>ucl_vector_running</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fset_005fblock-417"><code>ucl_vector_set_block</code></a>: <a href="#vector-high-access">vector high access</a></li>
<li><a href="#index-ucl_005fvector_005fset_005fcompar-349"><code>ucl_vector_set_compar</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fset_005fmemory_005fto_005fzero-400"><code>ucl_vector_set_memory_to_zero</code></a>: <a href="#vector-memory-misc">vector memory misc</a></li>
<li><a href="#index-ucl_005fvector_005fsize-374"><code>ucl_vector_size</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fslot_005fdimension-375"><code>ucl_vector_slot_dimension</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fslot_005fto_005findex-360"><code>ucl_vector_slot_to_index</code></a>: <a href="#vector-indexes-p2i">vector indexes p2i</a></li>
<li><a href="#index-ucl_005fvector_005fsort_005ffind-387"><code>ucl_vector_sort_find</code></a>: <a href="#vector-find">vector find</a></li>
<li><a href="#index-ucl_005fvector_005fsorted-384"><code>ucl_vector_sorted</code></a>: <a href="#vector-ops">vector ops</a></li>
<li><a href="#index-ucl_005fvector_005fswallow_005fblock-354"><code>ucl_vector_swallow_block</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fupdate_005fnumber_005fof_005fpadding_005fslots-348"><code>ucl_vector_update_number_of_padding_slots</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fupdate_005fnumber_005fof_005fstep_005fdown_005fslots-347"><code>ucl_vector_update_number_of_step_down_slots</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fupdate_005fnumber_005fof_005fstep_005fup_005fslots-346"><code>ucl_vector_update_number_of_step_up_slots</code></a>: <a href="#vector-creation">vector creation</a></li>
<li><a href="#index-ucl_005fvector_005fwill_005fenlarge-393"><code>ucl_vector_will_enlarge</code></a>: <a href="#vector-memory-enlarge">vector memory enlarge</a></li>
<li><a href="#index-ucl_005fvector_005fwill_005frestrict-398"><code>ucl_vector_will_restrict</code></a>: <a href="#vector-memory-restrict">vector memory restrict</a></li>
<li><a href="#index-ucl_005fversion-436"><code>ucl_version</code></a>: <a href="#misc-version">misc version</a></li>
<li><a href="#index-ucl_005fversion_005finterface_005fage-4"><code>ucl_version_interface_age</code></a>: <a href="#version">version</a></li>
<li><a href="#index-ucl_005fversion_005finterface_005fcurrent-2"><code>ucl_version_interface_current</code></a>: <a href="#version">version</a></li>
<li><a href="#index-ucl_005fversion_005finterface_005frevision-3"><code>ucl_version_interface_revision</code></a>: <a href="#version">version</a></li>
<li><a href="#index-ucl_005fversion_005fstring-1"><code>ucl_version_string</code></a>: <a href="#version">version</a></li>
   </ul><div class="node">
<a name="type-index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#variable-index">variable index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#function-index">function index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix F An entry for each type.</h2>



<ul class="index-tp" compact>
<li><a href="#index-ucl_005farray_005fof_005fpointers_005ft-45"><code>ucl_array_of_pointers_t</code></a>: <a href="#typedefs-value">typedefs value</a></li>
<li><a href="#index-ucl_005fascii_005flist_005ft-24"><code>ucl_ascii_list_t</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fascii_005ft-23"><code>ucl_ascii_t</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fblock_005ft-12"><code>ucl_block_t</code></a>: <a href="#memory-blocks">memory blocks</a></li>
<li><a href="#index-ucl_005fbool_005ft-43"><code>ucl_bool_t</code></a>: <a href="#typedefs-value">typedefs value</a></li>
<li><a href="#index-ucl_005fbyte_005fpointer_005frange_005ft-57"><code>ucl_byte_pointer_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fcallback_005ft-75"><code>ucl_callback_t</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fchar_005frange_005ft-48"><code>ucl_char_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fcircular_005ft-201"><code>ucl_circular_t</code></a>: <a href="#circular">circular</a></li>
<li><a href="#index-ucl_005fcircular_005ftag_005ft-200"><code>ucl_circular_tag_t</code></a>: <a href="#circular">circular</a></li>
<li><a href="#index-ucl_005fcomparison_005ft-71"><code>ucl_comparison_t</code></a>: <a href="#typedefs-compar">typedefs compar</a></li>
<li><a href="#index-ucl_005fdouble_005frange_005ft-56"><code>ucl_double_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005ffloat_005frange_005ft-55"><code>ucl_float_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs_005fitem_005ft-248"><code>ucl_graph_dfs_item_t</code></a>: <a href="#graph-dfs-types">graph dfs types</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs_005ft-247"><code>ucl_graph_dfs_t</code></a>: <a href="#graph-dfs-types">graph dfs types</a></li>
<li><a href="#index-ucl_005fgraph_005fdfs_005ftag_005ft-246"><code>ucl_graph_dfs_tag_t</code></a>: <a href="#graph-dfs-types">graph dfs types</a></li>
<li><a href="#index-ucl_005fgraph_005flink_005ft-215"><code>ucl_graph_link_t</code></a>: <a href="#graph-types">graph types</a></li>
<li><a href="#index-ucl_005fgraph_005flink_005ftag_005ft-214"><code>ucl_graph_link_tag_t</code></a>: <a href="#graph-types">graph types</a></li>
<li><a href="#index-ucl_005fgraph_005fnode_005ft-213"><code>ucl_graph_node_t</code></a>: <a href="#graph-types">graph types</a></li>
<li><a href="#index-ucl_005fgraph_005fnode_005ftag_005ft-212"><code>ucl_graph_node_tag_t</code></a>: <a href="#graph-types">graph types</a></li>
<li><a href="#index-ucl_005fhash_005ft-73"><code>ucl_hash_t</code></a>: <a href="#typedefs-hash">typedefs hash</a></li>
<li><a href="#index-ucl_005fhash_005ftable_005ft-255"><code>ucl_hash_table_t</code></a>: <a href="#hash-types">hash types</a></li>
<li><a href="#index-ucl_005fhash_005ftable_005ftag_005ft-254"><code>ucl_hash_table_tag_t</code></a>: <a href="#hash-types">hash types</a></li>
<li><a href="#index-ucl_005fheap_005ft-192"><code>ucl_heap_t</code></a>: <a href="#heap-types">heap types</a></li>
<li><a href="#index-ucl_005fheap_005ftag_005ft-191"><code>ucl_heap_tag_t</code></a>: <a href="#heap-types">heap types</a></li>
<li><a href="#index-ucl_005findex_005ft-44"><code>ucl_index_t</code></a>: <a href="#typedefs-value">typedefs value</a></li>
<li><a href="#index-ucl_005fint_005frange_005ft-50"><code>ucl_int_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fiterator_005ft-432"><code>ucl_iterator_t</code></a>: <a href="#iterators">iterators</a></li>
<li><a href="#index-ucl_005fiterator_005ftag_005ft-431"><code>ucl_iterator_tag_t</code></a>: <a href="#iterators">iterators</a></li>
<li><a href="#index-ucl_005flink_005ft-46"><code>ucl_link_t</code></a>: <a href="#typedefs-value">typedefs value</a></li>
<li><a href="#index-ucl_005flong_005frange_005ft-52"><code>ucl_long_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fmap_005ft-300"><code>ucl_map_t</code></a>: <a href="#map-types">map types</a></li>
<li><a href="#index-ucl_005fmap_005ftag_005ft-299"><code>ucl_map_tag_t</code></a>: <a href="#map-types">map types</a></li>
<li><a href="#index-ucl_005fmemory_005fallocator_005ft-5"><code>ucl_memory_allocator_t</code></a>: <a href="#memory-typedefs">memory typedefs</a></li>
<li><a href="#index-ucl_005fnode_005fgetkey_005ft-84"><code>ucl_node_getkey_t</code></a>: <a href="#typedefs-nodes">typedefs nodes</a></li>
<li><a href="#index-ucl_005fnode_005ft-87"><code>ucl_node_t</code></a>: <a href="#btree-typedefs">btree typedefs</a></li>
<li><a href="#index-ucl_005fnode_005ftag_005ft-86"><code>ucl_node_tag_t</code></a>: <a href="#btree-typedefs">btree typedefs</a></li>
<li><a href="#index-ucl_005fpointer_005frange_005ft-58"><code>ucl_pointer_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005frange_005ft-47"><code>ucl_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fsize_005ft_005frange_005ft-54"><code>ucl_size_t_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005funsigned_005fchar_005frange_005ft-49"><code>ucl_unsigned_char_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005funsigned_005flong_005frange_005ft-53"><code>ucl_unsigned_long_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005funsigned_005frange_005ft-51"><code>ucl_unsigned_range_t</code></a>: <a href="#typedefs-ranges">typedefs ranges</a></li>
<li><a href="#index-ucl_005fvalue_005ft-41"><code>ucl_value_t</code></a>: <a href="#typedefs-value">typedefs value</a></li>
<li><a href="#index-ucl_005fvector_005farray_005ft-332"><code>ucl_vector_array_t</code></a>: <a href="#vector-typedefs">vector typedefs</a></li>
<li><a href="#index-ucl_005fvector_005fconfig_005ft-331"><code>ucl_vector_config_t</code></a>: <a href="#vector-typedefs">vector typedefs</a></li>
<li><a href="#index-ucl_005fvector_005fconfig_005ftag_005ft-330"><code>ucl_vector_config_tag_t</code></a>: <a href="#vector-typedefs">vector typedefs</a></li>
<li><a href="#index-ucl_005fvector_005ft-329"><code>ucl_vector_t</code></a>: <a href="#vector-typedefs">vector typedefs</a></li>
<li><a href="#index-ucl_005fvector_005ftag_005ft-328"><code>ucl_vector_tag_t</code></a>: <a href="#vector-typedefs">vector typedefs</a></li>
   </ul><div class="node">
<a name="variable-index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#type-index">type index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix G An entry for each variable.</h2>



<ul class="index-vr" compact>
<li><a href="#index-const-7"><code>const</code></a>: <a href="#memory-functions">memory functions</a></li>
<li><a href="#index-ucl_005fascii_005fempty-25"><code>ucl_ascii_empty</code></a>: <a href="#memory-ascii">memory ascii</a></li>
<li><a href="#index-ucl_005fcallback_005fnull-76"><code>ucl_callback_null</code></a>: <a href="#typedefs-callback">typedefs callback</a></li>
<li><a href="#index-ucl_005fcompare_005fint-443"><code>ucl_compare_int</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcompare_005fint_005fpointer-446"><code>ucl_compare_int_pointer</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcompare_005fstring-445"><code>ucl_compare_string</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fcompare_005funsigned_005fint-444"><code>ucl_compare_unsigned_int</code></a>: <a href="#misc-compar">misc compar</a></li>
<li><a href="#index-ucl_005fhash_005fstring-269"><code>ucl_hash_string</code></a>: <a href="#hash-functions">hash functions</a></li>
<li><a href="#index-ucl_005fvalue_005fnull-42"><code>ucl_value_null</code></a>: <a href="#typedefs-value">typedefs value</a></li>
   </ul>
<div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">Useless Containers Library</a>
<li><a name="toc_overview" href="#overview">1 Overview of the library</a>
<ul>
<li><a href="#overview-error">1.1 Error handling</a>
<li><a href="#overview-size">1.2 Structures size</a>
<li><a href="#overview-const">1.3 Constification</a>
</li></ul>
<li><a name="toc_version" href="#version">2 Version functions</a>
<li><a name="toc_memory" href="#memory">3 Memory allocation</a>
<ul>
<li><a href="#memory-typedefs">3.1 Data types</a>
<li><a href="#memory-functions">3.2 Public interface</a>
<li><a href="#memory-blocks">3.3 Memory blocks</a>
<li><a href="#memory-ascii">3.4 Handling ASCII strings</a>
<li><a href="#memory-macros">3.5 Miscellaneous macros</a>
<ul>
<li><a href="#memory-macros">3.5.1 Structures</a>
</li></ul>
</li></ul>
<li><a name="toc_typedefs" href="#typedefs">4 Data types you have to know</a>
<ul>
<li><a href="#typedefs-value">4.1 Collected values and others</a>
<li><a href="#typedefs-ranges">4.2 Range selectors</a>
<li><a href="#typedefs-compar">4.3 Comparison functions</a>
<li><a href="#typedefs-hash">4.4 Hash functions</a>
<li><a href="#typedefs-callback">4.5 Callback functions</a>
<li><a href="#typedefs-nodes">4.6 Wrapping node structures</a>
</li></ul>
<li><a name="toc_containers" href="#containers">5 The data structures</a>
<ul>
<li><a href="#btree">5.1 The binary tree container</a>
<ul>
<li><a href="#btree-typedefs">5.1.1 Implementation and type definitions</a>
<li><a href="#btree-examples">5.1.2 Usage examples</a>
<li><a href="#btree-creation">5.1.3 Building btrees hierarchies</a>
<li><a href="#btree-inspection">5.1.4 Accessing nodes</a>
<li><a href="#btree-removing">5.1.5 Removing elements</a>
<li><a href="#btree-find">5.1.6 Finding values</a>
<li><a href="#btree-swap">5.1.7 Swapping nodes</a>
<li><a href="#btree-visitors">5.1.8 Finding nodes</a>
<li><a href="#btree-iteration">5.1.9 Iterations in a btree hierarchy</a>
<ul>
<li><a href="#btree-inorder-iteration">5.1.9.1 Inorder iteration</a>
<li><a href="#btree-preorder-iteration">5.1.9.2 Preorder iteration</a>
<li><a href="#btree-postorder-iteration">5.1.9.3 Postorder iteration</a>
<li><a href="#btree-breadth-first">5.1.9.4 Breadth first iteration</a>
</li></ul>
<li><a href="#btree-bst">5.1.10 Routines for raw binary search trees</a>
<li><a href="#btree-avl">5.1.11 Routines for <acronym>AVL</acronym> trees</a>
</li></ul>
<li><a href="#tree">5.2 The tree structure</a>
<ul>
<li><a href="#tree-implementation">5.2.1 How it's done</a>
<li><a href="#tree-creation">5.2.2 Creating a tree hierarchy</a>
<li><a href="#tree-insertion">5.2.3 Inserting nodes into a tree</a>
<li><a href="#tree-testing">5.2.4 Testing relationships between nodes</a>
<li><a href="#tree-relatives">5.2.5 Accessing or setting the relatives of a node</a>
<li><a href="#tree-removing">5.2.6 Removing elements from a tree</a>
<li><a href="#tree-iterators">5.2.7 Traversing a tree</a>
</li></ul>
<li><a href="#heap">5.3 The heap structure</a>
<ul>
<li><a href="#heap-intro">5.3.1 How it is done</a>
<li><a href="#heap-types">5.3.2 Heap type definitions</a>
<li><a href="#heap-creation">5.3.3 Creating and destroying heap</a>
<li><a href="#heap-insertion">5.3.4 Adding elements to a heap</a>
<li><a href="#heap-deletion">5.3.5 Removing elements from a heap</a>
<li><a href="#heap-ops">5.3.6 Various operations on a heap</a>
</li></ul>
<li><a href="#circular">5.4 The circular list</a>
<ul>
<li><a href="#circular-creation">5.4.1 Creating and destroying circulars</a>
<li><a href="#circular-adding">5.4.2 Adding elements to a circular</a>
<li><a href="#circular-removing">5.4.3 Removing elements from a circular</a>
<li><a href="#circular-moving">5.4.4 Moving the cursor</a>
<li><a href="#circular-search">5.4.5 Searching elements</a>
<li><a href="#circular-ops">5.4.6 Various operations on a circular</a>
</li></ul>
<li><a href="#graph">5.5 The graph structure</a>
<ul>
<li><a href="#graph-overview">5.5.1 How it's done</a>
<li><a href="#graph-types">5.5.2 Graph type definitions</a>
<li><a href="#graph-insert">5.5.3 Inserting links and nodes</a>
<li><a href="#graph-extract">5.5.4 Extracting links and nodes</a>
<li><a href="#graph-merge">5.5.5 Merging links</a>
<li><a href="#graph-value">5.5.6 Accessing values</a>
<li><a href="#graph-link-iter">5.5.7 Link iterators</a>
<li><a href="#graph-ops">5.5.8 Various operations on a graph</a>
<li><a href="#graph-dfs">5.5.9 Depth first search</a>
<ul>
<li><a href="#graph-dfs-example">5.5.9.1 <acronym>DFS</acronym> example</a>
<li><a href="#graph-dfs-types">5.5.9.2 <acronym>DFS</acronym> related type defintions</a>
<li><a href="#graph-dfs-api">5.5.9.3 <acronym>DFS</acronym> programming interface</a>
</li></ul>
</li></ul>
<li><a href="#hash">5.6 The hash table structure</a>
<ul>
<li><a href="#hash-intro">5.6.1 How it is done</a>
<li><a href="#hash-types">5.6.2 Hash table types definitions</a>
<li><a href="#hash-creation">5.6.3 Creating and destroying hash tables</a>
<li><a href="#hash-insertion">5.6.4 Adding elements to a hash table</a>
<li><a href="#hash-deletion">5.6.5 Removing elements from a hash table</a>
<li><a href="#hash-ops">5.6.6 Various operations on a hash table</a>
<li><a href="#hash-resizing">5.6.7 Resizing a hash table</a>
<li><a href="#hash-iterator">5.6.8 Visiting elements in the table</a>
<li><a href="#hash-functions">5.6.9 Provided hash function</a>
</li></ul>
<li><a href="#list">5.7 The linked list structure</a>
<ul>
<li><a href="#list-overview">5.7.1 How it is done</a>
<li><a href="#list-cons">5.7.2 Constructing lists</a>
<li><a href="#list-visit">5.7.3 Visiting a list</a>
<li><a href="#list-deletion">5.7.4 Removing elements from a list</a>
<li><a href="#list-ops">5.7.5 Various operations on a list</a>
<li><a href="#list-iteration">5.7.6 Iteration over a list</a>
</li></ul>
<li><a href="#map">5.8 The map structure</a>
<ul>
<li><a href="#map-intro">5.8.1 Introduction to operations and implementation</a>
<li><a href="#map-types">5.8.2 Type definitions for map</a>
<li><a href="#map-creation">5.8.3 Creating and destroying maps</a>
<li><a href="#map-insertion">5.8.4 Adding elements to a map</a>
<li><a href="#map-deletion">5.8.5 Removing elements from a map</a>
<li><a href="#map-ops">5.8.6 Various operations on a map</a>
<li><a href="#map-iterators">5.8.7 Iteration over a map</a>
<li><a href="#map-set">5.8.8 Composing map iterators</a>
</li></ul>
<li><a href="#vector">5.9 The vector structure</a>
<ul>
<li><a href="#vector-implementation">5.9.1 How it's done</a>
<li><a href="#vector-typedefs">5.9.2 Type definitions</a>
<li><a href="#vector-creation">5.9.3 Creating and destroying vectors</a>
<li><a href="#vector-indexes">5.9.4 Converting indexes to pointers</a>
<ul>
<li><a href="#vector-indexes-i2p">5.9.4.1 Index to pointer conversion</a>
<li><a href="#vector-indexes-p2i">5.9.4.2 Pointer to index conversion</a>
<li><a href="#vector-indexes-validation">5.9.4.3 Validating indexes</a>
<li><a href="#vector-indexes-range">5.9.4.4 Range functions</a>
<li><a href="#vector-indexes-block">5.9.4.5 Range/block conversion</a>
</li></ul>
<li><a href="#vector-adding">5.9.5 Adding elements to a vector</a>
<li><a href="#vector-removing">5.9.6 Removing elements from a vector</a>
<li><a href="#vector-ops">5.9.7 Various operations on a vector</a>
<li><a href="#vector-find">5.9.8 Finding elements</a>
<li><a href="#vector-iteration">5.9.9 Iteration over a vector</a>
<li><a href="#vector-memory">5.9.10 Allocating and freeing memory</a>
<ul>
<li><a href="#vector-memory-intro">5.9.10.1 Introduction to vector memory handling</a>
<li><a href="#vector-memory-enlarge">5.9.10.2 Enlarging allocated memory</a>
<li><a href="#vector-memory-restrict">5.9.10.3 Restricting allocated memory</a>
<li><a href="#vector-memory-misc">5.9.10.4 Miscellaneous memory functions</a>
</li></ul>
<li><a href="#vector-as-pqueue">5.9.11 Using a vector as a priority queue</a>
<li><a href="#vector-high">5.9.12 High level functions</a>
<ul>
<li><a href="#vector-high-stack">5.9.12.1 Stack and queue</a>
<li><a href="#vector-high-append">5.9.12.2 Appending data to a vector</a>
<li><a href="#vector-high-insert">5.9.12.3 Inserting into a vector</a>
<li><a href="#vector-high-erase">5.9.12.4 Removing from a vector</a>
<li><a href="#vector-high-access">5.9.12.5 Setters and getters</a>
<li><a href="#vector-high-compare">5.9.12.6 Comparing vectors</a>
<li><a href="#vector-high-apply">5.9.12.7 Applying functions</a>
</li></ul>
</li></ul>
</li></ul>
<li><a name="toc_iterators" href="#iterators">6 Container iteration</a>
<ul>
<li><a href="#iterators">6.1 Examples</a>
</li></ul>
<li><a name="toc_misc" href="#misc">7 Miscellaneous functions</a>
<ul>
<li><a href="#misc-version">7.1 Version functions</a>
<li><a href="#misc-compar">7.2 Comparison functions</a>
<li><a href="#misc-sort">7.3 Sorting functions</a>
</li></ul>
<li><a name="toc_references" href="#references">Appendix A Bibliography and references</a>
<li><a name="toc_Package-License" href="#Package-License">Appendix B <acronym>GNU</acronym> General Public License</a>
<li><a name="toc_Documentation-License" href="#Documentation-License">Appendix C GNU Free Documentation License</a>
<li><a name="toc_concept-index" href="#concept-index">Appendix D An entry for each concept</a>
<li><a name="toc_function-index" href="#function-index">Appendix E An entry for each function</a>
<li><a name="toc_type-index" href="#type-index">Appendix F An entry for each type.</a>
<li><a name="toc_variable-index" href="#variable-index">Appendix G An entry for each variable.</a>
</li></ul>
</div>

</body></html>

