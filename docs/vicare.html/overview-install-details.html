<html lang="en">
<head>
<title>overview install details - Vicare Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Vicare Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="overview-install.html#overview-install" title="overview install">
<link rel="prev" href="overview-install-prerequisites.html#overview-install-prerequisites" title="overview install prerequisites">
<link rel="next" href="overview-install-uninstall.html#overview-install-uninstall" title="overview install uninstall">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d11 of Vicare Scheme, an
R6RS compliant native compiler for the Scheme language producing
single threaded programs running on Intel x86 32-bit processors, with
experimental support for 64-bit machines.  _Vicare_ is pronounced
the etruscan way.

The Vicarus Scheme package is distributed under the terms of the GNU
General Public License (GPL) and can be downloaded from:

            `http://github.com/marcomaggi/vicare/downloads'


the home page of the project is at:

              `http://marcomaggi.github.com/vicare.html'


development takes place at:

                `http://github.com/marcomaggi/vicare/'


Copyright (C) 2010-2012 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

This document is derived from the original Ikarus documentation by the
Vicare Scheme contributors.

     This program is free software: you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     version 3 as published by the Free Software Foundation.

     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program.  If not, see
     `http://www.gnu.org/licenses/'.

Trademarks used herein are the property of their respective owners.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="overview-install-details"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="overview-install-uninstall.html#overview-install-uninstall">overview install uninstall</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="overview-install-prerequisites.html#overview-install-prerequisites">overview install prerequisites</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="overview-install.html#overview-install">overview install</a>
<hr>
</div>

<h4 class="subsection">1.5.3 Installation details</h4>

<p>We have two choices for downloading the Vicare Scheme source: we can
either download a distribution from:

<div align="center"><a href="http://github.com/marcomaggi/vicare/downloads">http://github.com/marcomaggi/vicare/downloads</a></div>

<p class="noindent">or we can checkout a revision from the GitHub repository:

<div align="center"><a href="http://github.com/marcomaggi/vicare/">http://github.com/marcomaggi/vicare/</a></div>

     <ul>
<li>Vicare Scheme source distributions are tarballs named
<samp><span class="file">vicare-</span><var>n.n.n</var><span class="file">.tar.gz</span></samp>, where <samp><var>n.n.n</var></samp> is a
3&ndash;component ID indicating the current revision.

     <p>If we downloaded a distribution, unpack it.  From the shell prompt:

     <pre class="example">          $ tar -xvzf vicare-<var>n.n.n</var>.tar.gz
</pre>
     <p class="noindent">this creates the base directory <samp><span class="file">vicare-</span><var>n.n.n</var></samp>.

     <li>If we downloaded a bleeding&ndash;edge snapshot, no unpacking is needed. 
</ul>

   <p>We configure the build system by running the <samp><span class="command">configure</span></samp> script
located in the base directory.  To do this, type the following commands:

<pre class="example">     $ cd vicare-<var>n.n.n</var>
     $ ./configure
     checking build system type... i386-apple-darwin8.10.1
     checking host system type... i386-apple-darwin8.10.1
     ...
     configure: creating ./config.status
     config.status: creating Makefile
     config.status: creating src/Makefile
     config.status: creating scheme/Makefile
     config.status: creating doc/Makefile
     config.status: executing depfiles commands
</pre>
   <p>This configures the system to be built then installed in the
system&ndash;wide location (binaries are normally installed in
<samp><span class="file">/usr/local/bin</span></samp>).  To install it in another location (e.g. in
your home directory), provide a <samp><span class="option">--prefix</span></samp> location to
<samp><span class="command">configure</span></samp> as follows:

<pre class="example">     $ ./configure --prefix=/opt/sw
</pre>
   <p class="noindent">this will install the executable in <samp><span class="file">/opt/sw/bin</span></samp>, libraries in
<samp><span class="file">/opt/sw/lib/ikarus</span></samp>, and documentation in
<samp><span class="file">/opt/sw/share/doc/ikarus</span></samp>.

   <p>To install Vicare Scheme for personal use (thus not requiring root
permissions to install), specify <code>--prefix=$HOME/local</code>, which
installs everything in a <samp><span class="file">local</span></samp> directory of our home directory.

   <p><samp><span class="command">configure</span></samp> allows us to fine&ndash;tune where things are installed,
though this is rarely necessary or useful.  Do
<code>./configure&nbsp;--help</code> for a full list of options.

   <p>The most common <samp><span class="command">configure</span></samp> options are as follows.

     <dl>
<dt><samp><span class="option">--prefix</span></samp><dd>Specify the location in the file system where Vicare Scheme will be
installed.

     <br><dt><samp><span class="option">--enable-ffi</span></samp><dd>Include Vicare Scheme's Foreign Function Interface, so that
Vicare code can invoke C code, and vice versa; requires Libffi.

     <br><dt><samp><span class="option">--disable-arguments-validation</span></samp><dd>Disable arguments validation for the functions in Vicare's boot image;
use with care: an invalid argument will cause undefined behaviour (most
likely a process crash).

     <br><dt><samp><span class="env">CFLAGS</span></samp><dd>Specify options to be used while compiling Vicare's C code.

     <br><dt><samp><span class="env">CPPFLAGS</span></samp><dd>Specify options to be used while preprocessing Vicare's C code.

     <br><dt><samp><span class="env">LDFLAGS</span></samp><dd>Specify options to be used while linking Vicare. 
</dl>

   <p><samp><span class="command">configure</span></samp> will fail if it cannot find the location where
<acronym>GMP</acronym> is installed.  The script will also fail if we have specified
<samp><span class="option">--enable-ffi</span></samp> and it can't find Libffi.  If running
<samp><span class="command">configure</span></samp> fails to locate either of these libraries, we will
need to provide their locations.  Use the <samp><span class="env">CPPFLAGS</span></samp> and
<samp><span class="env">LDFLAGS</span></samp> options to specify the locations of the header and library
files.

   <p>For example, assume that we have installed <acronym>GMP</acronym> and Libffi in
subdirectories of <samp><span class="file">/opt/sw</span></samp>, and we wish to support foreign
functions.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>

<pre class="example">     ./configure                                                  \
       --prefix=$HOME/local                                       \
       --enable-ffi                                               \
       CPPFLAGS="-I/opt/sw/gmp/include -I/opt/sw/libffi/include"  \
       LDFLAGS="-L/opt/sw/gmp/lib -L/opt/sw/libffi/lib"
</pre>
   <p>We can use the <samp><span class="env">CFLAGS</span></samp> and <samp><span class="env">LDFLAGS</span></samp> variables to select more
specialized compilation and linking options; refer to the compiler
documentation for more details.

   <p>We can now build the system by running the command <samp><span class="command">make</span></samp>, with
no arguments; this performs two tasks:

     <ol type=1 start=1>
<li>It builds the <samp><span class="command">vicare</span></samp> executable from the C files located in
the <samp><span class="file">src</span></samp> directory.

     <li>It uses the <samp><span class="command">vicare</span></samp> executable and the pre&ndash;built
<samp><span class="file">ikarus.boot.orig</span></samp> boot file to rebuild the Scheme boot image file
<samp><span class="file">vicare.boot</span></samp> from the Scheme sources located in the <samp><span class="file">scheme</span></samp>
directory.
        </ol>

   <p>The final stage is to install Vicare via the command
<samp><span class="command">make install</span></samp>.  If we're installing Vicare in a
system&ndash;wide location, we probably need to have administrator privileges
(use the <samp><span class="command">sudo</span></samp> or <samp><span class="command">su</span></samp> commands); if that's not
feasible, then we need to reconfigure to install within a directory tree
under our home directory.

   <p>Finally, try a small session, to verify that everything installed
properly.

<pre class="example">     $ vicare
     Vicare Scheme version 0.1d0+ \
       (revision master/d844c006eb9ada1a047be3893d0dd40f8ae6204a, \
       build 2010-05-02)
     Copyright (c) 2006-2010 Abdulaziz Ghuloum and contributors
     
     &gt; (display "hello, world!\n")
     hello, world!
     &gt; (define twice (lambda (f) (lambda (x) (f (f x)))))
     &gt; ((twice add1) 3)
     5
</pre>
   <p>If we get the first <code>&gt;</code> prompt, then Vicare was
successfully installed on the system.  We may need to update the
<samp><span class="env">PATH</span></samp> variable in environment to contain the directory in which the
<samp><span class="command">vicare</span></samp> executable was installed.

   <p>Finally, do <samp><span class="command">make clean</span></samp> to get rid of executables, object
files, and other build products in the <samp><span class="file">vicare-</span><var>n.n.n</var></samp>
directory.  Do not delete the directory itself: it will be needed if we
ever want to uninstall Vicare.

<!-- page -->
   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> The <samp><span class="command">configure</span></samp> command shown here is very
imposing, and anyone can easily make mistakes.  In general, it's a good
idea to create a shell script that has the sequence of
<samp><span class="command">configure</span></samp> and <samp><span class="command">make</span></samp> commands needed to configure,
build, and install a package; this not only allows us to re&ndash;install
easily, but also gives us a concrete indication of what options we used
to build the software the last time.  Of course, we should put this
script somewhere other than in the actual Vicare software
directory!</p>

   <hr></div>

   </body></html>

