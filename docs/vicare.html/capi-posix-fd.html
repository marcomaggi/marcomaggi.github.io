<html lang="en">
<head>
<title>capi posix fd - Vicare Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Vicare Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="capi-posix.html#capi-posix" title="capi posix">
<link rel="prev" href="capi-posix-dir.html#capi-posix-dir" title="capi posix dir">
<link rel="next" href="capi-posix-socket.html#capi-posix-socket" title="capi posix socket">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d19 of Vicare Scheme, an
R6RS compliant native compiler for the Scheme language, producing
single threaded programs running on Intel x86 32-bit processors, with
experimental support for 64-bit machines.  _Vicare_ is pronounced
the etruscan way.

The package is distributed under the terms of the GNU General Public
License (GPL) and can be downloaded from:

               `http://code.google.com/p/vicare-scheme/'


or:

            `http://github.com/marcomaggi/vicare/downloads'


the home page of the project is at:

              `http://marcomaggi.github.com/vicare.html'


development takes place at:

                `http://github.com/marcomaggi/vicare/'


and, as a backup, at:

                     `http://gitorious.org/vicare'


this project has a mailing list:

             `http://groups.google.com/group/vicare-users'


Copyright (C) 2010-2012 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

This document is derived from the original Ikarus documentation by the
Vicare Scheme contributors.

     This program is free software: you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     version 3 as published by the Free Software Foundation.

     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program.  If not, see
     `http://www.gnu.org/licenses/'.

Trademarks used herein are the property of their respective owners.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="capi-posix-fd"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="capi-posix-socket.html#capi-posix-socket">capi posix socket</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="capi-posix-dir.html#capi-posix-dir">capi posix dir</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="capi-posix.html#capi-posix">capi posix</a>
<hr>
</div>

<h4 class="subsection">9.2.13 File descriptors at low level</h4>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_open</b> (<var>ikptr pathname, ikptr flags, ikptr mode</var>)<var><a name="index-ikrt_005fposix_005fopen-1594"></a></var><br>
<blockquote><p>Interface to the C function <code>open()</code>, <a href="../libc/Opening-and-Closing-Files.html#Opening-and-Closing-Files">open</a>.  Open a file descriptor for the file system entry
<var>pathname</var>, which must be a bytevector; <var>flags</var> and <var>mode</var>
must be fixnums.  If successful return a fixnum representing the file
descriptor, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_close</b> (<var>ikptr fd</var>)<var><a name="index-ikrt_005fposix_005fclose-1595"></a></var><br>
<blockquote><p>Interface to the C function <code>close()</code>, <a href="../libc/Opening-and-Closing-Files.html#Opening-and-Closing-Files">close</a>.  Close a file descriptor represented by <var>fd</var>, which
must be a fixnum.  If successful return the fixnum zero, else return an
encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_read</b> (<var>ikptr fd, ikptr buffer, ikptr size</var>)<var><a name="index-ikrt_005fposix_005fread-1596"></a></var><br>
<blockquote><p>Interface to the C function <code>read()</code>, <a href="../libc/I_002fO-Primitives.html#I_002fO-Primitives">read</a>.  Read bytes from the file descriptor <var>fd</var> and store them in
the bytevector <var>buffer</var>; if <var>size</var> is a fixnum, read <var>size</var>
bytes; if <var>size</var> is false, read a number of bytes equal to the
length of <var>buffer</var>.  If successful return a non&ndash;negative fixnum
representing the number of bytes read, else return an encoded
<code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_pread</b> (<var>ikptr fd, ikptr buffer, ikptr size, ikptr off</var>)<var><a name="index-ikrt_005fposix_005fpread-1597"></a></var><br>
<blockquote><p>Interface to the C function <code>pread()</code>, <a href="../libc/I_002fO-Primitives.html#I_002fO-Primitives">pread</a>.  Like <code>ikrt_posix_read()</code>, but start reading at offset
<var>off</var> from the start of the file; <var>off</var> must be a non&ndash;negative
exact integer. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_write</b> (<var>ikptr fd, ikptr buffer, ikptr size</var>)<var><a name="index-ikrt_005fposix_005fwrite-1598"></a></var><br>
<blockquote><p>Interface to the C function <code>write()</code>, <a href="../libc/I_002fO-Primitives.html#I_002fO-Primitives">write</a>.  Write bytes to the file descriptor <var>fd</var> from the bytevector
<var>buffer</var>; if <var>size</var> is a fixnum, write <var>size</var> bytes; if
<var>size</var> is false, write a number of bytes equal to the length of
<var>buffer</var>.  If successful return a non&ndash;negative fixnum representing
the number of written bytes, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_pwrite</b> (<var>ikptr fd, ikptr buffer, ikptr size, ikptr off</var>)<var><a name="index-ikrt_005fposix_005fpwrite-1599"></a></var><br>
<blockquote><p>Interface to the C function <code>pwrite()</code>, <a href="../libc/I_002fO-Primitives.html#I_002fO-Primitives">pwrite</a>.  Like <code>ikrt_posix_write()</code>, but start writing at offset
<var>off</var> from the start of the file; <var>off</var> must be a non&ndash;negative
exact integer. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_lseek</b> (<var>ikptr fd, ikptr off, ikptr whence, ikpcb * pcb</var>)<var><a name="index-ikrt_005fposix_005flseek-1600"></a></var><br>
<blockquote><p>Interface to the C function <code>lseek()</code>, <a href="../libc/File-Position-Primitive.html#File-Position-Primitive">lseek</a>.  Change the file position of the file descriptor
<var>fd</var> to <var>off</var> from <var>whence</var>; <var>fd</var> and <var>whence</var> must
be fixnums, <var>off</var> must be an exact integer.  If successful return a
non&ndash;negative exact integer representing the number of bytes from the
beginning of the file, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<!--  -->
<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_readv</b> (<var>ikptr fd, ikptr buffers, ikpcb * pcb</var>)<var><a name="index-ikrt_005fposix_005freadv-1601"></a></var><br>
<blockquote><p>Interface to the C function <code>readv()</code>, <a href="../libc/Scatter_002dGather.html#Scatter_002dGather">readv</a>.  Read bytes from the file descriptor <var>fd</var> and store them
into the list of bytevectors referenced by <var>buffers</var>.  If successful
return a non&ndash;negative exact integer representing the number of bytes
actually read, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_writev</b> (<var>ikptr fd, ikptr buffers, ikpcb * pcb</var>)<var><a name="index-ikrt_005fposix_005fwritev-1602"></a></var><br>
<blockquote><p>Interface to the C function <code>writev()</code>, <a href="../libc/Scatter_002dGather.html#Scatter_002dGather">writev</a>.  Write bytes to the file descriptor <var>fd</var> from the list of
bytevectors referenced by <var>buffers</var>.  If successful return a
non&ndash;negative exact integer representing the number of bytes actually
written, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<!--  -->
<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_select</b> (<var>ikptr nfds, ikptr read_fds, ikptr write_fds, ikptr except_fds, ikptr sec, ikptr usec, ikpcb * pcb</var>)<var><a name="index-ikrt_005fposix_005fselect-1603"></a></var><br>
<blockquote><p>Interface to the C function <code>select()</code>, <a href="../libc/Waiting-for-I_002fO.html#Waiting-for-I_002fO">select</a>.  Wait for read, write or exceptional events on selected lists
of file descriptors.

        <p><var>nfds</var> must be false or a non&ndash;negative fixnum, when false it
defaults to the maximum file descriptor value in the given lists; it is
the maximum file descriptor number in the sets to be checked for events,
plus one.  <var>read_fds</var>, <var>write_fds</var> and <var>except_fds</var> must be
nil or lists of file descriptors to be checked for events.  <var>sec</var>
and <var>usec</var> must be fixnums representing timeout seconds and
microseconds.

        <p>Return the fixnum zero if the timeout expired before any event arrived;
else return a vector of 3 elements being lists of file descriptors,
respectively, ready for reading, writing or an exceptional condition. 
If an error occurs: return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_select_fd</b> (<var>ikptr fd, ikptr sec, ikptr usec, ikpcb * pcb</var>)<var><a name="index-ikrt_005fposix_005fselect_005ffd-1604"></a></var><br>
<blockquote><p>Interface to the C function <code>select()</code>, <a href="../libc/Waiting-for-I_002fO.html#Waiting-for-I_002fO">select</a>.  Wait for read, write or exceptional events on the single file
descriptor <var>fd</var>.  <var>sec</var> and <var>usec</var> must be fixnums
representing timeout seconds and microseconds.

        <p>Return the fixnum zero if the timeout expired before any event arrived;
else return a fixnum being the OR combination of the flags: <code>1</code> if
<var>fd</var> is readable, <code>2</code> if <var>fd</var> is writable, <code>4</code> if
<var>fd</var> received an exception.  If an error occurs: return an encoded
<code>errno</code> value. 
</p></blockquote></div>

<!--  -->
<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_fcntl</b> (<var>ikptr fd, ikptr command, ikptr arg</var>)<var><a name="index-ikrt_005fposix_005ffcntl-1605"></a></var><br>
<blockquote><p>Interface to the C function <code>fcntl()</code>, <a href="../libc/Control-Operations.html#Control-Operations">fcntl</a>.  Perform the operation specified by <var>command</var> on the file
descriptor <var>fd</var> using <var>arg</var>; <var>fd</var> and <var>command</var> must be
fixnums; <var>arg</var> must be the false object, a fixnum, a bytevector or a
pointer, if it is <code>#f</code> no argument is handed to <code>fcntl()</code>.  If
successful return a fixnum representing the return value of
<code>fcntl()</code>, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_ioctl</b> (<var>ikptr fd, ikptr command, ikptr arg</var>)<var><a name="index-ikrt_005fposix_005fioctl-1606"></a></var><br>
<blockquote><p>Interface to the C function <code>ioctl()</code>, <a href="../libc/IOCTLs.html#IOCTLs">ioctl</a>. 
Perform the operation specified by <var>command</var> on the file descriptor
<var>fd</var> using <var>arg</var>; <var>fd</var> and <var>command</var> must be fixnums;
<var>arg</var> must be the false object, a fixnum, a bytevector or a pointer,
if it is <code>#f</code> no argument is handed to <code>ioctl()</code>.  If successful
return a fixnum representing the return value of <code>ioctl()</code>, else
return an encoded <code>errno</code> value. 
</p></blockquote></div>

<!--  -->
<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_dup</b> (<var>ikptr fd</var>)<var><a name="index-ikrt_005fposix_005fdup-1607"></a></var><br>
<blockquote><p>Interface to the C function <code>dup()</code>, <a href="../libc/Duplicating-Descriptors.html#Duplicating-Descriptors">dup</a>.  Duplicate the file descriptor <var>fd</var>.  If
successful return a non&ndash;negative fixnum representing the new
descriptor, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_dup2</b> (<var>ikptr old, ikptr new</var>)<var><a name="index-ikrt_005fposix_005fdup2-1608"></a></var><br>
<blockquote><p>Interface to the C function <code>dup2()</code>, <a href="../libc/Duplicating-Descriptors.html#Duplicating-Descriptors">dup</a>.  Duplicate the file descriptor <var>old</var> to
<var>new</var>.  If successful return the fixnum zero, else return an encoded
<code>errno</code> value. 
</p></blockquote></div>

<!--  -->
<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_pipe</b> (<var>ikpcb * pcb</var>)<var><a name="index-ikrt_005fposix_005fpipe-1609"></a></var><br>
<blockquote><p>Interface to the C function <code>pipe()</code>, <a href="../libc/Creating-a-Pipe.html#Creating-a-Pipe">pipe</a>.  Create a pair of file descriptors connected through a pipe.  If
successful return a pair whose car and cdr are fixnums representing the
file descriptors, else return an encoded <code>errno</code> value. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: ikptr <b>ikrt_posix_mkfifo</b> (<var>ikptr pathname, ikptr mode</var>)<var><a name="index-ikrt_005fposix_005fmkfifo-1610"></a></var><br>
<blockquote><p>Interface to the C function <code>mkfifo()</code>, <a href="../libc/FIFO-Special-Files.html#FIFO-Special-Files">mkfifo</a>.  Create a FIFO special file with name <var>pathname</var>,
which must be a bytevector, and mode <var>mode</var>, which must be a fixnum. 
If successful return the fixnum zero, else return an encoded
<code>errno</code> value. 
</p></blockquote></div>

<!-- page -->
   </body></html>

