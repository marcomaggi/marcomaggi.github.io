<html lang="en">
<head>
<title>fasl api - Vicare Scheme</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Vicare Scheme">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="fasl.html#fasl" title="fasl">
<link rel="prev" href="fasl-format.html#fasl-format" title="fasl format">
<link rel="next" href="fasl-foreign.html#fasl-foreign" title="fasl foreign">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This document describes version 0.2d18 of Vicare Scheme, an
R6RS compliant native compiler for the Scheme language, producing
single threaded programs running on Intel x86 32-bit processors, with
experimental support for 64-bit machines.  _Vicare_ is pronounced
the etruscan way.

The package is distributed under the terms of the GNU General Public
License (GPL) and can be downloaded from:

               `http://code.google.com/p/vicare-scheme/'


or:

            `http://github.com/marcomaggi/vicare/downloads'


the home page of the project is at:

              `http://marcomaggi.github.com/vicare.html'


development takes place at:

                `http://github.com/marcomaggi/vicare/'


and, as a backup, at:

                     `http://gitorious.org/vicare'


this project has a mailing list:

             `http://groups.google.com/group/vicare-users'


Copyright (C) 2010-2012 by Marco Maggi.

Copyright (C) 2006-2010 by Abdulaziz Ghuloum.

This document is derived from the original Ikarus documentation by the
Vicare Scheme contributors.

     This program is free software: you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     version 3 as published by the Free Software Foundation.

     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program.  If not, see
     `http://www.gnu.org/licenses/'.

Trademarks used herein are the property of their respective owners.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="fasl-api"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="fasl-foreign.html#fasl-foreign">fasl foreign</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="fasl-format.html#fasl-format">fasl format</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="fasl.html#fasl">fasl</a>
<hr>
</div>

<h3 class="appendixsec">E.2 <acronym>FASL</acronym> files <acronym>API</acronym></h3>

<p>The following bindings are exported by the libraries <code>(ikarus)</code>
and <code>(vicare)</code>.

<div class="defun">
&mdash; Function: <b>fasl-write</b><var> obj port<a name="index-fasl_002dwrite-2283"></a></var><br>
&mdash; Function: <b>fasl-write</b><var> obj port libraries<a name="index-fasl_002dwrite-2284"></a></var><br>
<blockquote><p>Serialise <var>obj</var> to the binary output port <var>port</var> prefixing it
with the <acronym>FASL</acronym> file header.  If <var>libraries</var> is present: it must be
a list of strings representing foreign shared libraries to be loaded
whenever the <acronym>FASL</acronym> file is loaded, <a href="fasl-foreign.html#fasl-foreign">fasl foreign</a> for details. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fasl-read</b><var> port<a name="index-fasl_002dread-2285"></a></var><br>
<blockquote><p>Read and return a serialised object from the binary input <var>port</var>. 
</p></blockquote></div>

<div class="defun">
&mdash; Parameter: <b>fasl-directory</b><var><a name="index-fasl_002ddirectory-2286"></a></var><br>
<blockquote><p>Holds a string representing the top directory under which <acronym>FASL</acronym> files
are stored when libraries are compiled.  The default value is determined
as follows:

          <ol type=1 start=1>
<li>Check the value of the system environment variable
<samp><span class="env">VICARE_FASL_DIRECTORY</span></samp>: if set and its value exists as pathname,
the value is selected.  Else move to the next step.

          <li>Acquire the value of the system environment variable <samp><span class="env">HOME</span></samp>: if set
and its value exists as pathname, compose a directory pathname by
appending to the value the string:

          <pre class="example">               /.vicare/precompiled
</pre>
          <p>Else move to the next step.

          <li>Set the parameter to the empty string.  This means that a library with
pathname: <samp><span class="file">/usr/local/scheme/vicare/posix.sls</span></samp>
will be compiled to
<samp><span class="file">/usr/local/scheme/vicare/posix.sls.vicare-32bit-fasl</span></samp>
             </ol>

        <p>New values for this parameter must be Scheme strings representing
existing pathnames.  The pathnames are normalised to their real
pathname, removing symbolic links and useless <code>..</code> components.

        <p>The default value of this parameter can be overridden by the command
line option <samp><span class="option">--fasl-directory</span></samp>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>fasl-path</b><var> filename<a name="index-fasl_002dpath-2287"></a></var><br>
<blockquote><p>Given a source file name return the associated full <acronym>FASL</acronym> file name
using the current value of <code>fasl-directory</code>.  Return false if
<code>fasl-directory</code> is unset (which should never happen).  It is an
error if the file <var>filename</var> does not exist. 
</p></blockquote></div>

<div class="defun">
&mdash; Parameter: <b>fasl-search-path</b><var><a name="index-fasl_002dsearch_002dpath-2288"></a></var><br>
<blockquote><p><a name="index-g_t_0040env_007bVICARE_005fFASL_005fPATH_007d_002c-environment-variable-2289"></a><a name="index-Environment-variable-_0040env_007bVICARE_005fFASL_005fPATH_007d-2290"></a>Holds a list of strings representing directory pathnames.  This search
path is used to locate <acronym>FASL</acronym> files when loading precompiled libraries. 
The default value is determined as follows:

          <ol type=1 start=1>
<li>Check the value of the system environment variable
<samp><span class="env">VICARE_FASL_PATH</span></samp>: if set the value is selected.  Else move to the
next step.

          <li>Acquire the value of the system environment variable <samp><span class="env">HOME</span></samp>: if set
and its value exists as pathname, compose a directory pathname by
appending to the value the string:

          <pre class="example">               /.vicare/precompiled
</pre>
          <p class="noindent">the result is put into a list and becomes the default value.
             </ol>

        <p>Additional directories can be prepended to the search path with the
command line option <samp><span class="option">--fasl-path</span></samp>.  If a <acronym>FASL</acronym> target directory
is selected with the option <samp><span class="option">--fasl-directory</span></samp>: the selected
directory is always prepended to the <acronym>FASL</acronym> search path. 
</p></blockquote></div>

<!-- page -->
   </body></html>

