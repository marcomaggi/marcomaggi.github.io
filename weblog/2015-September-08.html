<html lang="en">
<head>
<title>2015 September 08 - Marco's Weblog</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Marco's Weblog">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="2015.html#g_t2015" title="2015">
<link rel="next" href="2015-September-06.html#g_t2015-September-06" title="2015 September 06">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 2015 by Marco Maggi <marco.maggi-ipsu@poste.it>

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with Invariant Sections being ``GNU Free Documentation
     License'' and ``GNU General Public License'', no Front--Cover
     Texts, and no Back--Cover Texts.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License''.
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<link rel="stylesheet" type="text/css" href="weblog.css">
</head>
<body>
<div class="node">
<a name="g_t2015-September-08"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="2015-September-06.html#g_t2015-September-06">2015 September 06</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="2015.html#g_t2015">2015</a>
<hr>
</div>

<h3 class="unnumberedsec">Common interface to some containers</h3>

<div align="center">Posted on September 6, 2015</div>

   <p>After having started <a href="References.html#References">Vicare</a>'s container libraries (stack, queue, deque,
<small class="dots">...</small>), the problem of &ldquo;generic programming&rdquo; obviously arose; a very simple and
partial solution is implemented by some new libraries.  All the changes discussed
here are in the <a href="References.html#References">master</a> branch.

   <p>There are at least two instances of the problem:

     <ol type=1 start=1>
<li>Defining data structures collecting a specific type of objects, so that the insertion
and retrieval operations on the container know what type to expect and what type to
return.  This is for the future.

     <li>Defining a common interface to containers providing similar operations.  This is what
is discussed here.
        </ol>

   <p>The solution adopted by many languages is: support for interfaces with early and late
binding; if we can specify that a function accepts as argument an object implementing
the &ldquo;stack interface&rdquo;, that function can call the usual methods &lsquo;<samp><span class="samp">top</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">push</span></samp>&rsquo;, &lsquo;<samp><span class="samp">pop</span></samp>&rsquo; on the stack&ndash;like object.  One of the following techniques
is used:

     <dl>
<dt>Early binding, static dispatch<dd>If the true operand type <strong>can</strong> be determined at compile&ndash;time: the call to an
actual method function can be inserted at compile&ndash;time.

     <br><dt>Late binding, dynamic dispatch<dd>If the true operand type <strong>cannot</strong> be determined at compile&ndash;time: at
run&ndash;time, the type descriptor of the operand must be inspected and a table of
methods queried for the implemented interfaces. 
</dl>

   <p>Support for interfaces, early and late bindings is for the future.  What is
implemented by the new libraries is a set of record types that unify the basic
operations on common containers.  So the library <code>(vicare containers istacks)</code>
defines the &ldquo;abstract&rdquo; record type <code>&lt;istack&gt;</code> and the library
<code>(vicare containers istacks lists)</code> provides a &ldquo;concrete&rdquo; implementation of
the <code>&lt;istack&gt;</code> type using built&ndash;in lists as storage; usage example:

<pre class="lisp">     (import (vicare)
       (vicare containers istacks)
       (vicare containers istacks lists))
     
     (define S
       (make-istack-list))
     
     (istack-push! S 0)
     (istack-push! S 1)
     (istack-push! S 2)
     
     (istack-top  S)         &rArr; 2
     (istack-pop! S)         &rArr; 2
     (istack-pop! S)         &rArr; 1
</pre>
   <p>The library <code>(vicare containers istacks chains)</code> provides a &ldquo;concrete&rdquo;
implementation of the <code>&lt;istack&gt;</code> type using a chain as storage; chains are
doubly&ndash;linked lists defined by the library <code>(vicare containers chains)</code>. 
Usage example:

<pre class="lisp">     (import (vicare)
       (vicare containers chains)
       (vicare containers istacks)
       (vicare containers istacks chains))
     
     (define S
       (make-istack-chain (chain)))
     
     (istack-push! S 0)
     (istack-push! S 1)
     (istack-push! S 2)
     
     (istack-top  S)         &rArr; 2
     (istack-pop! S)         &rArr; 2
     (istack-pop! S)         &rArr; 1
</pre>
   <p>Every container that can implement last&ndash;in/first&ndash;out insertion and extraction
operations can become a concrete implementation of <code>&lt;istack&gt;</code>; at present the
following libraries deal with the common stack <acronym>API</acronym>:

<pre class="example">     (vicare containers istacks)
     (vicare containers istacks lists)
     (vicare containers istacks ilists)
     (vicare containers istacks ralists)
     (vicare containers istacks chains)
     (vicare containers istacks dynamic-arrays)
     (vicare containers istacks stacks)
     (vicare containers istacks deques)
</pre>
   <p>Similarly, a common <acronym>API</acronym> is defined for queues through the record type
<code>&lt;iqueue&gt;</code>; every container that can implement first&ndash;in/first&ndash;out insertion
and extraction operations can become a concrete implementation of <code>&lt;iqueue&gt;</code>;
at present the following libraries deal with the common queue <acronym>API</acronym>:

<pre class="example">     (vicare containers iqueues)
     (vicare containers iqueues dynamic-arrays)
     (vicare containers iqueues queues)
     (vicare containers iqueues deques)
     (vicare containers iqueues chains)
</pre>
   <p>Similarly, a common <acronym>API</acronym> is defined for deques through the record type
<code>&lt;ideque&gt;</code>; every container that can implement a sequence of object with
front and rear insertion and extraction operations can become a concrete
implementation of <code>&lt;ideque&gt;</code>; at present the following libraries deal with
the common deque <acronym>API</acronym>:

<pre class="example">     (vicare containers ideques)
     (vicare containers ideques dynamic-arrays)
     (vicare containers ideques deques)
     (vicare containers ideques chains)
</pre>
   <p>Proper interface support with early and late binding is better, but these common
<acronym>API</acronym>s are ready today.

<!-- page -->
   </body></html>

