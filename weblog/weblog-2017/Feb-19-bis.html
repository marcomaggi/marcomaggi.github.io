<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Feb 19 bis (Marco&rsquo;s 2017 Weblog)</title>

<meta name="description" content="Feb 19 bis (Marco&rsquo;s 2017 Weblog)">
<meta name="keywords" content="Feb 19 bis (Marco&rsquo;s 2017 Weblog)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="index.html" rel="up" title="Top">
<link href="Feb-19.html" rel="next" title="Feb 19">
<link href="Feb-20.html" rel="prev" title="Feb 20">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>
<link rel="stylesheet" type="text/css" href="weblog.css">


</head>

<body lang="en">
<div class="unnumbered-level-extent" id="Feb-19-bis">
<div class="nav-panel">
<p>
Next: <a href="Feb-19.html" accesskey="n" rel="next">C language: cast functions</a>, Previous: <a href="Feb-20.html" accesskey="p" rel="prev">Mumblings on culture and marginally on programming</a>, Up: <a href="index.html" accesskey="u" rel="up">Marco&rsquo;s 2017 Weblog</a> &nbsp; </p>
</div>
<hr>
<h2 class="unnumbered" id="C-language_003a-cast-functions_002c-again">C language: cast functions, again</h2>


<p><em class="emph">Posted on Sun Feb 19, 2017</em>
</p>

<p>Almost 8PM, the right time for a followup to the post of this morning, <a class="ref" href="Feb-19.html">C language: cast functions</a>.
</p>
<p>Why am I using an inline function and not just defining a casting macro as follows?
</p>
<div class="example">
<pre class="example-preformatted">#define cast_to_beta(SRC)               \
  _Generic((SRC), alpha_t *: (beta_t *))(SRC)
</pre></div>

<p>It is not only early&ndash;morning thinking&hellip; Casting a pointer is a special case of
type conversion, it is possible to generalise pointer&ndash;casting to full
object&ndash;representation conversion; in this case the conversion may require a full
function not integrable at the call site.
</p>
<p>This obviously would introduce the problem of resources allocation management: what
happens to the old object?  Is it destroyed?  Is it still there?  Pointer casting and
representation conversion may have different semantics, which would be bad to use in
the same macro:
</p>
<div class="example">
<pre class="example-preformatted">#define cast_to_beta(SRC)                       \
  _Generic((SRC),                               \
           alpha_t *: (beta_t *),               \
           gamma_t *: gamma_to_beta)(SRC)
</pre></div>

<p>Will I actually define full&ndash;type conversion like this?  I do not know.  This is just
the beginning of an experiment&hellip;
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Feb-19.html">C language: cast functions</a>, Previous: <a href="Feb-20.html">Mumblings on culture and marginally on programming</a>, Up: <a href="index.html">Marco&rsquo;s 2017 Weblog</a> &nbsp; </p>
</div>



</body>
</html>
